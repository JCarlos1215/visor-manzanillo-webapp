"use strict";(self.webpackChunkvisor_manzanillo=self.webpackChunkvisor_manzanillo||[]).push([[306],{4306:(_,m,i)=>{i.r(m),i.d(m,{LoginModule:()=>O});var d=i(9808),u=i(1787),r=i(3075),t=i(5e3),p=i(9291),h=i(2058),c=i(9224),g=i(7322),f=i(3874),Z=i(7531),v=i(7423),x=i(2204);function P(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage("username"))}}function b(n,a){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage("password"))}}function C(n,a){if(1&n&&(t.TgZ(0,"div",20),t.TgZ(1,"mat-icon",21),t._uU(2,"warning"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.loginError)}}const A=[{path:"",component:(()=>{class n{constructor(e,o,s,l){this.formBuild=e,this.authService=o,this.router=s,this.userService=l,this.hidePassword=!0,this.loginError="",this.hasError=!1,this.isDefaultUser=!1,this.backdropMessage="Iniciando sesi\xf3n...",this.showLoading=!1,this.loginForm=this.formBuild.group({username:["",r.kI.required],password:["",r.kI.required]})}ngOnInit(){this.authService.getUser()&&this.router.navigate(["/map"])}getErrorMessage(e){var o;return(null===(o=this.loginForm.get(e))||void 0===o?void 0:o.hasError("required"))?"Este campo no puede estar vac\xedo.":""}onSubmit(){this.isDefaultUser&&this.loginForm.setValue({username:" ",password:" "}),this.loginForm.valid&&(this.showLoading=!0,this.authService.login(this.loginForm.value).subscribe(e=>{this.userService.getUserPermissions().subscribe(o=>{this.authService.savePermissions(o),this.showLoading=!1,this.router.navigate(["/map"])},o=>{this.hasError=!0,this.loginError=o.message,this.showLoading=!1})},e=>{this.hasError=!0,this.loginError=e.message,this.showLoading=!1}))}reset(){this.loginError="",this.hidePassword=!0,this.hasError=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(p.e),t.Y36(u.F0),t.Y36(h.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["sic-login-page"]],decls:42,vars:11,consts:[["role","main",1,"login-content"],[1,"login-card"],[1,"login-title"],["src","./assets/logo_mzo.png","alt","logo-visor","height","198","width","198"],[3,"formGroup","ngSubmit"],[1,"form-title"],["appearance","fill"],["matPrefix",""],["matInput","","formControlName","username","required",""],[4,"ngIf"],["matInput","","formControlName","password","required","",3,"type","keyup.enter"],["class","login-error",4,"ngIf"],["mat-stroked-button","","color","warn","type","reset",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","color","primary","type","submit",1,"autologin",3,"click"],[1,"hidden-button"],["mat-icon-button","",3,"click"],["id","clouds","alt","Gray Clouds Background","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"],[3,"backdropMessage","showingLoading"],[1,"login-error"],["color","warn"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card",1),t.TgZ(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h1"),t._uU(5,"SIMAN"),t.qZA(),t.TgZ(6,"h5"),t._uU(7,"Sistema de Informaci\xf3n de Manzanillo"),t.qZA(),t.qZA(),t.TgZ(8,"form",4),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(9,"h2",5),t._uU(10,"Iniciar sesi\xf3n"),t.qZA(),t.TgZ(11,"mat-card-content"),t.TgZ(12,"mat-form-field",6),t.TgZ(13,"mat-label"),t._uU(14,"Usuario"),t.qZA(),t.TgZ(15,"mat-icon",7),t._uU(16,"person"),t.qZA(),t._UZ(17,"input",8),t.YNc(18,P,2,1,"mat-error",9),t.qZA(),t.TgZ(19,"mat-form-field",6),t.TgZ(20,"mat-label"),t._uU(21,"Contrase\xf1a"),t.qZA(),t.TgZ(22,"mat-icon",7),t._uU(23,"lock"),t.qZA(),t.TgZ(24,"input",10),t.NdJ("keyup.enter",function(){return o.onSubmit()}),t.qZA(),t.YNc(25,b,2,1,"mat-error",9),t.qZA(),t.YNc(26,C,5,1,"div",11),t.qZA(),t.TgZ(27,"mat-card-actions"),t.TgZ(28,"button",12),t.NdJ("click",function(){return o.reset()}),t._uU(29,"Limpiar"),t.qZA(),t.TgZ(30,"button",13),t._uU(31,"Entrar"),t.qZA(),t._uU(32," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),t.TgZ(33,"button",14),t.NdJ("click",function(){return o.isDefaultUser=!0}),t._uU(34,"Usuario Invitado"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",15),t.TgZ(36,"button",16),t.NdJ("click",function(){return o.hidePassword=!o.hidePassword}),t.TgZ(37,"mat-icon"),t._uU(38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.O4$(),t.TgZ(39,"svg",17),t._UZ(40,"path",18),t.qZA(),t.qZA(),t.kcU(),t._UZ(41,"sic-backdrop",19)),2&e){let s,l;t.xp6(8),t.Q6J("formGroup",o.loginForm),t.xp6(10),t.Q6J("ngIf",null==(s=o.loginForm.get("username"))?null:s.invalid),t.xp6(6),t.Q6J("type",o.hidePassword?"password":"text"),t.xp6(1),t.Q6J("ngIf",null==(l=o.loginForm.get("password"))?null:l.invalid),t.xp6(1),t.Q6J("ngIf",o.hasError),t.xp6(4),t.Q6J("disabled",!o.loginForm.valid),t.xp6(6),t.uIk("aria-label","Hide password")("aria-pressed",o.hidePassword),t.xp6(2),t.Oqu(o.hidePassword?"visibility_off":"visibility"),t.xp6(3),t.Q6J("backdropMessage",o.backdropMessage)("showingLoading",o.showLoading)}},directives:[c.a8,r._Y,r.JL,r.sg,c.dn,g.KE,g.hX,f.Hw,g.qo,Z.Nt,r.Fj,r.JJ,r.u,r.Q7,d.O5,c.hq,v.lW,x.q,g.TO],styles:["[_nghost-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.login-card[_ngcontent-%COMP%]{width:80vw;max-width:400px;padding-top:0!important}.login-title[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex;place-content:center;align-items:center}.login-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .login-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:8px;color:#ac3d3d}.login-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 12px}.login-content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}mat-card-content[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex}mat-card-content[_ngcontent-%COMP%]   .login-error[_ngcontent-%COMP%]{flex-direction:row;box-sizing:border-box;display:flex;place-content:center flex-start;align-items:center}mat-card-content[_ngcontent-%COMP%]   .login-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:16px}mat-card-actions[_ngcontent-%COMP%]{flex-direction:row;box-sizing:border-box;display:flex;place-content:center flex-end;align-items:center}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:12px!important;position:relative;align-content:center;left:0%}mat-card-actions[_ngcontent-%COMP%]   .autologin[_ngcontent-%COMP%]{margin-right:auto!important;margin-left:.75em!important}.hidden-button[_ngcontent-%COMP%]{position:absolute;right:24px;top:462px}.hidden-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(A)],u.Bz]}),n})();var T=i(8512),w=i(7194);let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,M,T.m,r.UX,w.I]]}),n})()}}]);