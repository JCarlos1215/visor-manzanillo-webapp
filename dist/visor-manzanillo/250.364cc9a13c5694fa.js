var cj=Object.defineProperty,hj=Object.defineProperties,uj=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,dj=Object.prototype.hasOwnProperty,fj=Object.prototype.propertyIsEnumerable,H0=(an,fe,Y)=>fe in an?cj(an,fe,{enumerable:!0,configurable:!0,writable:!0,value:Y}):an[fe]=Y,Ud=(an,fe)=>{for(var Y in fe||(fe={}))dj.call(fe,Y)&&H0(an,Y,fe[Y]);if(Y0)for(var Y of Y0(fe))fj.call(fe,Y)&&H0(an,Y,fe[Y]);return an},qd=(an,fe)=>hj(an,uj(fe));(self.webpackChunkvisor_manzanillo=self.webpackChunkvisor_manzanillo||[]).push([[250],{5250:(an,fe,Y)=>{"use strict";Y.r(fe),Y.d(fe,{MapModule:()=>ij});var B=Y(9808),Mt=Y(1787);function ls(e,i,t,n,r,a,s){try{var l=e[a](s),c=l.value}catch(h){return void t(h)}l.done?i(c):Promise.resolve(c).then(n,r)}function se(e){return function(){var i=this,t=arguments;return new Promise(function(n,r){var a=e.apply(i,t);function s(c){ls(a,n,r,s,l,"next",c)}function l(c){ls(a,n,r,s,l,"throw",c)}s(void 0)})}}var Bi=Y(8653),ue=Y.n(Bi),Sc=function(){function e(i){this.type=i,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();const ye=Sc;var Dr=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}();const Zn=Dr;function O(e,i){return e>i?1:e<i?-1:0}function S(e,i){return e.indexOf(i)>=0}function N(e,i,t){var n=e.length;if(e[0]<=i)return 0;if(i<=e[n-1])return n-1;var r=void 0;if(t>0){for(r=1;r<n;++r)if(e[r]<i)return r-1}else if(t<0){for(r=1;r<n;++r)if(e[r]<=i)return r}else for(r=1;r<n;++r){if(e[r]==i)return r;if(e[r]<i)return"function"==typeof t?t(i,e[r-1],e[r])>0?r-1:r:e[r-1]-i<i-e[r]?r-1:r}return n-1}function $(e,i,t){for(;i<t;){var n=e[i];e[i]=e[t],e[t]=n,++i,--t}}function H(e,i){for(var t=Array.isArray(i)?i:[i],n=t.length,r=0;r<n;r++)e[e.length]=t[r]}function st(e,i){var t=e.length;if(t!==i.length)return!1;for(var n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}function _t(){return!0}function Gt(){return!1}function Xe(){}var dt="function"==typeof Object.assign?Object.assign:function(e,i){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,r=arguments.length;n<r;++n){var a=arguments[n];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(t[s]=a[s])}return t};function $e(e){for(var i in e)delete e[i]}var Io="function"==typeof Object.values?Object.values:function(e){var i=[];for(var t in e)i.push(e[t]);return i};function yn(e){var i;for(i in e)return!1;return!i}var e,Vi=(e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)},function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Qe=function(e){function i(t){var n=e.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return Vi(i,e),i.prototype.addEventListener=function(t,n){if(t&&n){var r=this.listeners_||(this.listeners_={}),a=r[t]||(r[t]=[]);-1===a.indexOf(n)&&a.push(n)}},i.prototype.dispatchEvent=function(t){var n="string"==typeof t?new ye(t):t,r=n.type;n.target||(n.target=this.eventTarget_||this);var s,a=this.listeners_&&this.listeners_[r];if(a){var l=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,c[r]=0),++l[r];for(var h=0,u=a.length;h<u;++h)if(!1===(s="handleEvent"in a[h]?a[h].handleEvent(n):a[h].call(this,n))||n.propagationStopped){s=!1;break}if(--l[r],0===l[r]){var d=c[r];for(delete c[r];d--;)this.removeEventListener(r,Xe);delete l[r]}return s}},i.prototype.disposeInternal=function(){this.listeners_&&$e(this.listeners_)},i.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},i.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},i.prototype.removeEventListener=function(t,n){var r=this.listeners_&&this.listeners_[t];if(r){var a=r.indexOf(n);-1!==a&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[a]=Xe,++this.pendingRemovals_[t]):(r.splice(a,1),0===r.length&&delete this.listeners_[t]))}},i}(Zn);const Rr=Qe;function ft(e,i,t,n,r){if(n&&n!==e&&(t=t.bind(n)),r){var a=t;t=function(){e.removeEventListener(i,t),a.apply(this,arguments)}}var s={target:e,type:i,listener:t};return e.addEventListener(i,t),s}function us(e,i,t,n){return ft(e,i,t,n,!0)}function Lt(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),$e(e))}var B0=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ds=function(e){function i(){var t=e.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return B0(i,e),i.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},i.prototype.getRevision=function(){return this.revision_},i.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var r=t.length,a=new Array(r),s=0;s<r;++s)a[s]=ft(this,t[s],n);return a}return ft(this,t,n)},i.prototype.onceInternal=function(t,n){var r;if(Array.isArray(t)){var a=t.length;r=new Array(a);for(var s=0;s<a;++s)r[s]=us(this,t[s],n)}else r=us(this,t,n);return n.ol_key=r,r},i.prototype.unInternal=function(t,n){var r=n.ol_key;if(r)!function V0(e){if(Array.isArray(e))for(var i=0,t=e.length;i<t;++i)Lt(e[i]);else Lt(e)}(r);else if(Array.isArray(t))for(var a=0,s=t.length;a<s;++a)this.removeEventListener(t[a],n);else this.removeEventListener(t,n)},i}(Rr);const jd=ds;function tt(){return function(){throw new Error("Unimplemented abstract method.")}()}var W0=0;function at(e){return e.ol_uid||(e.ol_uid=String(++W0))}var zd=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yd=function(e){function i(t,n,r){var a=e.call(this,t)||this;return a.key=n,a.oldValue=r,a}return zd(i,e),i}(ye),J0=function(e){function i(t){var n=e.call(this)||this;return at(n),n.values_=null,void 0!==t&&n.setProperties(t),n}return zd(i,e),i.prototype.get=function(t){var n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n},i.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},i.prototype.getProperties=function(){return this.values_&&dt({},this.values_)||{}},i.prototype.hasProperties=function(){return!!this.values_},i.prototype.notify=function(t,n){this.dispatchEvent(new Yd("change:"+t,t,n)),this.dispatchEvent(new Yd("propertychange",t,n))},i.prototype.addChangeListener=function(t,n){this.addEventListener("change:"+t,n)},i.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:"+t,n)},i.prototype.set=function(t,n,r){var a=this.values_||(this.values_={});if(r)a[t]=n;else{var s=a[t];a[t]=n,s!==n&&this.notify(t,s)}},i.prototype.setProperties=function(t,n){for(var r in t)this.set(r,t[r],n)},i.prototype.applyProperties=function(t){!t.values_||dt(this.values_||(this.values_={}),t.values_)},i.prototype.unset=function(t,n){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],yn(this.values_)&&(this.values_=null),n||this.notify(t,r)}},i}(jd);const xn=J0;var Zr="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",X0=-1!==Zr.indexOf("firefox"),$0=(-1!==Zr.indexOf("safari")&&Zr.indexOf("chrom"),-1!==Zr.indexOf("webkit")&&-1==Zr.indexOf("edge")),Q0=-1!==Zr.indexOf("macintosh"),Hd="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,fs="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,K0="undefined"!=typeof Image&&Image.prototype.decode,Bd=function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,i),window.removeEventListener("_",null,i)}catch(t){}return e}();function sn(e,i,t,n){var r;return t&&t.length?r=t.shift():fs?r=new OffscreenCanvas(e||300,i||300):(r=document.createElement("canvas")).style.all="unset",e&&(r.width=e),i&&(r.height=i),r.getContext("2d",n)}function t1(e){var i=e.offsetWidth,t=getComputedStyle(e);return i+(parseInt(t.marginLeft,10)+parseInt(t.marginRight,10))}function e1(e){var i=e.offsetHeight,t=getComputedStyle(e);return i+(parseInt(t.marginTop,10)+parseInt(t.marginBottom,10))}function Vd(e,i){var t=i.parentNode;t&&t.replaceChild(e,i)}function ps(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Wd(e){for(;e.lastChild;)e.removeChild(e.lastChild)}var i1=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),r1=function(e){function i(t){var n=e.call(this)||this,r=t.element;return r&&!t.target&&!r.style.pointerEvents&&(r.style.pointerEvents="auto"),n.element=r||null,n.target_=null,n.map_=null,n.listenerKeys=[],t.render&&(n.render=t.render),t.target&&n.setTarget(t.target),n}return i1(i,e),i.prototype.disposeInternal=function(){ps(this.element),e.prototype.disposeInternal.call(this)},i.prototype.getMap=function(){return this.map_},i.prototype.setMap=function(t){this.map_&&ps(this.element);for(var n=0,r=this.listenerKeys.length;n<r;++n)Lt(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Xe&&this.listenerKeys.push(ft(t,"postrender",this.render,this)),t.render())},i.prototype.render=function(t){},i.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},i}(xn);const Ro=r1;var Cn={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ke={};Ke[Cn.RADIANS]=6370997/(2*Math.PI),Ke[Cn.DEGREES]=2*Math.PI*6370997/360,Ke[Cn.FEET]=.3048,Ke[Cn.METERS]=1,Ke[Cn.USFEET]=1200/3937;const tn=Cn;var gs="ol-hidden",Zo="ol-unselectable",Ec="ol-control",Jd="ol-collapsed",s1=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Xd=["style","variant","weight","size","lineHeight","family"],$d=function(e){var i=e.match(s1);if(!i)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,r=Xd.length;n<r;++n){var a=i[n+1];void 0!==a&&(t[Xd[n]]=a)}return t.families=t.family.split(/,\s?/),t};function Ic(e){return 1===e?"":String(Math.round(100*e)/100)}var l1=function(){function e(i){this.code_=i.code,this.units_=i.units,this.extent_=void 0!==i.extent?i.extent:null,this.worldExtent_=void 0!==i.worldExtent?i.worldExtent:null,this.axisOrientation_=void 0!==i.axisOrientation?i.axisOrientation:"enu",this.global_=void 0!==i.global&&i.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=i.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=i.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ke[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(i){this.global_=i,this.canWrapX_=!(!i||!this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(i){this.defaultTileGrid_=i},e.prototype.setExtent=function(i){this.extent_=i,this.canWrapX_=!(!this.global_||!i)},e.prototype.setWorldExtent=function(i){this.worldExtent_=i},e.prototype.setGetPointResolution=function(i){this.getPointResolutionFunc_=i},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}();const Dc=l1;function te(e,i,t){return Math.min(Math.max(e,i),t)}var c1="cosh"in Math?Math.cosh:function(i){var t=Math.exp(i);return(t+1/t)/2},h1="log2"in Math?Math.log2:function(i){return Math.log(i)*Math.LOG2E};function u1(e,i,t,n,r,a){var s=r-t,l=a-n;if(0!==s||0!==l){var c=((e-t)*s+(i-n)*l)/(s*s+l*l);c>1?(t=r,n=a):c>0&&(t+=s*c,n+=l*c)}return Wi(e,i,t,n)}function Wi(e,i,t,n){var r=t-e,a=n-i;return r*r+a*a}function _s(e){return e*Math.PI/180}function $n(e,i){var t=e%i;return t*i<0?t+i:t}function Qn(e,i,t){return e+t*(i-e)}var f1=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lo=6378137,Lr=Math.PI*Lo,p1=[-Lr,-Lr,Lr,Lr],g1=[-180,-85,180,85],ms=Lo*Math.log(Math.tan(Math.PI/2)),kr=function(e){function i(t){return e.call(this,{code:t,units:tn.METERS,extent:p1,global:!0,worldExtent:g1,getPointResolution:function(n,r){return n/c1(r[1]/Lo)}})||this}return f1(i,e),i}(Dc),Qd=[new kr("EPSG:3857"),new kr("EPSG:102100"),new kr("EPSG:102113"),new kr("EPSG:900913"),new kr("http://www.opengis.net/def/crs/EPSG/0/3857"),new kr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _1(e,i,t){var n=e.length,r=t>1?t:2,a=i;void 0===a&&(a=r>2?e.slice():new Array(n));for(var s=0;s<n;s+=r){a[s]=Lr*e[s]/180;var l=Lo*Math.log(Math.tan(Math.PI*(+e[s+1]+90)/360));l>ms?l=ms:l<-ms&&(l=-ms),a[s+1]=l}return a}function m1(e,i,t){var n=e.length,r=t>1?t:2,a=i;void 0===a&&(a=r>2?e.slice():new Array(n));for(var s=0;s<n;s+=r)a[s]=180*e[s]/Lr,a[s+1]=360*Math.atan(Math.exp(e[s+1]/Lo))/Math.PI-90;return a}var v1=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kd=[-180,-90,180,90],x1=6378137*Math.PI/180,Ji=function(e){function i(t,n){return e.call(this,{code:t,units:tn.DEGREES,extent:Kd,axisOrientation:n,global:!0,metersPerUnit:x1,worldExtent:Kd})||this}return v1(i,e),i}(Dc),tf=[new Ji("CRS:84"),new Ji("EPSG:4326","neu"),new Ji("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ji("urn:ogc:def:crs:OGC:2:84"),new Ji("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new Ji("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ji("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],vs={},bn={};function Nr(e,i,t){var n=e.getCode(),r=i.getCode();n in bn||(bn[n]={}),bn[n][r]=t}function ef(e,i){var t;return e in bn&&i in bn[e]&&(t=bn[e][i]),t}var T1=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),M1=function(e){function i(t){var n=this,a="Assertion failed. See https://openlayers.org/en/v"+"6.9.0".split("-")[0]+"/doc/errors/#"+t+" for details.";return(n=e.call(this,a)||this).code=t,n.name="AssertionError",n.message=a,n}return T1(i,e),i}(Error);const nf=M1;function ut(e,i){if(!e)throw new nf(i)}function xe(e){for(var i=[1/0,1/0,-1/0,-1/0],t=0,n=e.length;t<n;++t)qr(i,e[t]);return i}function Fr(e,i,t){return t?(t[0]=e[0]-i,t[1]=e[1]-i,t[2]=e[2]+i,t[3]=e[3]+i,t):[e[0]-i,e[1]-i,e[2]+i,e[3]+i]}function rf(e,i){return i?(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i):e.slice()}function Xi(e,i,t){var n,r;return(n=i<e[0]?e[0]-i:e[2]<i?i-e[2]:0)*n+(r=t<e[1]?e[1]-t:e[3]<t?t-e[3]:0)*r}function ys(e,i){return Rc(e,i[0],i[1])}function Kn(e,i){return e[0]<=i[0]&&i[2]<=e[2]&&e[1]<=i[1]&&i[3]<=e[3]}function Rc(e,i,t){return e[0]<=i&&i<=e[2]&&e[1]<=t&&t<=e[3]}function Zc(e,i){var s=i[0],l=i[1],c=0;return s<e[0]?c|=16:s>e[2]&&(c|=4),l<e[1]?c|=8:l>e[3]&&(c|=2),0===c&&(c=1),c}function Tn(e,i,t,n,r){return r?(r[0]=e,r[1]=i,r[2]=t,r[3]=n,r):[e,i,t,n]}function $i(e){return Tn(1/0,1/0,-1/0,-1/0,e)}function xs(e,i){var t=e[0],n=e[1];return Tn(t,n,t,n,i)}function of(e,i,t,n,r){return lf($i(r),e,i,t,n)}function Ur(e,i){return e[0]==i[0]&&e[2]==i[2]&&e[1]==i[1]&&e[3]==i[3]}function af(e,i){return i[0]<e[0]&&(e[0]=i[0]),i[2]>e[2]&&(e[2]=i[2]),i[1]<e[1]&&(e[1]=i[1]),i[3]>e[3]&&(e[3]=i[3]),e}function qr(e,i){i[0]<e[0]&&(e[0]=i[0]),i[0]>e[2]&&(e[2]=i[0]),i[1]<e[1]&&(e[1]=i[1]),i[1]>e[3]&&(e[3]=i[1])}function lf(e,i,t,n,r){for(;t<n;t+=r)O1(e,i[t],i[t+1]);return e}function O1(e,i,t){e[0]=Math.min(e[0],i),e[1]=Math.min(e[1],t),e[2]=Math.max(e[2],i),e[3]=Math.max(e[3],t)}function Lc(e,i){var t;return!!((t=i(bs(e)))||(t=i(Ts(e)),t)||(t=i(Ms(e)),t)||(t=i(Qi(e)),t))&&t}function Cs(e){var i=0;return ws(e)||(i=kt(e)*Oe(e)),i}function bs(e){return[e[0],e[1]]}function Ts(e){return[e[2],e[1]]}function je(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function S1(e,i){var t;return"bottom-left"===i?t=bs(e):"bottom-right"===i?t=Ts(e):"top-left"===i?t=Qi(e):"top-right"===i?t=Ms(e):ut(!1,13),t}function Gr(e,i,t,n,r){var a=i*n[0]/2,s=i*n[1]/2,l=Math.cos(t),c=Math.sin(t),h=a*l,u=a*c,d=s*l,f=s*c,p=e[0],g=e[1],_=p-h+f,m=p-h-f,v=p+h-f,y=p+h+f,C=g-u-d,x=g-u+d,b=g+u+d,T=g+u-d;return Tn(Math.min(_,m,v,y),Math.min(C,x,b,T),Math.max(_,m,v,y),Math.max(C,x,b,T),r)}function Oe(e){return e[3]-e[1]}function mi(e,i,t){var n=t||[1/0,1/0,-1/0,-1/0];return Le(e,i)?(n[0]=e[0]>i[0]?e[0]:i[0],n[1]=e[1]>i[1]?e[1]:i[1],n[2]=e[2]<i[2]?e[2]:i[2],n[3]=e[3]<i[3]?e[3]:i[3]):$i(n),n}function Qi(e){return[e[0],e[3]]}function Ms(e){return[e[2],e[3]]}function kt(e){return e[2]-e[0]}function Le(e,i){return e[0]<=i[2]&&e[2]>=i[0]&&e[1]<=i[3]&&e[3]>=i[1]}function ws(e){return e[2]<e[0]||e[3]<e[1]}function kc(e,i,t){var n=t||6371008.8,r=_s(e[1]),a=_s(i[1]),s=(a-r)/2,l=_s(i[0]-e[0])/2,c=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(r)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function Fc(e,i){var p,g,r=i[0],a=i[1],s=r[0],l=r[1],c=a[0],h=a[1],u=c-s,d=h-l,f=0===u&&0===d?0:(u*(e[0]-s)+d*(e[1]-l))/(u*u+d*d||0);return f<=0?(p=s,g=l):f>=1?(p=c,g=h):(p=s+f*u,g=l+f*d),[p,g]}function N1(e){return function(i){return function q1(e,i){return function F1(e,i,t){return e?i.replace("{x}",e[0].toFixed(t)).replace("{y}",e[1].toFixed(t)):""}(e,"{x}, {y}",i)}(i,e)}}function Ln(e,i){for(var t=!0,n=e.length-1;n>=0;--n)if(e[n]!=i[n]){t=!1;break}return t}function Uc(e,i){var t=Math.cos(i),n=Math.sin(i),a=e[1]*t+e[0]*n;return e[0]=e[0]*t-e[1]*n,e[1]=a,e}function kn(e,i){var t=e[0]-i[0],n=e[1]-i[1];return t*t+n*n}function qc(e,i){return Math.sqrt(kn(e,i))}function hf(e,i){return kn(e,Fc(e,i))}function uf(e,i){if(i.canWrapX()){var t=kt(i.getExtent()),n=df(e,i,t);n&&(e[0]-=n*t)}return e}function df(e,i,t){var n=i.getExtent(),r=0;if(i.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var a=t||kt(n);r=Math.floor((e[0]-n[0])/a)}return r}function Gc(e,i,t){var n;if(void 0!==i){for(var r=0,a=e.length;r<a;++r)i[r]=e[r];n=i}else n=e.slice();return n}function jc(e,i,t){if(void 0!==i&&e!==i){for(var n=0,r=e.length;n<r;++n)i[n]=e[n];e=i}return e}function ff(e){(function b1(e,i){vs[e]=i})(e.getCode(),e),Nr(e,e,Gc)}function St(e){return"string"==typeof e?function C1(e){return vs[e]||vs[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(e):e||null}function Ss(e,i,t,n){var r,a=(e=St(e)).getPointResolutionFunc();if(a)r=a(i,t),n&&n!==e.getUnits()&&(s=e.getMetersPerUnit())&&(r=r*s/Ke[n]);else{var l=e.getUnits();if(l==tn.DEGREES&&!n||n==tn.DEGREES)r=i;else{var s,c=Ki(e,St("EPSG:4326"));if(c===jc&&l!==tn.DEGREES)r=i*e.getMetersPerUnit();else{var h=[t[0]-i/2,t[1],t[0]+i/2,t[1],t[0],t[1]-i/2,t[0],t[1]+i/2];r=(kc((h=c(h,h,2)).slice(0,2),h.slice(2,4))+kc(h.slice(4,6),h.slice(6,8)))/2}void 0!==(s=n?Ke[n]:e.getMetersPerUnit())&&(r/=s)}}return r}function zc(e){(function G1(e){e.forEach(ff)})(e),e.forEach(function(i){e.forEach(function(t){i!==t&&Nr(i,t,Gc)})})}function Yc(e,i){return e?"string"==typeof e?St(e):e:St(i)}function pf(e){return function(i,t,n){for(var r=i.length,a=void 0!==n?n:2,s=void 0!==t?t:new Array(r),l=0;l<r;l+=a){var c=e([i[l],i[l+1]]);s[l]=c[0],s[l+1]=c[1];for(var h=a-1;h>=2;--h)s[l+h]=i[l+h]}return s}}function z1(e,i,t,n){var r=St(e),a=St(i);Nr(r,a,pf(t)),Nr(a,r,pf(n))}function ti(e,i){if(e===i)return!0;var t=e.getUnits()===i.getUnits();return(e.getCode()===i.getCode()||Ki(e,i)===Gc)&&t}function Ki(e,i){var r=ef(e.getCode(),i.getCode());return r||(r=jc),r}function No(e,i){return Ki(St(e),St(i))}function tr(e,i,t){return No(i,t)(e,void 0,e.length)}function Hc(e,i,t,n){return function I1(e,i,t,n){var r=[];if(n>1)for(var a=e[2]-e[0],s=e[3]-e[1],l=0;l<n;++l)r.push(e[0]+a*l/n,e[1],e[2],e[1]+s*l/n,e[2]-a*l/n,e[3],e[0],e[3]-s*l/n);else r=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];i(r,r,2);for(var c=[],h=[],u=(l=0,r.length);l<u;l+=2)c.push(r[l]),h.push(r[l+1]);return function w1(e,i,t){return Tn(Math.min.apply(null,e),Math.min.apply(null,i),Math.max.apply(null,e),Math.max.apply(null,i),t)}(c,h,t)}(e,No(i,t),void 0,n)}var ke=null;function Mn(){return ke}function er(e,i){return e}function jt(e,i){return e}function As(e,i){return e}function Nn(e,i){return e}function H1(e,i){return e}function gf(e,i,t){return function(n){var s,l,r=n[0],a=n[1];if(e.canWrapX()){var c=e.getExtent(),h=kt(c);(l=df(n,e,h))&&(r-=l*h),r=te(r,c[0],c[2]),a=te(a,c[1],c[3]),s=t([r,a])}else s=t(n);return l&&i.canWrapX()&&(s[0]+=l*kt(i.getExtent())),s}}!function B1(){zc(Qd),zc(tf),function j1(e,i,t,n){e.forEach(function(r){i.forEach(function(a){Nr(r,a,t),Nr(a,r,n)})})}(tf,Qd,_1,m1)}();var V1=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bc="units",W1=[1,2,5],Vc=25.4/.28,J1=function(e){function i(t){var n=this,r=t||{},a=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(n=e.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).innerElement_=document.createElement("div"),n.innerElement_.className=a+"-inner",n.element.className=a+" "+Zo,n.element.appendChild(n.innerElement_),n.viewState_=null,n.minWidth_=void 0!==r.minWidth?r.minWidth:64,n.renderedVisible_=!1,n.renderedWidth_=void 0,n.renderedHTML_="",n.addChangeListener(Bc,n.handleUnitsChanged_),n.setUnits(r.units||"metric"),n.scaleBar_=r.bar||!1,n.scaleBarSteps_=r.steps||4,n.scaleBarText_=r.text||!1,n.dpi_=r.dpi||void 0,n}return V1(i,e),i.prototype.getUnits=function(){return this.get(Bc)},i.prototype.handleUnitsChanged_=function(){this.updateElement_()},i.prototype.setUnits=function(t){this.set(Bc,t)},i.prototype.setDpi=function(t){this.dpi_=t},i.prototype.updateElement_=function(){var t=this.viewState_;if(t){var v,n=t.center,r=t.projection,a=this.getUnits(),l=Ss(r,t.resolution,n,"degrees"==a?tn.DEGREES:tn.METERS),c=this.minWidth_*(this.dpi_||Vc)/Vc,h=c*l,u="";if("degrees"==a){var d=Ke[tn.DEGREES];(h*=d)<d/60?(u="\u2033",l*=3600):h<d?(u="\u2032",l*=60):u="\xb0"}else"imperial"==a?h<.9144?(u="in",l/=.0254):h<1609.344?(u="ft",l/=.3048):(u="mi",l/=1609.344):"nautical"==a?(l/=1852,u="nm"):"metric"==a?h<.001?(u="\u03bcm",l*=1e6):h<1?(u="mm",l*=1e3):h<1e3?u="m":(u="km",l/=1e3):"us"==a?h<.9144?(u="in",l*=39.37):h<1609.344?(u="ft",l/=.30480061):(u="mi",l/=1609.3472):ut(!1,33);for(var p,g,_,f=3*Math.floor(Math.log(c*l)/Math.log(10));;){_=Math.floor(f/3);var m=Math.pow(10,_);if(p=W1[(f%3+3)%3]*m,g=Math.round(p/l),isNaN(g))return this.element.style.display="none",void(this.renderedVisible_=!1);if(g>=c)break;++f}v=this.scaleBar_?this.createScaleBar(g,p,u):p.toFixed(_<0?-_:0)+" "+u,this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},i.prototype.createScaleBar=function(t,n,r){for(var a="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),s=[],l=t/this.scaleBarSteps_,c="#ffffff",h=0;h<this.scaleBarSteps_;h++)0===h&&s.push(this.createMarker("absolute",h)),s.push('<div><div class="ol-scale-singlebar" style="width: '+l+"px;background-color: "+c+';"></div>'+this.createMarker("relative",h)+(h%2==0||2===this.scaleBarSteps_?this.createStepText(h,t,!1,n,r):"")+"</div>"),h===this.scaleBarSteps_-1&&s.push(this.createStepText(h+1,t,!0,n,r)),c="#ffffff"===c?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+a+"</div>":"")+s.join("")+"</div>"},i.prototype.createMarker=function(t,n){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},i.prototype.createStepText=function(t,n,r,a,s){var l=0===t?0:Math.round(a/this.scaleBarSteps_*t*100)/100;return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:n/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:n/this.scaleBarSteps_*2)+"px;left: "+(r?n+"px":"unset")+';">'+l+(0===t?"":" "+s)+"</div>"},i.prototype.getScaleForResolution=function(){var t=Ss(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),n=this.dpi_||Vc,r=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*r*(1e3/25.4)*n},i.prototype.render=function(t){var n=t.frameState;this.viewState_=n?n.viewState:null,this.updateElement_()},i}(Ro);const X1=J1;var $1=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wc="projection",_f="coordinateFormat",Q1=function(e){function i(t){var n=this,r=t||{},a=document.createElement("div");a.className=void 0!==r.className?r.className:"ol-mouse-position",(n=e.call(this,{element:a,render:r.render,target:r.target})||this).addChangeListener(Wc,n.handleProjectionChanged_),r.coordinateFormat&&n.setCoordinateFormat(r.coordinateFormat),r.projection&&n.setProjection(r.projection);var s=!0,l="&#160;";return"undefinedHTML"in r?(void 0!==r.undefinedHTML&&(l=r.undefinedHTML),s=!!l):"placeholder"in r&&(!1===r.placeholder?s=!1:l=String(r.placeholder)),n.placeholder_=l,n.renderOnMouseOut_=s,n.renderedHTML_=a.innerHTML,n.mapProjection_=null,n.transform_=null,n}return $1(i,e),i.prototype.handleProjectionChanged_=function(){this.transform_=null},i.prototype.getCoordinateFormat=function(){return this.get(_f)},i.prototype.getProjection=function(){return this.get(Wc)},i.prototype.handleMouseMove=function(t){var n=this.getMap();this.updateHTML_(n.getEventPixel(t))},i.prototype.handleMouseOut=function(t){this.updateHTML_(null)},i.prototype.setMap=function(t){if(e.prototype.setMap.call(this,t),t){var n=t.getViewport();this.listenerKeys.push(ft(n,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(ft(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},i.prototype.setCoordinateFormat=function(t){this.set(_f,t)},i.prototype.setProjection=function(t){this.set(Wc,St(t))},i.prototype.updateHTML_=function(t){var n=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Ki(this.mapProjection_,r):jc}var s=this.getMap().getCoordinateFromPixelInternal(t);if(s){var l=Mn();l&&(this.transform_=Ki(this.mapProjection_,l)),this.transform_(s,s);var c=this.getCoordinateFormat();n=c?c(s):s.toString()}}(!this.renderedHTML_||n!==this.renderedHTML_)&&(this.element.innerHTML=n,this.renderedHTML_=n)},i.prototype.render=function(t){var n=t.frameState;n?this.mapProjection_!=n.viewState.projection&&(this.mapProjection_=n.viewState.projection,this.transform_=null):this.mapProjection_=null},i}(Ro);const K1=Q1;function mf(e,i,t){return void 0===t&&(t=[0,0]),t[0]=e[0]+2*i,t[1]=e[1]+2*i,t}function vf(e){return e[0]>0&&e[1]>0}function Jc(e,i,t){return void 0===t&&(t=[0,0]),t[0]=e[0]*i+.5|0,t[1]=e[1]*i+.5|0,t}function en(e,i){return Array.isArray(e)?e:(void 0===i?i=[e,e]:(i[0]=e,i[1]=e),i)}var ty=function(){function e(i){this.opacity_=i.opacity,this.rotateWithView_=i.rotateWithView,this.rotation_=i.rotation,this.scale_=i.scale,this.scaleArray_=en(i.scale),this.displacement_=i.displacement}return e.prototype.clone=function(){var i=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},e.prototype.getOpacity=function(){return this.opacity_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getScaleArray=function(){return this.scaleArray_},e.prototype.getDisplacement=function(){return this.displacement_},e.prototype.getAnchor=function(){return tt()},e.prototype.getImage=function(i){return tt()},e.prototype.getHitDetectionImage=function(){return tt()},e.prototype.getPixelRatio=function(i){return 1},e.prototype.getImageState=function(){return tt()},e.prototype.getImageSize=function(){return tt()},e.prototype.getOrigin=function(){return tt()},e.prototype.getSize=function(){return tt()},e.prototype.setOpacity=function(i){this.opacity_=i},e.prototype.setRotateWithView=function(i){this.rotateWithView_=i},e.prototype.setRotation=function(i){this.rotation_=i},e.prototype.setScale=function(i){this.scale_=i,this.scaleArray_=en(i)},e.prototype.listenImageChange=function(i){tt()},e.prototype.load=function(){tt()},e.prototype.unlistenImageChange=function(i){tt()},e}();const yf=ty;var xf=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Cf=/^([a-z]*)$|^hsla?\(.*\)$/i;function bf(e){return"string"==typeof e?e:Pf(e)}var i,t,ey=(i={},t=0,function(n){var r;if(i.hasOwnProperty(n))r=i[n];else{if(t>=1024){var a=0;for(var s in i)0==(3&a++)&&(delete i[s],--t)}r=function ny(e){var i,t,n,r,a;if(Cf.exec(e)&&(e=function Tf(e){var i=document.createElement("div");if(i.style.color=e,""!==i.style.color){document.body.appendChild(i);var t=getComputedStyle(i).color;return document.body.removeChild(i),t}return""}(e)),xf.exec(e)){var l,s=e.length-1;l=s<=4?1:2;var c=4===s||8===s;i=parseInt(e.substr(1+0*l,l),16),t=parseInt(e.substr(1+1*l,l),16),n=parseInt(e.substr(1+2*l,l),16),r=c?parseInt(e.substr(1+3*l,l),16):255,1==l&&(i=(i<<4)+i,t=(t<<4)+t,n=(n<<4)+n,c&&(r=(r<<4)+r)),a=[i,t,n,r/255]}else 0==e.indexOf("rgba(")?wf(a=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((a=e.slice(4,-1).split(",").map(Number)).push(1),wf(a)):ut(!1,14);return a}(n),i[n]=r,++t}return r});function Mf(e){return Array.isArray(e)?e:ey(e)}function wf(e){return e[0]=te(e[0]+.5|0,0,255),e[1]=te(e[1]+.5|0,0,255),e[2]=te(e[2]+.5|0,0,255),e[3]=te(e[3],0,1),e}function Pf(e){var i=e[0];i!=(0|i)&&(i=i+.5|0);var t=e[1];t!=(0|t)&&(t=t+.5|0);var n=e[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+i+","+t+","+n+","+(void 0===e[3]?1:e[3])+")"}function Fn(e){return Array.isArray(e)?Pf(e):e}var Of="10px sans-serif",ei="#000",Es="round",Uo=[],jr="round",jo="#000",zo="center",Is="middle",ir=[0,0,0,0],ni=new xn;(new Rr).setSize=function(){console.warn("labelCache is deprecated.")};var Xc,zr=null,$c={},ry=function(){var a,s,i="32px ",t=["monospace","serif"],n=t.length,r="wmytzilWMYTZIL@#/&?$%10\uf013";function l(h,u,d){for(var f=!0,p=0;p<n;++p){var g=t[p];if(s=Ds(h+" "+u+" "+i+g,r),d!=g){var _=Ds(h+" "+u+" "+i+d+","+g,r);f=f&&_!=s}}return!!f}function c(){for(var h=!0,u=ni.getKeys(),d=0,f=u.length;d<f;++d){var p=u[d];ni.get(p)<100&&(l.apply(this,p.split("\n"))?($e($c),zr=null,Xc=void 0,ni.set(p,100)):(ni.set(p,ni.get(p)+1,!0),h=!1))}h&&(clearInterval(a),a=void 0)}return function(h){var u=$d(h);if(u)for(var d=u.families,f=0,p=d.length;f<p;++f){var g=d[f],_=u.style+"\n"+u.weight+"\n"+g;void 0===ni.get(_)&&(ni.set(_,100,!0),l(u.style,u.weight,g)||(ni.set(_,0,!0),void 0===a&&(a=setInterval(c,32))))}}}(),oy=function(){var e;return function(i){var t=$c[i];if(null==t){if(fs){var n=$d(i),r=Sf(i,"\u017dg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=i,document.body.appendChild(e),t=e.offsetHeight,document.body.removeChild(e);$c[i]=t}return t}}();function Sf(e,i){return zr||(zr=sn(1,1)),e!=Xc&&(zr.font=e,Xc=zr.font),zr.measureText(i)}function Ds(e,i){return Sf(e,i).width}function Af(e,i,t){if(i in t)return t[i];var n=Ds(e,i);return t[i]=n,n}var cy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),hy=function(e){function i(t){var n=this;return(n=e.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0]})||this).canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=void 0!==t.fill?t.fill:null,n.origin_=[0,0],n.points_=t.points,n.radius_=void 0!==t.radius?t.radius:t.radius1,n.radius2_=t.radius2,n.angle_=void 0!==t.angle?t.angle:0,n.stroke_=void 0!==t.stroke?t.stroke:null,n.anchor_=null,n.size_=null,n.renderOptions_=null,n.render(),n}return cy(i,e),i.prototype.clone=function(){var t=this.getScale(),n=new i({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},i.prototype.getAnchor=function(){return this.anchor_},i.prototype.getAngle=function(){return this.angle_},i.prototype.getFill=function(){return this.fill_},i.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},i.prototype.getImage=function(t){var n=this.canvas_[t];if(!n){var r=this.renderOptions_,a=sn(r.size*t,r.size*t);this.draw_(r,a,t),this.canvas_[t]=n=a.canvas}return n},i.prototype.getPixelRatio=function(t){return t},i.prototype.getImageSize=function(){return this.size_},i.prototype.getImageState=function(){return 2},i.prototype.getOrigin=function(){return this.origin_},i.prototype.getPoints=function(){return this.points_},i.prototype.getRadius=function(){return this.radius_},i.prototype.getRadius2=function(){return this.radius2_},i.prototype.getSize=function(){return this.size_},i.prototype.getStroke=function(){return this.stroke_},i.prototype.listenImageChange=function(t){},i.prototype.load=function(){},i.prototype.unlistenImageChange=function(t){},i.prototype.calculateLineJoinSize_=function(t,n,r){if(0===n||this.points_===1/0||"bevel"!==t&&"miter"!==t)return n;var a=this.radius_,s=void 0===this.radius2_?a:this.radius2_;if(a<s){var l=a;a=s,s=l}var h=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),u=s*Math.sin(h),f=a-Math.sqrt(s*s-u*u),p=Math.sqrt(u*u+f*f),g=p/u;if("miter"===t&&g<=r)return g*n;var _=n/2/g,m=n/2*(f/p),y=Math.sqrt((a+_)*(a+_)+m*m)-a;if(void 0===this.radius2_||"bevel"===t)return 2*y;var C=a*Math.sin(h),b=s-Math.sqrt(a*a-C*C),M=Math.sqrt(C*C+b*b)/C;return M<=r?2*Math.max(y,M*n/2-s-a):2*y},i.prototype.createRenderOptions=function(){var s,t=jr,n=0,r=null,a=0,l=0;this.stroke_&&(null===(s=this.stroke_.getColor())&&(s=jo),s=Fn(s),void 0===(l=this.stroke_.getWidth())&&(l=1),r=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),void 0===(t=this.stroke_.getLineJoin())&&(t=jr),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var c=this.calculateLineJoinSize_(t,l,n),h=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:l,size:Math.ceil(2*h+c),lineDash:r,lineDashOffset:a,lineJoin:t,miterLimit:n}},i.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size,n=this.getDisplacement();this.canvas_={},this.anchor_=[t/2-n[0],t/2+n[1]],this.size_=[t,t]},i.prototype.draw_=function(t,n,r){if(n.scale(r,r),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){var a=this.fill_.getColor();null===a&&(a=ei),n.fillStyle=Fn(a),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},i.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var n=this.fill_.getColor(),r=0;if("string"==typeof n&&(n=Mf(n)),null===n?r=1:Array.isArray(n)&&(r=4===n.length?n[3]:1),0===r){var a=sn(t.size,t.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(t,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},i.prototype.createPath_=function(t){var n=this.points_,r=this.radius_;if(n===1/0)t.arc(0,0,r,0,2*Math.PI);else{var a=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(n*=2);for(var s=this.angle_-Math.PI/2,l=2*Math.PI/n,c=0;c<n;c++){var h=s+c*l,u=c%2==0?r:a;t.lineTo(u*Math.cos(h),u*Math.sin(h))}t.closePath()}},i.prototype.drawHitDetectionCanvas_=function(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=ei,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},i}(yf);const uy=hy;var dy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fy=function(e){function i(t){var r=t||{};return e.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:void 0!==r.scale?r.scale:1,rotation:void 0!==r.rotation?r.rotation:0,rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return dy(i,e),i.prototype.clone=function(){var t=this.getScale(),n=new i({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},i.prototype.setRadius=function(t){this.radius_=t,this.render()},i}(uy);const At=fy;var py=function(){function e(i){var t=i||{};this.color_=void 0!==t.color?t.color:null}return e.prototype.clone=function(){var i=this.getColor();return new e({color:Array.isArray(i)?i.slice():i||void 0})},e.prototype.getColor=function(){return this.color_},e.prototype.setColor=function(i){this.color_=i},e}();const Q=py;var gy=function(){function e(i){var t=i||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return e.prototype.clone=function(){var i=this.getColor();return new e({color:Array.isArray(i)?i.slice():i||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},e.prototype.getColor=function(){return this.color_},e.prototype.getLineCap=function(){return this.lineCap_},e.prototype.getLineDash=function(){return this.lineDash_},e.prototype.getLineDashOffset=function(){return this.lineDashOffset_},e.prototype.getLineJoin=function(){return this.lineJoin_},e.prototype.getMiterLimit=function(){return this.miterLimit_},e.prototype.getWidth=function(){return this.width_},e.prototype.setColor=function(i){this.color_=i},e.prototype.setLineCap=function(i){this.lineCap_=i},e.prototype.setLineDash=function(i){this.lineDash_=i},e.prototype.setLineDashOffset=function(i){this.lineDashOffset_=i},e.prototype.setLineJoin=function(i){this.lineJoin_=i},e.prototype.setMiterLimit=function(i){this.miterLimit_=i},e.prototype.setWidth=function(i){this.width_=i},e}();const J=gy;var Yr=function(){function e(i){var t=i||{};this.geometry_=null,this.geometryFunction_=Ef,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return e.prototype.clone=function(){var i=this.getGeometry();return i&&"object"==typeof i&&(i=i.clone()),new e({geometry:i,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.setRenderer=function(i){this.renderer_=i},e.prototype.setHitDetectionRenderer=function(i){this.hitDetectionRenderer_=i},e.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},e.prototype.getGeometry=function(){return this.geometry_},e.prototype.getGeometryFunction=function(){return this.geometryFunction_},e.prototype.getFill=function(){return this.fill_},e.prototype.setFill=function(i){this.fill_=i},e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(i){this.image_=i},e.prototype.getStroke=function(){return this.stroke_},e.prototype.setStroke=function(i){this.stroke_=i},e.prototype.getText=function(){return this.text_},e.prototype.setText=function(i){this.text_=i},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.setGeometry=function(i){"function"==typeof i?this.geometryFunction_=i:"string"==typeof i?this.geometryFunction_=function(t){return t.get(i)}:i?void 0!==i&&(this.geometryFunction_=function(){return i}):this.geometryFunction_=Ef,this.geometry_=i},e.prototype.setZIndex=function(i){this.zIndex_=i},e}(),Qc=null;function my(e,i){if(!Qc){var t=new Q({color:"rgba(255,255,255,0.4)"}),n=new J({color:"#3399CC",width:1.25});Qc=[new Yr({image:new At({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Qc}function Kc(){var e={},i=[255,255,255,1],t=[0,153,255,1];return e.Polygon=[new Yr({fill:new Q({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new Yr({stroke:new J({color:i,width:5})}),new Yr({stroke:new J({color:t,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new Yr({image:new At({radius:6,fill:new Q({color:t}),stroke:new J({color:i,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}function Ef(e){return e.getGeometry()}const mt=Yr;var o=Y(5e3);var If=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rs=function(e){function i(t,n,r){var a=e.call(this,t)||this;return a.element=n,a.index=r,a}return If(i,e),i}(ye),vy=function(e){function i(t,n){var r=e.call(this)||this;if(r.unique_=!!(n||{}).unique,r.array_=t||[],r.unique_)for(var s=0,l=r.array_.length;s<l;++s)r.assertUnique_(r.array_[s],s);return r.updateLength_(),r}return If(i,e),i.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},i.prototype.extend=function(t){for(var n=0,r=t.length;n<r;++n)this.push(t[n]);return this},i.prototype.forEach=function(t){for(var n=this.array_,r=0,a=n.length;r<a;++r)t(n[r],r,n)},i.prototype.getArray=function(){return this.array_},i.prototype.item=function(t){return this.array_[t]},i.prototype.getLength=function(){return this.get("length")},i.prototype.insertAt=function(t,n){this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Rs("add",n,t))},i.prototype.pop=function(){return this.removeAt(this.getLength()-1)},i.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},i.prototype.remove=function(t){for(var n=this.array_,r=0,a=n.length;r<a;++r)if(n[r]===t)return this.removeAt(r)},i.prototype.removeAt=function(t){var n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Rs("remove",n,t)),n},i.prototype.setAt=function(t,n){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(n,t);var a=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Rs("remove",a,t)),this.dispatchEvent(new Rs("add",n,t))}else{for(var s=r;s<t;++s)this.insertAt(s,void 0);this.insertAt(t,n)}},i.prototype.updateLength_=function(){this.set("length",this.array_.length)},i.prototype.assertUnique_=function(t,n){for(var r=0,a=this.array_.length;r<a;++r)if(this.array_[r]===t&&r!==n)throw new nf(58)},i}(xn);const Ne=vy;var Rf=Y(2402),yy=function(){function e(i){this.rbush_=new Rf(i),this.items_={}}return e.prototype.insert=function(i,t){var n={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:t};this.rbush_.insert(n),this.items_[at(t)]=n},e.prototype.load=function(i,t){for(var n=new Array(t.length),r=0,a=t.length;r<a;r++){var s=i[r],l=t[r],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:l};n[r]=c,this.items_[at(l)]=c}this.rbush_.load(n)},e.prototype.remove=function(i){var t=at(i),n=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(n)},e.prototype.update=function(i,t){var n=this.items_[at(t)];Ur([n.minX,n.minY,n.maxX,n.maxY],i)||(this.remove(t),this.insert(i,t))},e.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},e.prototype.getInExtent=function(i){return this.rbush_.search({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}).map(function(r){return r.value})},e.prototype.forEach=function(i){return this.forEach_(this.getAll(),i)},e.prototype.forEachInExtent=function(i,t){return this.forEach_(this.getInExtent(i),t)},e.prototype.forEach_=function(i,t){for(var n,r=0,a=i.length;r<a;r++)if(n=t(i[r]))return n;return n},e.prototype.isEmpty=function(){return yn(this.items_)},e.prototype.clear=function(){this.rbush_.clear(),this.items_={}},e.prototype.getExtent=function(i){var t=this.rbush_.toJSON();return Tn(t.minX,t.minY,t.maxX,t.maxY,i)},e.prototype.concat=function(i){for(var t in this.rbush_.load(i.rbush_.all()),i.items_)this.items_[t]=i.items_[t]},e}();const Zs=yy;var xy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cy=function(e){function i(t){var n=e.call(this)||this;n.projection=St(t.projection),n.attributions_=Zf(t.attributions),n.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,n.loading=!1,n.state_=void 0!==t.state?t.state:"ready",n.wrapX_=void 0!==t.wrapX&&t.wrapX,n.viewResolver=null,n.viewRejector=null;var r=n;return n.viewPromise_=new Promise(function(a,s){r.viewResolver=a,r.viewRejector=s}),n}return xy(i,e),i.prototype.getAttributions=function(){return this.attributions_},i.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},i.prototype.getProjection=function(){return this.projection},i.prototype.getResolutions=function(){return tt()},i.prototype.getView=function(){return this.viewPromise_},i.prototype.getState=function(){return this.state_},i.prototype.getWrapX=function(){return this.wrapX_},i.prototype.getContextOptions=function(){},i.prototype.refresh=function(){this.changed()},i.prototype.setAttributions=function(t){this.attributions_=Zf(t),this.changed()},i.prototype.setState=function(t){this.state_=t,this.changed()},i}(xn);function Zf(e){return e?Array.isArray(e)?function(i){return e}:"function"==typeof e?e:function(i){return[e]}:null}const th=Cy;function by(e,i){return[[-1/0,-1/0,1/0,1/0]]}function kf(e,i){return function(t,n,r,a,s){var l=this;!function Ty(e,i,t,n,r,a,s){var l=new XMLHttpRequest;l.open("GET","function"==typeof e?e(t,n,r):e,!0),"arraybuffer"==i.getType()&&(l.responseType="arraybuffer"),l.withCredentials=false,l.onload=function(c){if(!l.status||l.status>=200&&l.status<300){var h=i.getType(),u=void 0;"json"==h||"text"==h?u=l.responseText:"xml"==h?(u=l.responseXML)||(u=(new DOMParser).parseFromString(l.responseText,"application/xml")):"arraybuffer"==h&&(u=l.response),u?a(i.readFeatures(u,{extent:t,featureProjection:r}),i.readProjection(u)):s()}else s()},l.onerror=s,l.send()}(e,i,t,n,r,function(c,h){l.addFeatures(c),void 0!==a&&a(c)},s||Xe)}}var Nf=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vi=function(e){function i(t,n,r){var a=e.call(this,t)||this;return a.feature=n,a.features=r,a}return Nf(i,e),i}(ye),My=function(e){function i(t){var n=this,r=t||{};(n=e.call(this,{attributions:r.attributions,projection:void 0,state:"ready",wrapX:void 0===r.wrapX||r.wrapX})||this).loader_=Xe,n.format_=r.format,n.overlaps_=void 0===r.overlaps||r.overlaps,n.url_=r.url,void 0!==r.loader?n.loader_=r.loader:void 0!==n.url_&&(ut(n.format_,7),n.loader_=kf(n.url_,n.format_)),n.strategy_=void 0!==r.strategy?r.strategy:by;var s,l,a=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.featuresRtree_=a?new Zs:null,n.loadedExtentsRtree_=new Zs,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(r.features)?l=r.features:r.features&&(l=(s=r.features).getArray()),!a&&void 0===s&&(s=new Ne(l)),void 0!==l&&n.addFeaturesInternal(l),void 0!==s&&n.bindFeaturesCollection_(s),n}return Nf(i,e),i.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},i.prototype.addFeatureInternal=function(t){var n=at(t);if(this.addToIndex_(n,t)){this.setupChangeEvents_(n,t);var r=t.getGeometry();if(r){var a=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(a,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new vi("addfeature",t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},i.prototype.setupChangeEvents_=function(t,n){this.featureChangeKeys_[t]=[ft(n,"change",this.handleFeatureChange_,this),ft(n,"propertychange",this.handleFeatureChange_,this)]},i.prototype.addToIndex_=function(t,n){var r=!0,a=n.getId();return void 0!==a&&(a.toString()in this.idIndex_?r=!1:this.idIndex_[a.toString()]=n),r&&(ut(!(t in this.uidIndex_),30),this.uidIndex_[t]=n),r},i.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},i.prototype.addFeaturesInternal=function(t){for(var n=[],r=[],a=[],s=0,l=t.length;s<l;s++){var h=at(c=t[s]);this.addToIndex_(h,c)&&r.push(c)}s=0;for(var u=r.length;s<u;s++){var c;h=at(c=r[s]),this.setupChangeEvents_(h,c);var d=c.getGeometry();if(d){var f=d.getExtent();n.push(f),a.push(c)}else this.nullGeometryFeatures_[h]=c}this.featuresRtree_&&this.featuresRtree_.load(n,a),s=0;for(var p=r.length;s<p;s++)this.dispatchEvent(new vi("addfeature",r[s]))},i.prototype.bindFeaturesCollection_=function(t){var n=!1;this.addEventListener("addfeature",function(r){n||(n=!0,t.push(r.feature),n=!1)}),this.addEventListener("removefeature",function(r){n||(n=!0,t.remove(r.feature),n=!1)}),t.addEventListener("add",function(r){n||(n=!0,this.addFeature(r.element),n=!1)}.bind(this)),t.addEventListener("remove",function(r){n||(n=!0,this.removeFeature(r.element),n=!1)}.bind(this)),this.featuresCollection_=t},i.prototype.clear=function(t){if(t){for(var n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Lt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var a in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new vi("clear");this.dispatchEvent(s),this.changed()},i.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},i.prototype.forEachFeatureAtCoordinateDirect=function(t,n){return this.forEachFeatureInExtent([t[0],t[1],t[0],t[1]],function(a){if(a.getGeometry().intersectsCoordinate(t))return n(a)})},i.prototype.forEachFeatureInExtent=function(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},i.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var s=n(r);if(s)return s}})},i.prototype.getFeaturesCollection=function(){return this.featuresCollection_},i.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),yn(this.nullGeometryFeatures_)||H(t,Io(this.nullGeometryFeatures_))),t},i.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,function(r){n.push(r)}),n},i.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},i.prototype.getClosestFeatureToCoordinate=function(t,n){var r=t[0],a=t[1],s=null,l=[NaN,NaN],c=1/0,h=[-1/0,-1/0,1/0,1/0],u=n||_t;return this.featuresRtree_.forEachInExtent(h,function(d){if(u(d)){var f=d.getGeometry(),p=c;if((c=f.closestPointXY(r,a,l,c))<p){s=d;var g=Math.sqrt(c);h[0]=r-g,h[1]=a-g,h[2]=r+g,h[3]=a+g}}}),s},i.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},i.prototype.getFeatureById=function(t){var n=this.idIndex_[t.toString()];return void 0!==n?n:null},i.prototype.getFeatureByUid=function(t){var n=this.uidIndex_[t];return void 0!==n?n:null},i.prototype.getFormat=function(){return this.format_},i.prototype.getOverlaps=function(){return this.overlaps_},i.prototype.getUrl=function(){return this.url_},i.prototype.handleFeatureChange_=function(t){var n=t.target,r=at(n),a=n.getGeometry();if(a){var s=a.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,n)):this.featuresRtree_&&this.featuresRtree_.update(s,n)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);var l=n.getId();if(void 0!==l){var c=l.toString();this.idIndex_[c]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[c]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new vi("changefeature",n))},i.prototype.hasFeature=function(t){var n=t.getId();return void 0!==n?n in this.idIndex_:at(t)in this.uidIndex_},i.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&yn(this.nullGeometryFeatures_)},i.prototype.loadFeatures=function(t,n,r){for(var a=this.loadedExtentsRtree_,s=this.strategy_(t,n,r),l=function(d,f){var p=s[d];a.forEachInExtent(p,function(_){return Kn(_.extent,p)})||(++c.loadingExtentsCount_,c.dispatchEvent(new vi("featuresloadstart")),c.loader_.call(c,p,n,r,function(_){--this.loadingExtentsCount_,this.dispatchEvent(new vi("featuresloadend",void 0,_))}.bind(c),function(){--this.loadingExtentsCount_,this.dispatchEvent(new vi("featuresloaderror"))}.bind(c)),a.insert(p,{extent:p.slice()}))},c=this,h=0,u=s.length;h<u;++h)l(h);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},i.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),e.prototype.refresh.call(this)},i.prototype.removeLoadedExtent=function(t){var r,n=this.loadedExtentsRtree_;n.forEachInExtent(t,function(a){if(Ur(a.extent,t))return r=a,!0}),r&&n.remove(r)},i.prototype.removeFeature=function(t){var n=at(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},i.prototype.removeFeatureInternal=function(t){var n=at(t);this.featureChangeKeys_[n].forEach(Lt),delete this.featureChangeKeys_[n];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[n],this.dispatchEvent(new vi("removefeature",t))},i.prototype.removeFromIdIndex_=function(t){var n=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],n=!0;break}return n},i.prototype.setLoader=function(t){this.loader_=t},i.prototype.setUrl=function(t){ut(this.format_,7),this.url_=t,this.setLoader(kf(t,this.format_))},i}(th);const yi=My;var wy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Py=function(e){function i(t){var n=e.call(this)||this,r=dt({},t);return"object"==typeof t.properties&&(delete r.properties,dt(r,t.properties)),r.opacity=void 0!==t.opacity?t.opacity:1,ut("number"==typeof r.opacity,64),r.visible=void 0===t.visible||t.visible,r.zIndex=t.zIndex,r.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,r.minResolution=void 0!==t.minResolution?t.minResolution:0,r.minZoom=void 0!==t.minZoom?t.minZoom:-1/0,r.maxZoom=void 0!==t.maxZoom?t.maxZoom:1/0,n.className_=void 0!==r.className?t.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return wy(i,e),i.prototype.getClassName=function(){return this.className_},i.prototype.getLayerState=function(t){var n=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return n.opacity=te(Math.round(100*this.getOpacity())/100,0,1),n.sourceState=this.getSourceState(),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=void 0!==r||n.managed?r:1/0,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},i.prototype.getLayersArray=function(t){return tt()},i.prototype.getLayerStatesArray=function(t){return tt()},i.prototype.getExtent=function(){return this.get("extent")},i.prototype.getMaxResolution=function(){return this.get("maxResolution")},i.prototype.getMinResolution=function(){return this.get("minResolution")},i.prototype.getMinZoom=function(){return this.get("minZoom")},i.prototype.getMaxZoom=function(){return this.get("maxZoom")},i.prototype.getOpacity=function(){return this.get("opacity")},i.prototype.getSourceState=function(){return tt()},i.prototype.getVisible=function(){return this.get("visible")},i.prototype.getZIndex=function(){return this.get("zIndex")},i.prototype.setExtent=function(t){this.set("extent",t)},i.prototype.setMaxResolution=function(t){this.set("maxResolution",t)},i.prototype.setMinResolution=function(t){this.set("minResolution",t)},i.prototype.setMaxZoom=function(t){this.set("maxZoom",t)},i.prototype.setMinZoom=function(t){this.set("minZoom",t)},i.prototype.setOpacity=function(t){ut("number"==typeof t,64),this.set("opacity",t)},i.prototype.setVisible=function(t){this.set("visible",t)},i.prototype.setZIndex=function(t){this.set("zIndex",t)},i.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},i}(xn);const Ff=Py;var Oy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sy=function(e){function i(t){var n=this,r=dt({},t);return delete r.source,(n=e.call(this,r)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addChangeListener("source",n.handleSourcePropertyChange_),n.setSource(t.source?t.source:null),n}return Oy(i,e),i.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},i.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},i.prototype.getSource=function(){return this.get("source")||null},i.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},i.prototype.handleSourceChange_=function(){this.changed()},i.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Lt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=ft(t,"change",this.handleSourceChange_,this)),this.changed()},i.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(n){return n([])})},i.prototype.render=function(t,n){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,n)},i.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Lt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ft(t,"precompose",function(n){var a=n.frameState.layerStatesArray,s=this.getLayerState(!1);ut(!a.some(function(l){return l.layer===s.layer}),67),a.push(s)},this),this.mapRenderKey_=ft(this,"change",t.render,t),this.changed())},i.prototype.setSource=function(t){this.set("source",t)},i.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},i.prototype.hasRenderer=function(){return!!this.renderer_},i.prototype.createRenderer=function(){return null},i.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},i}(Ff);function Ls(e,i){if(!e.visible)return!1;var t=i.resolution;if(t<e.minResolution||t>=e.maxResolution)return!1;var n=i.zoom;return n>e.minZoom&&n<=e.maxZoom}const eh=Sy;var Ay=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ey=function(e){function i(t){var n=this,r=t||{},a=dt({},r);return delete a.style,delete a.renderBuffer,delete a.updateWhileAnimating,delete a.updateWhileInteracting,(n=e.call(this,a)||this).declutter_=void 0!==r.declutter&&r.declutter,n.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return Ay(i,e),i.prototype.getDeclutter=function(){return this.declutter_},i.prototype.getFeatures=function(t){return e.prototype.getFeatures.call(this,t)},i.prototype.getRenderBuffer=function(){return this.renderBuffer_},i.prototype.getRenderOrder=function(){return this.get("renderOrder")},i.prototype.getStyle=function(){return this.style_},i.prototype.getStyleFunction=function(){return this.styleFunction_},i.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},i.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},i.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Rf(9)),this.getRenderer().renderDeclutter(t)},i.prototype.setRenderOrder=function(t){this.set("renderOrder",t)},i.prototype.setStyle=function(t){this.style_=void 0!==t?t:my,this.styleFunction_=null===t?void 0:function _y(e){var i,t;"function"==typeof e?i=e:(Array.isArray(e)?t=e:(ut("function"==typeof e.getZIndex,41),t=[e]),i=function(){return t});return i}(this.style_),this.changed()},i}(eh);const Iy=Ey;var Ho={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ks=[Ho.FILL],xi=[Ho.STROKE],ar=[Ho.BEGIN_PATH],qf=[Ho.CLOSE_PATH];const it=Ho;var Dy=function(){function e(){}return e.prototype.drawCustom=function(i,t,n,r){},e.prototype.drawGeometry=function(i){},e.prototype.setStyle=function(i){},e.prototype.drawCircle=function(i,t){},e.prototype.drawFeature=function(i,t){},e.prototype.drawGeometryCollection=function(i,t){},e.prototype.drawLineString=function(i,t){},e.prototype.drawMultiLineString=function(i,t){},e.prototype.drawMultiPoint=function(i,t){},e.prototype.drawMultiPolygon=function(i,t){},e.prototype.drawPoint=function(i,t){},e.prototype.drawPolygon=function(i,t){},e.prototype.drawText=function(i,t){},e.prototype.setFillStrokeStyle=function(i,t){},e.prototype.setImageStyle=function(i,t){},e.prototype.setTextStyle=function(i,t){},e}();const Gf=Dy;function Ci(e,i,t,n,r){for(var a=void 0!==r?r:[],s=0,l=i;l<t;l+=n)a[s++]=e.slice(l,l+n);return a.length=s,a}function Bo(e,i,t,n,r){for(var a=void 0!==r?r:[],s=0,l=0,c=t.length;l<c;++l){var h=t[l];a[s++]=Ci(e,i,h,n,a[s]),i=h}return a.length=s,a}function nh(e,i,t,n,r){for(var a=void 0!==r?r:[],s=0,l=0,c=t.length;l<c;++l){var h=t[l];a[s++]=Bo(e,i,h,n,a[s]),i=h[h.length-1]}return a.length=s,a}var Ry=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zy=function(e){function i(t,n,r,a){var s=e.call(this)||this;return s.tolerance=t,s.maxExtent=n,s.pixelRatio=a,s.maxLineWidth=0,s.resolution=r,s.beginGeometryInstruction1_=null,s.beginGeometryInstruction2_=null,s.bufferedMaxExtent_=null,s.instructions=[],s.coordinates=[],s.tmpCoordinate_=[],s.hitDetectionInstructions=[],s.state={},s}return Ry(i,e),i.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map(function(r){return r*n})},i.prototype.appendFlatPointCoordinates=function(t,n){for(var r=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,s=this.coordinates,l=s.length,c=0,h=t.length;c<h;c+=n)a[0]=t[c],a[1]=t[c+1],ys(r,a)&&(s[l++]=a[0],s[l++]=a[1]);return l},i.prototype.appendFlatLineCoordinates=function(t,n,r,a,s,l){var c=this.coordinates,h=c.length,u=this.getBufferedMaxExtent();l&&(n+=a);var _,m,v,d=t[n],f=t[n+1],p=this.tmpCoordinate_,g=!0;for(_=n+a;_<r;_+=a)p[0]=t[_],p[1]=t[_+1],(v=Zc(u,p))!==m?(g&&(c[h++]=d,c[h++]=f,g=!1),c[h++]=p[0],c[h++]=p[1]):1===v?(c[h++]=p[0],c[h++]=p[1],g=!1):g=!0,d=p[0],f=p[1],m=v;return(s&&g||_===n+a)&&(c[h++]=d,c[h++]=f),h},i.prototype.drawCustomCoordinates_=function(t,n,r,a,s){for(var l=0,c=r.length;l<c;++l){var h=r[l],u=this.appendFlatLineCoordinates(t,n,h,a,!1,!1);s.push(u),n=h}return n},i.prototype.drawCustom=function(t,n,r,a){this.beginGeometry(t,n);var h,u,d,f,p,s=t.getType(),l=t.getStride(),c=this.coordinates.length;switch(s){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),f=[];var g=t.getEndss();p=0;for(var _=0,m=g.length;_<m;++_){var v=[];p=this.drawCustomCoordinates_(h,p,g[_],l,v),f.push(v)}this.instructions.push([it.CUSTOM,c,f,t,r,nh]),this.hitDetectionInstructions.push([it.CUSTOM,c,f,t,a||r,nh]);break;case"Polygon":case"MultiLineString":d=[],h="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(h,0,t.getEnds(),l,d),this.instructions.push([it.CUSTOM,c,d,t,r,Bo]),this.hitDetectionInstructions.push([it.CUSTOM,c,d,t,a||r,Bo]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([it.CUSTOM,c,u,t,r,Ci]),this.hitDetectionInstructions.push([it.CUSTOM,c,u,t,a||r,Ci]);break;case"MultiPoint":h=t.getFlatCoordinates(),(u=this.appendFlatPointCoordinates(h,l))>c&&(this.instructions.push([it.CUSTOM,c,u,t,r,Ci]),this.hitDetectionInstructions.push([it.CUSTOM,c,u,t,a||r,Ci]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),this.instructions.push([it.CUSTOM,c,u=this.coordinates.length,t,r]),this.hitDetectionInstructions.push([it.CUSTOM,c,u,t,a||r])}this.endGeometry(n)},i.prototype.beginGeometry=function(t,n){this.beginGeometryInstruction1_=[it.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[it.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},i.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},i.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var n,a,s,r=t.length,l=-1;for(n=0;n<r;++n)(s=(a=t[n])[0])==it.END_GEOMETRY?l=n:s==it.BEGIN_GEOMETRY&&(a[2]=n,$(this.hitDetectionInstructions,l,n),l=-1)},i.prototype.setFillStrokeStyle=function(t,n){var r=this.state;if(t){var a=t.getColor();r.fillStyle=Fn(a||ei)}else r.fillStyle=void 0;if(n){var s=n.getColor();r.strokeStyle=Fn(s||jo);var l=n.getLineCap();r.lineCap=void 0!==l?l:Es;var c=n.getLineDash();r.lineDash=c?c.slice():Uo;var h=n.getLineDashOffset();r.lineDashOffset=h||0;var u=n.getLineJoin();r.lineJoin=void 0!==u?u:jr;var d=n.getWidth();r.lineWidth=void 0!==d?d:1;var f=n.getMiterLimit();r.miterLimit=void 0!==f?f:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},i.prototype.createFill=function(t){var n=t.fillStyle,r=[it.SET_FILL_STYLE,n];return"string"!=typeof n&&r.push(!0),r},i.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},i.prototype.createStroke=function(t){return[it.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},i.prototype.updateFillStyle=function(t,n){var r=t.fillStyle;("string"!=typeof r||t.currentFillStyle!=r)&&(void 0!==r&&this.instructions.push(n.call(this,t)),t.currentFillStyle=r)},i.prototype.updateStrokeStyle=function(t,n){var r=t.strokeStyle,a=t.lineCap,s=t.lineDash,l=t.lineDashOffset,c=t.lineJoin,h=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=a||s!=t.currentLineDash&&!st(t.currentLineDash,s)||t.currentLineDashOffset!=l||t.currentLineJoin!=c||t.currentLineWidth!=h||t.currentMiterLimit!=u)&&(void 0!==r&&n.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=a,t.currentLineDash=s,t.currentLineDashOffset=l,t.currentLineJoin=c,t.currentLineWidth=h,t.currentMiterLimit=u)},i.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[it.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},i.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=rf(this.maxExtent),this.maxLineWidth>0)&&Fr(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},i}(Gf);const Vo=Zy;var Ly=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ky=function(e){function i(t,n,r,a){var s=e.call(this,t,n,r,a)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterImageWithText_=void 0,s}return Ly(i,e),i.prototype.drawPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var r=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length,l=this.appendFlatPointCoordinates(r,a);this.instructions.push([it.DRAW_IMAGE,s,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([it.DRAW_IMAGE,s,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(n)}},i.prototype.drawMultiPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var r=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length,l=this.appendFlatPointCoordinates(r,a);this.instructions.push([it.DRAW_IMAGE,s,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([it.DRAW_IMAGE,s,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(n)}},i.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,e.prototype.finish.call(this)},i.prototype.setImageStyle=function(t,n){var r=t.getAnchor(),a=t.getSize(),s=t.getHitDetectionImage(),l=t.getImage(this.pixelRatio),c=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=s,this.image_=l,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=c[0]*this.imagePixelRatio_,this.originY_=c[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=n},i}(Vo);const Ny=ky;var Fy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uy=function(e){function i(t,n,r,a){return e.call(this,t,n,r,a)||this}return Fy(i,e),i.prototype.drawFlatCoordinates_=function(t,n,r,a){var s=this.coordinates.length,l=this.appendFlatLineCoordinates(t,n,r,a,!1,!1),c=[it.MOVE_TO_LINE_TO,s,l];return this.instructions.push(c),this.hitDetectionInstructions.push(c),r},i.prototype.drawLineString=function(t,n){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Uo,0],ar);var l=t.getFlatCoordinates(),c=t.getStride();this.drawFlatCoordinates_(l,0,l.length,c),this.hitDetectionInstructions.push(xi),this.endGeometry(n)}},i.prototype.drawMultiLineString=function(t,n){var r=this.state;if(void 0!==r.strokeStyle&&void 0!==r.lineWidth){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],ar);for(var l=t.getEnds(),c=t.getFlatCoordinates(),h=t.getStride(),u=0,d=0,f=l.length;d<f;++d)u=this.drawFlatCoordinates_(c,u,l[d],h);this.hitDetectionInstructions.push(xi),this.endGeometry(n)}},i.prototype.finish=function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(xi),this.reverseHitDetectionInstructions(),this.state=null,e.prototype.finish.call(this)},i.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(xi),t.lastStroke=this.coordinates.length),t.lastStroke=0,e.prototype.applyStroke.call(this,t),this.instructions.push(ar)},i}(Vo);const qy=Uy;function Ns(e,i,t,n,r,a,s){var l=(t-i)/n;if(l<3){for(;i<t;i+=n)a[s++]=e[i],a[s++]=e[i+1];return s}var c=new Array(l);c[0]=1,c[l-1]=1;for(var h=[i,t-n],u=0;h.length>0;){for(var d=h.pop(),f=h.pop(),p=0,g=e[f],_=e[f+1],m=e[d],v=e[d+1],y=f+n;y<d;y+=n){var b=u1(e[y],e[y+1],g,_,m,v);b>p&&(u=y,p=b)}p>r&&(c[(u-i)/n]=1,f+n<u&&h.push(f,u),u+n<d&&h.push(u,d))}for(y=0;y<l;++y)c[y]&&(a[s++]=e[i+y*n],a[s++]=e[i+y*n+1]);return s}function sr(e,i){return i*Math.round(e/i)}function jy(e,i,t,n,r,a,s){if(i==t)return s;var h,u,l=sr(e[i],r),c=sr(e[i+1],r);i+=n,a[s++]=l,a[s++]=c;do{if(h=sr(e[i],r),u=sr(e[i+1],r),(i+=n)==t)return a[s++]=h,a[s++]=u,s}while(h==l&&u==c);for(;i<t;){var d=sr(e[i],r),f=sr(e[i+1],r);if(i+=n,d!=h||f!=u){var p=h-l,g=u-c,_=d-l,m=f-c;if(p*m==g*_&&(p<0&&_<p||p==_||p>0&&_>p)&&(g<0&&m<g||g==m||g>0&&m>g)){h=d,u=f;continue}a[s++]=h,a[s++]=u,l=h,c=u,h=d,u=f}}return a[s++]=h,a[s++]=u,s}function zf(e,i,t,n,r,a,s,l){for(var c=0,h=t.length;c<h;++c){var u=t[c];s=jy(e,i,u,n,r,a,s),l.push(s),i=u}return s}var Yy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hy=function(e){function i(t,n,r,a){return e.call(this,t,n,r,a)||this}return Yy(i,e),i.prototype.drawFlatCoordinatess_=function(t,n,r,a){var s=this.state,l=void 0!==s.fillStyle,c=void 0!==s.strokeStyle,h=r.length;this.instructions.push(ar),this.hitDetectionInstructions.push(ar);for(var u=0;u<h;++u){var d=r[u],f=this.coordinates.length,p=this.appendFlatLineCoordinates(t,n,d,a,!0,!c),g=[it.MOVE_TO_LINE_TO,f,p];this.instructions.push(g),this.hitDetectionInstructions.push(g),c&&(this.instructions.push(qf),this.hitDetectionInstructions.push(qf)),n=d}return l&&(this.instructions.push(ks),this.hitDetectionInstructions.push(ks)),c&&(this.instructions.push(xi),this.hitDetectionInstructions.push(xi)),n},i.prototype.drawCircle=function(t,n){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([it.SET_FILL_STYLE,ei]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getFlatCoordinates(),c=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,c,!1,!1);var u=[it.CIRCLE,h];this.instructions.push(ar,u),this.hitDetectionInstructions.push(ar,u),void 0!==r.fillStyle&&(this.instructions.push(ks),this.hitDetectionInstructions.push(ks)),void 0!==r.strokeStyle&&(this.instructions.push(xi),this.hitDetectionInstructions.push(xi)),this.endGeometry(n)}},i.prototype.drawPolygon=function(t,n){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([it.SET_FILL_STYLE,ei]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getEnds(),c=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(c,0,l,h),this.endGeometry(n)}},i.prototype.drawMultiPolygon=function(t,n){var r=this.state;if(void 0!==r.fillStyle||void 0!==r.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([it.SET_FILL_STYLE,ei]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([it.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var l=t.getEndss(),c=t.getOrientedFlatCoordinates(),h=t.getStride(),u=0,d=0,f=l.length;d<f;++d)u=this.drawFlatCoordinatess_(c,u,l[d],h);this.endGeometry(n)}},i.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var n=this.coordinates,r=0,a=n.length;r<a;++r)n[r]=sr(n[r],t);return e.prototype.finish.call(this)},i.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},i}(Vo);const Yf=Hy;function Vy(e,i,t,n,r){var d,f,p,g,_,m,v,y,C,a=t,s=t,l=0,c=0,h=t;for(d=t;d<n;d+=r){var x=i[d],b=i[d+1];void 0!==g&&(y=x-g,C=b-_,p=Math.sqrt(y*y+C*C),void 0!==m&&(c+=f,Math.acos((m*y+v*C)/(f*p))>e&&(c>l&&(l=c,a=h,s=d),c=0,h=d-r)),f=p,m=y,v=C),g=x,_=b}return(c+=p)>l?[h,d]:[a,s]}var Wy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fs={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Jy=function(e){function i(t,n,r,a){var s=e.call(this,t,n,r,a)||this;return s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s.declutterImageWithText_=void 0,s}return Wy(i,e),i.prototype.finish=function(){var t=e.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},i.prototype.drawText=function(t,n){var s=this.textState_;if(""!==this.text_&&s&&(this.textFillState_||this.textStrokeState_)){var l=this.coordinates,c=l.length,h=t.getType(),u=null,d=t.getStride();if("line"!==s.placement||"LineString"!=h&&"MultiLineString"!=h&&"Polygon"!=h&&"MultiPolygon"!=h){var M=s.overflow?null:[];switch(h){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),d=2;break;case"Polygon":u=t.getFlatInteriorPoint(),s.overflow||M.push(u[2]/this.resolution),d=3;break;case"MultiPolygon":var w=t.getFlatInteriorPoints();for(u=[],g=0,_=w.length;g<_;g+=3)s.overflow||M.push(w[g+2]/this.resolution),u.push(w[g],w[g+1]);if(0===u.length)return;d=2}if((T=this.appendFlatPointCoordinates(u,d))===c)return;if(M&&(T-c)/2!=u.length/d){var P=c/2;M=M.filter(function(ot,pt){var xt=l[2*(P+pt)]===u[pt*d]&&l[2*(P+pt)+1]===u[pt*d+1];return xt||--P,xt})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var D=s.padding;if(D!=ir&&(s.scale[0]<0||s.scale[1]<0)){var R=s.padding[0],L=s.padding[1],G=s.padding[2],W=s.padding[3];s.scale[0]<0&&(L=-L,W=-W),s.scale[1]<0&&(R=-R,G=-G),D=[R,L,G,W]}var Z=this.pixelRatio;this.instructions.push([it.DRAW_IMAGE,c,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,D==ir?ir:D.map(function(ot){return ot*Z}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);var F=1/Z;this.hitDetectionInstructions.push([it.DRAW_IMAGE,c,T,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[F,F],NaN,this.declutterImageWithText_,D,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(n)}else{if(!Le(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(u=t.getFlatCoordinates(),"LineString"==h)f=[u.length];else if("MultiLineString"==h)f=t.getEnds();else if("Polygon"==h)f=t.getEnds().slice(0,1);else if("MultiPolygon"==h){var p=t.getEndss();f=[];for(var g=0,_=p.length;g<_;++g)f.push(p[g][0])}this.beginGeometry(t,n);for(var m=s.textAlign,v=0,y=void 0,C=0,x=f.length;C<x;++C){if(null==m){var b=Vy(s.maxAngle,u,v,f[C],d);v=b[0],y=b[1]}else y=f[C];for(g=v;g<y;g+=d)l.push(u[g],u[g+1]);var T;v=f[C],this.drawChars_(c,T=l.length),c=T}this.endGeometry(n)}}},i.prototype.saveTextStates_=function(){var t=this.textStrokeState_,n=this.textState_,r=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||zo,textBaseline:n.textBaseline||Is,scale:n.scale});var l=this.fillKey_;r&&(l in this.fillStates||(this.fillStates[l]={fillStyle:r.fillStyle}))},i.prototype.drawChars_=function(t,n){var r=this.textStrokeState_,a=this.textState_,s=this.strokeKey_,l=this.textKey_,c=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,u=Fs[a.textBaseline],d=this.textOffsetY_*h,f=this.text_,p=r?r.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([it.DRAW_CHARS,t,n,u,a.overflow,c,a.maxAngle,h,d,s,p*h,f,l,1]),this.hitDetectionInstructions.push([it.DRAW_CHARS,t,n,u,a.overflow,c,a.maxAngle,1,d,s,p,f,l,1/h])},i.prototype.setTextStyle=function(t,n){var r,a,s;if(t){var l=t.getFill();l?((a=this.textFillState_)||(this.textFillState_=a={}),a.fillStyle=Fn(l.getColor()||ei)):this.textFillState_=a=null;var c=t.getStroke();if(c){(s=this.textStrokeState_)||(this.textStrokeState_=s={});var h=c.getLineDash(),u=c.getLineDashOffset(),d=c.getWidth(),f=c.getMiterLimit();s.lineCap=c.getLineCap()||Es,s.lineDash=h?h.slice():Uo,s.lineDashOffset=void 0===u?0:u,s.lineJoin=c.getLineJoin()||jr,s.lineWidth=void 0===d?1:d,s.miterLimit=void 0===f?10:f,s.strokeStyle=Fn(c.getColor()||jo)}else this.textStrokeState_=s=null;r=this.textState_;var p=t.getFont()||Of;ry(p);var g=t.getScaleArray();r.overflow=t.getOverflow(),r.font=p,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||Is,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||ir,r.scale=void 0===g?[1,1]:g;var _=t.getOffsetX(),m=t.getOffsetY(),v=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===_?0:_,this.textOffsetY_=void 0===m?0:m,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===y?0:y,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:at(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=a?"string"==typeof a.fillStyle?a.fillStyle:"|"+at(a.fillStyle):""}else this.text_="";this.declutterImageWithText_=n},i}(Vo),Xy={Circle:Yf,Default:Vo,Image:Ny,LineString:qy,Polygon:Yf,Text:Jy},$y=function(){function e(i,t,n,r){this.tolerance_=i,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}return e.prototype.finish=function(){var i={};for(var t in this.buildersByZIndex_){i[t]=i[t]||{};var n=this.buildersByZIndex_[t];for(var r in n){var a=n[r].finish();i[t][r]=a}}return i},e.prototype.getBuilder=function(i,t){var n=void 0!==i?i.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(this.buildersByZIndex_[n]=r={});var a=r[t];return void 0===a&&(a=new(0,Xy[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=a),a},e}();const Hf=$y;var Qy=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ky=function(e){function i(t){var n=e.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=t,n.declutterExecutorGroup=null,n}return Qy(i,e),i.prototype.getFeatures=function(t){return tt()},i.prototype.prepareFrame=function(t){return tt()},i.prototype.renderFrame=function(t,n){return tt()},i.prototype.loadedTileCallback=function(t,n,r){t[n]||(t[n]={}),t[n][r.tileCoord.toString()]=r},i.prototype.createLoadedTileFinder=function(t,n,r){return function(a,s){var l=this.loadedTileCallback.bind(this,r,a);return t.forEachLoadedTile(n,a,s,l)}.bind(this)},i.prototype.forEachFeatureAtCoordinate=function(t,n,r,a,s){},i.prototype.getDataAtPixel=function(t,n,r){return null},i.prototype.getLayer=function(){return this.layer_},i.prototype.handleFontsChanged=function(){},i.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},i.prototype.loadImage=function(t){var n=t.getState();return 2!=n&&3!=n&&t.addEventListener("change",this.boundHandleImageChange_),0==n&&(t.load(),n=t.getState()),2==n},i.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&"ready"==t.getSourceState()&&t.changed()},i}(jd);const tx=Ky;var ex=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nx=function(e){function i(t,n,r,a){var s=e.call(this,t)||this;return s.inversePixelTransform=n,s.frameState=r,s.context=a,s}return ex(i,e),i}(ye);const Bf=nx;var Vf;function de(e,i){var t=i[0],n=i[1];return i[0]=e[0]*t+e[2]*n+e[4],i[1]=e[1]*t+e[3]*n+e[5],i}function ln(e,i,t,n,r,a,s,l){var c=Math.sin(a),h=Math.cos(a);return e[0]=n*h,e[1]=r*c,e[2]=-n*c,e[3]=r*h,e[4]=s*n*h-l*n*c+i,e[5]=s*r*c+l*r*h+t,e}function Jo(e,i){var t=function ox(e){return e[0]*e[3]-e[1]*e[2]}(i);ut(0!==t,32);var n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],c=i[5];return e[0]=s/t,e[1]=-r/t,e[2]=-a/t,e[3]=n/t,e[4]=(a*c-s*l)/t,e[5]=-(n*c-r*l)/t,e}function Us(e){var i="matrix("+e.join(", ")+")";if(fs)return i;var t=Vf||(Vf=document.createElement("div"));return t.style.transform=i,t.style.transform}new Array(6);var ax=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sx=function(e){function i(t){var n=e.call(this,t)||this;return n.container=null,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return ax(i,e),i.prototype.useContainer=function(t,n,r){var s,l,a=this.getLayer().getClassName();if(t&&t.style.opacity===Ic(r)&&t.className===a&&(c=t.firstElementChild)instanceof HTMLCanvasElement&&(l=c.getContext("2d")),l&&l.canvas.style.transform===n?(this.container=t,this.context=l,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(s=document.createElement("div")).className=a;var c,h=s.style;h.position="absolute",h.width="100%",h.height="100%",l=sn(),s.appendChild(c=l.canvas),(h=c.style).position="absolute",h.left="0",h.transformOrigin="top left",this.container=s,this.context=l}},i.prototype.clipUnrotated=function(t,n,r){var a=Qi(r),s=Ms(r),l=Ts(r),c=bs(r);de(n.coordinateToPixelTransform,a),de(n.coordinateToPixelTransform,s),de(n.coordinateToPixelTransform,l),de(n.coordinateToPixelTransform,c);var h=this.inversePixelTransform;de(h,a),de(h,s),de(h,l),de(h,c),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(c[0]),Math.round(c[1])),t.clip()},i.prototype.dispatchRenderEvent_=function(t,n,r){var a=this.getLayer();if(a.hasListener(t)){var s=new Bf(t,this.inversePixelTransform,r,n);a.dispatchEvent(s)}},i.prototype.preRender=function(t,n){this.dispatchRenderEvent_("prerender",t,n)},i.prototype.postRender=function(t,n){this.dispatchRenderEvent_("postrender",t,n)},i.prototype.getRenderTransform=function(t,n,r,a,s,l,c){var d=a/n;return ln(this.tempTransform,s/2,l/2,d,-d,-r,-t[0]+c,-t[1])},i.prototype.getDataAtPixel=function(t,n,r){var u,a=de(this.inversePixelTransform,t.slice()),s=this.context,c=this.getLayer().getExtent();if(c&&!ys(c,de(n.pixelToCoordinateTransform,t.slice())))return null;try{var d=Math.round(a[0]),f=Math.round(a[1]),p=document.createElement("canvas"),g=p.getContext("2d");p.width=1,p.height=1,g.clearRect(0,0,1,1),g.drawImage(s.canvas,d,f,1,1,0,0,1,1),u=g.getImageData(0,0,1,1).data}catch(_){return"SecurityError"===_.name?new Uint8Array:u}return 0===u[3]?null:u},i}(tx);const oh=sx;function lr(e,i,t,n,r,a){for(var s=a||[],l=0,c=i;c<t;c+=n){var h=e[c],u=e[c+1];s[l++]=r[0]*h+r[2]*u+r[4],s[l++]=r[1]*h+r[3]*u+r[5]}return a&&s.length!=l&&(s.length=l),s}function ah(e,i,t,n,r,a,s){for(var l=s||[],c=Math.cos(r),h=Math.sin(r),u=a[0],d=a[1],f=0,p=i;p<t;p+=n){var g=e[p]-u,_=e[p+1]-d;l[f++]=u+g*c-_*h,l[f++]=d+g*h+_*c;for(var m=p+2;m<p+n;++m)l[f++]=e[m]}return s&&l.length!=f&&(l.length=f),l}function Wf(e,i,t,n,r,a,s){for(var l=s||[],c=0,h=i;h<t;h+=n){l[c++]=e[h]+r,l[c++]=e[h+1]+a;for(var u=h+2;u<h+n;++u)l[c++]=e[u]}return s&&l.length!=c&&(l.length=c),l}function cx(e,i,t,n,r,a,s,l,c,h,u,d){var f=e[i],p=e[i+1],g=0,_=0,m=0,v=0;function y(){g=f,_=p,f=e[i+=n],p=e[i+1],v+=m,m=Math.sqrt((f-g)*(f-g)+(p-_)*(p-_))}do{y()}while(i<t-n&&v+m<a);for(var C=0===m?0:(a-v)/m,x=Qn(g,f,C),b=Qn(_,p,C),T=i-n,M=v,w=a+l*c(h,r,u);i<t-n&&v+m<w;)y();var R,P=Qn(g,f,C=0===m?0:(w-v)/m),D=Qn(_,p,C);if(d){var L=[x,b,P,D];ah(L,0,4,2,d,L,L),R=L[0]>L[2]}else R=x>P;var F,G=Math.PI,W=[],Z=T+n===i;if(m=0,v=M,f=e[i=T],p=e[i+1],Z)return y(),F=Math.atan2(p-_,f-g),R&&(F+=F>0?-G:G),W[0]=[j=(P+x)/2,ot=(D+b)/2,(w-a)/2,F,r],W;for(var pt=0,xt=r.length;pt<xt;){y();var Rt=Math.atan2(p-_,f-g);if(R&&(Rt+=Rt>0?-G:G),void 0!==F){var I=Rt-F;if(I+=I>G?-2*G:I<-G?2*G:0,Math.abs(I)>s)return null}F=Rt;for(var Nt=pt,nt=0;pt<xt;++pt){var Yt=l*c(h,r[R?xt-pt-1:pt],u);if(i+n<t&&v+m<a+nt+Yt/2)break;nt+=Yt}if(pt!==Nt){var Re=R?r.substring(xt-Nt,xt-pt):r.substring(Nt,pt),j=Qn(g,f,C=0===m?0:(a+nt/2-v)/m),ot=Qn(_,p,C);W.push([j,ot,nt/2,Rt,Re]),a+=nt}}return W}function sh(e,i,t,n){for(var r=e[i],a=e[i+1],s=0,l=i+n;l<t;l+=n){var c=e[l],h=e[l+1];s+=Math.sqrt((c-r)*(c-r)+(h-a)*(h-a)),r=c,a=h}return s}var Br=[1/0,1/0,-1/0,-1/0],bi=[],ii=[],ri=[],Ti=[];function Jf(e){return e[3].declutterBox}var hx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Xf(e,i){return("start"===i||"end"===i)&&!hx.test(e)&&(i="start"===i?"left":"right"),Fs[i]}var ux=function(){function e(i,t,n,r){this.overlaps=n,this.pixelRatio=t,this.resolution=i,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return e.prototype.createLabel=function(i,t,n,r){var a=i+t+n+r;if(this.labels_[a])return this.labels_[a];var s=r?this.strokeStates[r]:null,l=n?this.fillStates[n]:null,c=this.textStates[t],h=this.pixelRatio,u=[c.scale[0]*h,c.scale[1]*h],d=Xf(i,c.textAlign||zo),f=r&&s.lineWidth?s.lineWidth:0,p=i.split("\n"),g=p.length,_=[],m=function ay(e,i,t){for(var n=i.length,r=0,a=0;a<n;++a){var s=Ds(e,i[a]);r=Math.max(r,s),t.push(s)}return r}(c.font,p,_),v=oy(c.font),C=m+f,x=[],b=(C+2)*u[0],T=(v*g+f)*u[1],M={width:b<0?Math.floor(b):Math.ceil(b),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:x};(1!=u[0]||1!=u[1])&&x.push("scale",u),x.push("font",c.font),r&&(x.push("strokeStyle",s.strokeStyle),x.push("lineWidth",f),x.push("lineCap",s.lineCap),x.push("lineJoin",s.lineJoin),x.push("miterLimit",s.miterLimit),(fs?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(x.push("setLineDash",[s.lineDash]),x.push("lineDashOffset",s.lineDashOffset))),n&&x.push("fillStyle",l.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center");var R,P=.5-d,D=d*C+P*f;if(r)for(R=0;R<g;++R)x.push("strokeText",[p[R],D+P*_[R],.5*(f+v)+R*v]);if(n)for(R=0;R<g;++R)x.push("fillText",[p[R],D+P*_[R],.5*(f+v)+R*v]);return this.labels_[a]=M,M},e.prototype.replayTextBackground_=function(i,t,n,r,a,s,l){i.beginPath(),i.moveTo.apply(i,t),i.lineTo.apply(i,n),i.lineTo.apply(i,r),i.lineTo.apply(i,a),i.lineTo.apply(i,t),s&&(this.alignFill_=s[2],this.fill_(i)),l&&(this.setStrokeStyle_(i,l),i.stroke())},e.prototype.calculateImageOrLabelDimensions_=function(i,t,n,r,a,s,l,c,h,u,d,f,p,g,_,m){var P,v=n-(l*=f[0]),y=r-(c*=f[1]),C=a+h>i?i-h:a,x=s+u>t?t-u:s,b=g[3]+C*f[0]+g[1],T=g[0]+x*f[1]+g[2],M=v-g[3],w=y-g[0];return(_||0!==d)&&(bi[0]=M,Ti[0]=M,bi[1]=w,ii[1]=w,ii[0]=M+b,ri[0]=ii[0],ri[1]=w+T,Ti[1]=ri[1]),0!==d?(de(P=ln([1,0,0,1,0,0],n,r,1,1,d,-n,-r),bi),de(P,ii),de(P,ri),de(P,Ti),Tn(Math.min(bi[0],ii[0],ri[0],Ti[0]),Math.min(bi[1],ii[1],ri[1],Ti[1]),Math.max(bi[0],ii[0],ri[0],Ti[0]),Math.max(bi[1],ii[1],ri[1],Ti[1]),Br)):Tn(Math.min(M,M+b),Math.min(w,w+T),Math.max(M,M+b),Math.max(w,w+T),Br),p&&(v=Math.round(v),y=Math.round(y)),{drawImageX:v,drawImageY:y,drawImageW:C,drawImageH:x,originX:h,originY:u,declutterBox:{minX:Br[0],minY:Br[1],maxX:Br[2],maxY:Br[3],value:m},canvasTransform:P,scale:f}},e.prototype.replayImageOrLabel_=function(i,t,n,r,a,s,l){var h=r.declutterBox,u=i.canvas,d=l?l[2]*r.scale[0]/2:0;return h.minX-d<=u.width/t&&h.maxX+d>=0&&h.minY-d<=u.height/t&&h.maxY+d>=0&&(!(!s&&!l)&&this.replayTextBackground_(i,bi,ii,ri,Ti,s,l),function sy(e,i,t,n,r,a,s,l,c,h,u){e.save(),1!==t&&(e.globalAlpha*=t),i&&e.setTransform.apply(e,i),n.contextInstructions?(e.translate(c,h),e.scale(u[0],u[1]),function ly(e,i){for(var t=e.contextInstructions,n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?i[t[n]].apply(i,t[n+1]):i[t[n]]=t[n+1]}(n,e)):u[0]<0||u[1]<0?(e.translate(c,h),e.scale(u[0],u[1]),e.drawImage(n,r,a,s,l,0,0,s,l)):e.drawImage(n,r,a,s,l,c,h,s*u[0],l*u[1]),e.restore()}(i,r.canvasTransform,a,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},e.prototype.fill_=function(i){if(this.alignFill_){var t=de(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;i.save(),i.translate(t[0]%n,t[1]%n),i.rotate(this.viewRotation_)}i.fill(),this.alignFill_&&i.restore()},e.prototype.setStrokeStyle_=function(i,t){i.strokeStyle=t[1],i.lineWidth=t[2],i.lineCap=t[3],i.lineJoin=t[4],i.miterLimit=t[5],i.setLineDash&&(i.lineDashOffset=t[7],i.setLineDash(t[6]))},e.prototype.drawLabelWithPointPlacement_=function(i,t,n,r){var a=this.textStates[t],s=this.createLabel(i,t,r,n),l=this.strokeStates[n],c=this.pixelRatio,h=Xf(i,a.textAlign||zo),u=Fs[a.textBaseline||Is],d=l&&l.lineWidth?l.lineWidth:0;return{label:s,anchorX:h*(s.width/c-2*a.scale[0])+2*(.5-h)*d,anchorY:u*s.height/c+2*(.5-u)*d}},e.prototype.execute_=function(i,t,n,r,a,s,l,c){var h;this.pixelCoordinates_&&st(n,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=lr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),function ix(e,i){e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5]}(this.renderedTransform_,n));for(var p,g,_,m,v,y,C,x,b,T,M,w,ot,pt,xt,Rt,u=0,d=r.length,f=0,P=0,D=0,R=null,L=null,G=this.coordinateCache_,W=this.viewRotation_,Z=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,F={context:i,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:W},j=this.instructions!=r||this.overlaps?0:200;u<d;){var I=r[u];switch(I[0]){case it.BEGIN_GEOMETRY:Rt=I[3],(ot=I[1]).getGeometry()?void 0===l||Le(l,Rt.getExtent())?++u:u=I[2]+1:u=I[2];break;case it.BEGIN_PATH:P>j&&(this.fill_(i),P=0),D>j&&(i.stroke(),D=0),!P&&!D&&(i.beginPath(),m=NaN,v=NaN),++u;break;case it.CIRCLE:var nt=h[f=I[1]],Zt=h[f+1],Pe=h[f+2]-nt,Ge=h[f+3]-Zt,wo=Math.sqrt(Pe*Pe+Ge*Ge);i.moveTo(nt+wo,Zt),i.arc(nt,Zt,wo,0,2*Math.PI,!0),++u;break;case it.CLOSE_PATH:i.closePath(),++u;break;case it.CUSTOM:f=I[1],p=I[2];var yc=I[4],xc=6==I.length?I[5]:void 0;F.geometry=I[3],F.feature=ot,u in G||(G[u]=[]);var ji=G[u];xc?xc(h,f,p,2,ji):(ji[0]=h[f],ji[1]=h[f+1],ji.length=2),yc(ji,F),++u;break;case it.DRAW_IMAGE:f=I[1],p=I[2],g=I[4],_=I[5];var Po=I[6],Cc=I[7],ts=I[8],bc=I[9],Ar=I[10],es=I[11],Tc=I[12],Oo=I[13],zi=I[14];if(!(x=I[3])&&I.length>=19){var So=this.drawLabelWithPointPlacement_(b=I[18],T=I[19],M=I[20],w=I[21]);I[3]=x=So.label,I[4]=g=(So.anchorX-I[22])*this.pixelRatio,I[5]=_=(So.anchorY-I[23])*this.pixelRatio,I[6]=Po=x.height,I[13]=Oo=x.width}var ns=void 0;I.length>24&&(ns=I[24]);var Yi=void 0,_i=void 0,Er=void 0;I.length>16?(Yi=I[15],_i=I[16],Er=I[17]):(Yi=ir,_i=!1,Er=!1),Ar&&Z?es+=W:!Ar&&!Z&&(es-=W);for(var Ao=0;f<p;f+=2)if(!(ns&&ns[Ao++]<Oo/this.pixelRatio)){var Rn=[i,t,x,Dn=this.calculateImageOrLabelDimensions_(x.width,x.height,h[f],h[f+1],Oo,Po,g,_,ts,bc,es,Tc,a,Yi,_i||Er,ot),Cc,_i?R:null,Er?L:null],Ir=void 0,Eo=void 0;if(c&&zi){var wc=p-f;if(!zi[wc]){zi[wc]=Rn;continue}if(Ir=zi[wc],delete zi[wc],Eo=Jf(Ir),c.collides(Eo))continue}c&&c.collides(Dn.declutterBox)||(Ir&&(c&&c.insert(Eo),this.replayImageOrLabel_.apply(this,Ir)),c&&c.insert(Dn.declutterBox),this.replayImageOrLabel_.apply(this,Rn))}++u;break;case it.DRAW_CHARS:var k0=I[1],N0=I[2],Ld=I[3],rj=I[4];w=I[5];var oj=I[6],F0=I[7],U0=I[8];M=I[9];var kd=I[10];b=I[11];var q0=[I[13],I[13]],Nd=this.textStates[T=I[12]],is=Nd.font,rs=[Nd.scale[0]*F0,Nd.scale[1]*F0],os=void 0;is in this.widths_?os=this.widths_[is]:this.widths_[is]=os={};var G0=sh(h,k0,N0,2),j0=Math.abs(rs[0])*Af(is,b,os);if(rj||j0<=G0){var as=cx(h,k0,N0,2,b,(G0-j0)*Fs[this.textStates[T].textAlign],oj,Math.abs(rs[0]),Af,is,os,Z?0:this.viewRotation_);t:if(as){var ss=[],Hi=void 0,Pc=void 0,Je=void 0,mn=void 0;if(M)for(Hi=0,Pc=as.length;Hi<Pc;++Hi){Je=this.createLabel((mn=as[Hi])[4],T,"",M);var Dn=this.calculateImageOrLabelDimensions_(Je.width,Je.height,mn[0],mn[1],Je.width,Je.height,g=mn[2]+(rs[0]<0?-kd:kd),_=Ld*Je.height+2*(.5-Ld)*kd*rs[1]/rs[0]-U0,0,0,mn[3],q0,!1,ir,!1,ot);if(c&&c.collides(Dn.declutterBox))break t;ss.push([i,t,Je,Dn,1,null,null])}if(w)for(Hi=0,Pc=as.length;Hi<Pc;++Hi){if(Je=this.createLabel((mn=as[Hi])[4],T,w,""),Dn=this.calculateImageOrLabelDimensions_(Je.width,Je.height,mn[0],mn[1],Je.width,Je.height,g=mn[2],_=Ld*Je.height-U0,0,0,mn[3],q0,!1,ir,!1,ot),c&&c.collides(Dn.declutterBox))break t;ss.push([i,t,Je,Dn,1,null,null])}c&&c.load(ss.map(Jf));for(var Fd=0,lj=ss.length;Fd<lj;++Fd)this.replayImageOrLabel_.apply(this,ss[Fd])}}++u;break;case it.END_GEOMETRY:if(void 0!==s){var z0=s(ot=I[1],Rt);if(z0)return z0}++u;break;case it.FILL:j?P++:this.fill_(i),++u;break;case it.MOVE_TO_LINE_TO:for(p=I[2],C=(xt=h[(f=I[1])+1])+.5|0,((y=(pt=h[f])+.5|0)!==m||C!==v)&&(i.moveTo(pt,xt),m=y,v=C),f+=2;f<p;f+=2)y=(pt=h[f])+.5|0,C=(xt=h[f+1])+.5|0,(f==p-2||y!==m||C!==v)&&(i.lineTo(pt,xt),m=y,v=C);++u;break;case it.SET_FILL_STYLE:R=I,this.alignFill_=I[2],P&&(this.fill_(i),P=0,D&&(i.stroke(),D=0)),i.fillStyle=I[1],++u;break;case it.SET_STROKE_STYLE:L=I,D&&(i.stroke(),D=0),this.setStrokeStyle_(i,I),++u;break;case it.STROKE:j?D++:i.stroke(),++u;break;default:++u}}P&&this.fill_(i),D&&i.stroke()},e.prototype.execute=function(i,t,n,r,a,s){this.viewRotation_=r,this.execute_(i,t,n,this.instructions,a,void 0,void 0,s)},e.prototype.executeHitDetection=function(i,t,n,r,a){return this.viewRotation_=n,this.execute_(i,1,t,this.hitDetectionInstructions,!0,r,a)},e}();const dx=ux;var lh=["Polygon","Circle","LineString","Image","Text","Default"],fx=function(){function e(i,t,n,r,a,s){this.maxExtent_=i,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(a)}return e.prototype.clip=function(i,t){var n=this.getClipCoords(t);i.beginPath(),i.moveTo(n[0],n[1]),i.lineTo(n[2],n[3]),i.lineTo(n[4],n[5]),i.lineTo(n[6],n[7]),i.clip()},e.prototype.createExecutors_=function(i){for(var t in i){var n=this.executorsByZIndex_[t];void 0===n&&(this.executorsByZIndex_[t]=n={});var r=i[t];for(var a in r)n[a]=new dx(this.resolution_,this.pixelRatio_,this.overlaps_,r[a])}},e.prototype.hasExecutors=function(i){for(var t in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[t],r=0,a=i.length;r<a;++r)if(i[r]in n)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(i,t,n,r,a,s){var l=2*(r=Math.round(r))+1,c=ln(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-i[0],-i[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=sn(l,l));var d,u=this.hitDetectionContext_;u.canvas.width!==l||u.canvas.height!==l?(u.canvas.width=l,u.canvas.height=l):h||u.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(qr(d=[1/0,1/0,-1/0,-1/0],i),Fr(d,t*(this.renderBuffer_+r),d));var p,f=function px(e){if(void 0!==ch[e])return ch[e];for(var i=2*e+1,t=e*e,n=new Array(t+1),r=0;r<=e;++r)for(var a=0;a<=e;++a){var s=r*r+a*a;if(s>t)break;var l=n[s];l||(n[s]=l=[]),l.push(4*((e+r)*i+(e+a))+3),r>0&&l.push(4*((e-r)*i+(e+a))+3),a>0&&(l.push(4*((e+r)*i+(e-a))+3),r>0&&l.push(4*((e-r)*i+(e-a))+3))}for(var c=[],h=(r=0,n.length);r<h;++r)n[r]&&c.push.apply(c,n[r]);return ch[e]=c,c}(r);function g(T,M){for(var w=u.getImageData(0,0,l,l).data,P=0,D=f.length;P<D;P++)if(w[f[P]]>0){if(!s||"Image"!==p&&"Text"!==p||-1!==s.indexOf(T)){var R=(f[P]-3)/4,L=r-R%l,G=r-(R/l|0),W=a(T,M,L*L+G*G);if(W)return W}u.clearRect(0,0,l,l);break}}var m,v,y,C,x,_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(O),m=_.length-1;m>=0;--m){var b=_[m].toString();for(y=this.executorsByZIndex_[b],v=lh.length-1;v>=0;--v)if(void 0!==(C=y[p=lh[v]])&&(x=C.executeHitDetection(u,c,n,g,d)))return x}},e.prototype.getClipCoords=function(i){var t=this.maxExtent_;if(!t)return null;var n=t[0],r=t[1],a=t[2],s=t[3],l=[n,r,n,s,a,s,a,r];return lr(l,0,8,2,i,l),l},e.prototype.isEmpty=function(){return yn(this.executorsByZIndex_)},e.prototype.execute=function(i,t,n,r,a,s,l){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(O),this.maxExtent_&&(i.save(),this.clip(i,n));var u,d,f,p,g,_,h=s||lh;for(l&&c.reverse(),u=0,d=c.length;u<d;++u){var m=c[u].toString();for(g=this.executorsByZIndex_[m],f=0,p=h.length;f<p;++f)void 0!==(_=g[h[f]])&&_.execute(i,t,n,r,a,l)}this.maxExtent_&&i.restore()},e}(),ch={};const $f=fx;var gx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qf=[1,0,0,1,0,0],_x=function(e){function i(){var t=e.call(this)||this;return t.extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=function Xn(e){var t,n,r,i=!1;return function(){var a=Array.prototype.slice.call(arguments);return(!i||this!==r||!st(a,n))&&(i=!0,r=this,n=a,t=e.apply(this,arguments)),t}}(function(n,r,a){if(!a)return this.getSimplifiedGeometry(r);var s=this.clone();return s.applyTransform(a),s.getSimplifiedGeometry(r)}),t}return gx(i,e),i.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},i.prototype.clone=function(){return tt()},i.prototype.closestPointXY=function(t,n,r,a){return tt()},i.prototype.containsXY=function(t,n){var r=this.getClosestPoint([t,n]);return r[0]===t&&r[1]===n},i.prototype.getClosestPoint=function(t,n){var r=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},i.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},i.prototype.computeExtent=function(t){return tt()},i.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&$i(n),this.extentRevision_=this.getRevision()}return function A1(e,i){return i?(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i):e}(this.extent_,t)},i.prototype.rotate=function(t,n){tt()},i.prototype.scale=function(t,n,r){tt()},i.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},i.prototype.getSimplifiedGeometry=function(t){return tt()},i.prototype.getType=function(){return tt()},i.prototype.applyTransform=function(t){tt()},i.prototype.intersectsExtent=function(t){return tt()},i.prototype.translate=function(t,n){tt()},i.prototype.transform=function(t,n){var r=St(t),a=r.getUnits()==tn.TILE_PIXELS?function(s,l,c){var h=r.getExtent(),u=r.getWorldExtent(),d=Oe(u)/Oe(h);return ln(Qf,u[0],u[3],d,-d,0,0,0),lr(s,0,s.length,c,Qf,l),No(r,n)(s,l,c)}:No(r,n);return this.applyTransform(a),this},i}(xn);const Kf=_x;var mx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vx=function(e){function i(){var t=e.call(this)||this;return t.layout="XY",t.stride=2,t.flatCoordinates=null,t}return mx(i,e),i.prototype.computeExtent=function(t){return of(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.getCoordinates=function(){return tt()},i.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},i.prototype.getFlatCoordinates=function(){return this.flatCoordinates},i.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},i.prototype.getLayout=function(){return this.layout},i.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},i.prototype.getSimplifiedGeometryInternal=function(t){return this},i.prototype.getStride=function(){return this.stride},i.prototype.setFlatCoordinates=function(t,n){this.stride=tp(t),this.layout=t,this.flatCoordinates=n},i.prototype.setCoordinates=function(t,n){tt()},i.prototype.setLayout=function(t,n,r){var a;if(t)a=tp(t);else{for(var s=0;s<r;++s){if(0===n.length)return this.layout="XY",void(this.stride=2);n=n[0]}t=function yx(e){var i;return 2==e?i="XY":3==e?i="XYZ":4==e&&(i="XYZM"),i}(a=n.length)}this.layout=t,this.stride=a},i.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},i.prototype.rotate=function(t,n){var r=this.getFlatCoordinates();if(r){var a=this.getStride();ah(r,0,r.length,a,t,n,r),this.changed()}},i.prototype.scale=function(t,n,r){var a=n;void 0===a&&(a=t);var s=r;s||(s=je(this.getExtent()));var l=this.getFlatCoordinates();if(l){var c=this.getStride();(function lx(e,i,t,n,r,a,s,l){for(var c=l||[],h=s[0],u=s[1],d=0,f=i;f<t;f+=n){var g=e[f+1]-u;c[d++]=h+r*(e[f]-h),c[d++]=u+a*g;for(var _=f+2;_<f+n;++_)c[d++]=e[_]}l&&c.length!=d&&(c.length=d)})(l,0,l.length,c,t,a,s,l),this.changed()}},i.prototype.translate=function(t,n){var r=this.getFlatCoordinates();if(r){var a=this.getStride();Wf(r,0,r.length,a,t,n,r),this.changed()}},i}(Kf);function tp(e){var i;return"XY"==e?i=2:"XYZ"==e||"XYM"==e?i=3:"XYZM"==e&&(i=4),i}const Mi=vx;var Cx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),bx=function(e){function i(t,n,r,a,s,l,c){var h=e.call(this)||this;return h.context_=t,h.pixelRatio_=n,h.extent_=r,h.transform_=a,h.viewRotation_=s,h.squaredTolerance_=l,h.userTransform_=c,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=[1,0,0,1,0,0],h}return Cx(i,e),i.prototype.drawImages_=function(t,n,r,a){if(this.image_){var s=lr(t,n,r,a,this.transform_,this.pixelCoordinates_),l=this.context_,c=this.tmpLocalTransform_,h=l.globalAlpha;1!=this.imageOpacity_&&(l.globalAlpha=h*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var d=0,f=s.length;d<f;d+=2){var p=s[d]-this.imageAnchorX_,g=s[d+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var _=p+this.imageAnchorX_,m=g+this.imageAnchorY_;ln(c,_,m,1,1,u,-_,-m),l.setTransform.apply(l,c),l.translate(_,m),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.setTransform(1,0,0,1,0,0)}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,g,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(l.globalAlpha=h)}},i.prototype.drawText_=function(t,n,r,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=lr(t,n,r,a,this.transform_,this.pixelCoordinates_),l=this.context_,c=this.textRotation_;for(this.textRotateWithView_&&(c+=this.viewRotation_);n<r;n+=a){var h=s[n]+this.textOffsetX_,u=s[n+1]+this.textOffsetY_;if(0!==c||1!=this.textScale_[0]||1!=this.textScale_[1]){var d=ln(this.tmpLocalTransform_,h,u,1,1,c,-h,-u);l.setTransform.apply(l,d),l.translate(h,u),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&l.strokeText(this.text_,h,u),this.textFillState_&&l.fillText(this.text_,h,u)}}},i.prototype.moveToLineTo_=function(t,n,r,a,s){var l=this.context_,c=lr(t,n,r,a,this.transform_,this.pixelCoordinates_);l.moveTo(c[0],c[1]);var h=c.length;s&&(h-=2);for(var u=2;u<h;u+=2)l.lineTo(c[u],c[u+1]);return s&&l.closePath(),r},i.prototype.drawRings_=function(t,n,r,a){for(var s=0,l=r.length;s<l;++s)n=this.moveToLineTo_(t,n,r[s],a,!0);return n},i.prototype.drawCircle=function(t){if(Le(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=function xx(e,i,t){var n=e.getFlatCoordinates();if(n){var r=e.getStride();return lr(n,0,n.length,r,i,t)}return null}(t,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],a=n[3]-n[1],s=Math.sqrt(r*r+a*a),l=this.context_;l.beginPath(),l.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},i.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},i.prototype.setTransform=function(t){this.transform_=t},i.prototype.drawGeometry=function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}},i.prototype.drawFeature=function(t,n){var r=n.getGeometryFunction()(t);!r||!Le(this.extent_,r.getExtent())||(this.setStyle(n),this.drawGeometry(r))},i.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),r=0,a=n.length;r<a;++r)this.drawGeometry(n[r])},i.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(n,0,n.length,r),""!==this.text_&&this.drawText_(n,0,n.length,r)},i.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(n,0,n.length,r),""!==this.text_&&this.drawText_(n,0,n.length,r)},i.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Le(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),n.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},i.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getExtent();if(Le(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,a=t.getFlatCoordinates(),s=0,l=t.getEnds(),c=t.getStride();r.beginPath();for(var h=0,u=l.length;h<u;++h)s=this.moveToLineTo_(a,s,l[h],c,!1);r.stroke()}if(""!==this.text_){var d=t.getFlatMidpoints();this.drawText_(d,0,d.length,2)}}},i.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Le(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},i.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Le(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getOrientedFlatCoordinates(),a=0,s=t.getEndss(),l=t.getStride();n.beginPath();for(var c=0,h=s.length;c<h;++c)a=this.drawRings_(r,a,s[c],l);this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(""!==this.text_){var d=t.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}},i.prototype.setContextFillState_=function(t){var n=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},i.prototype.setContextStrokeState_=function(t){var n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(st(r.lineDash,t.lineDash)||n.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},i.prototype.setContextTextState_=function(t){var n=this.context_,r=this.contextTextState_,a=t.textAlign?t.textAlign:zo;r?(r.font!=t.font&&(r.font=t.font,n.font=t.font),r.textAlign!=a&&(r.textAlign=a,n.textAlign=a),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=a,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},i.prototype.setFillStrokeStyle=function(t,n){var r=this;if(t){var a=t.getColor();this.fillState_={fillStyle:Fn(a||ei)}}else this.fillState_=null;if(n){var s=n.getColor(),l=n.getLineCap(),c=n.getLineDash(),h=n.getLineDashOffset(),u=n.getLineJoin(),d=n.getWidth(),f=n.getMiterLimit(),p=c||Uo;this.strokeState_={lineCap:void 0!==l?l:Es,lineDash:1===this.pixelRatio_?p:p.map(function(g){return g*r.pixelRatio_}),lineDashOffset:(h||0)*this.pixelRatio_,lineJoin:void 0!==u?u:jr,lineWidth:(void 0!==d?d:1)*this.pixelRatio_,miterLimit:void 0!==f?f:10,strokeStyle:Fn(s||jo)}}else this.strokeState_=null},i.prototype.setImageStyle=function(t){var n;if(t&&(n=t.getSize())){var r=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_}else this.image_=null},i.prototype.setTextStyle=function(t){if(t){var n=t.getFill();if(n){var r=n.getColor();this.textFillState_={fillStyle:Fn(r||ei)}}else this.textFillState_=null;var a=t.getStroke();if(a){var s=a.getColor(),l=a.getLineCap(),c=a.getLineDash(),h=a.getLineDashOffset(),u=a.getLineJoin(),d=a.getWidth(),f=a.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:Es,lineDash:c||Uo,lineDashOffset:h||0,lineJoin:void 0!==u?u:jr,lineWidth:void 0!==d?d:1,miterLimit:void 0!==f?f:10,strokeStyle:Fn(s||jo)}}else this.textStrokeState_=null;var p=t.getFont(),g=t.getOffsetX(),_=t.getOffsetY(),m=t.getRotateWithView(),v=t.getRotation(),y=t.getScaleArray(),C=t.getText(),x=t.getTextAlign(),b=t.getTextBaseline();this.textState_={font:void 0!==p?p:Of,textAlign:void 0!==x?x:zo,textBaseline:void 0!==b?b:Is},this.text_=void 0!==C?C:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==_?this.pixelRatio_*_:0,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0!==v?v:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""},i}(Gf);const Tx=bx;var Mx=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var i=0;for(var t in this.cache_)0==(3&i++)&&!this.cache_[t].hasListener()&&(delete this.cache_[t],--this.cacheSize_)}},e.prototype.get=function(i,t,n){var r=ep(i,t,n);return r in this.cache_?this.cache_[r]:null},e.prototype.set=function(i,t,n,r){var a=ep(i,t,n);this.cache_[a]=r,++this.cacheSize_},e.prototype.setSize=function(i){this.maxCacheSize_=i,this.expire()},e}();function ep(e,i,t){return i+":"+e+":"+(t?bf(t):"null")}var qs=new Mx,wx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Px=function(e){function i(t,n,r,a){var s=e.call(this)||this;return s.extent=t,s.pixelRatio_=r,s.resolution=n,s.state=a,s}return wx(i,e),i.prototype.changed=function(){this.dispatchEvent("change")},i.prototype.getExtent=function(){return this.extent},i.prototype.getImage=function(){return tt()},i.prototype.getPixelRatio=function(){return this.pixelRatio_},i.prototype.getResolution=function(){return this.resolution},i.prototype.getState=function(){return this.state},i.prototype.load=function(){tt()},i}(Rr);const np=Px;var Ox=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sx=function(e){function i(t,n,r,a,s,l){var c=e.call(this,t,n,r,0)||this;return c.src_=a,c.image_=new Image,null!==s&&(c.image_.crossOrigin=s),c.unlisten_=null,c.state=0,c.imageLoadFunction_=l,c}return Ox(i,e),i.prototype.getImage=function(){return this.image_},i.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},i.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Oe(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},i.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=hh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},i.prototype.setImage=function(t){this.image_=t,this.resolution=Oe(this.extent)/this.image_.height},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(np);function hh(e,i,t){var n=e;if(n.src&&K0){var r=n.decode(),a=!0;return r.then(function(){a&&i()}).catch(function(c){a&&("EncodingError"===c.name&&"Invalid image type."===c.message?i():t())}),function(){a=!1}}var l=[us(n,"load",i),us(n,"error",t)];return function(){l.forEach(Lt)}}const Ax=Sx;var Ex=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xo=null,Ix=function(e){function i(t,n,r,a,s,l){var c=e.call(this)||this;return c.hitDetectionImage_=null,c.image_=t||new Image,null!==a&&(c.image_.crossOrigin=a),c.canvas_={},c.color_=l,c.unlisten_=null,c.imageState_=s,c.size_=r,c.src_=n,c}return Ex(i,e),i.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Xo||(Xo=sn(1,1)),Xo.drawImage(this.image_,0,0);try{Xo.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Xo=null,this.tainted_=!0}}return!0===this.tainted_},i.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},i.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},i.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},i.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},i.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},i.prototype.getImageState=function(){return this.imageState_},i.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],n=this.size_[1],r=sn(t,n);r.fillRect(0,0,t,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},i.prototype.getSize=function(){return this.size_},i.prototype.getSrc=function(){return this.src_},i.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=hh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},i.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var n=document.createElement("canvas");this.canvas_[t]=n,n.width=Math.ceil(this.image_.width*t),n.height=Math.ceil(this.image_.height*t);var r=n.getContext("2d");if(r.scale(t,t),r.drawImage(this.image_,0,0),r.globalCompositeOperation="multiply","multiply"===r.globalCompositeOperation||this.isTainted_())r.fillStyle=bf(this.color_),r.fillRect(0,0,n.width/t,n.height/t),r.globalCompositeOperation="destination-in",r.drawImage(this.image_,0,0);else{for(var a=r.getImageData(0,0,n.width,n.height),s=a.data,l=this.color_[0]/255,c=this.color_[1]/255,h=this.color_[2]/255,u=this.color_[3],d=0,f=s.length;d<f;d+=4)s[d]*=l,s[d+1]*=c,s[d+2]*=h,s[d+3]*=u;r.putImageData(a,0,0)}}},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(Rr),Rx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zx=function(e){function i(t){var n=this,r=t||{};(n=e.call(this,{opacity:void 0!==r.opacity?r.opacity:1,rotation:void 0!==r.rotation?r.rotation:0,scale:void 0!==r.scale?r.scale:1,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:"top-left",n.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:"fraction",n.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:"fraction",n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var h=void 0!==r.img?r.img:null,u=void 0!==r.imgSize?r.imgSize:null,d=r.src;ut(!(void 0!==d&&h),4),ut(!h||h&&u,5),(void 0===d||0===d.length)&&h&&(d=h.src||at(h)),ut(void 0!==d&&d.length>0,6);var f=void 0!==r.src?0:2;return n.color_=void 0!==r.color?Mf(r.color):null,n.iconImage_=function Dx(e,i,t,n,r,a){var s=qs.get(i,n,a);return s||(s=new Ix(e,i,t,n,r,a),qs.set(i,n,a,s)),s}(h,d,u,n.crossOrigin_,f,n.color_),n.offset_=void 0!==r.offset?r.offset:[0,0],n.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:"top-left",n.origin_=null,n.size_=void 0!==r.size?r.size:null,n}return Rx(i,e),i.prototype.clone=function(){var t=this.getScale();return new i({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},i.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,n=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!n)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=n[0]),"fraction"==this.anchorYUnits_&&(t[1]*=n[1])}if("top-left"!=this.anchorOrigin_){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+n[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+n[1])}var r=this.getDisplacement();return t[0]-=r[0],t[1]+=r[1],this.normalizedAnchor_=t,this.normalizedAnchor_},i.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},i.prototype.getColor=function(){return this.color_},i.prototype.getImage=function(t){return this.iconImage_.getImage(t)},i.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},i.prototype.getImageSize=function(){return this.iconImage_.getSize()},i.prototype.getImageState=function(){return this.iconImage_.getImageState()},i.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},i.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=r[0]-n[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=r[1]-n[1]-t[1])}return this.origin_=t,this.origin_},i.prototype.getSrc=function(){return this.iconImage_.getSrc()},i.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},i.prototype.listenImageChange=function(t){this.iconImage_.addEventListener("change",t)},i.prototype.load=function(){this.iconImage_.load()},i.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener("change",t)},i}(yf);const Lx=Zx;var Un=.5,ip={Point:function Vx(e,i,t,n,r){var l,a=t.getImage(),s=t.getText();if(r&&(e=r,l=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var c=e.getBuilder(t.getZIndex(),"Image");c.setImageStyle(a,l),c.drawPoint(i,n)}if(s&&s.getText()){var h=e.getBuilder(t.getZIndex(),"Text");h.setTextStyle(s,l),h.drawText(i,n)}},LineString:function Yx(e,i,t,n,r){var a=t.getStroke();if(a){var s=e.getBuilder(t.getZIndex(),"LineString");s.setFillStrokeStyle(null,a),s.drawLineString(i,n)}var l=t.getText();if(l&&l.getText()){var c=(r||e).getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(i,n)}},Polygon:function Jx(e,i,t,n,r){var a=t.getFill(),s=t.getStroke();if(a||s){var l=e.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(a,s),l.drawPolygon(i,n)}var c=t.getText();if(c&&c.getText()){var h=(r||e).getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(i,n)}},MultiPoint:function Wx(e,i,t,n,r){var l,a=t.getImage(),s=t.getText();if(r&&(e=r,l=a&&s&&s.getText()?{}:void 0),a){if(2!=a.getImageState())return;var c=e.getBuilder(t.getZIndex(),"Image");c.setImageStyle(a,l),c.drawMultiPoint(i,n)}if(s&&s.getText()){var h=(r||e).getBuilder(t.getZIndex(),"Text");h.setTextStyle(s,l),h.drawText(i,n)}},MultiLineString:function Hx(e,i,t,n,r){var a=t.getStroke();if(a){var s=e.getBuilder(t.getZIndex(),"LineString");s.setFillStrokeStyle(null,a),s.drawMultiLineString(i,n)}var l=t.getText();if(l&&l.getText()){var c=(r||e).getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(i,n)}},MultiPolygon:function Bx(e,i,t,n,r){var a=t.getFill(),s=t.getStroke();if(s||a){var l=e.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(a,s),l.drawMultiPolygon(i,n)}var c=t.getText();if(c&&c.getText()){var h=(r||e).getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(i,n)}},GeometryCollection:function zx(e,i,t,n,r){var s,l,a=i.getGeometriesArray();for(s=0,l=a.length;s<l;++s)(0,ip[a[s].getType()])(e,a[s],t,n,r)},Circle:function Gx(e,i,t,n,r){var a=t.getFill(),s=t.getStroke();if(a||s){var l=e.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(a,s),l.drawCircle(i,n)}var c=t.getText();if(c&&c.getText()){var h=(r||e).getBuilder(t.getZIndex(),"Text");h.setTextStyle(c),h.drawText(i,n)}}};function Ux(e,i){return parseInt(at(e),10)-parseInt(at(i),10)}function uh(e,i){return.5*e/i}function rp(e,i,t,n,r,a,s){var l=!1,c=t.getImage();if(c){var h=c.getImageState();2==h||3==h?c.unlistenImageChange(r):(0==h&&c.load(),h=c.getImageState(),c.listenImageChange(r),l=!0)}return function jx(e,i,t,n,r,a){var s=t.getGeometryFunction()(i);if(s){var l=s.simplifyTransformed(n,r);t.getRenderer()?op(e,l,t,i):(0,ip[l.getType()])(e,l,t,i,a)}}(e,i,t,n,a,s),l}function op(e,i,t,n){if("GeometryCollection"!=i.getType())e.getBuilder(t.getZIndex(),"Default").drawCustom(i,n,t.getRenderer(),t.getHitDetectionRenderer());else for(var r=i.getGeometries(),a=0,s=r.length;a<s;++a)op(e,r[a],t,n)}var Xx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$x=function(e){function i(t){var n=e.call(this,t)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=[1/0,1/0,-1/0,-1/0],n.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return Xx(i,e),i.prototype.useContainer=function(t,n,r){r<1&&(t=null),e.prototype.useContainer.call(this,t,n,r)},i.prototype.renderWorlds=function(t,n,r){var a=n.extent,s=n.viewState,l=s.center,c=s.resolution,h=s.projection,u=s.rotation,d=h.getExtent(),f=this.getLayer().getSource(),p=n.pixelRatio,g=n.viewHints,_=!(g[0]||g[1]),m=this.context,v=Math.round(n.size[0]*p),y=Math.round(n.size[1]*p),C=f.getWrapX()&&h.canWrapX(),x=C?kt(d):null,b=C?Math.ceil((a[2]-d[2])/x)+1:1,T=C?Math.floor((a[0]-d[0])/x):0;do{var M=this.getRenderTransform(l,c,u,p,v,y,T*x);t.execute(m,1,M,u,_,void 0,r)}while(++T<b)},i.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},i.prototype.renderFrame=function(t,n){var r=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];(function rx(e,i,t){(function Wo(e,i,t,n,r,a,s){return e[0]=i,e[1]=t,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e})(e,i,0,0,t,0,0)})(this.pixelTransform,1/r,1/r),Jo(this.inversePixelTransform,this.pixelTransform);var s=Us(this.pixelTransform);this.useContainer(n,s,a.opacity);var l=this.context,c=l.canvas,h=this.replayGroup_,u=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!u||u.isEmpty()))return null;var d=Math.round(t.size[0]*r),f=Math.round(t.size[1]*r);c.width!=d||c.height!=f?(c.width=d,c.height=f,c.style.transform!==s&&(c.style.transform=s)):this.containerReused||l.clearRect(0,0,d,f),this.preRender(l,t);var p=t.viewState,_=!1,m=!0;if(a.extent&&this.clipping){var v=Nn(a.extent);(_=(m=Le(v,t.extent))&&!Kn(v,t.extent))&&this.clipUnrotated(l,t,v)}m&&this.renderWorlds(h,t),_&&l.restore(),this.postRender(l,t);var y=Ic(a.opacity),C=this.container;return y!==C.style.opacity&&(C.style.opacity=y),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container},i.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];de(this.pixelTransform,r);var a=this.renderedCenter_,s=this.renderedResolution_,l=this.renderedRotation_,c=this.renderedProjection_,h=this.wrappedRenderedExtent_,u=this.getLayer(),d=[],f=r[0]*Un,p=r[1]*Un;d.push(this.getRenderTransform(a,s,l,Un,f,p,0).slice());var g=u.getSource(),_=c.getExtent();if(g.getWrapX()&&c.canWrapX()&&!Kn(_,h)){for(var m=h[0],v=kt(_),y=0;m<_[0];)--y,d.push(this.getRenderTransform(a,s,l,Un,f,p,v*y).slice()),m+=v;for(y=0,m=h[2];m>_[2];)++y,d.push(this.getRenderTransform(a,s,l,Un,f,p,v*y).slice()),m-=v}this.hitDetectionImageData_=function kx(e,i,t,n,r,a,s){var h=sn(e[0]*Un,e[1]*Un);h.imageSmoothingEnabled=!1;for(var u=h.canvas,d=new Tx(h,Un,r,null,s),f=t.length,p=Math.floor(16777215/f),g={},_=1;_<=f;++_){var m=t[_-1],v=m.getStyleFunction()||n;if(n){var y=v(m,a);if(y){Array.isArray(y)||(y=[y]);for(var x="#"+("000000"+(_*p).toString(16)).slice(-6),b=0,T=y.length;b<T;++b){var M=y[b],w=M.getGeometryFunction()(m);if(w&&Le(r,w.getExtent())){var P=M.clone(),D=P.getFill();D&&D.setColor(x);var R=P.getStroke();R&&(R.setColor(x),R.setLineDash(null)),P.setText(void 0);var L=M.getImage();if(L&&0!==L.getOpacity()){var G=L.getImageSize();if(!G)continue;var W=sn(G[0],G[1],void 0,{alpha:!1}),Z=W.canvas;W.fillStyle=x,W.fillRect(0,0,Z.width,Z.height),P.setImage(new Lx({img:Z,imgSize:G,anchor:L.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:L.getOrigin(),opacity:1,size:L.getSize(),scale:L.getScale(),rotation:L.getRotation(),rotateWithView:L.getRotateWithView()}))}var F=P.getZIndex()||0;(j=g[F])||(g[F]=j={},j.Polygon=[],j.Circle=[],j.LineString=[],j.Point=[]),j[w.getType().replace("Multi","")].push(w,P)}}}}}for(var ot=Object.keys(g).map(Number).sort(O),pt=(_=0,ot.length);_<pt;++_){var j=g[ot[_]];for(var xt in j){var Rt=j[xt];for(b=0,T=Rt.length;b<T;b+=2){d.setStyle(Rt[b+1]);for(var I=0,Nt=i.length;I<Nt;++I)d.setTransform(i[I]),d.drawGeometry(Rt[b])}}}return h.getImageData(0,0,u.width,u.height)}(r,d,this.renderedFeatures_,u.getStyleFunction(),h,s,l)}n(function Nx(e,i,t){var n=[];if(t){var r=Math.floor(Math.round(e[0])*Un),a=Math.floor(Math.round(e[1])*Un),s=4*(te(r,0,t.width-1)+te(a,0,t.height-1)*t.width),u=t.data[s+2]+256*(t.data[s+1]+256*t.data[s]),d=Math.floor(16777215/i.length);u&&u%d==0&&n.push(i[u/d-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},i.prototype.forEachFeatureAtCoordinate=function(t,n,r,a,s){var l=this;if(this.replayGroup_){var p,c=n.viewState.resolution,h=n.viewState.rotation,u=this.getLayer(),d={},f=function(_,m,v){var y=at(_),C=d[y];if(C){if(!0!==C&&v<C.distanceSq){if(0===v)return d[y]=!0,s.splice(s.lastIndexOf(C),1),a(_,u,m);C.geometry=m,C.distanceSq=v}}else{if(0===v)return d[y]=!0,a(_,u,m);s.push(d[y]={feature:_,layer:u,geometry:m,distanceSq:v,callback:a})}},g=[this.replayGroup_];return this.declutterExecutorGroup&&g.push(this.declutterExecutorGroup),g.some(function(_){return p=_.forEachFeatureAtCoordinate(t,c,h,r,f,_===l.declutterExecutorGroup?n.declutterTree.all().map(function(m){return m.value}):null)}),p}},i.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.prepareFrame=function(t){var n=this.getLayer(),r=n.getSource();if(!r)return!1;var a=t.viewHints[0],s=t.viewHints[1],l=n.getUpdateWhileAnimating(),c=n.getUpdateWhileInteracting();if(!this.dirty_&&!l&&a||!c&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=t.extent,u=t.viewState,d=u.projection,f=u.resolution,p=t.pixelRatio,g=n.getRevision(),_=n.getRenderBuffer(),m=n.getRenderOrder();void 0===m&&(m=Ux);var v=u.center.slice(),y=Fr(h,_*f),C=y.slice(),x=[y.slice()],b=d.getExtent();if(r.getWrapX()&&d.canWrapX()&&!Kn(b,t.extent)){var T=kt(b),M=Math.max(kt(y)/2,T);y[0]=b[0]-M,y[2]=b[2]+M,uf(v,d);var w=function D1(e,i){var t=i.getExtent(),n=je(e);if(i.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){var r=kt(t),s=Math.floor((n[0]-t[0])/r)*r;e[0]-=s,e[2]-=s}return e}(x[0],d);w[0]<b[0]&&w[2]<b[2]?x.push([w[0]+T,w[1],w[2]+T,w[3]]):w[0]>b[0]&&w[2]>b[2]&&x.push([w[0]-T,w[1],w[2]-T,w[3]])}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==g&&this.renderedRenderOrder_==m&&Kn(this.wrappedRenderedExtent_,y))return st(this.renderedExtent_,C)||(this.hitDetectionImageData_=null,this.renderedExtent_=C),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var D,P=new Hf(uh(f,p),y,f,p);this.getLayer().getDeclutter()&&(D=new Hf(uh(f,p),y,f,p));var L,R=Mn();if(R){for(var G=0,W=x.length;G<W;++G){var F=As(x[G]);r.loadFeatures(F,H1(f),R)}L=Ki(R,d)}else for(G=0,W=x.length;G<W;++G)r.loadFeatures(x[G],f,d);var j=function qx(e,i){var t=uh(e,i);return t*t}(f,p),ot=function(Nt){var nt,Zt=Nt.getStyleFunction()||n.getStyleFunction();if(Zt&&(nt=Zt(Nt,f)),nt){var Yt=this.renderFeature(Nt,j,nt,P,L,D);this.dirty_=this.dirty_||Yt}}.bind(this),pt=As(y),xt=r.getFeaturesInExtent(pt);for(m&&xt.sort(m),G=0,W=xt.length;G<W;++G)ot(xt[G]);this.renderedFeatures_=xt;var Rt=P.finish(),I=new $f(y,f,p,r.getOverlaps(),Rt,n.getRenderBuffer());return D&&(this.declutterExecutorGroup=new $f(y,f,p,r.getOverlaps(),D.finish(),n.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=g,this.renderedRenderOrder_=m,this.renderedExtent_=C,this.wrappedRenderedExtent_=y,this.renderedCenter_=v,this.renderedProjection_=d,this.replayGroup_=I,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},i.prototype.renderFeature=function(t,n,r,a,s,l){if(!r)return!1;var c=!1;if(Array.isArray(r))for(var h=0,u=r.length;h<u;++h)c=rp(a,t,r[h],n,this.boundHandleStyleImageChange_,s,l)||c;else c=rp(a,t,r,n,this.boundHandleStyleImageChange_,s,l);return c},i}(oh);const Qx=$x;var Kx=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),t2=function(e){function i(t){return e.call(this,t)||this}return Kx(i,e),i.prototype.createRenderer=function(){return new Qx(this)},i}(Iy);const Gs=t2;function ap(e,i,t){return function(n,r,a,s,l){if(n){var c=i?0:a[0]*r,h=i?0:a[1]*r,u=l?l[0]:0,d=l?l[1]:0,f=e[0]+c/2+u,p=e[2]-c/2+u,g=e[1]+h/2+d,_=e[3]-h/2+d;f>p&&(p=f=(p+f)/2),g>_&&(_=g=(_+g)/2);var m=te(n[0],f,p),v=te(n[1],g,_),y=30*r;return s&&t&&(m+=-y*Math.log(1+Math.max(0,f-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-p)/y),v+=-y*Math.log(1+Math.max(0,g-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-_)/y)),[m,v]}}}function n2(e){return e}function fh(e,i,t,n){var r=kt(i)/t[0],a=Oe(i)/t[1];return n?Math.min(e,Math.max(r,a)):Math.min(e,Math.min(r,a))}function ph(e,i,t){var n=Math.min(e,i);return n*=Math.log(1+50*Math.max(0,e/i-1))/50+1,t&&(n=Math.max(n,t),n/=Math.log(1+50*Math.max(0,t/e-1))/50+1),te(n,t/2,2*i)}function sp(e,i,t,n,r){return function(a,s,l,c){if(void 0!==a){var h=n?fh(e,n,l,r):e;return(void 0===t||t)&&c?ph(a,h,i):te(a,i,h)}}}function gh(e){if(void 0!==e)return 0}function lp(e){if(void 0!==e)return e}function cp(e){return Math.pow(e,3)}function Vr(e){return 1-cp(1-e)}function _h(e){return 3*e*e-2*e*e*e}function s2(e){return e}function hp(e,i,t,n,r,a,s){var d,l=e[i],c=e[i+1],h=e[t]-l,u=e[t+1]-c;if(0===h&&0===u)d=i;else{var f=((r-l)*h+(a-c)*u)/(h*h+u*u);if(f>1)d=t;else{if(f>0){for(var p=0;p<n;++p)s[p]=Qn(e[i+p],e[t+p],f);return void(s.length=n)}d=i}}for(p=0;p<n;++p)s[p]=e[d+p];s.length=n}function mh(e,i,t,n,r){var a=e[i],s=e[i+1];for(i+=n;i<t;i+=n){var l=e[i],c=e[i+1],h=Wi(a,s,l,c);h>r&&(r=h),a=l,s=c}return r}function vh(e,i,t,n,r){for(var a=0,s=t.length;a<s;++a){var l=t[a];r=mh(e,i,l,n,r),i=l}return r}function yh(e,i,t,n,r,a,s,l,c,h,u){if(i==t)return h;var d,f;if(0===r){if((f=Wi(s,l,e[i],e[i+1]))<h){for(d=0;d<n;++d)c[d]=e[i+d];return c.length=n,f}return h}for(var p=u||[NaN,NaN],g=i+n;g<t;)if(hp(e,g-n,g,n,s,l,p),(f=Wi(s,l,p[0],p[1]))<h){for(h=f,d=0;d<n;++d)c[d]=p[d];c.length=n,g+=n}else g+=n*Math.max((Math.sqrt(f)-Math.sqrt(h))/r|0,1);if(a&&(hp(e,t-n,i,n,s,l,p),(f=Wi(s,l,p[0],p[1]))<h)){for(h=f,d=0;d<n;++d)c[d]=p[d];c.length=n}return h}function xh(e,i,t,n,r,a,s,l,c,h,u){for(var d=u||[NaN,NaN],f=0,p=t.length;f<p;++f){var g=t[f];h=yh(e,i,g,n,r,a,s,l,c,h,d),i=g}return h}function up(e,i,t,n){for(var r=0,a=t.length;r<a;++r)e[i++]=t[r];return i}function js(e,i,t,n){for(var r=0,a=t.length;r<a;++r)for(var s=t[r],l=0;l<n;++l)e[i++]=s[l];return i}function Ch(e,i,t,n,r){for(var a=r||[],s=0,l=0,c=t.length;l<c;++l){var h=js(e,i,t[l],n);a[s++]=h,i=h}return a.length=s,a}function dp(e,i,t,n){for(var r=0,a=e[t-n],s=e[t-n+1];i<t;i+=n){var l=e[i],c=e[i+1];r+=s*l-a*c,a=l,s=c}return r/2}function fp(e,i,t,n){for(var r=0,a=0,s=t.length;a<s;++a){var l=t[a];r+=dp(e,i,l,n),i=l}return r}var d2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),f2=function(e){function i(t,n){var r=e.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(t[0])?r.setCoordinates(t,n):r.setFlatCoordinates(n,t),r}return d2(i,e),i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),this.layout)},i.prototype.closestPointXY=function(t,n,r,a){return a<Xi(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,r,a))},i.prototype.getArea=function(){return dp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getCoordinates=function(){return Ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new i(n,"XY")},i.prototype.getType=function(){return"LinearRing"},i.prototype.intersectsExtent=function(t){return!1},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=js(this.flatCoordinates,0,t,this.stride),this.changed()},i}(Mi);const pp=f2;var p2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),g2=function(e){function i(t,n){var r=e.call(this)||this;return r.setCoordinates(t,n),r}return p2(i,e),i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){var s=this.flatCoordinates,l=Wi(t,n,s[0],s[1]);if(l<a){for(var c=this.stride,h=0;h<c;++h)r[h]=s[h];return r.length=c,l}return a},i.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},i.prototype.computeExtent=function(t){return xs(this.flatCoordinates,t)},i.prototype.getType=function(){return"Point"},i.prototype.intersectsExtent=function(t){return Rc(t,this.flatCoordinates[0],this.flatCoordinates[1])},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=up(this.flatCoordinates,0,t),this.changed()},i}(Mi);const oi=g2;function _2(e,i,t,n,r){return!Lc(r,function(s){return!cr(e,i,t,n,s[0],s[1])})}function cr(e,i,t,n,r,a){for(var s=0,l=e[t-n],c=e[t-n+1];i<t;i+=n){var h=e[i],u=e[i+1];c<=a?u>a&&(h-l)*(a-c)-(r-l)*(u-c)>0&&s++:u<=a&&(h-l)*(a-c)-(r-l)*(u-c)<0&&s--,l=h,c=u}return 0!==s}function bh(e,i,t,n,r,a){if(0===t.length||!cr(e,i,t[0],n,r,a))return!1;for(var s=1,l=t.length;s<l;++s)if(cr(e,t[s-1],t[s],n,r,a))return!1;return!0}function gp(e,i,t,n,r,a,s){for(var l,c,h,u,d,f,p,g=r[a+1],_=[],m=0,v=t.length;m<v;++m){var y=t[m];for(u=e[y-n],f=e[y-n+1],l=i;l<y;l+=n)d=e[l],p=e[l+1],(g<=f&&p<=g||f<=g&&g<=p)&&_.push(h=(g-f)/(p-f)*(d-u)+u),u=d,f=p}var C=NaN,x=-1/0;for(_.sort(O),u=_[0],l=1,c=_.length;l<c;++l){d=_[l];var b=Math.abs(d-u);b>x&&bh(e,i,t,n,h=(u+d)/2,g)&&(C=h,x=b),u=d}return isNaN(C)&&(C=r[a]),s?(s.push(C,g,x),s):[C,g,x]}function _p(e,i,t,n,r){var a;for(i+=n;i<t;i+=n)if(a=r(e.slice(i-n,i),e.slice(i,i+n)))return a;return!1}function zs(e,i,t,n,r){var a=lf([1/0,1/0,-1/0,-1/0],e,i,t,n);return!!Le(r,a)&&(!!(Kn(r,a)||a[0]>=r[0]&&a[2]<=r[2]||a[1]>=r[1]&&a[3]<=r[3])||_p(e,i,t,n,function(s,l){return function E1(e,i,t){var n=!1,r=Zc(e,i),a=Zc(e,t);if(1===r||1===a)n=!0;else{var s=e[0],l=e[1],c=e[2],h=e[3],f=t[0],p=t[1],g=(p-i[1])/(f-i[0]),_=void 0,m=void 0;!!(2&a)&&!(2&r)&&(n=(_=f-(p-h)/g)>=s&&_<=c),n||!(4&a)||4&r||(n=(m=p-(f-c)*g)>=l&&m<=h),n||!(8&a)||8&r||(n=(_=f-(p-l)/g)>=s&&_<=c),!n&&16&a&&!(16&r)&&(n=(m=p-(f-s)*g)>=l&&m<=h)}return n}(r,s,l)}))}function mp(e,i,t,n,r){if(!function x2(e,i,t,n,r){return!!(zs(e,i,t,n,r)||cr(e,i,t,n,r[0],r[1])||cr(e,i,t,n,r[0],r[3])||cr(e,i,t,n,r[2],r[1])||cr(e,i,t,n,r[2],r[3]))}(e,i,t[0],n,r))return!1;if(1===t.length)return!0;for(var a=1,s=t.length;a<s;++a)if(_2(e,t[a-1],t[a],n,r)&&!zs(e,t[a-1],t[a],n,r))return!1;return!0}function b2(e,i,t,n){for(;i<t-n;){for(var r=0;r<n;++r){var a=e[i+r];e[i+r]=e[t-n+r],e[t-n+r]=a}i+=n,t-=n}}function vp(e,i,t,n){for(var r=0,a=e[t-n],s=e[t-n+1];i<t;i+=n){var l=e[i],c=e[i+1];r+=(l-a)*(c+s),a=l,s=c}return 0===r?void 0:r>0}function yp(e,i,t,n,r){for(var a=void 0!==r&&r,s=0,l=t.length;s<l;++s){var c=t[s],h=vp(e,i,c,n);if(0===s){if(a&&h||!a&&!h)return!1}else if(a&&!h||!a&&h)return!1;i=c}return!0}function Th(e,i,t,n,r){for(var a=void 0!==r&&r,s=0,l=t.length;s<l;++s){var c=t[s],h=vp(e,i,c,n);(0===s?a&&h||!a&&!h:a&&!h||!a&&h)&&b2(e,i,c,n),i=c}return i}function xp(e,i,t,n,r){for(var a=0,s=t.length;a<s;++a)i=Th(e,i,t[a],n,r);return i}var M2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ys=function(e){function i(t,n,r){var a=e.call(this)||this;return a.ends_=[],a.flatInteriorPointRevision_=-1,a.flatInteriorPoint_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,void 0!==n&&r?(a.setFlatCoordinates(n,t),a.ends_=r):a.setCoordinates(t,n),a}return M2(i,e),i.prototype.appendLinearRing=function(t){this.flatCoordinates?H(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){return a<Xi(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vh(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,r,a))},i.prototype.containsXY=function(t,n){return bh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)},i.prototype.getArea=function(){return fp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},i.prototype.getCoordinates=function(t){var n;return void 0!==t?Th(n=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):n=this.flatCoordinates,Bo(n,0,this.ends_,this.stride)},i.prototype.getEnds=function(){return this.ends_},i.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=je(this.getExtent());this.flatInteriorPoint_=gp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},i.prototype.getInteriorPoint=function(){return new oi(this.getFlatInteriorPoint(),"XYM")},i.prototype.getLinearRingCount=function(){return this.ends_.length},i.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new pp(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},i.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,r=this.ends_,a=[],s=0,l=0,c=r.length;l<c;++l){var h=r[l],u=new pp(n.slice(s,h),t);a.push(u),s=h}return a},i.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;yp(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Th(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},i.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=zf(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new i(n,"XY",r)},i.prototype.getType=function(){return"Polygon"},i.prototype.intersectsExtent=function(t){return mp(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},i}(Mi);const Wr=Ys;function Cp(e){var i=e[0],t=e[1],n=e[2],r=e[3],a=[i,t,i,r,n,r,n,t,i,t];return new Ys(a,"XY",[a.length])}function Mh(e,i,t){for(var n=i||32,r=e.getStride(),a=e.getLayout(),s=e.getCenter(),l=r*(n+1),c=new Array(l),h=0;h<l;h+=r){c[h]=0,c[h+1]=0;for(var u=2;u<r;u++)c[h+u]=s[u]}var f=new Ys(c,a,[c.length]);return function w2(e,i,t,n){for(var r=e.getFlatCoordinates(),a=e.getStride(),s=r.length/a-1,l=n||0,c=0;c<=s;++c){var h=c*a,u=l+2*$n(c,s)*Math.PI/s;r[h]=i[0]+t*Math.cos(u),r[h+1]=i[1]+t*Math.sin(u)}e.changed()}(f,s,e.getRadius(),t),f}var P2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),O2=function(e){function i(t){var n=e.call(this)||this,r=dt({},t);return n.hints_=[0,0],n.animations_=[],n.projection_=Yc(r.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.nextCenter_=null,n.cancelAnchor_=void 0,r.center&&(r.center=jt(r.center)),r.extent&&(r.extent=Nn(r.extent)),n.applyOptions_(r),n}return P2(i,e),i.prototype.applyOptions_=function(t){var r=function A2(e){var i,t,n,s=void 0!==e.minZoom?e.minZoom:0,l=void 0!==e.maxZoom?e.maxZoom:28,c=void 0!==e.zoomFactor?e.zoomFactor:2,h=void 0!==e.multiWorld&&e.multiWorld,u=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,d=void 0!==e.showFullExtent&&e.showFullExtent,f=Yc(e.projection,"EPSG:3857"),p=f.getExtent(),g=e.constrainOnlyCenter,_=e.extent;if(!h&&!_&&f.isGlobal()&&(g=!1,_=p),void 0!==e.resolutions){var m=e.resolutions;t=m[s],n=void 0!==m[l]?m[l]:m[m.length-1],i=e.constrainResolution?function i2(e,i,t,n){return function(r,a,s,l){if(void 0!==r){var c=e[0],h=e[e.length-1],u=t?fh(c,t,s,n):c;if(l)return void 0===i||i?ph(r,u,h):te(r,h,u);var f=Math.min(u,r),p=Math.floor(N(e,f,a));return e[p]>u&&p<e.length-1?e[p+1]:e[p]}}}(m,u,!g&&_,d):sp(t,n,u,!g&&_,d)}else{var y=(p?Math.max(kt(p),Oe(p)):360*Ke[tn.DEGREES]/f.getMetersPerUnit())/256/Math.pow(2,0),C=y/Math.pow(2,28);void 0!==(t=e.maxResolution)?s=0:t=y/Math.pow(c,s),void 0===(n=e.minResolution)&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?t/Math.pow(c,l):y/Math.pow(c,l):C),l=s+Math.floor(Math.log(t/n)/Math.log(c)),n=t/Math.pow(c,l-s),i=e.constrainResolution?function r2(e,i,t,n,r,a){return function(s,l,c,h){if(void 0!==s){var u=r?fh(i,r,c,a):i,d=void 0!==t?t:0;if(h)return void 0===n||n?ph(s,u,d):te(s,d,u);var g=Math.ceil(Math.log(i/u)/Math.log(e)-1e-9),_=-l*(.5-1e-9)+.5,m=Math.min(u,s),v=Math.floor(Math.log(i/m)/Math.log(e)+_),y=Math.max(g,v);return te(i/Math.pow(e,y),d,u)}}}(c,t,n,u,!g&&_,d):sp(t,n,u,!g&&_,d)}return{constraint:i,maxResolution:t,minResolution:n,minZoom:s,zoomFactor:c}}(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;var a=function S2(e){if(void 0!==e.extent)return ap(e.extent,e.constrainOnlyCenter,void 0===e.smoothExtentConstraint||e.smoothExtentConstraint);var t=Yc(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&t.isGlobal()){var n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,ap(n,!1,!1)}return n2}(t),s=r.constraint,l=function E2(e){if(void 0===e.enableRotation||e.enableRotation){var t=e.constrainRotation;return void 0===t||!0===t?function a2(e){var i=e||_s(5);return function(t,n){return n?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}}():!1===t?lp:"number"==typeof t?function o2(e){var i=2*Math.PI/e;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/i+.5)*i:void 0}}(t):lp}return gh}(t);this.constraints_={center:a,resolution:s,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(i.prototype,"padding",{get:function(){return this.padding_},set:function(t){var n=this.padding_;this.padding_=t;var r=this.getCenter();if(r){var a=t||[0,0,0,0];n=n||[0,0,0,0];var s=this.getResolution();this.setCenterInternal([r[0]+s/2*(a[3]-n[3]+n[1]-a[1]),r[1]-s/2*(a[0]-n[0]+n[2]-a[2])])}},enumerable:!1,configurable:!0}),i.prototype.getUpdatedOptions_=function(t){var n=dt({},this.options_);return void 0!==n.resolution?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),dt({},n,t)},i.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),r=0;r<n.length;++r){var a=arguments[r];a.center&&((a=dt({},a)).center=jt(a.center,this.getProjection())),a.anchor&&((a=dt({},a)).anchor=jt(a.anchor,this.getProjection())),n[r]=a}this.animateInternal.apply(this,n)},i.prototype.animateInternal=function(t){var r,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(r=arguments[n-1],--n);for(var a=0;a<n&&!this.isDef();++a){var s=arguments[a];s.center&&this.setCenterInternal(s.center),void 0!==s.zoom?this.setZoom(s.zoom):s.resolution&&this.setResolution(s.resolution),void 0!==s.rotation&&this.setRotation(s.rotation)}if(a!==n){for(var l=Date.now(),c=this.targetCenter_.slice(),h=this.targetResolution_,u=this.targetRotation_,d=[];a<n;++a){var f=arguments[a],p={start:l,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||_h,callback:r};if(f.center&&(p.sourceCenter=c,p.targetCenter=f.center.slice(),c=p.targetCenter),void 0!==f.zoom?(p.sourceResolution=h,p.targetResolution=this.getResolutionForZoom(f.zoom),h=p.targetResolution):f.resolution&&(p.sourceResolution=h,p.targetResolution=f.resolution,h=p.targetResolution),void 0!==f.rotation){p.sourceRotation=u;var g=$n(f.rotation-u+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=u+g,u=p.targetRotation}I2(p)?p.complete=!0:l+=p.duration,d.push(p)}this.animations_.push(d),this.setHint(0,1),this.updateAnimations_()}else r&&Hs(r,!0)},i.prototype.getAnimating=function(){return this.hints_[0]>0},i.prototype.getInteracting=function(){return this.hints_[1]>0},i.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var t,n=0,r=this.animations_.length;n<r;++n){var a=this.animations_[n];if(a[0].callback&&Hs(a[0].callback,!1),!t)for(var s=0,l=a.length;s<l;++s){var c=a[s];if(!c.complete){t=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},i.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,r=this.animations_.length-1;r>=0;--r){for(var a=this.animations_[r],s=!0,l=0,c=a.length;l<c;++l){var h=a[l];if(!h.complete){var d=h.duration>0?(t-h.start)/h.duration:1;d>=1?(h.complete=!0,d=1):s=!1;var f=h.easing(d);if(h.sourceCenter){var p=h.sourceCenter[0],g=h.sourceCenter[1],_=h.targetCenter[0],m=h.targetCenter[1];this.nextCenter_=h.targetCenter,this.targetCenter_=[p+f*(_-p),g+f*(m-g)]}if(h.sourceResolution&&h.targetResolution){var C=1===f?h.targetResolution:h.sourceResolution+f*(h.targetResolution-h.sourceResolution);if(h.anchor){var x=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(C,0,x,!0);this.targetCenter_=this.calculateCenterZoom(b,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=C,this.applyTargetState_(!0)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var T=1===f?$n(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+f*(h.targetRotation-h.sourceRotation);if(h.anchor){var M=this.constraints_.rotation(T,!0);this.targetCenter_=this.calculateCenterRotate(M,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=T}if(this.applyTargetState_(!0),n=!0,!h.complete)break}}if(s){this.animations_[r]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var w=a[0].callback;w&&Hs(w,!0)}}this.animations_=this.animations_.filter(Boolean),n&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},i.prototype.calculateCenterRotate=function(t,n){var r,a=this.getCenterInternal();return void 0!==a&&(Uc(r=[a[0]-n[0],a[1]-n[1]],t-this.getRotation()),function L1(e,i){e[0]+=+i[0],e[1]+=+i[1]}(r,n)),r},i.prototype.calculateCenterZoom=function(t,n){var r,a=this.getCenterInternal(),s=this.getResolution();return void 0!==a&&void 0!==s&&(r=[n[0]-t*(n[0]-a[0])/s,n[1]-t*(n[1]-a[1])/s]),r},i.prototype.getViewportSize_=function(t){var n=this.viewportSize_;if(t){var r=n[0],a=n[1];return[Math.abs(r*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(a*Math.cos(t))]}return n},i.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},i.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&er(t,this.getProjection())},i.prototype.getCenterInternal=function(){return this.get("center")},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){return As(this.calculateExtentInternal(t),this.getProjection())},i.prototype.calculateExtentInternal=function(t){var n=t||this.getViewportSizeMinusPadding_(),r=this.getCenterInternal();ut(r,1);var a=this.getResolution();ut(void 0!==a,2);var s=this.getRotation();return ut(void 0!==s,3),Gr(r,a,s,n)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get("resolution")},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Nn(t,this.getProjection()),n)},i.prototype.getResolutionForExtentInternal=function(t,n){var r=n||this.getViewportSizeMinusPadding_(),a=kt(t)/r[0],s=Oe(t)/r[1];return Math.max(a,s)},i.prototype.getResolutionForValueFunction=function(t){var n=t||2,r=this.getConstrainedResolution(this.maxResolution_),s=Math.log(r/this.minResolution_)/Math.log(n);return function(l){return r/Math.pow(n,l*s)}},i.prototype.getRotation=function(){return this.get("rotation")},i.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),s=Math.log(r/this.minResolution_)/n;return function(l){return Math.log(r/l)/n/s}},i.prototype.getViewportSizeMinusPadding_=function(t){var n=this.getViewportSize_(t),r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n},i.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),r=this.getRotation(),a=this.getCenterInternal(),s=this.padding_;if(s){var l=this.getViewportSizeMinusPadding_();a=Ph(a,this.getViewportSize_(),[l[0]/2+s[3],l[1]/2+s[0]],n,r)}return{center:a.slice(0),projection:void 0!==t?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,n=this.getResolution();return void 0!==n&&(t=this.getZoomForResolution(n)),t},i.prototype.getZoomForResolution=function(t){var r,a,n=this.minZoom_||0;if(this.resolutions_){var s=N(this.resolutions_,t,1);n=s,r=this.resolutions_[s],a=s==this.resolutions_.length-1?2:r/this.resolutions_[s+1]}else r=this.maxResolution_,a=this.zoomFactor_;return n+Math.log(r/t)/Math.log(a)},i.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=te(Math.floor(t),0,this.resolutions_.length-2);return this.resolutions_[n]/Math.pow(this.resolutions_[n]/this.resolutions_[n+1],te(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},i.prototype.fit=function(t,n){var r;if(ut(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))ut(!ws(t),25),r=Cp(a=Nn(t,this.getProjection()));else if("Circle"===t.getType()){var a;(r=Cp(a=Nn(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),je(a))}else{var s=Mn();r=s?t.clone().transform(s,this.getProjection()):t}this.fitInternal(r,n)},i.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),r=Math.cos(n),a=Math.sin(-n),s=t.getFlatCoordinates(),l=t.getStride(),c=1/0,h=1/0,u=-1/0,d=-1/0,f=0,p=s.length;f<p;f+=l){var g=s[f]*r-s[f+1]*a,_=s[f]*a+s[f+1]*r;c=Math.min(c,g),h=Math.min(h,_),u=Math.max(u,g),d=Math.max(d,_)}return[c,h,u,d]},i.prototype.fitInternal=function(t,n){var r=n||{},a=r.size;a||(a=this.getViewportSizeMinusPadding_());var c,s=void 0!==r.padding?r.padding:[0,0,0,0],l=void 0!==r.nearest&&r.nearest;c=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;var h=this.rotatedExtentForGeometry(t),u=this.getResolutionForExtentInternal(h,[a[0]-s[1]-s[3],a[1]-s[0]-s[2]]);u=isNaN(u)?c:Math.max(u,c),u=this.getConstrainedResolution(u,l?0:1);var d=this.getRotation(),f=Math.sin(d),p=Math.cos(d),g=je(h);g[0]+=(s[1]-s[3])/2*u,g[1]+=(s[0]-s[2])/2*u;var v=this.getConstrainedCenter([g[0]*p-g[1]*f,g[1]*p+g[0]*f],u),y=r.callback?r.callback:Xe;void 0!==r.duration?this.animateInternal({resolution:u,center:v,duration:r.duration,easing:r.easing},y):(this.targetResolution_=u,this.targetCenter_=v,this.applyTargetState_(!1,!0),Hs(y,!0))},i.prototype.centerOn=function(t,n,r){this.centerOnInternal(jt(t,this.getProjection()),n,r)},i.prototype.centerOnInternal=function(t,n,r){this.setCenterInternal(Ph(t,n,r,this.getResolution(),this.getRotation()))},i.prototype.calculateCenterShift=function(t,n,r,a){var s,l=this.padding_;if(l&&t){var c=this.getViewportSizeMinusPadding_(-r),h=Ph(t,a,[c[0]/2+l[3],c[1]/2+l[0]],n,r);s=[t[0]-h[0],t[1]-h[1]]}return s},i.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},i.prototype.adjustCenter=function(t){var n=er(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},i.prototype.adjustCenterInternal=function(t){var n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},i.prototype.adjustResolution=function(t,n){var r=n&&jt(n,this.getProjection());this.adjustResolutionInternal(t,r)},i.prototype.adjustResolutionInternal=function(t,n){var r=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,a,r);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=t,this.applyTargetState_()},i.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)},i.prototype.adjustRotation=function(t,n){n&&(n=jt(n,this.getProjection())),this.adjustRotationInternal(t,n)},i.prototype.adjustRotationInternal=function(t,n){var r=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,r);n&&(this.targetCenter_=this.calculateCenterRotate(a,n)),this.targetRotation_+=t,this.applyTargetState_()},i.prototype.setCenter=function(t){this.setCenterInternal(jt(t,this.getProjection()))},i.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},i.prototype.setHint=function(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},i.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i.prototype.applyTargetState_=function(t,n){var r=this.getAnimating()||this.getInteracting()||n,a=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(a),l=this.constraints_.resolution(this.targetResolution_,0,s,r),c=this.constraints_.center(this.targetCenter_,l,s,r,this.calculateCenterShift(this.targetCenter_,l,a,s));this.get("rotation")!==a&&this.set("rotation",a),this.get("resolution")!==l&&this.set("resolution",l),(!this.get("center")||!Ln(this.get("center"),c))&&this.set("center",c),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},i.prototype.resolveConstraints=function(t,n,r){var a=void 0!==t?t:200,s=n||0,l=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(l),h=this.constraints_.resolution(this.targetResolution_,s,c),u=this.constraints_.center(this.targetCenter_,h,c,!1,this.calculateCenterShift(this.targetCenter_,h,l,c));if(0===a&&!this.cancelAnchor_)return this.targetResolution_=h,this.targetRotation_=l,this.targetCenter_=u,void this.applyTargetState_();var d=r||(0===a?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==l||!this.getCenterInternal()||!Ln(this.getCenterInternal(),u))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:u,resolution:h,duration:a,easing:Vr,anchor:d}))},i.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},i.prototype.endInteraction=function(t,n,r){var a=r&&jt(r,this.getProjection());this.endInteractionInternal(t,n,a)},i.prototype.endInteractionInternal=function(t,n,r){this.setHint(1,-1),this.resolveConstraints(t,n,r)},i.prototype.getConstrainedCenter=function(t,n){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),r)},i.prototype.getConstrainedZoom=function(t,n){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,n))},i.prototype.getConstrainedResolution=function(t,n){var r=n||0,a=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,a)},i}(xn);function Hs(e,i){setTimeout(function(){e(i)},0)}function I2(e){return!(e.sourceCenter&&e.targetCenter&&!Ln(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Ph(e,i,t,n,r){var a=Math.cos(-r),s=Math.sin(-r),l=e[0]*a-e[1]*s,c=e[1]*a+e[0]*s;return[(l+=(i[0]/2-t[0])*n)*a-(c+=(t[1]-i[1]/2)*n)*(s=-s),c*a+l*s]}const Pi=O2;var D2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),R2=function(e){function i(t){var n=e.call(this)||this;return n.map_=t,n}return D2(i,e),i.prototype.dispatchRenderEvent=function(t,n){tt()},i.prototype.calculateMatrices2D=function(t){var n=t.viewState,r=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;ln(r,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Jo(a,r)},i.prototype.forEachFeatureAtCoordinate=function(t,n,r,a,s,l,c,h){var u,d=n.viewState;function f(Z,F,j,ot){return s.call(l,F,Z?j:null,ot)}var p=d.projection,g=uf(t.slice(),p),_=[[0,0]];if(p.canWrapX()&&a){var v=kt(p.getExtent());_.push([-v,0],[v,0])}for(var y=n.layerStatesArray,C=y.length,x=[],b=[],T=0;T<_.length;T++)for(var M=C-1;M>=0;--M){var w=y[M],P=w.layer;if(P.hasRenderer()&&Ls(w,d)&&c.call(h,P)){var D=P.getRenderer(),R=P.getSource();if(D&&R){var L=R.getWrapX()?g:t,G=f.bind(null,w.managed);b[0]=L[0]+_[T][0],b[1]=L[1]+_[T][1],u=D.forEachFeatureAtCoordinate(b,n,r,G,x)}if(u)return u}}if(0!==x.length){var W=1/x.length;return x.forEach(function(Z,F){return Z.distanceSq+=F*W}),x.sort(function(Z,F){return Z.distanceSq-F.distanceSq}),x.some(function(Z){return u=Z.callback(Z.feature,Z.layer,Z.geometry)}),u}},i.prototype.forEachLayerAtPixel=function(t,n,r,a,s){return tt()},i.prototype.hasFeatureAtCoordinate=function(t,n,r,a,s,l){return void 0!==this.forEachFeatureAtCoordinate(t,n,r,a,_t,this,s,l)},i.prototype.getMap=function(){return this.map_},i.prototype.renderFrame=function(t){tt()},i.prototype.scheduleExpireIconCache=function(t){qs.canExpireCache()&&t.postRenderFunctions.push(Z2)},i}(Zn);function Z2(e,i){qs.expire()}const L2=R2;var k2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),N2=function(e){function i(t){var n=e.call(this,t)||this;n.fontChangeListenerKey_=ft(ni,"propertychange",t.redrawText.bind(t)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className=Zo+" ol-layers";var a=t.getViewport();return a.insertBefore(n.element_,a.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return k2(i,e),i.prototype.dispatchRenderEvent=function(t,n){var r=this.getMap();if(r.hasListener(t)){var a=new Bf(t,void 0,n);r.dispatchEvent(a)}},i.prototype.disposeInternal=function(){Lt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},i.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent("precompose",t);var n=t.layerStatesArray.sort(function(f,p){return f.zIndex-p.zIndex}),r=t.viewState;this.children_.length=0;for(var a=[],s=null,l=0,c=n.length;l<c;++l){var h=n[l];if(t.layerIndex=l,Ls(h,r)&&("ready"==h.sourceState||"undefined"==h.sourceState)){var u=h.layer,d=u.render(t,s);!d||(d!==s&&(this.children_.push(d),s=d),"getDeclutter"in u&&a.push(u))}}for(l=a.length-1;l>=0;--l)a[l].renderDeclutter(t);(function n1(e,i){for(var t=e.childNodes,n=0;;++n){var r=t[n],a=i[n];if(!r&&!a)break;if(r!==a){if(!r){e.appendChild(a);continue}if(!a){e.removeChild(r),--n;continue}e.insertBefore(a,r)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},i.prototype.forEachLayerAtPixel=function(t,n,r,a,s){for(var l=n.viewState,c=n.layerStatesArray,u=c.length-1;u>=0;--u){var d=c[u],f=d.layer;if(f.hasRenderer()&&Ls(d,l)&&s(f)){var g=f.getRenderer().getDataAtPixel(t,n,r);if(g){var _=a(f,g);if(_)return _}}}},i}(L2);const F2=N2;var U2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),q2=function(e){function i(t){var n=this,r=t||{},a=dt({},r);delete a.layers;var s=r.layers;return(n=e.call(this,a)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener("layers",n.handleLayersChanged_),s?Array.isArray(s)?s=new Ne(s.slice(),{unique:!0}):ut("function"==typeof s.getArray,43):s=new Ne(void 0,{unique:!0}),n.setLayers(s),n}return U2(i,e),i.prototype.handleLayerChange_=function(){this.changed()},i.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Lt),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var n in this.layersListenerKeys_.push(ft(t,"add",this.handleLayersAdd_,this),ft(t,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[n].forEach(Lt);$e(this.listenerKeys_);for(var r=t.getArray(),a=0,s=r.length;a<s;a++){var l=r[a];this.listenerKeys_[at(l)]=[ft(l,"propertychange",this.handleLayerChange_,this),ft(l,"change",this.handleLayerChange_,this)]}this.changed()},i.prototype.handleLayersAdd_=function(t){var n=t.element;this.listenerKeys_[at(n)]=[ft(n,"propertychange",this.handleLayerChange_,this),ft(n,"change",this.handleLayerChange_,this)],this.changed()},i.prototype.handleLayersRemove_=function(t){var r=at(t.element);this.listenerKeys_[r].forEach(Lt),delete this.listenerKeys_[r],this.changed()},i.prototype.getLayers=function(){return this.get("layers")},i.prototype.setLayers=function(t){this.set("layers",t)},i.prototype.getLayersArray=function(t){var n=void 0!==t?t:[];return this.getLayers().forEach(function(r){r.getLayersArray(n)}),n},i.prototype.getLayerStatesArray=function(t){var n=void 0!==t?t:[],r=n.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(n)});var a=this.getLayerState(),s=a.zIndex;!t&&void 0===a.zIndex&&(s=0);for(var l=r,c=n.length;l<c;l++){var h=n[l];h.opacity*=a.opacity,h.visible=h.visible&&a.visible,h.maxResolution=Math.min(h.maxResolution,a.maxResolution),h.minResolution=Math.max(h.minResolution,a.minResolution),h.minZoom=Math.max(h.minZoom,a.minZoom),h.maxZoom=Math.min(h.maxZoom,a.maxZoom),void 0!==a.extent&&(h.extent=void 0!==h.extent?mi(h.extent,a.extent):a.extent),void 0===h.zIndex&&(h.zIndex=s)}return n},i.prototype.getSourceState=function(){return"ready"},i}(Ff);const G2=q2;var j2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),z2=function(e){function i(t,n,r){var a=e.call(this,t)||this;return a.map=n,a.frameState=void 0!==r?r:null,a}return j2(i,e),i}(ye);const Bs=z2;var Y2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),H2=function(e){function i(t,n,r,a,s){var l=e.call(this,t,n,s)||this;return l.originalEvent=r,l.pixel_=null,l.coordinate_=null,l.dragging=void 0!==a&&a,l}return Y2(i,e),Object.defineProperty(i.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),i.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},i}(Bs);const ai=H2,vt={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var B2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),V2=function(e){function i(t,n){var r=e.call(this,t)||this;r.map_=t,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=a,r.pointerdownListenerKey_=ft(a,"pointerdown",r.handlePointerDown_,r),r.relayedListenerKey_=ft(a,"pointermove",r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener("touchmove",r.boundHandleTouchMove_,!!Bd&&{passive:!1}),r}return B2(i,e),i.prototype.emulateClick_=function(t){var n=new ai(vt.CLICK,this.map_,t);this.dispatchEvent(n),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new ai(vt.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var r=new ai(vt.SINGLECLICK,this.map_,t);this.dispatchEvent(r)}.bind(this),250)},i.prototype.updateActivePointers_=function(t){var n=t;n.type==vt.POINTERUP||n.type==vt.POINTERCANCEL?delete this.trackedTouches_[n.pointerId]:n.type==vt.POINTERDOWN&&(this.trackedTouches_[n.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},i.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var n=new ai(vt.POINTERUP,this.map_,t);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},i.prototype.isMouseActionButton_=function(t){return 0===t.button},i.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var n=new ai(vt.POINTERDOWN,this.map_,t);for(var r in this.dispatchEvent(n),this.down_={},t){var a=t[r];this.down_[r]="function"==typeof a?Xe:a}if(0===this.dragListenerKeys_.length){var s=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ft(s,vt.POINTERMOVE,this.handlePointerMove_,this),ft(s,vt.POINTERUP,this.handlePointerUp_,this),ft(this.element_,vt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push(ft(this.element_.getRootNode(),vt.POINTERUP,this.handlePointerUp_,this))}},i.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var n=new ai(vt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(n)}},i.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var n=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new ai(t.type,this.map_,t,n))},i.prototype.handleTouchMove_=function(t){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()},i.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},i.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Lt),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},i}(Rr);const W2=V2;var Vs=1/0,J2=function(){function e(i,t){this.priorityFunction_=i,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,$e(this.queuedElements_)},e.prototype.dequeue=function(){var i=this.elements_,t=this.priorities_,n=i[0];1==i.length?(i.length=0,t.length=0):(i[0]=i.pop(),t[0]=t.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},e.prototype.enqueue=function(i){ut(!(this.keyFunction_(i)in this.queuedElements_),31);var t=this.priorityFunction_(i);return t!=Vs&&(this.elements_.push(i),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(i)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(i){return 2*i+1},e.prototype.getRightChildIndex_=function(i){return 2*i+2},e.prototype.getParentIndex_=function(i){return i-1>>1},e.prototype.heapify_=function(){var i;for(i=(this.elements_.length>>1)-1;i>=0;i--)this.siftUp_(i)},e.prototype.isEmpty=function(){return 0===this.elements_.length},e.prototype.isKeyQueued=function(i){return i in this.queuedElements_},e.prototype.isQueued=function(i){return this.isKeyQueued(this.keyFunction_(i))},e.prototype.siftUp_=function(i){for(var t=this.elements_,n=this.priorities_,r=t.length,a=t[i],s=n[i],l=i;i<r>>1;){var c=this.getLeftChildIndex_(i),h=this.getRightChildIndex_(i),u=h<r&&n[h]<n[c]?h:c;t[i]=t[u],n[i]=n[u],i=u}t[i]=a,n[i]=s,this.siftDown_(l,i)},e.prototype.siftDown_=function(i,t){for(var n=this.elements_,r=this.priorities_,a=n[t],s=r[t];t>i;){var l=this.getParentIndex_(t);if(!(r[l]>s))break;n[t]=n[l],r[t]=r[l],t=l}n[t]=a,r[t]=s},e.prototype.reprioritize=function(){var s,l,c,i=this.priorityFunction_,t=this.elements_,n=this.priorities_,r=0,a=t.length;for(l=0;l<a;++l)(c=i(s=t[l]))==Vs?delete this.queuedElements_[this.keyFunction_(s)]:(n[r]=c,t[r++]=s);t.length=r,n.length=r,this.heapify_()},e}();const X2=J2;var $2=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q2=function(e){function i(t,n){var r=e.call(this,function(a){return t.apply(null,a)},function(a){return a[0].getKey()})||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return $2(i,e),i.prototype.enqueue=function(t){var n=e.prototype.enqueue.call(this,t);return n&&t[0].addEventListener("change",this.boundHandleTileChange_),n},i.prototype.getTilesLoading=function(){return this.tilesLoading_},i.prototype.handleTileChange=function(t){var n=t.target,r=n.getState();if(2===r||3===r||4===r){n.removeEventListener("change",this.boundHandleTileChange_);var a=n.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},i.prototype.loadMoreTiles=function(t,n){for(var s,l,r=0;this.tilesLoading_<t&&r<n&&this.getCount()>0;)l=(s=this.dequeue()[0]).getKey(),0===s.getState()&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++r,s.load())},i}(X2);const K2=Q2;var eC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nC=function(e){function i(t){var n=e.call(this)||this,r=function iC(e){var i=null;void 0!==e.keyboardEventTarget&&(i="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,a,s,t={},n=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new G2({layers:e.layers});return t.layergroup=n,t.target=e.target,t.view=e.view instanceof Pi?e.view:new Pi,void 0!==e.controls&&(Array.isArray(e.controls)?r=new Ne(e.controls.slice()):(ut("function"==typeof e.controls.getArray,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?a=new Ne(e.interactions.slice()):(ut("function"==typeof e.interactions.getArray,48),a=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?s=new Ne(e.overlays.slice()):(ut("function"==typeof e.overlays.getArray,49),s=e.overlays):s=new Ne,{controls:r,interactions:a,keyboardEventTarget:i,overlays:s,values:t}}(t);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,n.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Hd,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=t.moveTolerance,n.keyboardEventTarget_=r.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=r.controls||new Ne,n.interactions=r.interactions||new Ne,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new K2(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener("layergroup",n.handleLayerGroupChanged_),n.addChangeListener("view",n.handleViewChanged_),n.addChangeListener("size",n.handleSizeChanged_),n.addChangeListener("target",n.handleTargetChanged_),n.setProperties(r.values);var a=n;return t.view&&!(t.view instanceof Pi)&&t.view.then(function(s){a.setView(new Pi(s))}),n.controls.addEventListener("add",function(s){s.element.setMap(this)}.bind(n)),n.controls.addEventListener("remove",function(s){s.element.setMap(null)}.bind(n)),n.interactions.addEventListener("add",function(s){s.element.setMap(this)}.bind(n)),n.interactions.addEventListener("remove",function(s){s.element.setMap(null)}.bind(n)),n.overlays_.addEventListener("add",function(s){this.addOverlayInternal_(s.element)}.bind(n)),n.overlays_.addEventListener("remove",function(s){var c=s.element.getId();void 0!==c&&delete this.overlayIdIndex_[c.toString()],s.element.setMap(null)}.bind(n)),n.controls.forEach(function(s){s.setMap(this)}.bind(n)),n.interactions.forEach(function(s){s.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return eC(i,e),i.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},i.prototype.addControl=function(t){this.getControls().push(t)},i.prototype.addInteraction=function(t){this.getInteractions().push(t)},i.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},i.prototype.addOverlay=function(t){this.getOverlays().push(t)},i.prototype.addOverlayInternal_=function(t){var n=t.getId();void 0!==n&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)},i.prototype.disposeInternal=function(){this.setTarget(null),e.prototype.disposeInternal.call(this)},i.prototype.forEachFeatureAtPixel=function(t,n,r){if(this.frameState_){var a=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,!1!==r.checkWrapped,n,null,void 0!==r.layerFilter?r.layerFilter:_t,null)}},i.prototype.getFeaturesAtPixel=function(t,n){var r=[];return this.forEachFeatureAtPixel(t,function(a){r.push(a)},n),r},i.prototype.forEachLayerAtPixel=function(t,n,r){if(this.frameState_){var a=r||{};return this.renderer_.forEachLayerAtPixel(t,this.frameState_,void 0!==a.hitTolerance?a.hitTolerance:0,n,a.layerFilter||_t)}},i.prototype.hasFeatureAtPixel=function(t,n){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,!1!==n.checkWrapped,void 0!==n.layerFilter?n.layerFilter:_t,null)},i.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},i.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},i.prototype.getEventPixel=function(t){var n=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-n.left,r.clientY-n.top]},i.prototype.getTarget=function(){return this.get("target")},i.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},i.prototype.getCoordinateFromPixel=function(t){return er(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},i.prototype.getCoordinateFromPixelInternal=function(t){var n=this.frameState_;return n?de(n.pixelToCoordinateTransform,t.slice()):null},i.prototype.getControls=function(){return this.controls},i.prototype.getOverlays=function(){return this.overlays_},i.prototype.getOverlayById=function(t){var n=this.overlayIdIndex_[t.toString()];return void 0!==n?n:null},i.prototype.getInteractions=function(){return this.interactions},i.prototype.getLayerGroup=function(){return this.get("layergroup")},i.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof Ne)n.setLayers(t);else{var r=n.getLayers();r.clear(),r.extend(t)}},i.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},i.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,r=t.length;n<r;++n){var s=t[n].layer.getSource();if(s&&s.loading)return!0}return!1},i.prototype.getPixelFromCoordinate=function(t){var n=jt(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},i.prototype.getPixelFromCoordinateInternal=function(t){var n=this.frameState_;return n?de(n.coordinateToPixelTransform,t.slice(0,2)):null},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.getSize=function(){return this.get("size")},i.prototype.getView=function(){return this.get("view")},i.prototype.getViewport=function(){return this.viewport_},i.prototype.getOverlayContainer=function(){return this.overlayContainer_},i.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},i.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},i.prototype.getTilePriority=function(t,n,r,a){return function tC(e,i,t,n,r){if(!e||!(t in e.wantedTiles)||!e.wantedTiles[t][i.getKey()])return Vs;var a=e.viewState.center,s=n[0]-a[0],l=n[1]-a[1];return 65536*Math.log(r)+Math.sqrt(s*s+l*l)/r}(this.frameState_,t,n,r,a)},i.prototype.handleBrowserEvent=function(t,n){var a=new ai(n||t.type,this,t);this.handleMapBrowserEvent(a)},i.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var n=t.originalEvent,r=n.type;if("pointerdown"===r||"wheel"===r||"keydown"===r){var a=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():a,l=n.target;if(this.overlayContainerStopEvent_.contains(l)||!(s===a?a.documentElement:s).contains(l))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var c=this.getInteractions().getArray().slice(),h=c.length-1;h>=0;h--){var u=c[h];if(u.getMap()===this&&u.getActive()&&this.getTargetElement()&&(!u.handleEvent(t)||t.propagationStopped))break}}},i.prototype.handlePostRender=function(){var t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var r=this.maxTilesLoading_,a=r;if(t){var s=t.viewHints;if(s[0]||s[1]){var l=Date.now()-t.time>8;r=l?0:8,a=l?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,a))}t&&this.hasListener("rendercomplete")&&!t.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var c=this.postRenderFunctions_,h=0,u=c.length;h<u;++h)c[h](this,t);c.length=0},i.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},i.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var n=0,r=this.keyHandlerKeys_.length;n<r;++n)Lt(this.keyHandlerKeys_[n]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ps(this.viewport_)}if(t){for(var a in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new W2(this,this.moveTolerance_),vt)this.mapBrowserEventHandler_.addEventListener(vt[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!Bd&&{passive:!1});var s=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[ft(s,"keydown",this.handleBrowserEvent,this),ft(s,"keypress",this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},i.prototype.handleTileChange_=function(){this.render()},i.prototype.handleViewPropertyChanged_=function(){this.render()},i.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ft(t,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ft(t,"change",this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},i.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Lt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[ft(t,"propertychange",this.render,this),ft(t,"change",this.render,this)]),this.render()},i.prototype.isRendered=function(){return!!this.frameState_},i.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},i.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,r=t.length;n<r;++n){var a=t[n].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}},i.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},i.prototype.removeControl=function(t){return this.getControls().remove(t)},i.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},i.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},i.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},i.prototype.renderFrame_=function(t){var n=this,r=this.getSize(),a=this.getView(),s=this.frameState_,l=null;if(void 0!==r&&vf(r)&&a&&a.isDef()){var c=a.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=a.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Gr(h.center,h.resolution,h.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:c,wantedTiles:{}},h.nextCenter&&h.nextResolution){var u=isNaN(h.nextRotation)?h.rotation:h.nextRotation;l.nextExtent=Gr(h.nextCenter,h.nextResolution,u,r)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!ws(this.previousExtent_)&&!Ur(l.extent,this.previousExtent_))&&(this.dispatchEvent(new Bs("movestart",this,s)),this.previousExtent_=$i(this.previousExtent_)),this.previousExtent_&&!l.viewHints[0]&&!l.viewHints[1]&&!Ur(l.extent,this.previousExtent_)&&(this.dispatchEvent(new Bs("moveend",this,l)),rf(l.extent,this.previousExtent_))),this.dispatchEvent(new Bs("postrender",this,l)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},i.prototype.setLayerGroup=function(t){this.set("layergroup",t)},i.prototype.setSize=function(t){this.set("size",t)},i.prototype.setTarget=function(t){this.set("target",t)},i.prototype.setView=function(t){if(!t||t instanceof Pi)this.set("view",t);else{this.set("view",new Pi);var n=this;t.then(function(r){n.setView(new Pi(r))})}},i.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var r=getComputedStyle(t),a=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(a)&&!isNaN(s)&&!vf(n=[a,s])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(n),this.updateViewportSize_()},i.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var n=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(n=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(n)}},i}(xn);const rC=nC;var oC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),aC=function(e){function i(t){var n=this,r=t||{};(n=e.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===r.collapsed||r.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==r.collapsible,n.collapsible_=void 0===r.collapsible||r.collapsible,n.collapsible_||(n.collapsed_=!1);var a=void 0!==r.className?r.className:"ol-attribution",s=void 0!==r.tipLabel?r.tipLabel:"Attributions",l=void 0!==r.expandClassName?r.expandClassName:a+"-expand",c=void 0!==r.collapseLabel?r.collapseLabel:"\u203a",h=void 0!==r.collapseClassName?r.collapseClassName:a+"-collpase";"string"==typeof c?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=c,n.collapseLabel_.className=h):n.collapseLabel_=c;var u=void 0!==r.label?r.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=l):n.label_=u;var d=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=s,n.toggleButton_.appendChild(d),n.toggleButton_.addEventListener("click",n.handleClick_.bind(n),!1);var p=n.element;return p.className=a+" "+Zo+" "+Ec+(n.collapsed_&&n.collapsible_?" "+Jd:"")+(n.collapsible_?"":" ol-uncollapsible"),p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return oC(i,e),i.prototype.collectSourceAttributions_=function(t){for(var n={},r=[],a=!0,s=t.layerStatesArray,l=0,c=s.length;l<c;++l){var h=s[l];if(Ls(h,t.viewState)){var u=h.layer.getSource();if(u){var d=u.getAttributions();if(d){var f=d(t);if(f)if(a=a&&!1!==u.getAttributionsCollapsible(),Array.isArray(f))for(var p=0,g=f.length;p<g;++p)f[p]in n||(r.push(f[p]),n[f[p]]=!0);else f in n||(r.push(f),n[f]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(a),r},i.prototype.updateElement_=function(t){if(t){var n=this.collectSourceAttributions_(t),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!st(n,this.renderedAttributions_)){Wd(this.ulElement_);for(var a=0,s=n.length;a<s;++a){var l=document.createElement("li");l.innerHTML=n[a],this.ulElement_.appendChild(l)}this.renderedAttributions_=n}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},i.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},i.prototype.handleToggle_=function(){this.element.classList.toggle(Jd),this.collapsed_?Vd(this.collapseLabel_,this.label_):Vd(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},i.prototype.getCollapsible=function(){return this.collapsible_},i.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},i.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},i.prototype.getCollapsed=function(){return this.collapsed_},i.prototype.render=function(t){this.updateElement_(t.frameState)},i}(Ro);const sC=aC;var lC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cC=function(e){function i(t){var n=this,r=t||{};n=e.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var a=void 0!==r.className?r.className:"ol-rotate",s=void 0!==r.label?r.label:"\u21e7",l=void 0!==r.compassClassName?r.compassClassName:"ol-compass";n.label_=null,"string"==typeof s?(n.label_=document.createElement("span"),n.label_.className=l,n.label_.textContent=s):(n.label_=s,n.label_.classList.add(l));var c=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=a+"-reset",h.setAttribute("type","button"),h.title=c,h.appendChild(n.label_),h.addEventListener("click",n.handleClick_.bind(n),!1);var d=n.element;return d.className=a+" "+Zo+" "+Ec,d.appendChild(h),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=void 0!==r.duration?r.duration:250,n.autoHide_=void 0===r.autoHide||r.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(gs),n}return lC(i,e),i.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},i.prototype.resetNorth_=function(){var n=this.getMap().getView();if(n){var r=n.getRotation();void 0!==r&&(this.duration_>0&&r%(2*Math.PI)!=0?n.animate({rotation:0,duration:this.duration_,easing:Vr}):n.setRotation(0))}},i.prototype.render=function(t){var n=t.frameState;if(n){var r=n.viewState.rotation;if(r!=this.rotation_){var a="rotate("+r+"rad)";if(this.autoHide_){var s=this.element.classList.contains(gs);s||0!==r?s&&0!==r&&this.element.classList.remove(gs):this.element.classList.add(gs)}this.label_.style.transform=a}this.rotation_=r}},i}(Ro);const hC=cC;var uC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),dC=function(e){function i(t){var n=this,r=t||{};n=e.call(this,{element:document.createElement("div"),target:r.target})||this;var a=void 0!==r.className?r.className:"ol-zoom",s=void 0!==r.delta?r.delta:1,l=void 0!==r.zoomInClassName?r.zoomInClassName:a+"-in",c=void 0!==r.zoomOutClassName?r.zoomOutClassName:a+"-out",h=void 0!==r.zoomInLabel?r.zoomInLabel:"+",u=void 0!==r.zoomOutLabel?r.zoomOutLabel:"\u2013",d=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",f=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=l,p.setAttribute("type","button"),p.title=d,p.appendChild("string"==typeof h?document.createTextNode(h):h),p.addEventListener("click",n.handleClick_.bind(n,s),!1);var g=document.createElement("button");g.className=c,g.setAttribute("type","button"),g.title=f,g.appendChild("string"==typeof u?document.createTextNode(u):u),g.addEventListener("click",n.handleClick_.bind(n,-s),!1);var m=n.element;return m.className=a+" "+Zo+" "+Ec,m.appendChild(p),m.appendChild(g),n.duration_=void 0!==r.duration?r.duration:250,n}return uC(i,e),i.prototype.handleClick_=function(t,n){n.preventDefault(),this.zoomByDelta_(t)},i.prototype.zoomByDelta_=function(t){var r=this.getMap().getView();if(r){var a=r.getZoom();if(void 0!==a){var s=r.getConstrainedZoom(a+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:Vr})):r.setZoom(s)}}},i}(Ro);const fC=dC;var gC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_C=function(e){function i(t){var n=e.call(this)||this;return t&&t.handleEvent&&(n.handleEvent=t.handleEvent),n.map_=null,n.setActive(!0),n}return gC(i,e),i.prototype.getActive=function(){return this.get("active")},i.prototype.getMap=function(){return this.map_},i.prototype.handleEvent=function(t){return!0},i.prototype.setActive=function(t){this.set("active",t)},i.prototype.setMap=function(t){this.map_=t},i}(xn);function Ah(e,i,t,n){var r=e.getZoom();if(void 0!==r){var a=e.getConstrainedZoom(r+i),s=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:s,anchor:t,duration:void 0!==n?n:250,easing:Vr})}}const Jr=_C;var vC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yC=function(e){function i(t){var n=e.call(this)||this,r=t||{};return n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:250,n}return vC(i,e),i.prototype.handleEvent=function(t){var n=!1;if(t.type==vt.DBLCLICK){var r=t.originalEvent,s=t.coordinate,l=r.shiftKey?-this.delta_:this.delta_;Ah(t.map.getView(),l,s,this.duration_),r.preventDefault(),n=!0}return!n},i}(Jr);const xC=yC;var CC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),bC=function(e){function i(t){var n=this,r=t||{};return n=e.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return CC(i,e),i.prototype.getPointerCount=function(){return this.targetPointers.length},i.prototype.handleDownEvent=function(t){return!1},i.prototype.handleDragEvent=function(t){},i.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==vt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==vt.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==vt.POINTERDOWN){var a=this.handleDownEvent(t);this.handlingDownUpSequence=a,n=this.stopDown(a)}else t.type==vt.POINTERMOVE&&this.handleMoveEvent(t);return!n},i.prototype.handleMoveEvent=function(t){},i.prototype.handleUpEvent=function(t){return!1},i.prototype.stopDown=function(t){return t},i.prototype.updateTrackedPointers_=function(t){if(function TC(e){var i=e.type;return i===vt.POINTERDOWN||i===vt.POINTERDRAG||i===vt.POINTERUP}(t)){var n=t.originalEvent,r=n.pointerId.toString();t.type==vt.POINTERUP?delete this.trackedPointers_[r]:(t.type==vt.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=n),this.targetPointers=Io(this.trackedPointers_)}},i}(Jr);function Eh(e){for(var i=e.length,t=0,n=0,r=0;r<i;r++)t+=e[r].clientX,n+=e[r].clientY;return[t/i,n/i]}const Oi=bC;function Ih(e){var i=arguments;return function(t){for(var n=!0,r=0,a=i.length;r<a&&(n=n&&i[r](t));++r);return n}}var wC=function(e){var i=e.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},bp=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||function(e){return e.target.getTargetElement().contains(document.activeElement)}(e)},Dh=_t,Tp=function(e){var i=e.originalEvent;return 0==i.button&&!($0&&Q0&&i.ctrlKey)},Mp=Gt,wp=function(e){return e.type==vt.SINGLECLICK},Rh=function(e){var i=e.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey},Zh=function(e){var i=e.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},Pp=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t},Lh=function(e){var i=e.originalEvent;return ut(void 0!==i,56),"mouse"==i.pointerType},Op=function(e){var i=e.originalEvent;return ut(void 0!==i,56),i.isPrimary&&0===i.button},OC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),SC=function(e){function i(t){var n=e.call(this,{stopDown:Gt})||this,r=t||{};n.kinetic_=r.kinetic,n.lastCentroid=null,n.panning_=!1;var a=r.condition?r.condition:Ih(Rh,Op);return n.condition_=r.onFocusOnly?Ih(bp,a):a,n.noKinetic_=!1,n}return OC(i,e),i.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,r=Eh(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var a=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],l=t.map.getView();(function U1(e,i){e[0]*=i,e[1]*=i})(a,l.getResolution()),Uc(a,l.getRotation()),l.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},i.prototype.handleUpEvent=function(t){var n=t.map,r=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var a=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),l=r.getCenterInternal(),c=n.getPixelFromCoordinateInternal(l),h=n.getCoordinateFromPixelInternal([c[0]-a*Math.cos(s),c[1]-a*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(h),duration:500,easing:Vr})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var r=t.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},i}(Oi);const AC=SC;var EC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),IC=function(e){function i(t){var n=this,r=t||{};return(n=e.call(this,{stopDown:Gt})||this).condition_=r.condition?r.condition:wC,n.lastAngle_=void 0,n.duration_=void 0!==r.duration?r.duration:250,n}return EC(i,e),i.prototype.handleDragEvent=function(t){if(Lh(t)){var n=t.map,r=n.getView();if(r.getConstraints().rotation!==gh){var a=n.getSize(),s=t.pixel,l=Math.atan2(a[1]/2-s[1],s[0]-a[0]/2);void 0!==this.lastAngle_&&r.adjustRotationInternal(-(l-this.lastAngle_)),this.lastAngle_=l}}},i.prototype.handleUpEvent=function(t){return!Lh(t)||(t.map.getView().endInteraction(this.duration_),!1)},i.prototype.handleDownEvent=function(t){return!(!Lh(t)||!Tp(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},i}(Oi);const DC=IC;var RC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ZC=function(e){function i(t){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+t,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return RC(i,e),i.prototype.disposeInternal=function(){this.setMap(null)},i.prototype.render_=function(){var t=this.startPixel_,n=this.endPixel_,r="px",a=this.element_.style;a.left=Math.min(t[0],n[0])+r,a.top=Math.min(t[1],n[1])+r,a.width=Math.abs(n[0]-t[0])+r,a.height=Math.abs(n[1]-t[1])+r},i.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},i.prototype.setPixels=function(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},i.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,n=this.endPixel_,a=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new Wr([a])},i.prototype.getGeometry=function(){return this.geometry_},i}(Zn);const LC=ZC;var Sp=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),kh=function(e){function i(t,n,r){var a=e.call(this,t)||this;return a.coordinate=n,a.mapBrowserEvent=r,a}return Sp(i,e),i}(ye),kC=function(e){function i(t){var n=e.call(this)||this,r=t||{};return n.box_=new LC(r.className||"ol-dragbox"),n.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.startPixel_=null,n.condition_=r.condition?r.condition:Tp,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return Sp(i,e),i.prototype.defaultBoxEndCondition=function(t,n,r){var a=r[0]-n[0],s=r[1]-n[1];return a*a+s*s>=this.minArea_},i.prototype.getGeometry=function(){return this.box_.getGeometry()},i.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new kh("boxdrag",t.coordinate,t))},i.prototype.handleUpEvent=function(t){this.box_.setMap(null);var n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new kh(n?"boxend":"boxcancel",t.coordinate,t)),!1},i.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new kh("boxstart",t.coordinate,t)),!0)},i.prototype.onBoxEnd=function(t){},i}(Oi);const NC=kC;var FC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),UC=function(e){function i(t){var n=this,r=t||{};return(n=e.call(this,{condition:r.condition?r.condition:Zh,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return FC(i,e),i.prototype.onBoxEnd=function(t){var r=this.getMap().getView(),a=this.getGeometry();if(this.out_){var s=r.rotatedExtentForGeometry(a),l=r.getResolutionForExtentInternal(s),c=r.getResolution()/l;(a=a.clone()).scale(c*c)}r.fitInternal(a,{duration:this.duration_,easing:Vr})},i}(NC);const qC=UC;var GC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),jC=function(e){function i(t){var n=e.call(this)||this,r=t||{};return n.defaultCondition_=function(a){return Rh(a)&&Pp(a)},n.condition_=void 0!==r.condition?r.condition:n.defaultCondition_,n.duration_=void 0!==r.duration?r.duration:100,n.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,n}return GC(i,e),i.prototype.handleEvent=function(t){var n=!1;if("keydown"==t.type){var r=t.originalEvent,a=r.keyCode;if(this.condition_(t)&&(40==a||37==a||39==a||38==a)){var l=t.map.getView(),c=l.getResolution()*this.pixelDelta_,h=0,u=0;40==a?u=-c:37==a?h=-c:39==a?h=c:u=c;var d=[h,u];Uc(d,l.getRotation()),function mC(e,i,t){var n=e.getCenterInternal();n&&e.animateInternal({duration:void 0!==t?t:250,easing:s2,center:e.getConstrainedCenter([n[0]+i[0],n[1]+i[1]])})}(l,d,this.duration_),r.preventDefault(),n=!0}}return!n},i}(Jr);const zC=jC;var YC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),HC=function(e){function i(t){var n=e.call(this)||this,r=t||{};return n.condition_=r.condition?r.condition:Pp,n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:100,n}return YC(i,e),i.prototype.handleEvent=function(t){var n=!1;if("keydown"==t.type||"keypress"==t.type){var r=t.originalEvent,a=r.charCode;if(this.condition_(t)&&(a=="+".charCodeAt(0)||a=="-".charCodeAt(0))){var s=t.map,l=a=="+".charCodeAt(0)?this.delta_:-this.delta_;Ah(s.getView(),l,void 0,this.duration_),r.preventDefault(),n=!0}}return!n},i}(Jr);const BC=HC;var VC=function(){function e(i,t,n){this.decay_=i,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(i,t){this.points_.push(i,t,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var i=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<i)return!1;for(var n=t-3;n>0&&this.points_[n+2]>i;)n-=3;var r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;var a=this.points_[t]-this.points_[n],s=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(s,a),this.initialVelocity_=Math.sqrt(a*a+s*s)/r,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}();const WC=VC;var JC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),XC=function(e){function i(t){var n=this,r=t||{};(n=e.call(this,r)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,n.duration_=void 0!==r.duration?r.duration:250,n.timeout_=void 0!==r.timeout?r.timeout:80,n.useAnchor_=void 0===r.useAnchor||r.useAnchor,n.constrainResolution_=void 0!==r.constrainResolution&&r.constrainResolution;var a=r.condition?r.condition:Dh;return n.condition_=r.onFocusOnly?Ih(bp,a):a,n.lastAnchor_=null,n.startTime_=void 0,n.mode_=void 0,n.trackpadEventGap_=400,n.deltaPerZoom_=300,n}return JC(i,e),i.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},i.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if("wheel"!==t.type)return!0;var s,r=t.map,a=t.originalEvent;if(a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),"wheel"==t.type&&(s=a.deltaY,X0&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Hd),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;var l=Date.now();void 0===this.startTime_&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");var c=r.getView();if("trackpad"===this.mode_&&!c.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=l,!1;this.totalDelta_+=s;var h=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),h),!1},i.prototype.handleWheelZoom_=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var r=-te(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Ah(n,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},i.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},i}(Jr);const $C=XC;var QC=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),KC=function(e){function i(t){var n=this,r=t||{},a=r;return a.stopDown||(a.stopDown=Gt),(n=e.call(this,a)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return QC(i,e),i.prototype.handleDragEvent=function(t){var n=0,r=this.targetPointers[0],a=this.targetPointers[1],s=Math.atan2(a.clientY-r.clientY,a.clientX-r.clientX);if(void 0!==this.lastAngle_){var l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;var c=t.map,h=c.getView();if(h.getConstraints().rotation!==gh){var u=c.getViewport().getBoundingClientRect(),d=Eh(this.targetPointers);d[0]-=u.left,d[1]-=u.top,this.anchor_=c.getCoordinateFromPixelInternal(d),this.rotating_&&(c.render(),h.adjustRotationInternal(n,this.anchor_))}},i.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},i}(Oi);const tb=KC;var eb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nb=function(e){function i(t){var n=this,r=t||{},a=r;return a.stopDown||(a.stopDown=Gt),(n=e.call(this,a)||this).anchor_=null,n.duration_=void 0!==r.duration?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return eb(i,e),i.prototype.handleDragEvent=function(t){var n=1,r=this.targetPointers[0],a=this.targetPointers[1],s=r.clientX-a.clientX,l=r.clientY-a.clientY,c=Math.sqrt(s*s+l*l);void 0!==this.lastDistance_&&(n=this.lastDistance_/c),this.lastDistance_=c;var h=t.map,u=h.getView();1!=n&&(this.lastScaleDelta_=n);var d=h.getViewport().getBoundingClientRect(),f=Eh(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=h.getCoordinateFromPixelInternal(f),h.render(),u.adjustResolutionInternal(n,this.anchor_)},i.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},i.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},i}(Oi);const ib=nb;var ob=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ab=function(e){function i(t){return(t=dt({},t)).controls||(t.controls=function pC(e){var i=e||{},t=new Ne;return(void 0===i.zoom||i.zoom)&&t.push(new fC(i.zoomOptions)),(void 0===i.rotate||i.rotate)&&t.push(new hC(i.rotateOptions)),(void 0===i.attribution||i.attribution)&&t.push(new sC(i.attributionOptions)),t}()),t.interactions||(t.interactions=function rb(e){var i=e||{},t=new Ne,n=new WC(-.005,.05,100);return(void 0===i.altShiftDragRotate||i.altShiftDragRotate)&&t.push(new DC),(void 0===i.doubleClickZoom||i.doubleClickZoom)&&t.push(new xC({delta:i.zoomDelta,duration:i.zoomDuration})),(void 0===i.dragPan||i.dragPan)&&t.push(new AC({onFocusOnly:i.onFocusOnly,kinetic:n})),(void 0===i.pinchRotate||i.pinchRotate)&&t.push(new tb),(void 0===i.pinchZoom||i.pinchZoom)&&t.push(new ib({duration:i.zoomDuration})),(void 0===i.keyboard||i.keyboard)&&(t.push(new zC),t.push(new BC({delta:i.zoomDelta,duration:i.zoomDuration}))),(void 0===i.mouseWheelZoom||i.mouseWheelZoom)&&t.push(new $C({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(void 0===i.shiftDragZoom||i.shiftDragZoom)&&t.push(new qC({duration:i.zoomDuration})),t}({onFocusOnly:!0})),e.call(this,t)||this}return ob(i,e),i.prototype.createRenderer=function(){return new F2(this)},i}(rC);const sb=ab;var lb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cb=function(e){function i(t){var n=this,r=t||{},a=dt({},r);return delete a.preload,delete a.useInterimTilesOnError,(n=e.call(this,a)||this).setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return lb(i,e),i.prototype.getPreload=function(){return this.get("preload")},i.prototype.setPreload=function(t){this.set("preload",t)},i.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},i.prototype.setUseInterimTilesOnError=function(t){this.set("useInterimTilesOnError",t)},i}(eh);const hb=cb;var Ap=function(){function e(i,t,n,r){this.minX=i,this.maxX=t,this.minY=n,this.maxY=r}return e.prototype.contains=function(i){return this.containsXY(i[1],i[2])},e.prototype.containsTileRange=function(i){return this.minX<=i.minX&&i.maxX<=this.maxX&&this.minY<=i.minY&&i.maxY<=this.maxY},e.prototype.containsXY=function(i,t){return this.minX<=i&&i<=this.maxX&&this.minY<=t&&t<=this.maxY},e.prototype.equals=function(i){return this.minX==i.minX&&this.minY==i.minY&&this.maxX==i.maxX&&this.maxY==i.maxY},e.prototype.extend=function(i){i.minX<this.minX&&(this.minX=i.minX),i.maxX>this.maxX&&(this.maxX=i.maxX),i.minY<this.minY&&(this.minY=i.minY),i.maxY>this.maxY&&(this.maxY=i.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(i){return this.minX<=i.maxX&&this.maxX>=i.minX&&this.minY<=i.maxY&&this.maxY>=i.minY},e}();function Xr(e,i,t,n,r){return void 0!==r?(r.minX=e,r.maxX=i,r.minY=t,r.maxY=n,r):new Ap(e,i,t,n)}const Ep=Ap;var ub=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ip=function(e){function i(t){var n=e.call(this,t)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedProjection=null,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new Ep(0,0,0,0),n}return ub(i,e),i.prototype.isDrawableTile=function(t){var n=this.getLayer(),r=t.getState(),a=n.getUseInterimTilesOnError();return 2==r||4==r||3==r&&!a},i.prototype.getTile=function(t,n,r,a){var s=a.pixelRatio,l=a.viewState.projection,c=this.getLayer(),u=c.getSource().getTile(t,n,r,s,l);return 3==u.getState()&&(c.getUseInterimTilesOnError()?c.getPreload()>0&&(this.newTiles_=!0):u.setState(2)),this.isDrawableTile(u)||(u=u.getInterimTile()),u},i.prototype.loadedTileCallback=function(t,n,r){return!!this.isDrawableTile(r)&&e.prototype.loadedTileCallback.call(this,t,n,r)},i.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},i.prototype.renderFrame=function(t,n){var r=t.layerStatesArray[t.layerIndex],a=t.viewState,s=a.projection,l=a.resolution,c=a.center,h=a.rotation,u=t.pixelRatio,d=this.getLayer(),f=d.getSource(),p=f.getRevision(),g=f.getTileGridForProjection(s),_=g.getZForResolution(l,f.zDirection),m=g.getResolution(_),v=t.extent,y=r.extent&&Nn(r.extent);y&&(v=mi(v,Nn(r.extent)));var C=f.getTilePixelRatio(u),x=Math.round(t.size[0]*C),b=Math.round(t.size[1]*C);if(h){var T=Math.round(Math.sqrt(x*x+b*b));x=T,b=T}var M=m*x/2/C,w=m*b/2/C,P=[c[0]-M,c[1]-w,c[0]+M,c[1]+w],D=g.getTileRangeForExtentAndZ(v,_),R={};R[_]={};var L=this.createLoadedTileFinder(f,s,R),G=this.tmpExtent,W=this.tmpTileRange_;this.newTiles_=!1;for(var Z=D.minX;Z<=D.maxX;++Z)for(var F=D.minY;F<=D.maxY;++F){var j=this.getTile(_,Z,F,t);if(this.isDrawableTile(j)){var ot=at(this);if(2==j.getState()){R[_][j.tileCoord.toString()]=j;var pt=j.inTransition(ot);!this.newTiles_&&(pt||-1===this.renderedTiles.indexOf(j))&&(this.newTiles_=!0)}if(1===j.getAlpha(ot,t.time))continue}var xt=g.getTileCoordChildTileRange(j.tileCoord,W,G),Rt=!1;xt&&(Rt=L(_+1,xt)),Rt||g.forEachTileCoordParentTileRange(j.tileCoord,L,W,G)}var I=m/l;ln(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/C,1/C,h,-x/2,-b/2);var Nt=Us(this.pixelTransform);this.useContainer(n,Nt,r.opacity);var nt=this.context,Zt=nt.canvas;Jo(this.inversePixelTransform,this.pixelTransform),ln(this.tempTransform,x/2,b/2,I,I,0,-x/2,-b/2),Zt.width!=x||Zt.height!=b?(Zt.width=x,Zt.height=b):this.containerReused||nt.clearRect(0,0,x,b),y&&this.clipUnrotated(nt,t,y),dt(nt,f.getContextOptions()),this.preRender(nt,t),this.renderedTiles.length=0;var Re,Pe,Ge,Yt=Object.keys(R).map(Number);Yt.sort(O),1!==r.opacity||this.containerReused&&!f.getOpaque(t.viewState.projection)?(Re=[],Pe=[]):Yt=Yt.reverse();for(var wo=Yt.length-1;wo>=0;--wo){var Jn=Yt[wo],yc=f.getTilePixelSize(Jn,u,s),ji=g.getResolution(Jn)/m,Po=yc[0]*ji*I,Cc=yc[1]*ji*I,ts=g.getTileCoordForCoordAndZ(Qi(P),Jn),bc=g.getTileCoordExtent(ts),Ar=de(this.tempTransform,[C*(bc[0]-P[0])/m,C*(P[3]-bc[3])/m]),es=C*f.getGutterForProjection(s),Tc=R[Jn];for(var Oo in Tc){var zi=(j=Tc[Oo]).tileCoord,So=ts[1]-zi[1],Zd=Math.round(Ar[0]-(So-1)*Po),Mc=ts[2]-zi[2],ns=Math.round(Ar[1]-(Mc-1)*Cc),Yi=Zd-(Z=Math.round(Ar[0]-So*Po)),_i=ns-(F=Math.round(Ar[1]-Mc*Cc)),Er=_===Jn;if(!(pt=Er&&1!==j.getAlpha(at(this),t.time)))if(Re){nt.save(),Ge=[Z,F,Z+Yi,F,Z+Yi,F+_i,Z,F+_i];for(var Ao=0,Dn=Re.length;Ao<Dn;++Ao)if(_!==Jn&&Jn<Pe[Ao]){var Rn=Re[Ao];nt.beginPath(),nt.moveTo(Ge[0],Ge[1]),nt.lineTo(Ge[2],Ge[3]),nt.lineTo(Ge[4],Ge[5]),nt.lineTo(Ge[6],Ge[7]),nt.moveTo(Rn[6],Rn[7]),nt.lineTo(Rn[4],Rn[5]),nt.lineTo(Rn[2],Rn[3]),nt.lineTo(Rn[0],Rn[1]),nt.clip()}Re.push(Ge),Pe.push(Jn)}else nt.clearRect(Z,F,Yi,_i);this.drawTileImage(j,t,Z,F,Yi,_i,es,Er),Re&&!pt?(nt.restore(),this.renderedTiles.unshift(j)):this.renderedTiles.push(j),this.updateUsedTiles(t.usedTiles,f,j)}}this.renderedRevision=p,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Ur(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(t,f,g,u,s,v,_,d.getPreload()),this.scheduleExpireCache(t,f),this.postRender(nt,t),r.extent&&nt.restore(),Nt!==Zt.style.transform&&(Zt.style.transform=Nt);var Ir=Ic(r.opacity),Eo=this.container;return Ir!==Eo.style.opacity&&(Eo.style.opacity=Ir),this.container},i.prototype.drawTileImage=function(t,n,r,a,s,l,c,h){var u=this.getTileImage(t);if(u){var d=at(this),f=h?t.getAlpha(d,n.time):1,p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,c,c,u.width-2*c,u.height-2*c,r,a,s,l),p&&this.context.restore(),1!==f?n.animate=!0:h&&t.endTransition(d)}},i.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},i.prototype.getTileImage=function(t){return t.getImage()},i.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var r=function(a,s,l){var c=at(a);c in l.usedTiles&&a.expireCache(l.viewState.projection,l.usedTiles[c])}.bind(null,n);t.postRenderFunctions.push(r)}},i.prototype.updateUsedTiles=function(t,n,r){var a=at(n);a in t||(t[a]={}),t[a][r.getKey()]=!0},i.prototype.manageTilePyramid=function(t,n,r,a,s,l,c,h,u){var d=at(n);d in t.wantedTiles||(t.wantedTiles[d]={});var m,v,y,C,x,b,f=t.wantedTiles[d],p=t.tileQueue,_=0;for(b=r.getMinZoom();b<=c;++b)for(v=r.getTileRangeForExtentAndZ(l,b,v),y=r.getResolution(b),C=v.minX;C<=v.maxX;++C)for(x=v.minY;x<=v.maxY;++x)c-b<=h?(++_,0==(m=n.getTile(b,C,x,a,s)).getState()&&(f[m.getKey()]=!0,p.isKeyQueued(m.getKey())||p.enqueue([m,d,r.getTileCoordCenter(m.tileCoord),y])),void 0!==u&&u(m)):n.useTile(b,C,x,s);n.updateCacheSize(_,s)},i}(oh);const db=Ip;var fb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pb=function(e){function i(t){return e.call(this,t)||this}return fb(i,e),i.prototype.createRenderer=function(){return new db(this)},i}(hb);const Xs=pb;var Si="1.3.0",Fh={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},gb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_b=function(e){function i(t,n,r){var a=e.call(this)||this,s=r||{};return a.tileCoord=t,a.state=n,a.interimTile=null,a.key="",a.transition_=void 0===s.transition?250:s.transition,a.transitionStarts_={},a}return gb(i,e),i.prototype.changed=function(){this.dispatchEvent("change")},i.prototype.release=function(){},i.prototype.getKey=function(){return this.key+"/"+this.tileCoord},i.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},i.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,n=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?n=t:0==t.getState()?n.interimTile=t.interimTile:n=t,t=n.interimTile}while(t)}},i.prototype.getTileCoord=function(){return this.tileCoord},i.prototype.getState=function(){return this.state},i.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},i.prototype.load=function(){tt()},i.prototype.getAlpha=function(t,n){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else this.transitionStarts_[t]=r=n;var a=n-r+1e3/60;return a>=this.transition_?1:cp(a/this.transition_)},i.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},i.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},i}(Rr);const Dp=_b;var mb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vb=function(e){function i(t,n,r,a,s,l){var c=e.call(this,t,n,l)||this;return c.crossOrigin_=a,c.src_=r,c.key=r,c.image_=new Image,null!==a&&(c.image_.crossOrigin=a),c.unlisten_=null,c.tileLoadFunction_=s,c}return mb(i,e),i.prototype.getImage=function(){return this.image_},i.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},i.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function yb(){var e=sn(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}(),this.changed()},i.prototype.handleImageLoad_=function(){var t=this.image_;this.state=t.naturalWidth&&t.naturalHeight?2:4,this.unlistenImage_(),this.changed()},i.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=hh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},i.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},i}(Dp);const xb=vb;var bb=function(){function e(i,t,n,r,a,s){this.sourceProj_=i,this.targetProj_=t;var l={},c=No(this.targetProj_,this.sourceProj_);this.transformInv_=function(C){var x=C[0]+"/"+C[1];return l[x]||(l[x]=c(C)),l[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&kt(r)==kt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?kt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?kt(this.targetProj_.getExtent()):null;var h=Qi(n),u=Ms(n),d=Ts(n),f=bs(n),p=this.transformInv_(h),g=this.transformInv_(u),_=this.transformInv_(d),m=this.transformInv_(f),v=10+(s?Math.max(0,Math.ceil(h1(Cs(n)/(s*s*256*256)))):0);if(this.addQuad_(h,u,d,f,p,g,_,m,v),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach(function(C,x,b){y=Math.min(y,C.source[0][0],C.source[1][0],C.source[2][0])}),this.triangles_.forEach(function(C){if(Math.max(C.source[0][0],C.source[1][0],C.source[2][0])-y>this.sourceWorldWidth_/2){var x=[[C.source[0][0],C.source[0][1]],[C.source[1][0],C.source[1][1]],[C.source[2][0],C.source[2][1]]];x[0][0]-y>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-y>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-y>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);var b=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-b<this.sourceWorldWidth_/2&&(C.source=x)}}.bind(this))}l={}}return e.prototype.addTriangle_=function(i,t,n,r,a,s){this.triangles_.push({source:[r,a,s],target:[i,t,n]})},e.prototype.addQuad_=function(i,t,n,r,a,s,l,c,h){var u=xe([a,s,l,c]),d=this.sourceWorldWidth_?kt(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1,g=!1;if(h>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(g=kt(xe([i,t,n,r]))/this.targetWorldWidth_>.25||g),!p&&this.sourceProj_.isGlobal()&&d&&(g=d>.25||g)),!(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||Le(u,this.maxSourceExtent_)){var v=0;if(!(g||isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(c[0])&&isFinite(c[1])))if(h>0)g=!0;else if(1!=(v=(isFinite(a[0])&&isFinite(a[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1))&&2!=v&&4!=v&&8!=v)return;if(h>0){if(!g){var C=this.transformInv_([(i[0]+n[0])/2,(i[1]+n[1])/2]),x=void 0;x=p?($n(a[0],f)+$n(l[0],f))/2-$n(C[0],f):(a[0]+l[0])/2-C[0];var T=(a[1]+l[1])/2-C[1];g=x*x+T*T>this.errorThresholdSquared_}if(g){if(Math.abs(i[0]-n[0])<=Math.abs(i[1]-n[1])){var w=[(t[0]+n[0])/2,(t[1]+n[1])/2],P=this.transformInv_(w),D=[(r[0]+i[0])/2,(r[1]+i[1])/2],R=this.transformInv_(D);this.addQuad_(i,t,w,D,a,s,P,R,h-1),this.addQuad_(D,w,n,r,R,P,l,c,h-1)}else{var L=[(i[0]+t[0])/2,(i[1]+t[1])/2],G=this.transformInv_(L),W=[(n[0]+r[0])/2,(n[1]+r[1])/2],Z=this.transformInv_(W);this.addQuad_(i,L,W,r,a,G,Z,c,h-1),this.addQuad_(L,t,n,W,G,s,l,Z,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&v)&&this.addTriangle_(i,n,r,a,l,c),0==(14&v)&&this.addTriangle_(i,n,t,a,l,s),v&&(0==(13&v)&&this.addTriangle_(t,r,i,s,c,a),0==(7&v)&&this.addTriangle_(t,r,n,s,c,l))}},e.prototype.calculateSourceExtent=function(){var i=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(t,n,r){var a=t.source;qr(i,a[0]),qr(i,a[1]),qr(i,a[2])}),i},e.prototype.getTriangles=function(){return this.triangles_},e}();const Lp=bb;var Uh;function kp(e,i,t,n,r){e.beginPath(),e.moveTo(0,0),e.lineTo(i,t),e.lineTo(n,r),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(i,n)+1,Math.max(t,r)),e.restore()}function qh(e,i){return Math.abs(e[4*i]-210)>2||Math.abs(e[4*i+3]-191.25)>2}function $o(e,i,t,n){var r=tr(t,i,e),a=Ss(i,n,t),s=i.getMetersPerUnit();void 0!==s&&(a*=s);var l=e.getMetersPerUnit();void 0!==l&&(a/=l);var c=e.getExtent();if(!c||ys(c,r)){var h=Ss(e,a,r)/a;isFinite(h)&&h>0&&(a/=h)}return a}function Np(e,i,t,n,r,a,s,l,c,h,u,d){var f=sn(Math.round(t*e),Math.round(t*i));if(dt(f,d),0===c.length)return f.canvas;function p(x){return Math.round(x*t)/t}f.scale(t,t),f.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];c.forEach(function(x,b,T){af(g,x.extent)});var _=kt(g),m=Oe(g),v=sn(Math.round(t*_/n),Math.round(t*m/n));dt(v,d);var y=t/n;c.forEach(function(x,b,T){var M=x.extent[0]-g[0],w=-(x.extent[3]-g[3]),P=kt(x.extent),D=Oe(x.extent);x.image.width>0&&x.image.height>0&&v.drawImage(x.image,h,h,x.image.width-2*h,x.image.height-2*h,M*y,w*y,P*y,D*y)});var C=Qi(s);return l.getTriangles().forEach(function(x,b,T){var M=x.source,w=x.target,P=M[0][0],D=M[0][1],R=M[1][0],L=M[1][1],G=M[2][0],W=M[2][1],Z=p((w[0][0]-C[0])/a),F=p(-(w[0][1]-C[1])/a),j=p((w[1][0]-C[0])/a),ot=p(-(w[1][1]-C[1])/a),pt=p((w[2][0]-C[0])/a),xt=p(-(w[2][1]-C[1])/a),Rt=P,I=D;P=0,D=0;var nt=function d1(e){for(var i=e.length,t=0;t<i;t++){for(var n=t,r=Math.abs(e[t][t]),a=t+1;a<i;a++){var s=Math.abs(e[a][t]);s>r&&(r=s,n=a)}if(0===r)return null;var l=e[n];e[n]=e[t],e[t]=l;for(var c=t+1;c<i;c++)for(var h=-e[c][t]/e[t][t],u=t;u<i+1;u++)t==u?e[c][u]=0:e[c][u]+=h*e[t][u]}for(var d=new Array(i),f=i-1;f>=0;f--){d[f]=e[f][i]/e[f][f];for(var p=f-1;p>=0;p--)e[p][i]-=e[p][f]*d[f]}return d}([[R-=Rt,L-=I,0,0,j-Z],[G-=Rt,W-=I,0,0,pt-Z],[0,0,R,L,ot-F],[0,0,G,W,xt-F]]);if(nt){if(f.save(),f.beginPath(),function Tb(){if(void 0===Uh){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",kp(e,4,5,4,0),kp(e,4,5,0,5);var i=e.getImageData(0,0,3,3).data;Uh=qh(i,0)||qh(i,4)||qh(i,8)}return Uh}()||d===Fh){f.moveTo(j,ot);for(var Yt=Z-j,Re=F-ot,Pe=0;Pe<4;Pe++)f.lineTo(j+p((Pe+1)*Yt/4),ot+p(Pe*Re/3)),3!=Pe&&f.lineTo(j+p((Pe+1)*Yt/4),ot+p((Pe+1)*Re/3));f.lineTo(pt,xt)}else f.moveTo(j,ot),f.lineTo(Z,F),f.lineTo(pt,xt);f.clip(),f.transform(nt[0],nt[2],nt[1],nt[3],Z,F),f.translate(g[0]-Rt,g[3]-I),f.scale(n/t,-n/t),f.drawImage(v.canvas,0,0),f.restore()}}),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,l.getTriangles().forEach(function(x,b,T){var M=x.target,w=(M[0][0]-C[0])/a,P=-(M[0][1]-C[1])/a,D=(M[1][0]-C[0])/a,R=-(M[1][1]-C[1])/a,L=(M[2][0]-C[0])/a,G=-(M[2][1]-C[1])/a;f.beginPath(),f.moveTo(D,R),f.lineTo(w,P),f.lineTo(L,G),f.closePath(),f.stroke()}),f.restore()),f.canvas}var wb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pb=function(e){function i(t,n,r,a,s,l,c,h,u,d,f,p){var g=e.call(this,s,0)||this;g.renderEdges_=void 0!==f&&f,g.contextOptions_=p,g.pixelRatio_=c,g.gutter_=h,g.canvas_=null,g.sourceTileGrid_=n,g.targetTileGrid_=a,g.wrappedTileCoord_=l||s,g.sourceTiles_=[],g.sourcesListenerKeys_=null,g.sourceZ_=0;var _=a.getTileCoordExtent(g.wrappedTileCoord_),m=g.targetTileGrid_.getExtent(),v=g.sourceTileGrid_.getExtent(),y=m?mi(_,m):_;if(0===Cs(y))return g.state=4,g;var C=t.getExtent();C&&(v=v?mi(v,C):C);var x=a.getResolution(g.wrappedTileCoord_[0]),b=function Mb(e,i,t,n){var r=je(t),a=$o(e,i,r,n);return(!isFinite(a)||a<=0)&&Lc(t,function(s){return a=$o(e,i,s,n),isFinite(a)&&a>0}),a}(t,r,y,x);if(!isFinite(b)||b<=0)return g.state=4,g;if(g.triangulation_=new Lp(t,r,y,v,b*(void 0!==d?d:.5),x),0===g.triangulation_.getTriangles().length)return g.state=4,g;g.sourceZ_=n.getZForResolution(b);var M=g.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(M[1]=te(M[1],v[1],v[3]),M[3]=te(M[3],v[1],v[3])):M=mi(M,v)),Cs(M)){for(var w=n.getTileRangeForExtentAndZ(M,g.sourceZ_),P=w.minX;P<=w.maxX;P++)for(var D=w.minY;D<=w.maxY;D++){var R=u(g.sourceZ_,P,D,c);R&&g.sourceTiles_.push(R)}0===g.sourceTiles_.length&&(g.state=4)}else g.state=4;return g}return wb(i,e),i.prototype.getImage=function(){return this.canvas_},i.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(u,d,f){u&&2==u.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(u.tileCoord),image:u.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),a="number"==typeof r?r:r[0],s="number"==typeof r?r:r[1],l=this.targetTileGrid_.getResolution(n),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Np(a,s,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),l,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},i.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,r,a){var s=n.getState();if(0==s||1==s){t++;var l=ft(n,"change",function(c){var h=n.getState();(2==h||3==h||4==h)&&(Lt(l),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,r,a){0==n.getState()&&n.load()})}},i.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Lt),this.sourcesListenerKeys_=null},i}(Dp);const Ob=Pb;var Sb=function(){function e(i){this.highWaterMark=void 0!==i?i:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(i){return this.entries_.hasOwnProperty(i)},e.prototype.forEach=function(i){for(var t=this.oldest_;t;)i(t.value_,t.key_,this),t=t.newer},e.prototype.get=function(i,t){var n=this.entries_[i];return ut(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(i){var t=this.entries_[i];return ut(void 0!==t,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[i],--this.count_,t.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var n,i=new Array(this.count_),t=0;for(n=this.newest_;n;n=n.older)i[t++]=n.key_;return i},e.prototype.getValues=function(){var n,i=new Array(this.count_),t=0;for(n=this.newest_;n;n=n.older)i[t++]=n.value_;return i},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var i=this.oldest_;return delete this.entries_[i.key_],i.newer&&(i.newer.older=null),this.oldest_=i.newer,this.oldest_||(this.newest_=null),--this.count_,i.value_},e.prototype.replace=function(i,t){this.get(i),this.entries_[i].value_=t},e.prototype.set=function(i,t){ut(!(i in this.entries_),16);var n={key_:i,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[i]=n,++this.count_},e.prototype.setSize=function(i){this.highWaterMark=i},e}();const Ab=Sb;function Fp(e,i,t,n){return void 0!==n?(n[0]=e,n[1]=i,n[2]=t,n):[e,i,t]}function Qo(e,i,t){return e+"/"+i+"/"+t}function Up(e){return Qo(e[0],e[1],e[2])}function Gh(e){return(e[1]<<e[0])+e[2]}var Db=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rb=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Db(i,e),i.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},i.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var n=function Eb(e){return e.split("/").map(Number)}(this.peekFirstKey()),r=n[0];this.forEach(function(a){a.tileCoord[0]!==r&&(this.remove(Up(a.tileCoord)),a.release())}.bind(this))}},i}(Ab);const qp=Rb;var Zb=[0,0,0],Lb=function(){function e(i){var t;if(this.minZoom=void 0!==i.minZoom?i.minZoom:0,this.resolutions_=i.resolutions,ut(function Jt(e,i,t){var n=i||O;return e.every(function(r,a){if(0===a)return!0;var s=n(e[a-1],r);return!(s>0||t&&0===s)})}(this.resolutions_,function(s,l){return l-s},!0),17),!i.origins)for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(t){if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}else t=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==i.origin?i.origin:null,this.origins_=null,void 0!==i.origins&&(this.origins_=i.origins,ut(this.origins_.length==this.resolutions_.length,20));var a=i.extent;void 0!==a&&!this.origin_&&!this.origins_&&(this.origin_=Qi(a)),ut(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==i.tileSizes&&(this.tileSizes_=i.tileSizes,ut(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==i.tileSize?i.tileSize:this.tileSizes_?null:256,ut(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==i.sizes?this.fullTileRanges_=i.sizes.map(function(s,l){var c=new Ep(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(a){var h=this.getTileRangeForExtentAndZ(a,l);c.minX=Math.max(h.minX,c.minX),c.maxX=Math.min(h.maxX,c.maxX),c.minY=Math.max(h.minY,c.minY),c.maxY=Math.min(h.maxY,c.maxY)}return c},this):a&&this.calculateTileRanges_(a)}return e.prototype.forEachTileCoord=function(i,t,n){for(var r=this.getTileRangeForExtentAndZ(i,t),a=r.minX,s=r.maxX;a<=s;++a)for(var l=r.minY,c=r.maxY;l<=c;++l)n([t,a,l])},e.prototype.forEachTileCoordParentTileRange=function(i,t,n,r){var s,l,c=null,h=i[0]-1;for(2===this.zoomFactor_?(s=i[1],l=i[2]):c=this.getTileCoordExtent(i,r);h>=this.minZoom;){if(t(h,2===this.zoomFactor_?Xr(s=Math.floor(s/2),s,l=Math.floor(l/2),l,n):this.getTileRangeForExtentAndZ(c,h,n)))return!0;--h}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(i){return this.origin_?this.origin_:this.origins_[i]},e.prototype.getResolution=function(i){return this.resolutions_[i]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(i,t,n){if(i[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*i[1],a=2*i[2];return Xr(r,r+1,a,a+1,t)}var s=this.getTileCoordExtent(i,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,i[0]+1,t)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(i,t,n){if(t>this.maxZoom||t<this.minZoom)return null;var r=i[0],a=i[1],s=i[2];if(t===r)return Xr(a,s,a,s,n);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(a*l),h=Math.floor(s*l);return t<r?Xr(c,c,h,h,n):Xr(c,Math.floor(l*(a+1))-1,h,Math.floor(l*(s+1))-1,n)}var f=this.getTileCoordExtent(i,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,t,n)},e.prototype.getTileRangeExtent=function(i,t,n){var r=this.getOrigin(i),a=this.getResolution(i),s=en(this.getTileSize(i),this.tmpSize_);return Tn(r[0]+t.minX*s[0]*a,r[1]+t.minY*s[1]*a,r[0]+(t.maxX+1)*s[0]*a,r[1]+(t.maxY+1)*s[1]*a,n)},e.prototype.getTileRangeForExtentAndZ=function(i,t,n){var r=Zb;this.getTileCoordForXYAndZ_(i[0],i[3],t,!1,r);var a=r[1],s=r[2];return this.getTileCoordForXYAndZ_(i[2],i[1],t,!0,r),Xr(a,r[1],s,r[2],n)},e.prototype.getTileCoordCenter=function(i){var t=this.getOrigin(i[0]),n=this.getResolution(i[0]),r=en(this.getTileSize(i[0]),this.tmpSize_);return[t[0]+(i[1]+.5)*r[0]*n,t[1]-(i[2]+.5)*r[1]*n]},e.prototype.getTileCoordExtent=function(i,t){var n=this.getOrigin(i[0]),r=this.getResolution(i[0]),a=en(this.getTileSize(i[0]),this.tmpSize_),s=n[0]+i[1]*a[0]*r,l=n[1]-(i[2]+1)*a[1]*r;return Tn(s,l,s+a[0]*r,l+a[1]*r,t)},e.prototype.getTileCoordForCoordAndResolution=function(i,t,n){return this.getTileCoordForXYAndResolution_(i[0],i[1],t,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(i,t,n,r,a){var s=this.getZForResolution(n),l=n/this.getResolution(s),c=this.getOrigin(s),h=en(this.getTileSize(s),this.tmpSize_),d=r?.5:0,f=Math.floor((i-c[0])/n+(r?.5:0)),p=Math.floor((c[1]-t)/n+d),g=l*f/h[0],_=l*p/h[1];return r?(g=Math.ceil(g)-1,_=Math.ceil(_)-1):(g=Math.floor(g),_=Math.floor(_)),Fp(s,g,_,a)},e.prototype.getTileCoordForXYAndZ_=function(i,t,n,r,a){var s=this.getOrigin(n),l=this.getResolution(n),c=en(this.getTileSize(n),this.tmpSize_),u=r?.5:0,d=Math.floor((i-s[0])/l+(r?.5:0)),f=Math.floor((s[1]-t)/l+u),p=d/c[0],g=f/c[1];return r?(p=Math.ceil(p)-1,g=Math.ceil(g)-1):(p=Math.floor(p),g=Math.floor(g)),Fp(n,p,g,a)},e.prototype.getTileCoordForCoordAndZ=function(i,t,n){return this.getTileCoordForXYAndZ_(i[0],i[1],t,!1,n)},e.prototype.getTileCoordResolution=function(i){return this.resolutions_[i[0]]},e.prototype.getTileSize=function(i){return this.tileSize_?this.tileSize_:this.tileSizes_[i]},e.prototype.getFullTileRange=function(i){return this.fullTileRanges_?this.fullTileRanges_[i]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,i):null},e.prototype.getZForResolution=function(i,t){return te(N(this.resolutions_,i,t||0),this.minZoom,this.maxZoom)},e.prototype.calculateTileRanges_=function(i){for(var t=this.resolutions_.length,n=new Array(t),r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(i,r);this.fullTileRanges_=n},e}();const zh=Lb;function Gp(e){var i=e.getDefaultTileGrid();return i||(i=function Ub(e,i,t,n){return function Nb(e,i,t,n){var r=void 0!==n?n:"top-left",a=jp(e,i,t);return new zh({extent:e,origin:S1(e,r),resolutions:a,tileSize:t})}(Yh(e),i,t,n)}(e),e.setDefaultTileGrid(i)),i}function jp(e,i,t,n){for(var r=void 0!==i?i:42,a=Oe(e),s=kt(e),l=en(void 0!==t?t:256),c=n>0?n:Math.max(s/l[0],a/l[1]),h=r+1,u=new Array(h),d=0;d<h;++d)u[d]=c/Math.pow(2,d);return u}function Yh(e){var i=(e=St(e)).getExtent();if(!i){var t=180*Ke[tn.DEGREES]/e.getMetersPerUnit();i=Tn(-t,-t,t,t)}return i}var zp=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qb=function(e){function i(t){var n=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX})||this;n.opaque_=void 0!==t.opaque&&t.opaque,n.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,n.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;var a=t.tileGrid;return a&&en(a.getTileSize(a.getMinZoom()),[256,256]),n.tileCache=new qp(t.cacheSize||0),n.tmpSize=[0,0],n.key_=t.key||"",n.tileOptions={transition:t.transition},n.zDirection=t.zDirection?t.zDirection:0,n}return zp(i,e),i.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},i.prototype.expireCache=function(t,n){var r=this.getTileCacheForProjection(t);r&&r.expireCache(n)},i.prototype.forEachLoadedTile=function(t,n,r,a){var s=this.getTileCacheForProjection(t);if(!s)return!1;for(var c,h,u,l=!0,d=r.minX;d<=r.maxX;++d)for(var f=r.minY;f<=r.maxY;++f)h=Qo(n,d,f),u=!1,s.containsKey(h)&&(u=2===(c=s.get(h)).getState())&&(u=!1!==a(c)),u||(l=!1);return l},i.prototype.getGutterForProjection=function(t){return 0},i.prototype.getKey=function(){return this.key_},i.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},i.prototype.getOpaque=function(t){return this.opaque_},i.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},i.prototype.getTile=function(t,n,r,a,s){return tt()},i.prototype.getTileGrid=function(){return this.tileGrid},i.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Gp(t)},i.prototype.getTileCacheForProjection=function(t){return ut(ti(this.getProjection(),t),68),this.tileCache},i.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},i.prototype.getTilePixelSize=function(t,n,r){var a=this.getTileGridForProjection(r),s=this.getTilePixelRatio(n),l=en(a.getTileSize(t),this.tmpSize);return 1==s?l:Jc(l,s,this.tmpSize)},i.prototype.getTileCoordForTileUrlFunction=function(t,n){var r=void 0!==n?n:this.getProjection(),a=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function kb(e,i,t){var n=i[0],r=e.getTileCoordCenter(i),a=Yh(t);if(ys(a,r))return i;var s=kt(a),l=Math.ceil((a[0]-r[0])/s);return r[0]+=s*l,e.getTileCoordForCoordAndZ(r,n)}(a,t,r)),function Ib(e,i){var t=e[0],n=e[1],r=e[2];if(i.getMinZoom()>t||t>i.getMaxZoom())return!1;var a=i.getFullTileRange(t);return!a||a.containsXY(n,r)}(t,a)?t:null},i.prototype.clear=function(){this.tileCache.clear()},i.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},i.prototype.updateCacheSize=function(t,n){var r=this.getTileCacheForProjection(n);t>r.highWaterMark&&(r.highWaterMark=t)},i.prototype.useTile=function(t,n,r,a){},i}(th),Gb=function(e){function i(t,n){var r=e.call(this,t)||this;return r.tile=n,r}return zp(i,e),i}(ye);const jb=qb;function zb(e,i){var t=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,a=/\{-y\}/g;return function(s,l,c){if(s)return e.replace(t,s[0].toString()).replace(n,s[1].toString()).replace(r,s[2].toString()).replace(a,function(){var u=i.getFullTileRange(s[0]);return ut(u,55),(u.getHeight()-s[2]-1).toString()})}}function Hh(e){return 1===e.length?e[0]:function(i,t,n){if(i){var a=$n(Gh(i),e.length);return e[a](i,t,n)}}}function Yp(e){var i=[],t=/\{([a-z])-([a-z])\}/.exec(e);if(t){var n=t[1].charCodeAt(0),r=t[2].charCodeAt(0),a=void 0;for(a=n;a<=r;++a)i.push(e.replace(t[0],String.fromCharCode(a)));return i}if(t=/\{(\d+)-(\d+)\}/.exec(e)){for(var s=parseInt(t[2],10),l=parseInt(t[1],10);l<=s;l++)i.push(e.replace(t[0],l.toString()));return i}return i.push(e),i}var Hb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bb=function(e){function i(t){var n=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===i.prototype.tileUrlFunction,n.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(n.tileUrlFunction=t.tileUrlFunction),n.urls=null,t.urls?n.setUrls(t.urls):t.url&&n.setUrl(t.url),n.tileLoadingKeys_={},n}return Hb(i,e),i.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},i.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},i.prototype.getUrls=function(){return this.urls},i.prototype.handleTileChange=function(t){var s,n=t.target,r=at(n),a=n.getState();1==a?(this.tileLoadingKeys_[r]=!0,s="tileloadstart"):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=3==a?"tileloaderror":2==a?"tileloadend":void 0),null!=s&&this.dispatchEvent(new Gb(s,n))},i.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},i.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==n?this.setKey(n):this.changed()},i.prototype.setUrl=function(t){var n=Yp(t);this.urls=n,this.setUrls(n)},i.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function Yb(e,i){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=zb(e[r],i);return Hh(n)}(t,this.tileGrid),n):this.setKey(n)},i.prototype.tileUrlFunction=function(t,n,r){},i.prototype.useTile=function(t,n,r){var a=Qo(t,n,r);this.tileCache.containsKey(a)&&this.tileCache.get(a)},i}(jb);const Vb=Bb;var Wb=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jb=function(e){function i(t){var n=e.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Xb,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return n.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,n.tileClass=void 0!==t.tileClass?t.tileClass:xb,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,n.contextOptions_=!1===t.imageSmoothing?Fh:void 0,n.renderReprojectionEdges_=!1,n}return Wb(i,e),i.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},i.prototype.expireCache=function(t,n){var r=this.getTileCacheForProjection(t);for(var a in this.tileCache.expireCache(this.tileCache==r?n:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[a];s.expireCache(s==r?n:{})}},i.prototype.getContextOptions=function(){return this.contextOptions_},i.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!ti(this.getProjection(),t)?0:this.getGutter()},i.prototype.getGutter=function(){return 0},i.prototype.getKey=function(){return e.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},i.prototype.getOpaque=function(t){return!(this.getProjection()&&t&&!ti(this.getProjection(),t))&&e.prototype.getOpaque.call(this,t)},i.prototype.getTileGridForProjection=function(t){var n=this.getProjection();if(this.tileGrid&&(!n||ti(n,t)))return this.tileGrid;var r=at(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Gp(t)),this.tileGridForProjection[r]},i.prototype.getTileCacheForProjection=function(t){var n=this.getProjection();if(!n||ti(n,t))return this.tileCache;var r=at(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new qp(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},i.prototype.createTile_=function(t,n,r,a,s,l){var c=[t,n,r],h=this.getTileCoordForTileUrlFunction(c,s),u=h?this.tileUrlFunction(h,a,s):void 0,d=new this.tileClass(c,void 0!==u?0:4,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=l,d.addEventListener("change",this.handleTileChange.bind(this)),d},i.prototype.getTile=function(t,n,r,a,s){var l=this.getProjection();if(!l||!s||ti(l,s))return this.getTileInternal(t,n,r,a,l||s);var c=this.getTileCacheForProjection(s),h=[t,n,r],u=void 0,d=Up(h);c.containsKey(d)&&(u=c.get(d));var f=this.getKey();if(u&&u.key==f)return u;var p=this.getTileGridForProjection(l),g=this.getTileGridForProjection(s),_=this.getTileCoordForTileUrlFunction(h,s),m=new Ob(l,p,s,g,h,_,this.getTilePixelRatio(a),this.getGutter(),function(v,y,C,x){return this.getTileInternal(v,y,C,x,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return m.key=f,u?(m.interimTile=u,m.refreshInterimChain(),c.replace(d,m)):c.set(d,m),m},i.prototype.getTileInternal=function(t,n,r,a,s){var l=null,c=Qo(t,n,r),h=this.getKey();if(this.tileCache.containsKey(c)){if((l=this.tileCache.get(c)).key!=h){var u=l;(l=this.createTile_(t,n,r,a,s,h)).interimTile=0==u.getState()?u.interimTile:u,l.refreshInterimChain(),this.tileCache.replace(c,l)}}else l=this.createTile_(t,n,r,a,s,h),this.tileCache.set(c,l);return l},i.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var n in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},i.prototype.setTileGridForProjection=function(t,n){var r=St(t);if(r){var a=at(r);a in this.tileGridForProjection||(this.tileGridForProjection[a]=n)}},i}(Vb);function Xb(e,i){e.getImage().src=i}const $s=Jb;function ur(e,i){var t=[];Object.keys(i).forEach(function(r){null!=i[r]&&t.push(r+"="+encodeURIComponent(i[r]))});var n=t.join("&");return(e=-1===(e=e.replace(/[?&]$/,"")).indexOf("?")?e+"?":e+"&")+n}function Hp(e,i){for(var t=(""+e).split("."),n=(""+i).split("."),r=0;r<Math.max(t.length,n.length);r++){var a=parseInt(t[r]||"0",10),s=parseInt(n[r]||"0",10);if(a>s)return 1;if(s>a)return-1}return 0}var $b=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qb=function(e){function i(t){var n=this,r=t||{},a=r.params||{};return(n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:!(!("TRANSPARENT"in a)||a.TRANSPARENT),projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).gutter_=void 0!==r.gutter?r.gutter:0,n.params_=a,n.v13_=!0,n.serverType_=r.serverType,n.hidpi_=void 0===r.hidpi||r.hidpi,n.tmpExtent_=[1/0,1/0,-1/0,-1/0],n.updateV13_(),n.setKey(n.getKeyForParams_()),n}return $b(i,e),i.prototype.getFeatureInfoUrl=function(t,n,r,a){var s=St(r),l=this.getProjection(),c=this.getTileGrid();c||(c=this.getTileGridForProjection(s));var h=c.getZForResolution(n,this.zDirection),u=c.getTileCoordForCoordAndZ(t,h);if(!(c.getResolutions().length<=u[0])){var d=c.getResolution(u[0]),f=c.getTileCoordExtent(u,this.tmpExtent_),p=en(c.getTileSize(u[0]),this.tmpSize),g=this.gutter_;0!==g&&(p=mf(p,g,this.tmpSize),f=Fr(f,d*g,f)),l&&l!==s&&(d=$o(l,s,t,d),f=Hc(f,s,l),t=tr(t,s,l));var _={SERVICE:"WMS",VERSION:Si,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};dt(_,this.params_,a);var m=Math.floor((t[0]-f[0])/d),v=Math.floor((f[3]-t[1])/d);return _[this.v13_?"I":"X"]=m,_[this.v13_?"J":"Y"]=v,this.getRequestUrl_(u,p,f,1,l||s,_)}},i.prototype.getLegendUrl=function(t,n){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:Si,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var a=this.params_.LAYERS;if(Array.isArray(a)&&1!==a.length)return;r.LAYER=a}if(void 0!==t){var l=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*l/28e-5}return dt(r,n),ur(this.urls[0],r)}},i.prototype.getGutter=function(){return this.gutter_},i.prototype.getParams=function(){return this.params_},i.prototype.getRequestUrl_=function(t,n,r,a,s,l){var c=this.urls;if(c){if(l.WIDTH=n[0],l.HEIGHT=n[1],l[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(l.STYLES=""),1!=a)switch(this.serverType_){case"geoserver":var h=90*a+.5|0;"FORMAT_OPTIONS"in l?l.FORMAT_OPTIONS+=";dpi:"+h:l.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":l.MAP_RESOLUTION=90*a;break;case"carmentaserver":case"qgis":l.DPI=90*a;break;default:ut(!1,52)}var u=s.getAxisOrientation(),d=r;if(this.v13_&&"ne"==u.substr(0,2)){var f=void 0;f=r[0],d[0]=r[1],d[1]=f,f=r[2],d[2]=r[3],d[3]=f}return l.BBOX=d.join(","),ur(1==c.length?c[0]:c[$n(Gh(t),c.length)],l)}},i.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},i.prototype.getKeyForParams_=function(){var t=0,n=[];for(var r in this.params_)n[t++]=r+"-"+this.params_[r];return n.join("/")},i.prototype.updateParams=function(t){dt(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},i.prototype.updateV13_=function(){this.v13_=Hp(this.params_.VERSION||Si,"1.3")>=0},i.prototype.tileUrlFunction=function(t,n,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){1!=n&&(!this.hidpi_||void 0===this.serverType_)&&(n=1);var s=a.getResolution(t[0]),l=a.getTileCoordExtent(t,this.tmpExtent_),c=en(a.getTileSize(t[0]),this.tmpSize),h=this.gutter_;0!==h&&(c=mf(c,h,this.tmpSize),l=Fr(l,s*h,l)),1!=n&&(c=Jc(c,n,this.tmpSize));var u={SERVICE:"WMS",VERSION:Si,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return dt(u,this.params_),this.getRequestUrl_(t,c,l,n,r,u)}},i}($s);const Kb=Qb;var tT=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),eT=function(e){function i(t){var n=this,r=t||{};return(n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection})||this).params_=r.params||{},n.hidpi_=void 0===r.hidpi||r.hidpi,n.tmpExtent_=[1/0,1/0,-1/0,-1/0],n.setKey(n.getKeyForParams_()),n}return tT(i,e),i.prototype.getKeyForParams_=function(){var t=0,n=[];for(var r in this.params_)n[t++]=r+"-"+this.params_[r];return n.join("/")},i.prototype.getParams=function(){return this.params_},i.prototype.getRequestUrl_=function(t,n,r,a,s,l){var c=this.urls;if(c){var h=s.getCode().split(/:(?=\d+$)/).pop();return l.SIZE=n[0]+","+n[1],l.BBOX=r.join(","),l.BBOXSR=h,l.IMAGESR=h,l.DPI=Math.round(l.DPI?l.DPI*a:90*a),ur((1==c.length?c[0]:c[$n(Gh(t),c.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),l)}},i.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},i.prototype.updateParams=function(t){dt(this.params_,t),this.setKey(this.getKeyForParams_())},i.prototype.tileUrlFunction=function(t,n,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=t[0])){1!=n&&!this.hidpi_&&(n=1);var s=a.getTileCoordExtent(t,this.tmpExtent_),l=en(a.getTileSize(t[0]),this.tmpSize);1!=n&&(l=Jc(l,n,this.tmpSize));var c={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return dt(c,this.params_),this.getRequestUrl_(t,l,s,n,r,c)}},i}($s);const nT=eT;var iT=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),rT=function(e){function i(t){return e.call(this,t||{})||this}return iT(i,e),i}(eh);const oT=rT;var aT=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sT=function(e){function i(t){var n=e.call(this,t)||this;return n.image_=null,n}return aT(i,e),i.prototype.getImage=function(){return this.image_?this.image_.getImage():null},i.prototype.prepareFrame=function(t){var n=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,a=t.viewState,s=a.resolution,l=this.getLayer().getSource(),c=t.viewHints,h=t.extent;if(void 0!==n.extent&&(h=mi(h,Nn(n.extent))),!c[0]&&!c[1]&&!ws(h))if(l){var f=l.getImage(h,s,r,a.projection);f&&this.loadImage(f)&&(this.image_=f)}else this.image_=null;return!!this.image_},i.prototype.renderFrame=function(t,n){var r=this.image_,a=r.getExtent(),s=r.getResolution(),l=r.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],h=t.pixelRatio,u=t.viewState,d=u.center,p=t.size,g=h*s/(u.resolution*l),_=Math.round(p[0]*h),m=Math.round(p[1]*h),v=u.rotation;if(v){var y=Math.round(Math.sqrt(_*_+m*m));_=y,m=y}ln(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,v,-_/2,-m/2),Jo(this.inversePixelTransform,this.pixelTransform);var C=Us(this.pixelTransform);this.useContainer(n,C,c.opacity);var x=this.context,b=x.canvas;b.width!=_||b.height!=m?(b.width=_,b.height=m):this.containerReused||x.clearRect(0,0,_,m);var T=!1,M=!0;if(c.extent){var w=Nn(c.extent);(T=(M=Le(w,t.extent))&&!Kn(w,t.extent))&&this.clipUnrotated(x,t,w)}var P=r.getImage(),D=ln(this.tempTransform,_/2,m/2,g,g,0,l*(a[0]-d[0])/s,l*(d[1]-a[3])/s);this.renderedResolution=s*h/l;var R=P.width*D[0],L=P.height*D[3];if(dt(x,this.getLayer().getSource().getContextOptions()),this.preRender(x,t),M&&R>=.5&&L>=.5){var G=D[4],W=D[5],Z=c.opacity,F=void 0;1!==Z&&(F=x.globalAlpha,x.globalAlpha=Z),x.drawImage(P,0,0,+P.width,+P.height,Math.round(G),Math.round(W),Math.round(R),Math.round(L)),1!==Z&&(x.globalAlpha=F)}return this.postRender(x,t),T&&x.restore(),C!==b.style.transform&&(b.style.transform=C),this.container},i}(oh);const lT=sT;var cT=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),hT=function(e){function i(t){return e.call(this,t)||this}return cT(i,e),i.prototype.createRenderer=function(){return new lT(this)},i}(oT);const uT=hT;var dT=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fT=function(e){function i(t,n,r,a,s,l,c){var h=this,u=t.getExtent(),d=n.getExtent(),f=d?mi(r,d):r,g=$o(t,n,je(f),a),m=new Lp(t,n,f,u,.5*g,a),y=l(m.calculateSourceExtent(),g,s),C=y?0:4,x=y?y.getPixelRatio():1;return(h=e.call(this,r,a,x,C)||this).targetProj_=n,h.maxSourceExtent_=u,h.triangulation_=m,h.targetResolution_=a,h.targetExtent_=r,h.sourceImage_=y,h.sourcePixelRatio_=x,h.contextOptions_=c,h.canvas_=null,h.sourceListenerKey_=null,h}return dT(i,e),i.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),e.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.canvas_},i.prototype.getProjection=function(){return this.targetProj_},i.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(2==t){var n=kt(this.targetExtent_)/this.targetResolution_,r=Oe(this.targetExtent_)/this.targetResolution_;this.canvas_=Np(n,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=t,this.changed()},i.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=ft(this.sourceImage_,"change",function(n){var r=this.sourceImage_.getState();(2==r||3==r)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},i.prototype.unlistenSource_=function(){Lt(this.sourceListenerKey_),this.sourceListenerKey_=null},i}(np);const pT=fT;var Bp=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vh=function(e){function i(t,n){var r=e.call(this,t)||this;return r.image=n,r}return Bp(i,e),i}(ye),gT=function(e){function i(t){var n=e.call(this,{attributions:t.attributions,projection:t.projection,state:t.state})||this;return n.resolutions_=void 0!==t.resolutions?t.resolutions:null,n.reprojectedImage_=null,n.reprojectedRevision_=0,n.contextOptions_=!1===t.imageSmoothing?Fh:void 0,n}return Bp(i,e),i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getContextOptions=function(){return this.contextOptions_},i.prototype.findNearestResolution=function(t){if(this.resolutions_){var n=N(this.resolutions_,t,0);t=this.resolutions_[n]}return t},i.prototype.getImage=function(t,n,r,a){var s=this.getProjection();if(!s||!a||ti(s,a))return s&&(a=s),this.getImageInternal(t,n,r,a);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ti(this.reprojectedImage_.getProjection(),a)&&this.reprojectedImage_.getResolution()==n&&Ur(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new pT(s,a,t,n,r,function(l,c,h){return this.getImageInternal(l,c,h,s)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_},i.prototype.getImageInternal=function(t,n,r,a){return tt()},i.prototype.handleImageChange=function(t){var n=t.target;switch(n.getState()){case 1:this.loading=!0,this.dispatchEvent(new Vh("imageloadstart",n));break;case 2:this.loading=!1,this.dispatchEvent(new Vh("imageloadend",n));break;case 3:this.loading=!1,this.dispatchEvent(new Vh("imageloaderror",n))}},i}(th);function _T(e,i){e.getImage().src=i}const mT=gT;var vT=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vp=[101,101],yT=function(e){function i(t){var n=this,r=t||{};return(n=e.call(this,{attributions:r.attributions,imageSmoothing:r.imageSmoothing,projection:r.projection,resolutions:r.resolutions})||this).crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,n.url_=r.url,n.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:_T,n.params_=r.params||{},n.v13_=!0,n.updateV13_(),n.serverType_=r.serverType,n.hidpi_=void 0===r.hidpi||r.hidpi,n.image_=null,n.imageSize_=[0,0],n.renderedRevision_=0,n.ratio_=void 0!==r.ratio?r.ratio:1.5,n}return vT(i,e),i.prototype.getFeatureInfoUrl=function(t,n,r,a){if(void 0!==this.url_){var s=St(r),l=this.getProjection();l&&l!==s&&(n=$o(l,s,t,n),t=tr(t,s,l));var c=Gr(t,n,0,Vp),h={SERVICE:"WMS",VERSION:Si,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};dt(h,this.params_,a);var u=Math.floor((t[0]-c[0])/n),d=Math.floor((c[3]-t[1])/n);return h[this.v13_?"I":"X"]=u,h[this.v13_?"J":"Y"]=d,this.getRequestUrl_(c,Vp,1,l||s,h)}},i.prototype.getLegendUrl=function(t,n){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:Si,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===n||void 0===n.LAYER){var a=this.params_.LAYERS;if(Array.isArray(a)&&1!==a.length)return;r.LAYER=a}if(void 0!==t){var l=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*l/28e-5}return dt(r,n),ur(this.url_,r)}},i.prototype.getParams=function(){return this.params_},i.prototype.getImageInternal=function(t,n,r,a){if(void 0===this.url_)return null;n=this.findNearestResolution(n),1!=r&&(!this.hidpi_||void 0===this.serverType_)&&(r=1);var s=n/r,l=je(t),u=Gr(l,s,0,[Math.ceil(kt(t)/s),Math.ceil(Oe(t)/s)]),p=Gr(l,s,0,[Math.ceil(this.ratio_*kt(t)/s),Math.ceil(this.ratio_*Oe(t)/s)]),g=this.image_;if(g&&this.renderedRevision_==this.getRevision()&&g.getResolution()==n&&g.getPixelRatio()==r&&Kn(g.getExtent(),u))return g;var _={SERVICE:"WMS",VERSION:Si,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};dt(_,this.params_),this.imageSize_[0]=Math.round(kt(p)/s),this.imageSize_[1]=Math.round(Oe(p)/s);var m=this.getRequestUrl_(p,this.imageSize_,r,a,_);return this.image_=new Ax(p,n,r,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener("change",this.handleImageChange.bind(this)),this.image_},i.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},i.prototype.getRequestUrl_=function(t,n,r,a,s){if(ut(void 0!==this.url_,9),s[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=r)switch(this.serverType_){case"geoserver":var l=90*r+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+l:s.FORMAT_OPTIONS="dpi:"+l;break;case"mapserver":s.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":s.DPI=90*r;break;default:ut(!1,8)}s.WIDTH=n[0],s.HEIGHT=n[1];var h,c=a.getAxisOrientation();return h=this.v13_&&"ne"==c.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,s.BBOX=h.join(","),ur(this.url_,s)},i.prototype.getUrl=function(){return this.url_},i.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},i.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},i.prototype.updateParams=function(t){dt(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},i.prototype.updateV13_=function(){this.v13_=Hp(this.params_.VERSION||Si,"1.3")>=0},i}(mT);const xT=yT;var Ht=(()=>(function(e){e.CHANGE="change",e.CHANGE_LAYERGROUP="change:layerGroup",e.CHANGE_SIZE="change:size",e.CHANGE_TARGET="change:target",e.CHANGE_VIEW="change:view",e.CLICK="click",e.DOUBLECLICK="dblclick",e.MOVEEND="moveend",e.POINTERDRAG="pointerdrag",e.POINTERMOVE="pointermove",e.POSTCOMPOSE="postcompose",e.POSTRENDER="postrender",e.PRECOMPOSE="precompose",e.PROPERTYCHANGE="propertychange",e.SINGLECLICK="singleclick"}(Ht||(Ht={})),Ht))();const Wp=["change","change:layerGroup","change:size","change:target","change:view","click","dblclick","moveend","pointerdrag","pointermove","postcompose","postrender","precompose","propertychange","singleclick"],bT={hasHighlight:!0,hasSnap:!1};class Wh{constructor(i,t){if(this.map=i,this.id=t.id||ue()(),this.layers=[],this.eventHandlers={},Wp.forEach(n=>{this.eventHandlers[n]=[]}),this.map.on(Wp,n=>{if(this.eventHandlers[n.type]){const r=this.eventHandlers[n.type].filter(c=>"SPECIAL"===c.priority),a=this.eventHandlers[n.type].filter(c=>"HIGH"===c.priority),s=this.eventHandlers[n.type].filter(c=>"NORMAL"===c.priority),l=this.eventHandlers[n.type].filter(c=>"LOW"===c.priority);a.length>0?[...a,...r].forEach(c=>c.fn(n)):s.length>0?[...s,...r].forEach(c=>c.fn(n)):[...l,...r].forEach(c=>c.fn(n))}}),t.hasHighlight){this.highlightSource=new yi({wrapX:!0});const n=new Gs({source:this.highlightSource,zIndex:1e3});this.map.addLayer(n)}}static initMap(i,t={}){return new Wh(i,Object.assign(Object.assign({},bT),t))}get Id(){return this.id}setBaseLayer(i){return this.baseLayer=i,this.baseLayer.Layer.setZIndex(-1),this.map.addLayer(i.Layer),this.baseLayer.Id}clearBaseLayer(){this.baseLayer&&(this.map.removeLayer(this.baseLayer.Layer),this.baseLayer=null)}addLayer(i){return this.layers.push(i),this.map.addLayer(i.Layer),i.Id}removeLayer(i){const t=this.layers.find(n=>n.Id===i);t&&this.map.removeLayer(t.Layer),this.layers=this.layers.filter(n=>n.Id!==i)}addOverlay(i){this.map.addOverlay(i)}removeOverlay(i){this.map.removeOverlay(i)}addEventHandler(i,t,n="NORMAL"){this.eventHandlers[i]||(this.eventHandlers[i]=[]);const r=i+"."+ue()();return this.eventHandlers[i].push({key:r,priority:n,fn:t}),r}removeEventHandler(i){const t=i.split(".")[0],n=this.eventHandlers[t].reduce((r,a,s)=>a.key===i?s:r,-1);-1!==n&&(this.eventHandlers[t]=[...this.eventHandlers[t].slice(0,n),...this.eventHandlers[t].slice(n+1)])}addInteraction(i){this.map.addInteraction(i)}removeInteraction(i){this.map.removeInteraction(i)}addControl(i){this.map.addControl(i)}removeControl(i){this.map.removeControl(i)}drawFeatures(i,t){if(!this.highlightSource)throw new Error("No highlight source available");i.forEach(n=>{n.setStyle(t),this.highlightSource.addFeature(n)})}clearFeatures(i){if(!this.highlightSource)throw new Error("No highlight source available");i?this.highlightSource.getFeatures().filter(t=>t.getId().toString().startsWith(i)).forEach(t=>this.highlightSource.removeFeature(t)):this.highlightSource.clear()}getViewExtent(){return this.map.getView().calculateExtent(this.map.getSize())}getViewResolution(){return this.map.getView().getResolution()}moveTo(i,t=!0){this.map.getView().fit(i,{duration:t?500:0})}getZoom(){return this.map.getView().getZoom()}setZoom(i,t=!0){t?this.map.getView().animate({zoom:i,duration:500}):this.map.getView().setZoom(i)}getCenter(){return this.map.getView().getCenter()}setCenter(i,t=!0){t?this.map.getView().animate({center:i,duration:500}):this.map.getView().setCenter(i)}detectSizeChange(){this.map.updateSize()}}let $t=(()=>{class e{constructor(){this.mapas=new Map}createMap(t,n=[0,0],r="EPSG:4326",a){const s=new Pi({center:n,zoom:15,projection:r}),l=new sb({target:t,view:s,layers:[]}),c=Wh.initMap(l,{id:a});return this.mapas.set(c.Id,c),this.default||(this.default=c.Id),c}setDefaultMapa(t){this.default=this.mapas.has(t)?t:this.default}getMapById(t){return this.getMapa(t)}setBaseLayer(t,n){return this.getMapa(n).setBaseLayer(t)}clearBaseLayer(t){this.getMapa(t).clearBaseLayer()}addLayer(t,n){return this.getMapa(n).addLayer(t)}removeLayer(t,n){this.getMapa(n).removeLayer(t)}addEventHandler(t,n,r,a){return this.getMapa(a).addEventHandler(t,n,r)}removeEventHandler(t,n){this.getMapa(n).removeEventHandler(t)}addOverlay(t,n){this.getMapa(n).addOverlay(t)}removeOverlay(t,n){this.getMapa(n).removeOverlay(t)}addInteraction(t,n){this.getMapa(n).addInteraction(t)}removeInteraction(t,n){this.getMapa(n).removeInteraction(t)}addControl(t,n){this.getMapa(n).addControl(t)}removeControl(t,n){this.getMapa(n).removeControl(t)}drawFeature(t,n,r){this.getMapa(r).drawFeatures([t],n)}clearDrawings(t,n){this.getMapa(n).clearFeatures(t)}getMapa(t){if(t||(t=this.default),!this.mapas.has(t))throw new Error("No existe SICMap con el id proporcionado");const n=this.mapas.get(t);if(!n)throw new Error("No se pudo recuperar el SICMap");return n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,o.Yz7)({factory:function(){return new e},token:e,providedIn:"root"}),e})(),TT=(()=>{class e{constructor(t){this.mapService=t,this.mapId=`MapContainer.${ue()()}`,this.center=[-103.34331,20.673386],this.projection="EPSG:4326",this.zoom=10}ngAfterViewInit(){this.map=this.mapService.createMap(this.mapId,this.center,this.projection,this.mapId),this.map.setZoom(this.zoom)}ngOnInit(){}ngOnChanges(t){t.mapId.isFirstChange()}getMapId(){return this.mapId}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-map-viewer"]],inputs:{mapId:"mapId",center:"center",projection:"projection",zoom:"zoom"},features:[o.TTD],decls:1,vars:1,consts:[[1,"map-container",3,"id"]],template:function(t,n){1&t&&o._UZ(0,"div",0),2&t&&o.Q6J("id",n.mapId)},styles:["[_nghost-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0}.map-container[_ngcontent-%COMP%]{height:100%;width:100%}"]}),e})(),MT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[]]}),e})();class Ko{constructor(i,t,n){this.title=i,this.layer=t,this.legend=n}get Id(){return this.id}get Title(){return this.title}get Layer(){return this.layer}get Legend(){return this.legend}setId(i){this.id=i}setVisibility(i){this.layer.setVisible(i)}isVisible(){return this.layer.getVisible()}toggleVisibility(){const i=!this.isVisible();return this.setVisibility(i),i}setOpacity(i){if(i<0||i>1)throw new Error("Opacity must be a number between 0 and 1");this.layer.setOpacity(i)}getOpacity(){return this.layer.getOpacity()}}class wT extends Ko{}class PT extends Ko{}class OT extends Ko{}var $r=(()=>(function(e){e[e.WMS_LAYER=0]="WMS_LAYER",e[e.VECTOR_LAYER=1]="VECTOR_LAYER",e[e.ARGIS_REST_LAYER=2]="ARGIS_REST_LAYER"}($r||($r={})),$r))(),Ei=(()=>(function(e){e[e.IMAGE=0]="IMAGE",e[e.TILE=1]="TILE"}(Ei||(Ei={})),Ei))();class ta{static createLayer(i,t,n){if(i===$r.VECTOR_LAYER)return ta.createVectorLayer(t);if(i===$r.WMS_LAYER)return ta.createWmsLayer(t,n.wmsType,n.serverType,n.serverUrl,n.serviceName,n.legend);if(i===$r.ARGIS_REST_LAYER)return ta.createArgisLayer(t,n.serverUrl,n.legend,n.attribution);throw new Error("LayerType no soportado")}static createVectorLayer(i){const t=new yi({wrapX:!0}),n=new Gs({source:t});return new wT(i,n)}static createWmsLayer(i,t,n,r,a,s,l){let c,h;if(t===Ei.IMAGE)c=xT,h=uT;else{if(t!==Ei.TILE)throw new Error("WmsType no soportado");c=Kb,h=Xs}const d=new h({source:new c({url:r,serverType:n,attributions:l,params:{LAYERS:a,tiled:"geoserver"===n&&t===Ei.TILE}})});return new PT(i,d,s)}static createArgisLayer(i,t,n,r){const a=new nT({url:t,attributions:r}),s=new Xs({source:a});return new OT(i,s,n)}}var Xp=.0066943799901413165,ea=484813681109536e-20,k=Math.PI/2,z=1e-10,Ce=.017453292519943295,Gn=57.29577951308232,Et=Math.PI/4,na=2*Math.PI,re=3.14159265359,Ye={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const ZT={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var $p=/[\s_\-\/\(\)]/g;function Ii(e,i){if(e[i])return e[i];for(var a,t=Object.keys(e),n=i.toLowerCase().replace($p,""),r=-1;++r<t.length;)if((a=t[r]).toLowerCase().replace($p,"")===n)return e[a]}function Xh(e){var n,r,a,i={},t=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var h=c.split("=");return h.push(!0),l[h[0].toLowerCase()]=h[1],l},{}),s={proj:"projName",datum:"datumCode",rf:function(l){i.rf=parseFloat(l)},lat_0:function(l){i.lat0=l*Ce},lat_1:function(l){i.lat1=l*Ce},lat_2:function(l){i.lat2=l*Ce},lat_ts:function(l){i.lat_ts=l*Ce},lon_0:function(l){i.long0=l*Ce},lon_1:function(l){i.long1=l*Ce},lon_2:function(l){i.long2=l*Ce},alpha:function(l){i.alpha=parseFloat(l)*Ce},gamma:function(l){i.rectified_grid_angle=parseFloat(l)},lonc:function(l){i.longc=l*Ce},x_0:function(l){i.x0=parseFloat(l)},y_0:function(l){i.y0=parseFloat(l)},k_0:function(l){i.k0=parseFloat(l)},k:function(l){i.k0=parseFloat(l)},a:function(l){i.a=parseFloat(l)},b:function(l){i.b=parseFloat(l)},r_a:function(){i.R_A=!0},zone:function(l){i.zone=parseInt(l,10)},south:function(){i.utmSouth=!0},towgs84:function(l){i.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){i.to_meter=parseFloat(l)},units:function(l){i.units=l;var c=Ii(ZT,l);c&&(i.to_meter=c.to_meter)},from_greenwich:function(l){i.from_greenwich=l*Ce},pm:function(l){var c=Ii(Ye,l);i.from_greenwich=(c||parseFloat(l))*Ce},nadgrids:function(l){"@null"===l?i.datumCode="none":i.nadgrids=l},axis:function(l){var c="ewnsud";3===l.length&&-1!==c.indexOf(l.substr(0,1))&&-1!==c.indexOf(l.substr(1,1))&&-1!==c.indexOf(l.substr(2,1))&&(i.axis=l)},approx:function(){i.approx=!0}};for(n in t)r=t[n],n in s?"function"==typeof(a=s[n])?a(r):i[a]=r:i[n]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var kT=/\s/,NT=/[A-Za-z]/,FT=/[A-Za-z84]/,tl=/[,\]]/,eg=/[\d\.E\-\+]/;function si(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function ng(e,i,t){Array.isArray(i)&&(t.unshift(i),i=null);var r=t.reduce(function(a,s){return Qr(s,a),a},i?{}:e);i&&(e[i]=r)}function Qr(e,i){if(Array.isArray(e)){var t=e.shift();if("PARAMETER"===t&&(t=e.shift()),1===e.length)return Array.isArray(e[0])?(i[t]={},void Qr(e[0],i[t])):void(i[t]=e[0]);if(e.length)if("TOWGS84"!==t){if("AXIS"===t)return t in i||(i[t]=[]),void i[t].push(e);var n;switch(Array.isArray(t)||(i[t]={}),t){case"UNIT":case"PRIMEM":case"VERT_DATUM":return i[t]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&Qr(e[2],i[t]));case"SPHEROID":case"ELLIPSOID":return i[t]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&Qr(e[3],i[t]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void ng(i,t,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return Qr(e,i[t]);return ng(i,t,e)}}else i[t]=e;else i[t]=!0}else i[e]=!0}function li(e){return.017453292519943295*e}function ig(e){var i=function UT(e){return new si(e).output()}(e),t=i.shift(),n=i.shift();i.unshift(["name",n]),i.unshift(["type",t]);var r={};return Qr(i,r),function jT(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):e.projName="object"==typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION,e.AXIS){for(var i="",t=0,n=e.AXIS.length;t<n;++t){var r=[e.AXIS[t][0].toLowerCase(),e.AXIS[t][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?i+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?i+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?i+="e":(-1!==r[0].indexOf("west")||("x"===r[0]||"lon"===r[0])&&"west"===r[1])&&(i+="w")}2===i.length&&(i+="u"),3===i.length&&(e.axis=i)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;function s(h){return h*(e.to_meter||1)}"GEOGCS"===e.type&&(a=e),a&&(e.datumCode=a.DATUM?a.DATUM.name.toLowerCase():a.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===e.datumCode||"new_zealand_1949"===e.datumCode)&&(e.datumCode="nzgd49"),("wgs_1984"===e.datumCode||"world_geodetic_system_1984"===e.datumCode)&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",li],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",li],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",li],["lat0","latitude_of_origin",li],["lat0","standard_parallel_1",li],["lat1","standard_parallel_1",li],["lat2","standard_parallel_2",li],["azimuth","Azimuth"],["alpha","azimuth",li],["srsCode","name"]].forEach(function(h){return function GT(e,i){var t=i[0],n=i[1];!(t in e)&&n in e&&(e[t]=e[n],3===i.length&&(e[t]=i[2](e[t])))}(e,h)}),!e.long0&&e.longc&&("Albers_Conic_Equal_Area"===e.projName||"Lambert_Azimuthal_Equal_Area"===e.projName)&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&("Stereographic_South_Pole"===e.projName||"Polar Stereographic (variant B)"===e.projName)&&(e.lat0=li(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(r),r}function hn(e){var i=this;if(2===arguments.length){var t=arguments[1];hn[e]="string"==typeof t?"+"===t.charAt(0)?Xh(arguments[1]):ig(arguments[1]):t}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?hn.apply(i,n):hn(n)});if("string"==typeof e){if(e in hn)return hn[e]}else"EPSG"in e?hn["EPSG:"+e.EPSG]=e:"ESRI"in e?hn["ESRI:"+e.ESRI]=e:"IAU2000"in e?hn["IAU2000:"+e.IAU2000]=e:console.log(e);return}}si.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;kT.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},si.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(tl.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},si.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},si.prototype.number=function(e){if(!eg.test(e)){if(tl.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},si.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},si.prototype.keyword=function(e){if(FT.test(e))this.word+=e;else{if("["===e){var i=[];return i.push(this.word),this.level++,null===this.root?this.root=i:this.currentObject.push(i),this.stack.push(this.currentObject),this.currentObject=i,void(this.state=1)}if(!tl.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},si.prototype.neutral=function(e){if(NT.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(eg.test(e))return this.word=e,void(this.state=3);if(!tl.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},si.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function ST(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(hn);const el=hn;var HT=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],VT=["3857","900913","3785","102113"];function rg(e,i){var t,n;if(e=e||{},!i)return e;for(n in i)void 0!==(t=i[n])&&(e[n]=t);return e}function jn(e,i,t){var n=e*i;return t/Math.sqrt(1-n*n)}function ra(e){return e<0?-1:1}function V(e){return Math.abs(e)<=re?e:e-ra(e)*na}function On(e,i,t){var n=e*t;return n=Math.pow((1-n)/(1+n),.5*e),Math.tan(.5*(k-i))/n}function oa(e,i){for(var n,r,t=.5*e,a=k-2*Math.atan(i),s=0;s<=15;s++)if(n=e*Math.sin(a),a+=r=k-2*Math.atan(i*Math.pow((1-n)/(1+n),t))-a,Math.abs(r)<=1e-10)return a;return-9999}const iM={init:function KT(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):jn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function tM(e){var n,r,i=e.x,t=e.y;if(t*Gn>90&&t*Gn<-90&&i*Gn>180&&i*Gn<-180)return null;if(Math.abs(Math.abs(t)-k)<=z)return null;if(this.sphere)n=this.x0+this.a*this.k0*V(i-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Et+.5*t));else{var a=Math.sin(t),s=On(this.e,t,a);n=this.x0+this.a*this.k0*V(i-this.long0),r=this.y0-this.a*this.k0*Math.log(s)}return e.x=n,e.y=r,e},inverse:function eM(e){var n,r,i=e.x-this.x0,t=e.y-this.y0;if(this.sphere)r=k-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(-9999===(r=oa(this.e,a)))return null}return n=V(this.long0+i/(this.a*this.k0)),e.x=n,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function og(e){return e}var aM=[iM,{init:function rM(){},forward:og,inverse:og,names:["longlat","identity"]}],nl={},il=[];function ag(e,i){var t=il.length;return e.names?(il[t]=e,e.names.forEach(function(n){nl[n.toLowerCase()]=t}),this):(console.log(i),!0)}const cM={start:function lM(){aM.forEach(ag)},add:ag,get:function sM(e){if(!e)return!1;var i=e.toLowerCase();return void 0!==nl[i]&&il[nl[i]]?il[nl[i]]:void 0}};var lt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},hM=lt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};lt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var _e={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var sg={};function mM(e){if(0===e.length)return null;var i="@"===e[0];return i&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!i,grid:null,isNull:!0}:{name:e,mandatory:!i,grid:sg[e]||null,isNull:!1}}function Kr(e){return e/3600*Math.PI/180}function Qh(e,i,t){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(i,t)))}function CM(e){return e.map(function(i){return[Kr(i.longitudeShift),Kr(i.latitudeShift)]})}function bM(e,i,t){return{name:Qh(e,i+8,i+16).trim(),parent:Qh(e,i+24,i+24+8).trim(),lowerLatitude:e.getFloat64(i+72,t),upperLatitude:e.getFloat64(i+88,t),lowerLongitude:e.getFloat64(i+104,t),upperLongitude:e.getFloat64(i+120,t),latitudeInterval:e.getFloat64(i+136,t),longitudeInterval:e.getFloat64(i+152,t),gridNodeCount:e.getInt32(i+168,t)}}function TM(e,i,t,n){for(var r=i+176,s=[],l=0;l<t.gridNodeCount;l++){var c={latitudeShift:e.getFloat32(r+16*l,n),longitudeShift:e.getFloat32(r+16*l+4,n),latitudeAccuracy:e.getFloat32(r+16*l+8,n),longitudeAccuracy:e.getFloat32(r+16*l+12,n)};s.push(c)}return s}function to(e,i){if(!(this instanceof to))return new to(e);i=i||function(h){if(h)throw h};var t=function $T(e){if(!function zT(e){return"string"==typeof e}(e))return e;if(function YT(e){return e in el}(e))return el[e];if(function BT(e){return HT.some(function(i){return e.indexOf(i)>-1})}(e)){var i=ig(e);if(function WT(e){var i=Ii(e,"authority");if(i){var t=Ii(i,"epsg");return t&&VT.indexOf(t)>-1}}(i))return el["EPSG:3857"];var t=function JT(e){var i=Ii(e,"extension");if(i)return Ii(i,"proj4")}(i);return t?Xh(t):i}return function XT(e){return"+"===e[0]}(e)?Xh(e):void 0}(e);if("object"==typeof t){var n=to.projections.get(t.projName);if(n){if(t.datumCode&&"none"!==t.datumCode){var r=Ii(_e,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=function dM(e,i,t,n,r){if(!e){var a=Ii(lt,n);a||(a=hM),e=a.a,i=a.b,t=a.rf}return t&&!i&&(i=(1-1/t)*e),(0===t||Math.abs(e-i)<z)&&(r=!0,i=e),{a:e,b:i,rf:t,sphere:r}}(t.a,t.b,t.rf,t.ellps,t.sphere),s=function uM(e,i,t,n){var r=e*e,a=i*i,s=(r-a)/r,l=0;return n?(r=(e*=1-s*(.16666666666666666+s*(.04722222222222222+.022156084656084655*s)))*e,s=0):l=Math.sqrt(s),{es:s,e:l,ep2:(r-a)/a}}(a.a,a.b,0,t.R_A),l=function _M(e){return void 0===e?null:e.split(",").map(mM)}(t.nadgrids),c=t.datum||function fM(e,i,t,n,r,a,s){var l={};return l.datum_type=void 0===e||"none"===e?5:4,i&&(l.datum_params=i.map(parseFloat),(0!==l.datum_params[0]||0!==l.datum_params[1]||0!==l.datum_params[2])&&(l.datum_type=1),l.datum_params.length>3&&(0!==l.datum_params[3]||0!==l.datum_params[4]||0!==l.datum_params[5]||0!==l.datum_params[6])&&(l.datum_type=2,l.datum_params[3]*=ea,l.datum_params[4]*=ea,l.datum_params[5]*=ea,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=3,l.grids=s),l.a=t,l.b=n,l.es=r,l.ep2=a,l}(t.datumCode,t.datum_params,a.a,a.b,s.es,s.ep2,l);rg(this,t),rg(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=c,this.init(),i(null,this)}else i(e)}else i(e)}(to.projections=cM).start();const aa=to;function lg(e,i,t){var s,l,h,n=e.x,r=e.y,a=e.z?e.z:0;if(r<-k&&r>-1.001*k)r=-k;else if(r>k&&r<1.001*k)r=k;else{if(r<-k)return{x:-1/0,y:-1/0,z:e.z};if(r>k)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),l=Math.sin(r),h=Math.cos(r),{x:((s=t/Math.sqrt(1-i*(l*l)))+a)*h*Math.cos(n),y:(s+a)*h*Math.sin(n),z:(s*(1-i)+a)*l}}function cg(e,i,t,n){var l,c,h,u,d,f,p,g,_,m,v,y,C,M,P,x=e.x,b=e.y,T=e.z?e.z:0;if(l=Math.sqrt(x*x+b*b),c=Math.sqrt(x*x+b*b+T*T),l/t<1e-12){if(M=0,c/t<1e-12)return P=-n,{x:e.x,y:e.y,z:e.z}}else M=Math.atan2(b,x);h=T/c,g=(u=l/c)*(1-i)*(d=1/Math.sqrt(1-i*(2-i)*u*u)),_=h*d,C=0;do{C++,f=i*(p=t/Math.sqrt(1-i*_*_))/(p+(P=l*g+T*_-p*(1-i*_*_))),y=(v=h*(d=1/Math.sqrt(1-f*(2-f)*u*u)))*g-(m=u*(1-f)*d)*_,g=m,_=v}while(y*y>1e-24&&C<30);return{x:M,y:Math.atan(v/Math.abs(m)),z:P}}function rl(e){return 1===e||2===e}function hg(e,i,t){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},s=[],l=0;l<e.grids.length;l++){var c=e.grids[l];if(s.push(c.name),c.isNull){r=n;break}if(null!==c.grid){var h=c.grid.subgrids[0],u=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4;if(!(h.ll[1]-u>n.y||h.ll[0]-u>n.x||h.ll[1]+(h.lim[1]-1)*h.del[1]+u<n.y||h.ll[0]+(h.lim[0]-1)*h.del[0]+u<n.x||(r=SM(n,i,h),isNaN(r.x))))break}else if(c.mandatory)return console.log("Unable to find mandatory grid '"+c.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Gn+" "+n.y*Gn+" tried: '"+s+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function SM(e,i,t){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var r={x:e.x,y:e.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=V(r.x-Math.PI)+Math.PI;var a=ug(r,t);if(i){if(isNaN(a.x))return n;a.x=r.x-a.x,a.y=r.y-a.y;var c,h,s=9;do{if(h=ug(a,t),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a.x+=(c={x:r.x-(h.x+a.x),y:r.y-(h.y+a.y)}).x,a.y+=c.y}while(s--&&Math.abs(c.x)>1e-12&&Math.abs(c.y)>1e-12);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=V(a.x+t.ll[0]),n.y=a.y+t.ll[1]}else isNaN(a.x)||(n.x=e.x+a.x,n.y=e.y+a.y);return n}function ug(e,i){var s,t={x:e.x/i.del[0],y:e.y/i.del[1]},n_x=Math.floor(t.x),n_y=Math.floor(t.y),r_x=t.x-1*n_x,r_y=t.y-1*n_y,a={x:Number.NaN,y:Number.NaN};if(n_x<0||n_x>=i.lim[0]||n_y<0||n_y>=i.lim[1])return a;var l_x=i.cvs[s=n_y*i.lim[0]+n_x][0],l_y=i.cvs[s][1];s++;var c_x=i.cvs[s][0],c_y=i.cvs[s][1],h_x=i.cvs[s+=i.lim[0]][0],h_y=i.cvs[s][1];s--;var u_y=i.cvs[s][1],d=r_x*r_y,f=r_x*(1-r_y),p=(1-r_x)*(1-r_y),g=(1-r_x)*r_y;return a.x=p*l_x+f*c_x+g*i.cvs[s][0]+d*h_x,a.y=p*l_y+f*c_y+g*u_y+d*h_y,a}function dg(e,i,t){var s,l,c,n=t.x,r=t.y,a=t.z||0,h={};for(c=0;c<3;c++)if(!i||2!==c||void 0!==t.z)switch(0===c?(s=n,l=-1!=="ew".indexOf(e.axis[c])?"x":"y"):1===c?(s=r,l=-1!=="ns".indexOf(e.axis[c])?"y":"x"):(s=a,l="z"),e.axis[c]){case"e":case"n":h[l]=s;break;case"w":case"s":h[l]=-s;break;case"u":void 0!==t[l]&&(h.z=s);break;case"d":void 0!==t[l]&&(h.z=-s);break;default:return null}return h}function fg(e){var i={x:e[0],y:e[1]};return e.length>2&&(i.z=e[2]),e.length>3&&(i.m=e[3]),i}function pg(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function ol(e,i,t,n){var r;if(Array.isArray(t)&&(t=fg(t)),function AM(e){pg(e.x),pg(e.y)}(t),e.datum&&i.datum&&function EM(e,i){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==i.datumCode||(1===i.datum.datum_type||2===i.datum.datum_type)&&"WGS84"!==e.datumCode}(e,i)&&(t=ol(e,r=new aa("WGS84"),t,n),e=r),n&&"enu"!==e.axis&&(t=dg(e,!1,t)),"longlat"===e.projName)t={x:t.x*Ce,y:t.y*Ce,z:t.z||0};else if(e.to_meter&&(t={x:t.x*e.to_meter,y:t.y*e.to_meter,z:t.z||0}),!(t=e.inverse(t)))return;if(e.from_greenwich&&(t.x+=e.from_greenwich),t=function OM(e,i,t){if(function MM(e,i){return!(e.datum_type!==i.datum_type||e.a!==i.a||Math.abs(e.es-i.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===i.datum_params[0]&&e.datum_params[1]===i.datum_params[1]&&e.datum_params[2]===i.datum_params[2]:2!==e.datum_type||e.datum_params[0]===i.datum_params[0]&&e.datum_params[1]===i.datum_params[1]&&e.datum_params[2]===i.datum_params[2]&&e.datum_params[3]===i.datum_params[3]&&e.datum_params[4]===i.datum_params[4]&&e.datum_params[5]===i.datum_params[5]&&e.datum_params[6]===i.datum_params[6])}(e,i)||5===e.datum_type||5===i.datum_type)return t;var n=e.a,r=e.es;if(3===e.datum_type){if(0!==hg(e,!1,t))return;n=6378137,r=Xp}var s=i.a,l=i.b,c=i.es;return 3===i.datum_type&&(s=6378137,l=6356752.314,c=Xp),r!==c||n!==s||rl(e.datum_type)||rl(i.datum_type)?(t=lg(t,r,n),rl(e.datum_type)&&(t=function wM(e,i,t){if(1===i)return{x:e.x+t[0],y:e.y+t[1],z:e.z+t[2]};if(2===i){var s=t[3],l=t[4],c=t[5],h=t[6];return{x:h*(e.x-c*e.y+l*e.z)+t[0],y:h*(c*e.x+e.y-s*e.z)+t[1],z:h*(-l*e.x+s*e.y+e.z)+t[2]}}}(t,e.datum_type,e.datum_params)),rl(i.datum_type)&&(t=function PM(e,i,t){if(1===i)return{x:e.x-t[0],y:e.y-t[1],z:e.z-t[2]};if(2===i){var s=t[3],l=t[4],c=t[5],h=t[6],u=(e.x-t[0])/h,d=(e.y-t[1])/h,f=(e.z-t[2])/h;return{x:u+c*d-l*f,y:-c*u+d+s*f,z:l*u-s*d+f}}}(t,i.datum_type,i.datum_params)),t=cg(t,c,s,l),3!==i.datum_type||0===hg(i,!0,t)?t:void 0):t}(e.datum,i.datum,t))return i.from_greenwich&&(t={x:t.x-i.from_greenwich,y:t.y,z:t.z||0}),"longlat"===i.projName?t={x:t.x*Gn,y:t.y*Gn,z:t.z||0}:(t=i.forward(t),i.to_meter&&(t={x:t.x/i.to_meter,y:t.y/i.to_meter,z:t.z||0})),n&&"enu"!==i.axis?dg(i,!0,t):t}var gg=aa("WGS84");function Kh(e,i,t,n){var r,a,s;return Array.isArray(t)?(r=ol(e,i,t,n)||{x:NaN,y:NaN},t.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==i.name&&"geocent"===i.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(a=ol(e,i,t,n),2===(s=Object.keys(t)).length||s.forEach(function(l){if(void 0!==e.name&&"geocent"===e.name||void 0!==i.name&&"geocent"===i.name){if("x"===l||"y"===l||"z"===l)return}else if("x"===l||"y"===l)return;a[l]=t[l]}),a)}function _g(e){return e instanceof aa?e:e.oProj?e.oProj:aa(e)}const nn=function IM(e,i,t){e=_g(e);var r,n=!1;return void 0===i?(i=e,e=gg,n=!0):(void 0!==i.x||Array.isArray(i))&&(t=i,i=e,e=gg,n=!0),i=_g(i),t?Kh(e,i,t):(r={forward:function(a,s){return Kh(e,i,a,s)},inverse:function(a,s){return Kh(i,e,a,s)}},n&&(r.oProj=i),r)};const DM={forward:xg,inverse:function RM(e){var i=eu(Mg(e.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]},toPoint:Cg};function xg(e,i){return i=i||5,function kM(e,i){var t="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function NM(e,i,t){var n=Tg(t);return function FM(e,i,t){var n=t-1,r="AJSAJS".charCodeAt(n),a="AFAFAF".charCodeAt(n),s=r+e-1,l=a+i,c=!1;return s>90&&(s=s-90+65-1,c=!0),(73===s||r<73&&s>73||(s>73||r<73)&&c)&&s++,(79===s||r<79&&s>79||(s>79||r<79)&&c)&&73==++s&&s++,s>90&&(s=s-90+65-1),l>86?(l=l-86+65-1,c=!0):c=!1,(73===l||a<73&&l>73||(l>73||a<73)&&c)&&l++,(79===l||a<79&&l>79||(l>79||a<79)&&c)&&73==++l&&l++,l>86&&(l=l-86+65-1),String.fromCharCode(s)+String.fromCharCode(l)}(Math.floor(e/1e5),Math.floor(i/1e5)%20,n)}(e.easting,e.northing,e.zoneNumber)+t.substr(t.length-5,i)+n.substr(n.length-5,i)}(function ZM(e){var l,c,h,u,d,_,m,i=e.lat,t=e.lon,n=6378137,r=.00669438,a=.9996,p=tu(i),g=tu(t);m=Math.floor((t+180)/6)+1,180===t&&(m=60),i>=56&&i<64&&t>=3&&t<12&&(m=32),i>=72&&i<84&&(t>=0&&t<9?m=31:t>=9&&t<21?m=33:t>=21&&t<33?m=35:t>=33&&t<42&&(m=37)),_=tu(6*(m-1)-180+3),l=r/(1-r),c=n/Math.sqrt(1-r*Math.sin(p)*Math.sin(p)),h=Math.tan(p)*Math.tan(p),u=l*Math.cos(p)*Math.cos(p);var v=a*c*((d=Math.cos(p)*(g-_))+(1-h+u)*d*d*d/6+(5-18*h+h*h+72*u-58*l)*d*d*d*d*d/120)+5e5,y=a*(n*(.9983242984503243*p-.002514607064228144*Math.sin(2*p)+2639046602129982e-21*Math.sin(4*p)-35*r*r*r/3072*Math.sin(6*p))+c*Math.tan(p)*(d*d/2+(5-h+9*u+4*u*u)*d*d*d*d/24+(61-58*h+h*h+600*u-330*l)*d*d*d*d*d*d/720));return i<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(v),zoneNumber:m,zoneLetter:LM(i)}}({lat:e[1],lon:e[0]}),i)}function Cg(e){var i=eu(Mg(e.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i.right)/2,(i.top+i.bottom)/2]}function tu(e){return e*(Math.PI/180)}function bg(e){return e/Math.PI*180}function eu(e){var i=e.northing,t=e.easting,n=e.zoneLetter,r=e.zoneNumber;if(r<0||r>60)return null;var c,u,d,f,p,g,m,v,y,a=.9996,s=6378137,l=.00669438,h=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),C=t-5e5,x=i;n<"N"&&(x-=1e7),m=6*(r-1)-180+3,c=l/(1-l),y=(v=x/a/6367449.145945056)+(3*h/2-27*h*h*h/32)*Math.sin(2*v)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*v)+151*h*h*h/96*Math.sin(6*v),u=s/Math.sqrt(1-l*Math.sin(y)*Math.sin(y)),d=Math.tan(y)*Math.tan(y),f=c*Math.cos(y)*Math.cos(y),p=s*(1-l)/Math.pow(1-l*Math.sin(y)*Math.sin(y),1.5),g=C/(u*a);var b=y-u*Math.tan(y)/p*(g*g/2-(5+3*d+10*f-4*f*f-9*c)*g*g*g*g/24+(61+90*d+298*f+45*d*d-252*c-3*f*f)*g*g*g*g*g*g/720);b=bg(b);var M,T=(g-(1+2*d+f)*g*g*g/6+(5-2*f+28*d-3*f*f+8*c+24*d*d)*g*g*g*g*g/120)/Math.cos(y);if(T=m+bg(T),e.accuracy){var w=eu({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});M={top:w.lat,right:w.lon,bottom:b,left:T}}else M={lat:b,lon:T};return M}function LM(e){var i="Z";return 84>=e&&e>=72?i="X":72>e&&e>=64?i="W":64>e&&e>=56?i="V":56>e&&e>=48?i="U":48>e&&e>=40?i="T":40>e&&e>=32?i="S":32>e&&e>=24?i="R":24>e&&e>=16?i="Q":16>e&&e>=8?i="P":8>e&&e>=0?i="N":0>e&&e>=-8?i="M":-8>e&&e>=-16?i="L":-16>e&&e>=-24?i="K":-24>e&&e>=-32?i="J":-32>e&&e>=-40?i="H":-40>e&&e>=-48?i="G":-48>e&&e>=-56?i="F":-56>e&&e>=-64?i="E":-64>e&&e>=-72?i="D":-72>e&&e>=-80&&(i="C"),i}function Tg(e){var i=e%6;return 0===i&&(i=6),i}function Mg(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var r,i=e.length,t=null,n="",a=0;!/[A-Z]/.test(r=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;n+=r,a++}var s=parseInt(n,10);if(0===a||a+3>i)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(a++);if(l<="A"||"B"===l||"Y"===l||l>="Z"||"I"===l||"O"===l)throw"MGRSPoint zone letter "+l+" not handled: "+e;t=e.substring(a,a+=2);for(var c=Tg(s),h=function UM(e,i){for(var t="AJSAJS".charCodeAt(i-1),n=1e5,r=!1;t!==e.charCodeAt(0);){if(73==++t&&t++,79===t&&t++,t>90){if(r)throw"Bad character: "+e;t=65,r=!0}n+=1e5}return n}(t.charAt(0),c),u=function qM(e,i){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var t="AFAFAF".charCodeAt(i-1),n=0,r=!1;t!==e.charCodeAt(0);){if(73==++t&&t++,79===t&&t++,t>86){if(r)throw"Bad character: "+e;t=65,r=!0}n+=1e5}return n}(t.charAt(1),c);u<GM(l);)u+=2e6;var d=i-a;if(d%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var _,m,v,f=d/2,p=0,g=0;return f>0&&(_=1e5/Math.pow(10,f),m=e.substring(a,a+f),p=parseFloat(m)*_,v=e.substring(a+f),g=parseFloat(v)*_),{easting:p+h,northing:g+u,zoneLetter:l,zoneNumber:s,accuracy:_}}function GM(e){var i;switch(e){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+e}function no(e,i,t){if(!(this instanceof no))return new no(e,i,t);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===i){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=i,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}no.fromMGRS=function(e){return new no(Cg(e))},no.prototype.toMGRS=function(e){return xg([this.x,this.y],e)};const jM=no;var Pg=.01953125,Og=.01068115234375;function Sg(e){var i=[];i[0]=1-e*(.25+e*(.046875+e*(Pg+e*Og))),i[1]=e*(.75-e*(.046875+e*(Pg+e*Og)));var t=e*e;return i[2]=t*(.46875-e*(.013020833333333334+.007120768229166667*e)),i[3]=(t*=e)*(.3645833333333333-.005696614583333333*e),i[4]=t*e*.3076171875,i}function al(e,i,t,n){return n[0]*e-(t*=i)*(n[1]+(i*=i)*(n[2]+i*(n[3]+i*n[4])))}function Ag(e,i,t){for(var n=1/(1-i),r=e,a=20;a;--a){var s=Math.sin(r),l=1-i*s*s;if(r-=l=(al(r,s,Math.cos(r),t)-e)*(l*Math.sqrt(l))*n,Math.abs(l)<z)return r}return r}const sl={init:function KM(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Sg(this.es),this.ml0=al(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function tw(e){var r,a,s,t=e.y,n=V(e.x-this.long0),l=Math.sin(t),c=Math.cos(t);if(this.es){var u=c*n,d=Math.pow(u,2),f=this.ep2*Math.pow(c,2),p=Math.pow(f,2),g=Math.abs(c)>z?Math.tan(t):0,_=Math.pow(g,2),m=Math.pow(_,2);r=1-this.es*Math.pow(l,2),u/=Math.sqrt(r);var v=al(t,l,c,this.en);a=this.a*(this.k0*u*(1+d/6*(1-_+f+d/20*(5-18*_+m+14*f-58*_*f+d/42*(61+179*m-m*_-479*_)))))+this.x0,s=this.a*(this.k0*(v-this.ml0+l*n*u/2*(1+d/12*(5-_+9*f+4*p+d/30*(61+m-58*_+270*f-330*_*f+d/56*(1385+543*m-m*_-3111*_))))))+this.y0}else{var h=c*Math.sin(n);if(Math.abs(Math.abs(h)-1)<z)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,s=c*Math.cos(n)/Math.sqrt(1-Math.pow(h,2)),(h=Math.abs(s))>=1){if(h-1>z)return 93;s=0}else s=Math.acos(s);t<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return e.x=a,e.y=s,e},inverse:function ew(e){var i,t,n,r,a=1/this.a*(e.x-this.x0),s=1/this.a*(e.y-this.y0);if(this.es)if(t=Ag(i=this.ml0+s/this.k0,this.es,this.en),Math.abs(t)<k){var d=Math.sin(t),f=Math.cos(t),p=Math.abs(f)>z?Math.tan(t):0,g=this.ep2*Math.pow(f,2),_=Math.pow(g,2),m=Math.pow(p,2),v=Math.pow(m,2);i=1-this.es*Math.pow(d,2);var y=a*Math.sqrt(i)/this.k0,C=Math.pow(y,2);n=t-(i*=p)*C/(1-this.es)*.5*(1-C/12*(5+3*m-9*g*m+g-4*_-C/30*(61+90*m-252*g*m+45*v+46*g-C/56*(1385+3633*m+4095*v+1574*v*m)))),r=V(this.long0+y*(1-C/6*(1+2*m+g-C/20*(5+28*m+24*v+8*g*m+6*g-C/42*(61+662*m+1320*v+720*v*m))))/f)}else n=k*ra(s),r=0;else{var l=Math.exp(a/this.k0),c=.5*(l-1/l),u=Math.cos(this.lat0+s/this.k0);i=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(c,2))),n=Math.asin(i),s<0&&(n=-n),r=0===c&&0===u?0:V(Math.atan2(c,u)+this.long0)}return e.x=r,e.y=n,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Eg(e){var i=Math.exp(e);return(i-1/i)/2}function ll(e,i){e=Math.abs(e),i=Math.abs(i);var t=Math.max(e,i),n=Math.min(e,i)/(t||1);return t*Math.sqrt(1+Math.pow(n,2))}function nu(e,i){for(var s,t=2*Math.cos(2*i),n=e.length-1,r=e[n],a=0;--n>=0;)s=t*r-a+e[n],a=r,r=s;return i+s*Math.sin(2*i)}function Ig(e,i,t){for(var g,_,n=Math.sin(i),r=Math.cos(i),a=Eg(t),s=function aw(e){var i=Math.exp(e);return(i+1/i)/2}(t),l=2*r*s,c=-2*n*a,h=e.length-1,u=e[h],d=0,f=0,p=0;--h>=0;)g=f,_=d,u=l*(f=u)-g-c*(d=p)+e[h],p=c*f-_+l*d;return[(l=n*s)*u-(c=r*a)*p,l*p+c*u]}const cl={init:function sw(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(sl.init.apply(this),this.forward=sl.forward,this.inverse=sl.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),i=e/(2-e),t=i;this.cgb[0]=i*(2+i*(-2/3+i*(i*(116/45+i*(26/45+i*(-2854/675)))-2))),this.cbg[0]=i*(i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))-2),this.cgb[1]=(t*=i)*(7/3+i*(i*(-227/45+i*(2704/315+i*(2323/945)))-1.6)),this.cbg[1]=t*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),this.cgb[2]=(t*=i)*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=t*(-26/15+i*(34/21+i*(1.6+i*(-12686/2835)))),this.cgb[3]=(t*=i)*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=t*(1237/630+i*(i*(-24832/14175)-2.4)),this.cgb[4]=(t*=i)*(4174/315+i*(-144838/6237)),this.cbg[4]=t*(-734/315+i*(109598/31185)),this.cgb[5]=(t*=i)*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=i*(i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))-.5),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=t*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=t*(13/48+i*(i*(557/1440+i*(281/630+i*(-1983433/1935360)))-.6)),this.utg[2]=(t*=i)*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=t*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),this.utg[3]=(t*=i)*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=t*(49561/161280+i*(-179/168+i*(6601661/7257600))),this.utg[4]=(t*=i)*(-4583/161280+i*(108847/3991680)),this.gtu[4]=t*(34729/80640+i*(-3418889/1995840)),this.utg[5]=(t*=i)*(-20648693/638668800),this.gtu[5]=.6650675310896665*t;var n=nu(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function ow(e,i){for(var s,t=2*Math.cos(i),n=e.length-1,r=e[n],a=0;--n>=0;)s=t*r-a+e[n],a=r,r=s;return Math.sin(i)*s}(this.gtu,2*n))},forward:function lw(e){var i=V(e.x-this.long0),t=e.y;t=nu(this.cbg,t);var n=Math.sin(t),r=Math.cos(t),a=Math.sin(i),s=Math.cos(i);t=Math.atan2(n,s*r),i=Math.atan2(a*r,ll(n,r*s)),i=function rw(e){var i=Math.abs(e);return i=function iw(e){var i=1+e,t=i-1;return 0===t?e:e*Math.log(i)/t}(i*(1+i/(ll(1,i)+1))),e<0?-i:i}(Math.tan(i));var c,h,l=Ig(this.gtu,2*t,2*i);return t+=l[0],i+=l[1],Math.abs(i)<=2.623395162778?(c=this.a*(this.Qn*i)+this.x0,h=this.a*(this.Qn*t+this.Zb)+this.y0):(c=1/0,h=1/0),e.x=c,e.y=h,e},inverse:function cw(e){var n,r,i=1/this.a*(e.x-this.x0),t=1/this.a*(e.y-this.y0);if(t=(t-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var a=Ig(this.utg,2*t,2*i);t+=a[0],i+=a[1],i=Math.atan(Eg(i));var s=Math.sin(t),l=Math.cos(t),c=Math.sin(i),h=Math.cos(i);t=Math.atan2(s*h,ll(c,h*l)),n=V((i=Math.atan2(c,h*l))+this.long0),r=nu(this.cgb,t)}else n=1/0,r=1/0;return e.x=n,e.y=r,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},gw={init:function fw(){var e=function uw(e,i){if(void 0===e){if((e=Math.floor(30*(V(i)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Ce,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,cl.init.apply(this),this.forward=cl.forward,this.inverse=cl.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function iu(e,i){return Math.pow((1-e)/(1+e),i)}const ru={init:function mw(){var e=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Et)/(Math.pow(Math.tan(.5*this.lat0+Et),this.C)*iu(this.e*e,this.ratexp))},forward:function vw(e){var i=e.x,t=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Et),this.C)*iu(this.e*Math.sin(t),this.ratexp))-k,e.x=this.C*i,e},inverse:function yw(e){for(var t=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+Et)/this.K,1/this.C),a=20;a>0&&(n=2*Math.atan(r*iu(this.e*Math.sin(e.y),-.5*this.e))-k,!(Math.abs(n-e.y)<1e-14));--a)e.y=n;return a?(e.x=t,e.y=n,e):null},names:["gauss"]},ww={init:function Cw(){ru.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function bw(e){var i,t,n,r;return e.x=V(e.x-this.long0),ru.forward.apply(this,[e]),i=Math.sin(e.y),t=Math.cos(e.y),n=Math.cos(e.x),e.x=(r=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*t*n))*t*Math.sin(e.x),e.y=r*(this.cosc0*i-this.sinc0*t*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function Tw(e){var i,t,n,r,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var s=2*Math.atan2(a,this.R2);i=Math.sin(s),t=Math.cos(s),r=Math.asin(t*this.sinc0+e.y*i*this.cosc0/a),n=Math.atan2(e.x*i,a*this.cosc0*t-e.y*this.sinc0*i)}else r=this.phic0,n=0;return e.x=n,e.y=r,ru.inverse.apply(this,[e]),e.x=V(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Iw={init:function Ow(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=z&&(this.k0=.5*(1+ra(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=z&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=z&&(this.k0=.5*this.cons*jn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/On(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=jn(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-k,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Sw(e){var a,s,l,c,h,u,i=e.x,t=e.y,n=Math.sin(t),r=Math.cos(t),d=V(i-this.long0);return Math.abs(Math.abs(i-this.long0)-Math.PI)<=z&&Math.abs(t+this.lat0)<=z?(e.x=NaN,e.y=NaN,e):this.sphere?(a=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(d)),e.x=this.a*a*r*Math.sin(d)+this.x0,e.y=this.a*a*(this.coslat0*n-this.sinlat0*r*Math.cos(d))+this.y0,e):(s=2*Math.atan(this.ssfn_(t,n,this.e))-k,c=Math.cos(s),l=Math.sin(s),Math.abs(this.coslat0)<=z?(h=On(this.e,t*this.con,this.con*n),e.x=this.x0+(u=2*this.a*this.k0*h/this.cons)*Math.sin(i-this.long0),e.y=this.y0-this.con*u*Math.cos(i-this.long0),e):(Math.abs(this.sinlat0)<z?(a=2*this.a*this.k0/(1+c*Math.cos(d)),e.y=a*l):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(d))),e.y=a*(this.cosX0*l-this.sinX0*c*Math.cos(d))+this.y0),e.x=a*c*Math.sin(d)+this.x0,e))},inverse:function Aw(e){e.x-=this.x0,e.y-=this.y0;var i,t,r,a,s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(s/(2*this.a*this.k0));return i=this.long0,t=this.lat0,s<=z?(e.x=i,e.y=t,e):(t=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/s),i=Math.abs(this.coslat0)<z?V(this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y)):V(this.long0+Math.atan2(e.x*Math.sin(l),s*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=i,e.y=t,e)}if(Math.abs(this.coslat0)<=z){if(s<=z)return t=this.lat0,e.x=i=this.long0,e.y=t,e;e.x*=this.con,e.y*=this.con,t=this.con*oa(this.e,s*this.cons/(2*this.a*this.k0)),i=this.con*V(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,s<=z?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+e.y*Math.sin(r)*this.cosX0/s),i=V(this.long0+Math.atan2(e.x*Math.sin(r),s*this.cosX0*Math.cos(r)-e.y*this.sinX0*Math.sin(r)))),t=-1*oa(this.e,Math.tan(.5*(k+a)));return e.x=i,e.y=t,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function Pw(e,i,t){return i*=t,Math.tan(.5*(k+e))*Math.pow((1-i)/(1+i),.5*t)}},kw={init:function Dw(){var e=this.lat0;this.lambda0=this.long0;var i=Math.sin(e),t=this.a,r=1/this.rf,a=2*r-Math.pow(r,2),s=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(i,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(i/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+s*i)/(1-s*i));this.K=l-this.alpha*c+this.alpha*s/2*h},forward:function Rw(e){var i=Math.log(Math.tan(Math.PI/4-e.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=2*(Math.atan(Math.exp(-this.alpha*(i+t)+this.K))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),l=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*s+this.x0,e},inverse:function Zw(e){for(var n=(e.x-this.x0)/this.R,r=2*(Math.atan(Math.exp((e.y-this.y0)/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),l=this.lambda0+s/this.alpha,c=0,h=a,u=-1e3,d=0;Math.abs(h-u)>1e-7;){if(++d>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(c))-Math.PI/2}return e.x=l,e.y=h,e},names:["somerc"]};var io=1e-7;const jw={init:function Fw(){var e,i,t,n,r,a,s,l,c,h,d,u=0,f=0,p=0,g=0,_=0,m=0,v=0;this.no_off=function Nw(e){var t="object"==typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(t)}(this),this.no_rot="no_rot"in this;var C=!1;"alpha"in this&&(C=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),C&&(v=this.alpha),x&&(u=this.rectified_grid_angle*Ce),C||x)f=this.longc;else if(p=this.long1,_=this.lat1,g=this.long2,m=this.lat2,Math.abs(_-m)<=io||(e=Math.abs(_))<=io||Math.abs(e-k)<=io||Math.abs(Math.abs(this.lat0)-k)<=io||Math.abs(Math.abs(m)-k)<=io)throw new Error;var b=1-this.es;i=Math.sqrt(b),Math.abs(this.lat0)>z?(l=Math.sin(this.lat0),t=Math.cos(this.lat0),e=1-this.es*l*l,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*i/e,(r=(n=this.B*i/(t*Math.sqrt(e)))*n-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(On(this.e,this.lat0,l),this.B)):(this.B=1/i,this.A=this.k0,this.E=n=r=1),C||x?(C?(d=Math.asin(Math.sin(v)/n),x||(u=v)):(d=u,v=Math.asin(n*Math.sin(d))),this.lam0=f-Math.asin(.5*(r-1/r)*Math.tan(d))/this.B):(a=Math.pow(On(this.e,_,Math.sin(_)),this.B),s=Math.pow(On(this.e,m,Math.sin(m)),this.B),r=this.E/a,c=(s-a)/(s+a),h=((h=this.E*this.E)-s*a)/(h+s*a),(e=p-g)<-Math.pi?g-=na:e>Math.pi&&(g+=na),this.lam0=V(.5*(p+g)-Math.atan(h*Math.tan(.5*this.B*(p-g))/c)/this.B),d=Math.atan(2*Math.sin(this.B*V(p-this.lam0))/(r-1/r)),u=v=Math.asin(n*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(Et-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Et+r))},forward:function Uw(e){var t,n,r,a,s,l,c,h,i={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-k)>z){if(t=.5*((s=this.E/Math.pow(On(this.e,e.y,Math.sin(e.y)),this.B))-(l=1/s)),n=.5*(s+l),a=Math.sin(this.B*e.x),r=(t*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(r)-1)<z)throw new Error;h=.5*this.ArB*Math.log((1-r)/(1+r)),l=Math.cos(this.B*e.x),c=Math.abs(l)<io?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+a*this.singam,l)}else h=e.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*e.y;return this.no_rot?(i.x=c,i.y=h):(i.x=h*this.cosrot+(c-=this.u_0)*this.sinrot,i.y=c*this.cosrot-h*this.sinrot),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i},inverse:function qw(e){var i,t,n,r,a,s,l,c={};if(e.x=1/this.a*(e.x-this.x0),e.y=1/this.a*(e.y-this.y0),this.no_rot?(t=e.y,i=e.x):(t=e.x*this.cosrot-e.y*this.sinrot,i=e.y*this.cosrot+e.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*t))-1/n),a=.5*(n+1/n),l=((s=Math.sin(this.BrA*i))*this.cosgam+r*this.singam)/a,Math.abs(Math.abs(l)-1)<z)c.x=0,c.y=l<0?-k:k;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=oa(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(r*this.cosgam-s*this.singam,Math.cos(this.BrA*i))}return c.x+=this.lam0,c},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Vw={init:function zw(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<z)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var i=Math.sin(this.lat1),t=Math.cos(this.lat1),n=jn(this.e,i,t),r=On(this.e,this.lat1,i),a=Math.sin(this.lat2),s=Math.cos(this.lat2),l=jn(this.e,a,s),c=On(this.e,this.lat2,a),h=On(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>z?Math.log(n/l)/Math.log(r/c):i,isNaN(this.ns)&&(this.ns=i),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function Yw(e){var i=e.x,t=e.y;Math.abs(2*Math.abs(t)-Math.PI)<=z&&(t=ra(t)*(k-2*z));var r,a,n=Math.abs(Math.abs(t)-k);if(n>z)r=On(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(r,this.ns);else{if((n=t*this.ns)<=0)return null;a=0}var s=this.ns*V(i-this.long0);return e.x=this.k0*(a*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(s))+this.y0,e},inverse:function Hw(e){var i,t,n,r,a,s=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(s*s+l*l),t=1):(i=-Math.sqrt(s*s+l*l),t=-1);var c=0;if(0!==i&&(c=Math.atan2(t*s,t*l)),0!==i||this.ns>0){if(t=1/this.ns,n=Math.pow(i/(this.a*this.f0),t),-9999===(r=oa(this.e,n)))return null}else r=-k;return a=V(c/this.ns+this.long0),e.x=a,e.y=r,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},Qw={init:function Ww(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function Jw(e){var i,t,n,r,a,s,l,h=e.y,u=V(e.x-this.long0);return i=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/i)-this.s45),n=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(n)),a=Math.asin(Math.cos(t)*Math.sin(n)/Math.cos(r)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),e.y=l*Math.cos(s)/1,e.x=l*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function Xw(e){var i,t,n,r,s,l,c,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),s=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),t=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),e.x=this.long0-t/this.alfa,l=i,c=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(c=1),l=e.y,u+=1}while(0===c&&u<15);return u>=15?null:e},names:["Krovak","krovak"]};function Fe(e,i,t,n,r){return e*r-i*Math.sin(2*r)+t*Math.sin(4*r)-n*Math.sin(6*r)}function ca(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function ha(e){return.375*e*(1+.25*e*(1+.46875*e))}function ua(e){return.05859375*e*e*(1+.75*e)}function da(e){return e*e*e*(35/3072)}function ro(e,i,t){var n=i*t;return e/Math.sqrt(1-n*n)}function oo(e){return Math.abs(e)<k?e:e-ra(e)*Math.PI}function hl(e,i,t,n,r){var a,s;a=e/i;for(var l=0;l<15;l++)if(a+=s=(e-(i*a-t*Math.sin(2*a)+n*Math.sin(4*a)-r*Math.sin(6*a)))/(i-2*t*Math.cos(2*a)+4*n*Math.cos(4*a)-6*r*Math.cos(6*a)),Math.abs(s)<=1e-10)return a;return NaN}const iP={init:function Kw(){this.sphere||(this.e0=ca(this.es),this.e1=ha(this.es),this.e2=ua(this.es),this.e3=da(this.es),this.ml0=this.a*Fe(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function tP(e){var i,t,n=e.x,r=e.y;if(n=V(n-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(r)*Math.sin(n)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var a=Math.sin(r),s=Math.cos(r),l=ro(this.a,this.e,a),c=Math.tan(r)*Math.tan(r),h=n*Math.cos(r),u=h*h,d=this.es*s*s/(1-this.es);i=l*h*(1-u*c*(1/6-(8-c+8*d)*u/120)),t=this.a*Fe(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+l*a/s*u*(.5+(5-c+6*d)*u/24)}return e.x=i+this.x0,e.y=t+this.y0,e},inverse:function eP(e){e.x-=this.x0,e.y-=this.y0;var n,r,i=e.x/this.a,t=e.y/this.a;if(this.sphere){var a=t+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(i)),r=Math.atan2(Math.tan(i),Math.cos(a))}else{var l=hl(this.ml0/this.a+t,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-k)<=z)return e.x=this.long0,e.y=k,t<0&&(e.y*=-1),e;var c=ro(this.a,this.e,Math.sin(l)),h=c*c*c/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(l),2),d=i*this.a/c,f=d*d;n=l-c*Math.tan(l)/h*d*d*(.5-(1+3*u)*d*d/24),r=d*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(l)}return e.x=V(r+this.long0),e.y=oo(n),e},names:["Cassini","Cassini_Soldner","cass"]};function Di(e,i){var t;return e>1e-7?(1-e*e)*(i/(1-(t=e*i)*t)-.5/e*Math.log((1-t)/(1+t))):2*i}const xP={init:function lP(){var i,e=Math.abs(this.lat0);if(this.mode=Math.abs(e-k)<z?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<z?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=Di(this.e,1),this.mmf=.5/(1-this.es),this.apa=function mP(e){var i,t=[];return t[0]=.3333333333333333*e,t[0]+=.17222222222222222*(i=e*e),t[1]=.06388888888888888*i,t[0]+=.10257936507936508*(i*=e),t[1]+=.0664021164021164*i,t[2]=.016415012942191543*i,t}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=Di(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function cP(e){var i,t,n,r,a,s,l,c,h,u,d=e.x,f=e.y;if(d=V(d-this.long0),this.sphere){if(a=Math.sin(f),u=Math.cos(f),n=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((t=this.mode===this.EQUIT?1+u*n:1+this.sinph0*a+this.cosph0*u*n)<=z)return null;i=(t=Math.sqrt(2/t))*u*Math.sin(d),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<z)return null;t=Et-.5*f,i=(t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)))*Math.sin(d),t*=n}}else{switch(l=0,c=0,h=0,n=Math.cos(d),r=Math.sin(d),a=Math.sin(f),s=Di(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=s/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*c*n;break;case this.EQUIT:h=1+c*n;break;case this.N_POLE:h=k+f,s=this.qp-s;break;case this.S_POLE:h=f-k,s=this.qp+s}if(Math.abs(h)<z)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),t=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*l-this.sinb1*c*n):(h=Math.sqrt(2/(1+c*n)))*l*this.ymf,i=this.xmf*h*c*r;break;case this.N_POLE:case this.S_POLE:s>=0?(i=(h=Math.sqrt(s))*r,t=n*(this.mode===this.S_POLE?h:-h)):i=t=0}}return e.x=this.a*i+this.x0,e.y=this.a*t+this.y0,e},inverse:function hP(e){e.x-=this.x0,e.y-=this.y0;var n,r,a,s,l,c,h,i=e.x/this.a,t=e.y/this.a;if(this.sphere){var d,u=0,f=0;if((r=.5*(d=Math.sqrt(i*i+t*t)))>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(r),u=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(d)<=z?0:Math.asin(t*f/d),i*=f,t=u*d;break;case this.OBLIQ:r=Math.abs(d)<=z?this.lat0:Math.asin(u*this.sinph0+t*f*this.cosph0/d),i*=f*this.cosph0,t=(u-Math.sin(r)*this.sinph0)*d;break;case this.N_POLE:t=-t,r=k-r;break;case this.S_POLE:r-=k}n=0!==t||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(i,t):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,t*=this.dd,(c=Math.sqrt(i*i+t*t))<z)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*c/this.rq),a=Math.cos(s),i*=s=Math.sin(s),this.mode===this.OBLIQ?(l=this.qp*(h=a*this.sinb1+t*s*this.cosb1/c),t=c*this.cosb1*a-t*this.sinb1*s):(l=this.qp*(h=t*s/c),t=c*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),!(l=i*i+t*t))return e.x=this.long0,e.y=this.lat0,e;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}n=Math.atan2(i,t),r=function vP(e,i){var t=e+e;return e+i[0]*Math.sin(t)+i[1]*Math.sin(t+t)+i[2]*Math.sin(t+t+t)}(Math.asin(h),this.apa)}return e.x=V(this.long0+n),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Ri(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}const PP={init:function CP(){Math.abs(this.lat1+this.lat2)<z||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=jn(this.e3,this.sin_po,this.cos_po),this.qs1=Di(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=jn(this.e3,this.sin_po,this.cos_po),this.qs2=Di(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Di(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>z?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function bP(e){var i=e.x,t=e.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var n=Di(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*V(i-this.long0),s=r*Math.sin(a)+this.x0,l=this.rh-r*Math.cos(a)+this.y0;return e.x=s,e.y=l,e},inverse:function TP(e){var i,n,r,a,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),r=0,0!==i&&(r=Math.atan2(n*e.x,n*e.y)),n=i*this.ns0/this.a,s=this.sphere?Math.asin((this.c-n*n)/(2*this.ns0)):this.phi1z(this.e3,(this.c-n*n)/this.ns0),a=V(r/this.ns0+this.long0),e.x=a,e.y=s,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function MP(e,i){var t,r,a,s,l=Ri(.5*i);if(e<z)return l;for(var c=e*e,h=1;h<=25;h++)if(l+=s=.5*(a=1-(r=e*(t=Math.sin(l)))*r)*a/Math.cos(l)*(i/(1-c)-t/a+.5/e*Math.log((1-r)/(1+r))),Math.abs(s)<=1e-7)return l;return null}},IP={init:function OP(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function SP(e){var i,t,n,r,s,l,c,u=e.y;return n=V(e.x-this.long0),i=Math.sin(u),t=Math.cos(u),r=Math.cos(n),(s=this.sin_p14*i+this.cos_p14*t*r)>0||Math.abs(s)<=z?(l=this.x0+1*this.a*t*Math.sin(n)/s,c=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*t*r)/s):(l=this.x0+this.infinity_dist*t*Math.sin(n),c=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*t*r)),e.x=l,e.y=c,e},inverse:function AP(e){var i,t,n,r,a,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(i=Math.sqrt(e.x*e.x+e.y*e.y))?(r=Math.atan2(i,this.rc),t=Math.sin(r),s=Ri((n=Math.cos(r))*this.sin_p14+e.y*t*this.cos_p14/i),a=Math.atan2(e.x*t,i*this.cos_p14*n-e.y*this.sin_p14*t),a=V(this.long0+a)):(s=this.phic0,a=0),e.x=a,e.y=s,e},names:["gnom"]},NP={init:function RP(){this.sphere||(this.k0=jn(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function ZP(e){var n,r,t=e.y,a=V(e.x-this.long0);if(this.sphere)n=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var s=Di(this.e,Math.sin(t));n=this.x0+this.a*this.k0*a,r=this.y0+this.a*s*.5/this.k0}return e.x=n,e.y=r,e},inverse:function LP(e){var i,t;return e.x-=this.x0,e.y-=this.y0,this.sphere?(i=V(this.long0+e.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(t=function DP(e,i){var t=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(i)-t)<1e-6)return i<0?-1*k:k;for(var r,a,s,l,n=Math.asin(.5*i),c=0;c<30;c++)if(a=Math.sin(n),s=Math.cos(n),l=e*a,n+=r=Math.pow(1-l*l,2)/(2*s)*(i/(1-e*e)-a/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),Math.abs(r)<=1e-10)return n;return NaN}(this.e,2*e.y*this.k0/this.a),i=V(this.long0+e.x/(this.a*this.k0))),e.x=i,e.y=t,e},names:["cea"]},jP={init:function FP(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function UP(e){var t=e.y,n=V(e.x-this.long0),r=oo(t-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*r,e},inverse:function qP(e){var t=e.y;return e.x=V(this.long0+(e.x-this.x0)/(this.a*this.rc)),e.y=oo(this.lat0+(t-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},VP={init:function zP(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ca(this.es),this.e1=ha(this.es),this.e2=ua(this.es),this.e3=da(this.es),this.ml0=this.a*Fe(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function YP(e){var n,r,a,t=e.y,s=V(e.x-this.long0);if(a=s*Math.sin(t),this.sphere)Math.abs(t)<=z?(n=this.a*s,r=-1*this.a*this.lat0):(n=this.a*Math.sin(a)/Math.tan(t),r=this.a*(oo(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=z)n=this.a*s,r=-1*this.ml0;else{var l=ro(this.a,this.e,Math.sin(t))/Math.tan(t);n=l*Math.sin(a),r=this.a*Fe(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+l*(1-Math.cos(a))}return e.x=n+this.x0,e.y=r+this.y0,e},inverse:function HP(e){var i,t,n,r,a,s,l,c,h;if(n=e.x-this.x0,r=e.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=z)i=V(n/this.a+this.long0),t=0;else{var u;for(l=n*n/this.a/this.a+(s=this.lat0+r/this.a)*s,c=s,a=20;a;--a)if(c+=h=-1*(s*(c*(u=Math.tan(c))+1)-c-.5*(c*c+l)*u)/((c-s)/u-1),Math.abs(h)<=z){t=c;break}i=V(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=z)t=0,i=V(this.long0+n/this.a);else{var d,f,p,g,_;for(l=n*n/this.a/this.a+(s=(this.ml0+r)/this.a)*s,c=s,a=20;a;--a)if(_=this.e*Math.sin(c),d=Math.sqrt(1-_*_)*Math.tan(c),f=this.a*Fe(this.e0,this.e1,this.e2,this.e3,c),p=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=h=(s*(d*(g=f/this.a)+1)-g-.5*d*(g*g+l))/(this.es*Math.sin(2*c)*(g*g+l-2*s*g)/(4*d)+(s-g)*(d*p-2/Math.sin(2*c))-p),Math.abs(h)<=z){t=c;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),i=V(this.long0+Math.asin(n*d/this.a)/Math.sin(t))}return e.x=i,e.y=t,e},names:["Polyconic","poly"]},QP={init:function WP(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function JP(e){var i,s=(e.y-this.lat0)/ea*1e-5,l=e.x-this.long0,c=1,h=0;for(i=1;i<=10;i++)h+=this.A[i]*(c*=s);var _,u=h,d=l,f=1,p=0,m=0,v=0;for(i=1;i<=6;i++)_=p*u+f*d,m=m+this.B_re[i]*(f=f*u-p*d)-this.B_im[i]*(p=_),v=v+this.B_im[i]*f+this.B_re[i]*p;return e.x=v*this.a+this.x0,e.y=m*this.a+this.y0,e},inverse:function XP(e){var i,d,s=(e.y-this.y0)/this.a,l=(e.x-this.x0)/this.a,c=1,h=0,f=0,p=0;for(i=1;i<=6;i++)d=h*s+c*l,f=f+this.C_re[i]*(c=c*s-h*l)-this.C_im[i]*(h=d),p=p+this.C_im[i]*c+this.C_re[i]*h;for(var g=0;g<this.iterations;g++){var y,_=f,m=p,C=s,x=l;for(i=2;i<=6;i++)y=m*f+_*p,C+=(i-1)*(this.B_re[i]*(_=_*f-m*p)-this.B_im[i]*(m=y)),x+=(i-1)*(this.B_im[i]*_+this.B_re[i]*m);_=1,m=0;var b=this.B_re[1],T=this.B_im[1];for(i=2;i<=6;i++)y=m*f+_*p,b+=i*(this.B_re[i]*(_=_*f-m*p)-this.B_im[i]*(m=y)),T+=i*(this.B_im[i]*_+this.B_re[i]*m);var M=b*b+T*T;f=(C*b+x*T)/M,p=(x*b-C*T)/M}var w=f,P=p,D=1,R=0;for(i=1;i<=9;i++)R+=this.D[i]*(D*=w);var L=this.lat0+R*ea*1e5;return e.x=this.long0+P,e.y=L,e},names:["New_Zealand_Map_Grid","nzmg"]},iO={init:function KP(){},forward:function tO(e){var t=e.y,n=V(e.x-this.long0),r=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return e.x=r,e.y=a,e},inverse:function eO(e){e.x-=this.x0,e.y-=this.y0;var i=V(this.long0+e.x/this.a),t=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=i,e.y=t,e},names:["Miller_Cylindrical","mill"]},cO={init:function oO(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Sg(this.es)},forward:function aO(e){var i,t,n=e.x,r=e.y;if(n=V(n-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(r),s=20;s;--s){var l=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<z)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;i=this.a*this.C_x*n*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var c=Math.sin(r),h=Math.cos(r);t=this.a*al(r,c,h,this.en),i=this.a*n*h/Math.sqrt(1-this.es*c*c)}return e.x=i,e.y=t,e},inverse:function sO(e){var i,n,r;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,i=e.y/this.a,this.sphere?(i/=this.C_y,n/=this.C_x*(this.m+Math.cos(i)),this.m?i=Ri((this.m*i+Math.sin(i))/this.n):1!==this.n&&(i=Ri(Math.sin(i)/this.n)),n=V(n+this.long0),i=oo(i)):(i=Ag(e.y/this.a,this.es,this.en),(r=Math.abs(i))<k?(r=Math.sin(i),n=V(this.long0+e.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(i)))):r-z<k&&(n=this.long0)),e.x=n,e.y=i,e},names:["Sinusoidal","sinu"]},pO={init:function hO(){},forward:function uO(e){for(var t=e.y,n=V(e.x-this.long0),r=t,a=Math.PI*Math.sin(t);;){var s=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=s,Math.abs(s)<z)break}r/=2,Math.PI/2-Math.abs(t)<z&&(n=0);var l=.900316316158*this.a*n*Math.cos(r)+this.x0,c=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=l,e.y=c,e},inverse:function dO(e){var i,t;e.x-=this.x0,e.y-=this.y0,t=e.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),i=Math.asin(t);var n=V(this.long0+e.x/(.900316316158*this.a*Math.cos(i)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),t=(2*i+Math.sin(2*i))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return e.x=n,e.y=r,e},names:["Mollweide","moll"]},yO={init:function gO(){Math.abs(this.lat1+this.lat2)<z||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ca(this.es),this.e1=ha(this.es),this.e2=ua(this.es),this.e3=da(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=jn(this.e,this.sinphi,this.cosphi),this.ml1=Fe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<z?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=jn(this.e,this.sinphi,this.cosphi),this.ml2=Fe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Fe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function _O(e){var n,i=e.x,t=e.y;if(this.sphere)n=this.a*(this.g-t);else{var r=Fe(this.e0,this.e1,this.e2,this.e3,t);n=this.a*(this.g-r)}var a=this.ns*V(i-this.long0),s=this.x0+n*Math.sin(a),l=this.y0+this.rh-n*Math.cos(a);return e.x=s,e.y=l,e},inverse:function mO(e){var i,t,n,r;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1);var a=0;return 0!==t&&(a=Math.atan2(i*e.x,i*e.y)),this.sphere?(r=V(this.long0+a/this.ns),n=oo(this.g-t/this.a),e.x=r,e.y=n,e):(n=hl(this.g-t/this.a,this.e0,this.e1,this.e2,this.e3),r=V(this.long0+a/this.ns),e.x=r,e.y=n,e)},names:["Equidistant_Conic","eqdc"]},MO={init:function xO(){this.R=this.a},forward:function CO(e){var r,a,t=e.y,n=V(e.x-this.long0);Math.abs(t)<=z&&(r=this.x0+this.R*n,a=this.y0);var s=Ri(2*Math.abs(t/Math.PI));(Math.abs(n)<=z||Math.abs(Math.abs(t)-k)<=z)&&(r=this.x0,a=t>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var l=.5*Math.abs(Math.PI/n-n/Math.PI),c=l*l,h=Math.sin(s),u=Math.cos(s),d=u/(h+u-1),p=d*(2/h-1),g=p*p,_=Math.PI*this.R*(l*(d-g)+Math.sqrt(c*(d-g)*(d-g)-(g+c)*(d*d-g)))/(g+c);n<0&&(_=-_),r=this.x0+_;var m=c+d;return _=Math.PI*this.R*(p*m-l*Math.sqrt((g+c)*(c+1)-m*m))/(g+c),a=t>=0?this.y0+_:this.y0-_,e.x=r,e.y=a,e},inverse:function bO(e){var i,t,n,r,a,s,l,c,h,u,d,f;return e.x-=this.x0,e.y-=this.y0,d=Math.PI*this.R,a=(n=e.x/d)*n+(r=e.y/d)*r,d=3*(r*r/(c=-2*(s=-Math.abs(r)*(1+a))+1+2*r*r+a*a)+(2*(l=s-2*r*r+n*n)*l*l/c/c/c-9*s*l/c/c)/27)/(h=(s-l*l/3/c)/c)/(u=2*Math.sqrt(-h/3)),Math.abs(d)>1&&(d=d>=0?1:-1),f=Math.acos(d)/3,t=e.y>=0?(-u*Math.cos(f+Math.PI/3)-l/3/c)*Math.PI:-(-u*Math.cos(f+Math.PI/3)-l/3/c)*Math.PI,i=Math.abs(n)<z?this.long0:V(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-r*r)+a*a))/2/n),e.x=i,e.y=t,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},AO={init:function wO(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function PO(e){var s,l,c,h,u,d,f,p,g,_,m,v,y,C,x,b,T,M,w,P,D,R,i=e.x,t=e.y,n=Math.sin(e.y),r=Math.cos(e.y),a=V(i-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=z?(e.x=this.x0+this.a*(k-t)*Math.sin(a),e.y=this.y0-this.a*(k-t)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=z?(e.x=this.x0+this.a*(k+t)*Math.sin(a),e.y=this.y0+this.a*(k+t)*Math.cos(a),e):(M=this.sin_p12*n+this.cos_p12*r*Math.cos(a),T=(b=Math.acos(M))?b/Math.sin(b):1,e.x=this.x0+this.a*T*r*Math.sin(a),e.y=this.y0+this.a*T*(this.cos_p12*n-this.sin_p12*r*Math.cos(a)),e):(s=ca(this.es),l=ha(this.es),c=ua(this.es),h=da(this.es),Math.abs(this.sin_p12-1)<=z?(u=this.a*Fe(s,l,c,h,k),d=this.a*Fe(s,l,c,h,t),e.x=this.x0+(u-d)*Math.sin(a),e.y=this.y0-(u-d)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=z?(u=this.a*Fe(s,l,c,h,k),d=this.a*Fe(s,l,c,h,t),e.x=this.x0+(u+d)*Math.sin(a),e.y=this.y0+(u+d)*Math.cos(a),e):(f=n/r,p=ro(this.a,this.e,this.sin_p12),g=ro(this.a,this.e,n),_=Math.atan((1-this.es)*f+this.es*p*this.sin_p12/(g*r)),w=0===(m=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(_)-this.sin_p12*Math.cos(a)))?Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.abs(Math.abs(m)-Math.PI)<=z?-Math.asin(this.cos_p12*Math.sin(_)-this.sin_p12*Math.cos(_)):Math.asin(Math.sin(a)*Math.cos(_)/Math.sin(m)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es),e.x=this.x0+(b=p*w*(1-(P=w*w)*(x=y*y)*(1-x)/6+(D=P*w)/8*(C=v*y)*(1-2*x)+(R=D*w)/120*(x*(4-7*x)-3*v*v*(1-7*x))-R*w/48*C))*Math.sin(m),e.y=this.y0+b*Math.cos(m),e))},inverse:function OO(e){var i,t,n,r,a,s,l,c,h,u,d,f,g,_,m,v,y,C,x,b,T,M,w;return e.x-=this.x0,e.y-=this.y0,this.sphere?(i=Math.sqrt(e.x*e.x+e.y*e.y))>2*k*this.a?void 0:(t=i/this.a,n=Math.sin(t),r=Math.cos(t),a=this.long0,Math.abs(i)<=z?s=this.lat0:(s=Ri(r*this.sin_p12+e.y*n*this.cos_p12/i),l=Math.abs(this.lat0)-k,a=Math.abs(l)<=z?V(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)):V(this.long0+Math.atan2(e.x*n,i*this.cos_p12*r-e.y*this.sin_p12*n))),e.x=a,e.y=s,e):(c=ca(this.es),h=ha(this.es),u=ua(this.es),d=da(this.es),Math.abs(this.sin_p12-1)<=z?(s=hl(((f=this.a*Fe(c,h,u,d,k))-(i=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,c,h,u,d),a=V(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=s,e):Math.abs(this.sin_p12+1)<=z?(f=this.a*Fe(c,h,u,d,k),s=hl(((i=Math.sqrt(e.x*e.x+e.y*e.y))-f)/this.a,c,h,u,d),a=V(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=s,e):(i=Math.sqrt(e.x*e.x+e.y*e.y),m=Math.atan2(e.x,e.y),g=ro(this.a,this.e,this.sin_p12),v=Math.cos(m),x=3*this.es*(1-(C=-(y=this.e*this.cos_p12*v)*y/(1-this.es)))*this.sin_p12*this.cos_p12*v/(1-this.es),M=1-C*(T=(b=i/g)-C*(1+C)*Math.pow(b,3)/6-x*(1+3*C)*Math.pow(b,4)/24)*T/2-b*T*T*T/6,_=Math.asin(this.sin_p12*Math.cos(T)+this.cos_p12*Math.sin(T)*v),a=V(this.long0+Math.asin(Math.sin(m)*Math.sin(T)/Math.cos(_))),w=Math.sin(_),s=Math.atan2((w-this.es*M*this.sin_p12)*Math.tan(_),w*(1-this.es)),e.x=a,e.y=s,e))},names:["Azimuthal_Equidistant","aeqd"]},ZO={init:function EO(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function IO(e){var i,t,n,r,s,l,c,u=e.y;return n=V(e.x-this.long0),i=Math.sin(u),t=Math.cos(u),r=Math.cos(n),((s=this.sin_p14*i+this.cos_p14*t*r)>0||Math.abs(s)<=z)&&(l=1*this.a*t*Math.sin(n),c=this.y0+1*this.a*(this.cos_p14*i-this.sin_p14*t*r)),e.x=l,e.y=c,e},inverse:function DO(e){var i,t,n,r,a,s,l;return e.x-=this.x0,e.y-=this.y0,t=Ri((i=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),n=Math.sin(t),r=Math.cos(t),s=this.long0,Math.abs(i)<=z?(l=this.lat0,e.x=s,e.y=l,e):(l=Ri(r*this.sin_p14+e.y*n*this.cos_p14/i),a=Math.abs(this.lat0)-k,Math.abs(a)<=z?(s=V(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=l,e):(s=V(this.long0+Math.atan2(e.x*n,i*this.cos_p14*r-e.y*this.sin_p14*n)),e.x=s,e.y=l,e))},names:["ortho"]};function ul(e,i,t,n){var r;return e<z?(n.value=1,r=0):(r=Math.atan2(i,t),Math.abs(r)<=Et?n.value=1:r>Et&&r<=k+Et?(n.value=2,r-=k):r>k+Et||r<=-(k+Et)?(n.value=3,r=r>=0?r-re:r+re):(n.value=4,r+=k)),r}function ao(e,i){var t=e+i;return t<-re?t+=na:t>+re&&(t-=na),t}const UO={init:function LO(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=k-Et/2?5:this.lat0<=-(k-Et/2)?6:Math.abs(this.long0)<=Et?1:Math.abs(this.long0)<=k+Et?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function kO(e){var t,n,r,a,s,l,i={x:0,y:0},c={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,5===this.face)a=k-t,n>=Et&&n<=k+Et?(c.value=1,r=n-k):n>k+Et||n<=-(k+Et)?(c.value=2,r=n>0?n-re:n+re):n>-(k+Et)&&n<=-Et?(c.value=3,r=n+k):(c.value=4,r=n);else if(6===this.face)a=k+t,n>=Et&&n<=k+Et?(c.value=1,r=-n+k):n<Et&&n>=-Et?(c.value=2,r=-n):n<-Et&&n>=-(k+Et)?(c.value=3,r=-n-k):(c.value=4,r=n>0?-n+re:-n-re);else{var h,u,d,f,p,g;2===this.face?n=ao(n,+k):3===this.face?n=ao(n,+re):4===this.face&&(n=ao(n,-k)),f=Math.sin(t),p=Math.cos(t),g=Math.sin(n),h=p*Math.cos(n),u=p*g,d=f,1===this.face?r=ul(a=Math.acos(h),d,u,c):2===this.face?r=ul(a=Math.acos(u),d,-h,c):3===this.face?r=ul(a=Math.acos(-h),d,-u,c):4===this.face?r=ul(a=Math.acos(-u),d,h,c):(a=r=0,c.value=1)}return l=Math.atan(12/re*(r+Math.acos(Math.sin(r)*Math.cos(Et))-k)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(r))))),2===c.value?l+=k:3===c.value?l+=re:4===c.value&&(l+=1.5*re),i.x=s*Math.cos(l),i.y=s*Math.sin(l),i.x=i.x*this.a+this.x0,i.y=i.y*this.a+this.y0,e.x=i.x,e.y=i.y,e},inverse:function NO(e){var t,n,r,a,s,l,c,h,u,_,m,v,i={lam:0,phi:0},d={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?d.value=1:e.y>=0&&e.y>=Math.abs(e.x)?(d.value=2,t-=k):e.x<0&&-e.x>=Math.abs(e.y)?(d.value=3,t=t<0?t+re:t-re):(d.value=4,t+=k),u=re/12*Math.tan(t),s=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),l=Math.atan(s),(c=1-(r=Math.cos(t))*r*(a=Math.tan(n))*a*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?c=-1:c>1&&(c=1),5===this.face)h=Math.acos(c),i.phi=k-h,i.lam=1===d.value?l+k:2===d.value?l<0?l+re:l-re:3===d.value?l-k:l;else if(6===this.face)h=Math.acos(c),i.phi=h-k,i.lam=1===d.value?-l+k:2===d.value?-l:3===d.value?-l-k:l<0?-l-re:-l+re;else{var f,p,g;u=(f=c)*f,p=(u+=(g=u>=1?0:Math.sqrt(1-u)*Math.sin(l))*g)>=1?0:Math.sqrt(1-u),2===d.value?(u=p,p=-g,g=u):3===d.value?(p=-p,g=-g):4===d.value&&(u=p,p=g,g=-u),2===this.face?(u=f,f=-p,p=u):3===this.face?(f=-f,p=-p):4===this.face&&(u=f,f=p,p=-u),i.phi=Math.acos(-g)-k,i.lam=Math.atan2(p,f),2===this.face?i.lam=ao(i.lam,-k):3===this.face?i.lam=ao(i.lam,-re):4===this.face&&(i.lam=ao(i.lam,+k))}return 0!==this.es&&(_=i.phi<0?1:0,m=Math.tan(i.phi),v=this.b/Math.sqrt(m*m+this.one_minus_f_squared),i.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),_&&(i.phi=-i.phi)),i.lam+=this.long0,e.x=i.lam,e.y=i.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ou=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],fa=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],dl=function(e,i){return e[0]+i*(e[1]+i*(e[2]+i*e[3]))};const VO={init:function zO(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function YO(e){var i=V(e.x-this.long0),t=Math.abs(e.y),n=Math.floor(11.459155902616464*t);n<0?n=0:n>=18&&(n=17);var r={x:dl(ou[n],t=Gn*(t-.08726646259971647*n))*i,y:dl(fa[n],t)};return e.y<0&&(r.y=-r.y),r.x=r.x*this.a*.8487+this.x0,r.y=r.y*this.a*1.3523+this.y0,r},inverse:function HO(e){var i={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(i.y>=1)i.x/=ou[18][0],i.y=e.y<0?-k:k;else{var t=Math.floor(18*i.y);for(t<0?t=0:t>=18&&(t=17);;)if(fa[t][0]>i.y)--t;else{if(!(fa[t+1][0]<=i.y))break;++t}var n=fa[t],r=5*(i.y-n[0])/(fa[t+1][0]-n[0]);r=function jO(e,i,t,n){for(var r=i;n;--n){var a=e(r);if(r-=a,Math.abs(a)<t)break}return r}(function(a){return(dl(n,a)-i.y)/function(e,i){return e[1]+i*(2*e[2]+3*i*e[3])}(n,a)},r,z,100),i.x/=dl(ou[t],r),i.y=(5*t+r)*Ce,e.y<0&&(i.y=-i.y)}return i.x=V(i.x+this.long0),i},names:["Robinson","robin"]},QO={init:function WO(){this.name="geocent"},forward:function JO(e){return lg(e,this.es,this.a)},inverse:function XO(e){return cg(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var pa={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const iS={init:function KO(){if(Object.keys(pa).forEach(function(t){if(void 0===this[t])this[t]=pa[t].def;else{if(pa[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);pa[t].num&&(this[t]=parseFloat(this[t]))}pa[t].degrees&&(this[t]=this[t]*Ce)}.bind(this)),Math.abs(Math.abs(this.lat0)-k)<z?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<z?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,i=this.azi;this.cg=Math.cos(i),this.sg=Math.sin(i),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function tS(e){e.x-=this.long0;var r,a,s,l,i=Math.sin(e.y),t=Math.cos(e.y),n=Math.cos(e.x);switch(this.mode){case 3:a=this.sinph0*i+this.cosph0*t*n;break;case 2:a=t*n;break;case 1:a=-i;break;case 0:a=i}switch(r=(a=this.pn1/(this.p-a))*t*Math.sin(e.x),this.mode){case 3:a*=this.cosph0*i-this.sinph0*t*n;break;case 2:a*=i;break;case 0:a*=-t*n;break;case 1:a*=t*n}return r=(r*this.cg-a*this.sg)*this.cw*(l=1/((s=a*this.cg+r*this.sg)*this.sw*this.h1+this.cw)),a=s*l,e.x=r*this.a,e.y=a*this.a,e},inverse:function eS(e){e.x/=this.a,e.y/=this.a;var t,n,r,i={x:e.x,y:e.y};e.x=(t=this.pn1*e.x*(r=1/(this.pn1-e.y*this.sw)))*this.cg+(n=this.pn1*e.y*this.cw*r)*this.sg,e.y=n*this.cg-t*this.sg;var a=ll(e.x,e.y);if(Math.abs(a)<z)i.x=0,i.y=e.y;else{var s,l;switch(l=1-a*a*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/a+a/this.pn1),s=Math.sqrt(1-l*l),this.mode){case 3:i.y=Math.asin(s*this.sinph0+e.y*l*this.cosph0/a),e.y=(s-this.sinph0*Math.sin(i.y))*a,e.x*=l*this.cosph0;break;case 2:i.y=Math.asin(e.y*l/a),e.y=s*a,e.x*=l;break;case 0:i.y=Math.asin(s),e.y=-e.y;break;case 1:i.y=-Math.asin(s)}i.x=Math.atan2(e.x,e.y)}return e.x=i.x+this.long0,e.y=i.y,e},names:["Tilted_Perspective","tpers"]};nn.defaultDatum="WGS84",nn.Proj=aa,nn.WGS84=new nn.Proj("WGS84"),nn.Point=jM,nn.toPoint=fg,nn.defs=el,nn.nadgrid=function gM(e,i){var t=new DataView(i),n=function vM(e){var i=e.getInt32(8,!1);return 11!==i&&(11!==(i=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(t),r=function yM(e,i){return{nFields:e.getInt32(8,i),nSubgridFields:e.getInt32(24,i),nSubgrids:e.getInt32(40,i),shiftType:Qh(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,i),fromSemiMinorAxis:e.getFloat64(136,i),toSemiMajorAxis:e.getFloat64(152,i),toSemiMinorAxis:e.getFloat64(168,i)}}(t,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=function xM(e,i,t){for(var r=[],a=0;a<i.nSubgrids;a++){var s=bM(e,176,t),l=TM(e,176,s,t),c=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),h=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);r.push({ll:[Kr(s.lowerLongitude),Kr(s.lowerLatitude)],del:[Kr(s.longitudeInterval),Kr(s.latitudeInterval)],lim:[c,h],count:s.gridNodeCount,cvs:CM(l)})}return r}(t,r,n),s={header:r,subgrids:a};return sg[e]=s,s},nn.transform=ol,nn.mgrs=DM,nn.version="__VERSION__",function rS(e){e.Proj.projections.add(sl),e.Proj.projections.add(cl),e.Proj.projections.add(gw),e.Proj.projections.add(ww),e.Proj.projections.add(Iw),e.Proj.projections.add(kw),e.Proj.projections.add(jw),e.Proj.projections.add(Vw),e.Proj.projections.add(Qw),e.Proj.projections.add(iP),e.Proj.projections.add(xP),e.Proj.projections.add(PP),e.Proj.projections.add(IP),e.Proj.projections.add(NP),e.Proj.projections.add(jP),e.Proj.projections.add(VP),e.Proj.projections.add(QP),e.Proj.projections.add(iO),e.Proj.projections.add(cO),e.Proj.projections.add(pO),e.Proj.projections.add(yO),e.Proj.projections.add(MO),e.Proj.projections.add(AO),e.Proj.projections.add(ZO),e.Proj.projections.add(UO),e.Proj.projections.add(VO),e.Proj.projections.add(QO),e.Proj.projections.add(iS)}(nn);const au=nn;var su=Y(7727),fl=Y(1125),ct=Y(8966);function ci(){}const sS=function(){let e=0;return function(){return e++}}();function yt(e){return null==e}function zt(e){if(Array.isArray&&Array.isArray(e))return!0;const i=Object.prototype.toString.call(e);return"[object"===i.slice(0,7)&&"Array]"===i.slice(-6)}function Ct(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const oe=e=>("number"==typeof e||e instanceof Number)&&isFinite(+e);function dn(e,i){return oe(e)?e:i}function ht(e,i){return void 0===e?i:e}const kg=(e,i)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*i:+e;function Ft(e,i,t){if(e&&"function"==typeof e.call)return e.apply(t,i)}function Dt(e,i,t,n){let r,a,s;if(zt(e))if(a=e.length,n)for(r=a-1;r>=0;r--)i.call(t,e[r],r);else for(r=0;r<a;r++)i.call(t,e[r],r);else if(Ct(e))for(s=Object.keys(e),a=s.length,r=0;r<a;r++)i.call(t,e[s[r]],s[r])}function pl(e,i){let t,n,r,a;if(!e||!i||e.length!==i.length)return!1;for(t=0,n=e.length;t<n;++t)if(r=e[t],a=i[t],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function gl(e){if(zt(e))return e.map(gl);if(Ct(e)){const i=Object.create(null),t=Object.keys(e),n=t.length;let r=0;for(;r<n;++r)i[t[r]]=gl(e[t[r]]);return i}return e}function Ng(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function cS(e,i,t,n){if(!Ng(e))return;const r=i[e],a=t[e];Ct(r)&&Ct(a)?zn(r,a,n):i[e]=gl(a)}function zn(e,i,t){const n=zt(i)?i:[i],r=n.length;if(!Ct(e))return e;const a=(t=t||{}).merger||cS;for(let s=0;s<r;++s){if(!Ct(i=n[s]))continue;const l=Object.keys(i);for(let c=0,h=l.length;c<h;++c)a(l[c],e,i,t)}return e}function ga(e,i){return zn(e,i,{merger:hS})}function hS(e,i,t){if(!Ng(e))return;const n=i[e],r=t[e];Ct(n)&&Ct(r)?ga(n,r):Object.prototype.hasOwnProperty.call(i,e)||(i[e]=gl(r))}const Fg={"":e=>e,x:e=>e.x,y:e=>e.y};function Zi(e,i){return(Fg[i]||(Fg[i]=function uS(e){const i=function dS(e){const i=e.split("."),t=[];let n="";for(const r of i)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}(e);return t=>{for(const n of i){if(""===n)break;t=t&&t[n]}return t}}(i)))(e)}function lu(e){return e.charAt(0).toUpperCase()+e.slice(1)}const fn=e=>void 0!==e,Li=e=>"function"==typeof e,Ug=(e,i)=>{if(e.size!==i.size)return!1;for(const t of e)if(!i.has(t))return!1;return!0},Wt=Math.PI,Ut=2*Wt,pS=Ut+Wt,_l=Number.POSITIVE_INFINITY,gS=Wt/180,ne=Wt/2,_a=Wt/4,qg=2*Wt/3,pn=Math.log10,Yn=Math.sign;function Gg(e){const i=Math.round(e);e=ma(e,i,e/1e3)?i:e;const t=Math.pow(10,Math.floor(pn(e))),n=e/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function lo(e){return!isNaN(parseFloat(e))&&isFinite(e)}function ma(e,i,t){return Math.abs(e-i)<t}function jg(e,i,t){let n,r,a;for(n=0,r=e.length;n<r;n++)a=e[n][t],isNaN(a)||(i.min=Math.min(i.min,a),i.max=Math.max(i.max,a))}function Sn(e){return e*(Wt/180)}function cu(e){return e*(180/Wt)}function zg(e){if(!oe(e))return;let i=1,t=0;for(;Math.round(e*i)/i!==e;)i*=10,t++;return t}function Yg(e,i){const t=i.x-e.x,n=i.y-e.y,r=Math.sqrt(t*t+n*n);let a=Math.atan2(n,t);return a<-.5*Wt&&(a+=Ut),{angle:a,distance:r}}function hu(e,i){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function vS(e,i){return(e-i+pS)%Ut-Wt}function rn(e){return(e%Ut+Ut)%Ut}function va(e,i,t,n){const r=rn(e),a=rn(i),s=rn(t),l=rn(a-r),c=rn(s-r),h=rn(r-a),u=rn(r-s);return r===a||r===s||n&&a===s||l>c&&h<u}function me(e,i,t){return Math.max(i,Math.min(t,e))}function hi(e,i,t,n=1e-6){return e>=Math.min(i,t)-n&&e<=Math.max(i,t)+n}function uu(e,i,t){t=t||(s=>e[s]<i);let a,n=e.length-1,r=0;for(;n-r>1;)a=r+n>>1,t(a)?r=a:n=a;return{lo:r,hi:n}}const ui=(e,i,t,n)=>uu(e,t,n?r=>e[r][i]<=t:r=>e[r][i]<t),xS=(e,i,t)=>uu(e,t,n=>e[n][i]>=t),Hg=["push","pop","shift","splice","unshift"];function Bg(e,i){const t=e._chartjs;if(!t)return;const n=t.listeners,r=n.indexOf(i);-1!==r&&n.splice(r,1),!(n.length>0)&&(Hg.forEach(a=>{delete e[a]}),delete e._chartjs)}function Vg(e){const i=new Set;let t,n;for(t=0,n=e.length;t<n;++t)i.add(e[t]);return i.size===n?e:Array.from(i)}const Wg="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function Jg(e,i,t){const n=t||(s=>Array.prototype.slice.call(s));let r=!1,a=[];return function(...s){a=n(s),r||(r=!0,Wg.call(window,()=>{r=!1,e.apply(i,a)}))}}const du=e=>"start"===e?"left":"end"===e?"right":"center",Ee=(e,i,t)=>"start"===e?i:"end"===e?t:(i+t)/2;function Xg(e,i,t){const n=i.length;let r=0,a=n;if(e._sorted){const{iScale:s,_parsed:l}=e,c=s.axis,{min:h,max:u,minDefined:d,maxDefined:f}=s.getUserBounds();d&&(r=me(Math.min(ui(l,s.axis,h).lo,t?n:ui(i,c,s.getPixelForValue(h)).lo),0,n-1)),a=f?me(Math.max(ui(l,s.axis,u,!0).hi+1,t?0:ui(i,c,s.getPixelForValue(u),!0).hi+1),r,n)-r:n-r}return{start:r,count:a}}function $g(e){const{xScale:i,yScale:t,_scaleRanges:n}=e,r={xmin:i.min,xmax:i.max,ymin:t.min,ymax:t.max};if(!n)return e._scaleRanges=r,!0;const a=n.xmin!==i.min||n.xmax!==i.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,r),a}const ml=e=>0===e||1===e,Qg=(e,i,t)=>-Math.pow(2,10*(e-=1))*Math.sin((e-i)*Ut/t),Kg=(e,i,t)=>Math.pow(2,-10*e)*Math.sin((e-i)*Ut/t)+1,ya={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*ne),easeOutSine:e=>Math.sin(e*ne),easeInOutSine:e=>-.5*(Math.cos(Wt*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ml(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ml(e)?e:Qg(e,.075,.3),easeOutElastic:e=>ml(e)?e:Kg(e,.075,.3),easeInOutElastic:e=>ml(e)?e:e<.5?.5*Qg(2*e,.1125,.45):.5+.5*Kg(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let i=1.70158;return(e/=.5)<1?e*e*((1+(i*=1.525))*e-i)*.5:.5*((e-=2)*e*((1+(i*=1.525))*e+i)+2)},easeInBounce:e=>1-ya.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?.5*ya.easeInBounce(2*e):.5*ya.easeOutBounce(2*e-1)+.5};function xa(e){return e+.5|0}const ki=(e,i,t)=>Math.max(Math.min(e,t),i);function Ca(e){return ki(xa(2.55*e),0,255)}function Ni(e){return ki(xa(255*e),0,255)}function di(e){return ki(xa(e/2.55)/100,0,1)}function t_(e){return ki(xa(100*e),0,100)}const gn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fu=[..."0123456789ABCDEF"],wS=e=>fu[15&e],PS=e=>fu[(240&e)>>4]+fu[15&e],vl=e=>(240&e)>>4==(15&e);const IS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function e_(e,i,t){const n=i*Math.min(t,1-t),r=(a,s=(a+e/30)%12)=>t-n*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function DS(e,i,t){const n=(r,a=(r+e/60)%6)=>t-t*i*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function RS(e,i,t){const n=e_(e,1,.5);let r;for(i+t>1&&(r=1/(i+t),i*=r,t*=r),r=0;r<3;r++)n[r]*=1-i-t,n[r]+=i;return n}function pu(e){const t=e.r/255,n=e.g/255,r=e.b/255,a=Math.max(t,n,r),s=Math.min(t,n,r),l=(a+s)/2;let c,h,u;return a!==s&&(u=a-s,h=l>.5?u/(2-a-s):u/(a+s),c=function ZS(e,i,t,n,r){return e===r?(i-t)/n+(i<t?6:0):i===r?(t-e)/n+2:(e-i)/n+4}(t,n,r,u,a),c=60*c+.5),[0|c,h||0,l]}function gu(e,i,t,n){return(Array.isArray(i)?e(i[0],i[1],i[2]):e(i,t,n)).map(Ni)}function _u(e,i,t){return gu(e_,e,i,t)}function n_(e){return(e%360+360)%360}const i_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},r_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let yl;const jS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,mu=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,co=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function xl(e,i,t){if(e){let n=pu(e);n[i]=Math.max(0,Math.min(n[i]+n[i]*t,0===i?360:1)),n=_u(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function o_(e,i){return e&&Object.assign(i||{},e)}function a_(e){var i={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(i={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(i.a=Ni(e[3]))):(i=o_(e,{r:0,g:0,b:0,a:1})).a=Ni(i.a),i}function BS(e){return"r"===e.charAt(0)?function zS(e){const i=jS.exec(e);let n,r,a,t=255;if(i){if(i[7]!==n){const s=+i[7];t=i[8]?Ca(s):ki(255*s,0,255)}return n=+i[1],r=+i[3],a=+i[5],n=255&(i[2]?Ca(n):ki(n,0,255)),r=255&(i[4]?Ca(r):ki(r,0,255)),a=255&(i[6]?Ca(a):ki(a,0,255)),{r:n,g:r,b:a,a:t}}}(e):function NS(e){const i=IS.exec(e);let n,t=255;if(!i)return;i[5]!==n&&(t=i[6]?Ca(+i[5]):Ni(+i[5]));const r=n_(+i[2]),a=+i[3]/100,s=+i[4]/100;return n="hwb"===i[1]?function LS(e,i,t){return gu(RS,e,i,t)}(r,a,s):"hsv"===i[1]?function kS(e,i,t){return gu(DS,e,i,t)}(r,a,s):_u(r,a,s),{r:n[0],g:n[1],b:n[2],a:t}}(e)}class Cl{constructor(i){if(i instanceof Cl)return i;const t=typeof i;let n;"object"===t?n=a_(i):"string"===t&&(n=function SS(e){var t,i=e.length;return"#"===e[0]&&(4===i||5===i?t={r:255&17*gn[e[1]],g:255&17*gn[e[2]],b:255&17*gn[e[3]],a:5===i?17*gn[e[4]]:255}:(7===i||9===i)&&(t={r:gn[e[1]]<<4|gn[e[2]],g:gn[e[3]]<<4|gn[e[4]],b:gn[e[5]]<<4|gn[e[6]],a:9===i?gn[e[7]]<<4|gn[e[8]]:255})),t}(i)||function GS(e){yl||(yl=function qS(){const e={},i=Object.keys(r_),t=Object.keys(i_);let n,r,a,s,l;for(n=0;n<i.length;n++){for(s=l=i[n],r=0;r<t.length;r++)a=t[r],l=l.replace(a,i_[a]);a=parseInt(r_[s],16),e[l]=[a>>16&255,a>>8&255,255&a]}return e}(),yl.transparent=[0,0,0,0]);const i=yl[e.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:4===i.length?i[3]:255}}(i)||BS(i)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var i=o_(this._rgb);return i&&(i.a=di(i.a)),i}set rgb(i){this._rgb=a_(i)}rgbString(){return this._valid?function YS(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${di(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?function ES(e){var i=(e=>vl(e.r)&&vl(e.g)&&vl(e.b)&&vl(e.a))(e)?wS:PS;return e?"#"+i(e.r)+i(e.g)+i(e.b)+((e,i)=>e<255?i(e):"")(e.a,i):void 0}(this._rgb):void 0}hslString(){return this._valid?function US(e){if(!e)return;const i=pu(e),t=i[0],n=t_(i[1]),r=t_(i[2]);return e.a<255?`hsla(${t}, ${n}%, ${r}%, ${di(e.a)})`:`hsl(${t}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(i,t){if(i){const n=this.rgb,r=i.rgb;let a;const s=t===a?.5:t,l=2*s-1,c=n.a-r.a,h=((l*c==-1?l:(l+c)/(1+l*c))+1)/2;a=1-h,n.r=255&h*n.r+a*r.r+.5,n.g=255&h*n.g+a*r.g+.5,n.b=255&h*n.b+a*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(i,t){return i&&(this._rgb=function HS(e,i,t){const n=co(di(e.r)),r=co(di(e.g)),a=co(di(e.b));return{r:Ni(mu(n+t*(co(di(i.r))-n))),g:Ni(mu(r+t*(co(di(i.g))-r))),b:Ni(mu(a+t*(co(di(i.b))-a))),a:e.a+t*(i.a-e.a)}}(this._rgb,i._rgb,t)),this}clone(){return new Cl(this.rgb)}alpha(i){return this._rgb.a=Ni(i),this}clearer(i){return this._rgb.a*=1-i,this}greyscale(){const i=this._rgb,t=xa(.3*i.r+.59*i.g+.11*i.b);return i.r=i.g=i.b=t,this}opaquer(i){return this._rgb.a*=1+i,this}negate(){const i=this._rgb;return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,this}lighten(i){return xl(this._rgb,2,i),this}darken(i){return xl(this._rgb,2,-i),this}saturate(i){return xl(this._rgb,1,i),this}desaturate(i){return xl(this._rgb,1,-i),this}rotate(i){return function FS(e,i){var t=pu(e);t[0]=n_(t[0]+i),t=_u(t),e.r=t[0],e.g=t[1],e.b=t[2]}(this._rgb,i),this}}function s_(e){return new Cl(e)}function l_(e){if(e&&"object"==typeof e){const i=e.toString();return"[object CanvasPattern]"===i||"[object CanvasGradient]"===i}return!1}function c_(e){return l_(e)?e:s_(e)}function vu(e){return l_(e)?e:s_(e).saturate(.5).darken(.1).hexString()}const pr=Object.create(null),yu=Object.create(null);function ba(e,i){if(!i)return e;const t=i.split(".");for(let n=0,r=t.length;n<r;++n){const a=t[n];e=e[a]||(e[a]=Object.create(null))}return e}function xu(e,i,t){return"string"==typeof i?zn(ba(e,i),t):zn(ba(e,""),i)}var bt=new class VS{constructor(i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,n)=>vu(n.backgroundColor),this.hoverBorderColor=(t,n)=>vu(n.borderColor),this.hoverColor=(t,n)=>vu(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(i)}set(i,t){return xu(this,i,t)}get(i){return ba(this,i)}describe(i,t){return xu(yu,i,t)}override(i,t){return xu(pr,i,t)}route(i,t,n,r){const a=ba(this,i),s=ba(this,n),l="_"+t;Object.defineProperties(a,{[l]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],h=s[r];return Ct(c)?Object.assign({},h,c):ht(c,h)},set(c){this[l]=c}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function bl(e,i,t,n,r){let a=i[r];return a||(a=i[r]=e.measureText(r).width,t.push(r)),a>n&&(n=a),n}function JS(e,i,t,n){let r=(n=n||{}).data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==i&&(r=n.data={},a=n.garbageCollect=[],n.font=i),e.save(),e.font=i;let s=0;const l=t.length;let c,h,u,d,f;for(c=0;c<l;c++)if(d=t[c],null!=d&&!0!==zt(d))s=bl(e,r,a,s,d);else if(zt(d))for(h=0,u=d.length;h<u;h++)f=d[h],null!=f&&!zt(f)&&(s=bl(e,r,a,s,f));e.restore();const p=a.length/2;if(p>t.length){for(c=0;c<p;c++)delete r[a[c]];a.splice(0,p)}return s}function gr(e,i,t){const n=e.currentDevicePixelRatio,r=0!==t?Math.max(t/2,.5):0;return Math.round((i-r)*n)/n+r}function h_(e,i){(i=i||e.getContext("2d")).save(),i.resetTransform(),i.clearRect(0,0,e.width,e.height),i.restore()}function Cu(e,i,t,n){u_(e,i,t,n,null)}function u_(e,i,t,n,r){let a,s,l,c,h,u;const d=i.pointStyle,f=i.rotation,p=i.radius;let g=(f||0)*gS;if(d&&"object"==typeof d&&(a=d.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(t,n),e.rotate(g),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),d){default:r?e.ellipse(t,n,r/2,p,0,0,Ut):e.arc(t,n,p,0,Ut),e.closePath();break;case"triangle":e.moveTo(t+Math.sin(g)*p,n-Math.cos(g)*p),g+=qg,e.lineTo(t+Math.sin(g)*p,n-Math.cos(g)*p),g+=qg,e.lineTo(t+Math.sin(g)*p,n-Math.cos(g)*p),e.closePath();break;case"rectRounded":h=.516*p,c=p-h,s=Math.cos(g+_a)*c,l=Math.sin(g+_a)*c,e.arc(t-s,n-l,h,g-Wt,g-ne),e.arc(t+l,n-s,h,g-ne,g),e.arc(t+s,n+l,h,g,g+ne),e.arc(t-l,n+s,h,g+ne,g+Wt),e.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*p,u=r?r/2:c,e.rect(t-u,n-c,2*u,2*c);break}g+=_a;case"rectRot":s=Math.cos(g)*p,l=Math.sin(g)*p,e.moveTo(t-s,n-l),e.lineTo(t+l,n-s),e.lineTo(t+s,n+l),e.lineTo(t-l,n+s),e.closePath();break;case"crossRot":g+=_a;case"cross":s=Math.cos(g)*p,l=Math.sin(g)*p,e.moveTo(t-s,n-l),e.lineTo(t+s,n+l),e.moveTo(t+l,n-s),e.lineTo(t-l,n+s);break;case"star":s=Math.cos(g)*p,l=Math.sin(g)*p,e.moveTo(t-s,n-l),e.lineTo(t+s,n+l),e.moveTo(t+l,n-s),e.lineTo(t-l,n+s),g+=_a,s=Math.cos(g)*p,l=Math.sin(g)*p,e.moveTo(t-s,n-l),e.lineTo(t+s,n+l),e.moveTo(t+l,n-s),e.lineTo(t-l,n+s);break;case"line":s=r?r/2:Math.cos(g)*p,l=Math.sin(g)*p,e.moveTo(t-s,n-l),e.lineTo(t+s,n+l);break;case"dash":e.moveTo(t,n),e.lineTo(t+Math.cos(g)*p,n+Math.sin(g)*p)}e.fill(),i.borderWidth>0&&e.stroke()}}function Ta(e,i,t){return t=t||.5,!i||e&&e.x>i.left-t&&e.x<i.right+t&&e.y>i.top-t&&e.y<i.bottom+t}function Tl(e,i){e.save(),e.beginPath(),e.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.clip()}function Ml(e){e.restore()}function XS(e,i,t,n,r){if(!i)return e.lineTo(t.x,t.y);if("middle"===r){const a=(i.x+t.x)/2;e.lineTo(a,i.y),e.lineTo(a,t.y)}else"after"===r!=!!n?e.lineTo(i.x,t.y):e.lineTo(t.x,i.y);e.lineTo(t.x,t.y)}function $S(e,i,t,n){if(!i)return e.lineTo(t.x,t.y);e.bezierCurveTo(n?i.cp1x:i.cp2x,n?i.cp1y:i.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function _r(e,i,t,n,r,a={}){const s=zt(i)?i:[i],l=a.strokeWidth>0&&""!==a.strokeColor;let c,h;for(e.save(),e.font=r.string,function QS(e,i){i.translation&&e.translate(i.translation[0],i.translation[1]),yt(i.rotation)||e.rotate(i.rotation),i.color&&(e.fillStyle=i.color),i.textAlign&&(e.textAlign=i.textAlign),i.textBaseline&&(e.textBaseline=i.textBaseline)}(e,a),c=0;c<s.length;++c)h=s[c],l&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),yt(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(h,t,n,a.maxWidth)),e.fillText(h,t,n,a.maxWidth),KS(e,t,n,h,a),n+=r.lineHeight;e.restore()}function KS(e,i,t,n,r){if(r.strikethrough||r.underline){const a=e.measureText(n),s=i-a.actualBoundingBoxLeft,l=i+a.actualBoundingBoxRight,c=t-a.actualBoundingBoxAscent,h=t+a.actualBoundingBoxDescent,u=r.strikethrough?(c+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(s,u),e.lineTo(l,u),e.stroke()}}function Ma(e,i){const{x:t,y:n,w:r,h:a,radius:s}=i;e.arc(t+s.topLeft,n+s.topLeft,s.topLeft,-ne,Wt,!0),e.lineTo(t,n+a-s.bottomLeft),e.arc(t+s.bottomLeft,n+a-s.bottomLeft,s.bottomLeft,Wt,ne,!0),e.lineTo(t+r-s.bottomRight,n+a),e.arc(t+r-s.bottomRight,n+a-s.bottomRight,s.bottomRight,ne,0,!0),e.lineTo(t+r,n+s.topRight),e.arc(t+r-s.topRight,n+s.topRight,s.topRight,0,-ne,!0),e.lineTo(t+s.topLeft,n)}const t3=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),e3=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function n3(e,i){const t=(""+e).match(t3);if(!t||"normal"===t[1])return 1.2*i;switch(e=+t[2],t[3]){case"px":return e;case"%":e/=100}return i*e}const i3=e=>+e||0;function bu(e,i){const t={},n=Ct(i),r=n?Object.keys(i):i,a=Ct(e)?n?s=>ht(e[s],e[i[s]]):s=>e[s]:()=>e;for(const s of r)t[s]=i3(a(s));return t}function d_(e){return bu(e,{top:"y",right:"x",bottom:"y",left:"x"})}function mr(e){return bu(e,["topLeft","topRight","bottomLeft","bottomRight"])}function be(e){const i=d_(e);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function le(e,i){let t=ht((e=e||{}).size,(i=i||bt.font).size);"string"==typeof t&&(t=parseInt(t,10));let n=ht(e.style,i.style);n&&!(""+n).match(e3)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:ht(e.family,i.family),lineHeight:n3(ht(e.lineHeight,i.lineHeight),t),size:t,style:n,weight:ht(e.weight,i.weight),string:""};return r.string=function WS(e){return!e||yt(e.size)||yt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Bt(e,i,t,n){let a,s,l,r=!0;for(a=0,s=e.length;a<s;++a)if(l=e[a],void 0!==l&&(void 0!==i&&"function"==typeof l&&(l=l(i),r=!1),void 0!==t&&zt(l)&&(l=l[t%l.length],r=!1),void 0!==l))return n&&!r&&(n.cacheable=!1),l}function Fi(e,i){return Object.assign(Object.create(e),i)}function Tu(e,i=[""],t=e,n,r=(()=>e[0])){fn(n)||(n=m_("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:t,_fallback:n,_getTarget:r,override:s=>Tu([s,...e],i,t,n)};return new Proxy(a,{deleteProperty:(s,l)=>(delete s[l],delete s._keys,delete e[0][l],!0),get:(s,l)=>p_(s,l,()=>function d3(e,i,t,n){let r;for(const a of i)if(r=m_(o3(a,e),t),fn(r))return Mu(e,r)?wu(t,n,e,r):r}(l,i,e,s)),getOwnPropertyDescriptor:(s,l)=>Reflect.getOwnPropertyDescriptor(s._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(s,l)=>v_(s).includes(l),ownKeys:s=>v_(s),set(s,l,c){const h=s._storage||(s._storage=r());return s[l]=h[l]=c,delete s._keys,!0}})}function ho(e,i,t,n){const r={_cacheable:!1,_proxy:e,_context:i,_subProxy:t,_stack:new Set,_descriptors:f_(e,n),setContext:a=>ho(e,a,t,n),override:a=>ho(e.override(a),i,t,n)};return new Proxy(r,{deleteProperty:(a,s)=>(delete a[s],delete e[s],!0),get:(a,s,l)=>p_(a,s,()=>function a3(e,i,t){const{_proxy:n,_context:r,_subProxy:a,_descriptors:s}=e;let l=n[i];return Li(l)&&s.isScriptable(i)&&(l=function s3(e,i,t,n){const{_proxy:r,_context:a,_subProxy:s,_stack:l}=t;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);return l.add(e),i=i(a,s||n),l.delete(e),Mu(e,i)&&(i=wu(r._scopes,r,e,i)),i}(i,l,e,t)),zt(l)&&l.length&&(l=function l3(e,i,t,n){const{_proxy:r,_context:a,_subProxy:s,_descriptors:l}=t;if(fn(a.index)&&n(e))i=i[a.index%i.length];else if(Ct(i[0])){const c=i,h=r._scopes.filter(u=>u!==c);i=[];for(const u of c){const d=wu(h,r,e,u);i.push(ho(d,a,s&&s[e],l))}}return i}(i,l,e,s.isIndexable)),Mu(i,l)&&(l=ho(l,r,a&&a[i],s)),l}(a,s,l)),getOwnPropertyDescriptor:(a,s)=>a._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(a,s)=>Reflect.has(e,s),ownKeys:()=>Reflect.ownKeys(e),set:(a,s,l)=>(e[s]=l,delete a[s],!0)})}function f_(e,i={scriptable:!0,indexable:!0}){const{_scriptable:t=i.scriptable,_indexable:n=i.indexable,_allKeys:r=i.allKeys}=e;return{allKeys:r,scriptable:t,indexable:n,isScriptable:Li(t)?t:()=>t,isIndexable:Li(n)?n:()=>n}}const o3=(e,i)=>e?e+lu(i):i,Mu=(e,i)=>Ct(i)&&"adapters"!==e&&(null===Object.getPrototypeOf(i)||i.constructor===Object);function p_(e,i,t){if(Object.prototype.hasOwnProperty.call(e,i))return e[i];const n=t();return e[i]=n,n}function g_(e,i,t){return Li(e)?e(i,t):e}const c3=(e,i)=>!0===e?i:"string"==typeof e?Zi(i,e):void 0;function h3(e,i,t,n,r){for(const a of i){const s=c3(t,a);if(s){e.add(s);const l=g_(s._fallback,t,r);if(fn(l)&&l!==t&&l!==n)return l}else if(!1===s&&fn(n)&&t!==n)return null}return!1}function wu(e,i,t,n){const r=i._rootScopes,a=g_(i._fallback,t,n),s=[...e,...r],l=new Set;l.add(n);let c=__(l,s,t,a||t,n);return!(null===c||fn(a)&&a!==t&&(c=__(l,s,a,c,n),null===c))&&Tu(Array.from(l),[""],r,a,()=>function u3(e,i,t){const n=e._getTarget();i in n||(n[i]={});const r=n[i];return zt(r)&&Ct(t)?t:r}(i,t,n))}function __(e,i,t,n,r){for(;t;)t=h3(e,i,t,n,r);return t}function m_(e,i){for(const t of i){if(!t)continue;const n=t[e];if(fn(n))return n}}function v_(e){let i=e._keys;return i||(i=e._keys=function f3(e){const i=new Set;for(const t of e)for(const n of Object.keys(t).filter(r=>!r.startsWith("_")))i.add(n);return Array.from(i)}(e._scopes)),i}function y_(e,i,t,n){const{iScale:r}=e,{key:a="r"}=this._parsing,s=new Array(n);let l,c,h,u;for(l=0,c=n;l<c;++l)h=l+t,u=i[h],s[l]={r:r.parse(Zi(u,a),h)};return s}const p3=Number.EPSILON||1e-14,uo=(e,i)=>i<e.length&&!e[i].skip&&e[i],x_=e=>"x"===e?"y":"x";function g3(e,i,t,n){const r=e.skip?i:e,a=i,s=t.skip?i:t,l=hu(a,r),c=hu(s,a);let h=l/(l+c),u=c/(l+c);h=isNaN(h)?0:h,u=isNaN(u)?0:u;const d=n*h,f=n*u;return{previous:{x:a.x-d*(s.x-r.x),y:a.y-d*(s.y-r.y)},next:{x:a.x+f*(s.x-r.x),y:a.y+f*(s.y-r.y)}}}function wl(e,i,t){return Math.max(Math.min(e,t),i)}function x3(e,i,t,n,r){let a,s,l,c;if(i.spanGaps&&(e=e.filter(h=>!h.skip)),"monotone"===i.cubicInterpolationMode)!function v3(e,i="x"){const t=x_(i),n=e.length,r=Array(n).fill(0),a=Array(n);let s,l,c,h=uo(e,0);for(s=0;s<n;++s)if(l=c,c=h,h=uo(e,s+1),c){if(h){const u=h[i]-c[i];r[s]=0!==u?(h[t]-c[t])/u:0}a[s]=l?h?Yn(r[s-1])!==Yn(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}(function _3(e,i,t){const n=e.length;let r,a,s,l,c,h=uo(e,0);for(let u=0;u<n-1;++u)if(c=h,h=uo(e,u+1),c&&h){if(ma(i[u],0,p3)){t[u]=t[u+1]=0;continue}r=t[u]/i[u],a=t[u+1]/i[u],l=Math.pow(r,2)+Math.pow(a,2),!(l<=9)&&(s=3/Math.sqrt(l),t[u]=r*s*i[u],t[u+1]=a*s*i[u])}})(e,r,a),function m3(e,i,t="x"){const n=x_(t),r=e.length;let a,s,l,c=uo(e,0);for(let h=0;h<r;++h){if(s=l,l=c,c=uo(e,h+1),!l)continue;const u=l[t],d=l[n];s&&(a=(u-s[t])/3,l[`cp1${t}`]=u-a,l[`cp1${n}`]=d-a*i[h]),c&&(a=(c[t]-u)/3,l[`cp2${t}`]=u+a,l[`cp2${n}`]=d+a*i[h])}}(e,a,i)}(e,r);else{let h=n?e[e.length-1]:e[0];for(a=0,s=e.length;a<s;++a)l=e[a],c=g3(h,l,e[Math.min(a+1,s-(n?0:1))%s],i.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}i.capBezierPoints&&function y3(e,i){let t,n,r,a,s,l=Ta(e[0],i);for(t=0,n=e.length;t<n;++t)s=a,a=l,l=t<n-1&&Ta(e[t+1],i),a&&(r=e[t],s&&(r.cp1x=wl(r.cp1x,i.left,i.right),r.cp1y=wl(r.cp1y,i.top,i.bottom)),l&&(r.cp2x=wl(r.cp2x,i.left,i.right),r.cp2y=wl(r.cp2y,i.top,i.bottom)))}(e,t)}function C_(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Pu(e){let i=e.parentNode;return i&&"[object ShadowRoot]"===i.toString()&&(i=i.host),i}function Pl(e,i,t){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*i.parentNode[t])):n=e,n}const Ol=e=>window.getComputedStyle(e,null),b3=["top","right","bottom","left"];function vr(e,i,t){const n={};t=t?"-"+t:"";for(let r=0;r<4;r++){const a=b3[r];n[a]=parseFloat(e[i+"-"+a+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function yr(e,i){if("native"in e)return e;const{canvas:t,currentDevicePixelRatio:n}=i,r=Ol(t),a="border-box"===r.boxSizing,s=vr(r,"padding"),l=vr(r,"border","width"),{x:c,y:h,box:u}=function M3(e,i){const t=e.touches,n=t&&t.length?t[0]:e,{offsetX:r,offsetY:a}=n;let l,c,s=!1;if(((e,i,t)=>(e>0||i>0)&&(!t||!t.shadowRoot))(r,a,e.target))l=r,c=a;else{const h=i.getBoundingClientRect();l=n.clientX-h.left,c=n.clientY-h.top,s=!0}return{x:l,y:c,box:s}}(e,t),d=s.left+(u&&l.left),f=s.top+(u&&l.top);let{width:p,height:g}=i;return a&&(p-=s.width+l.width,g-=s.height+l.height),{x:Math.round((c-d)/p*t.width/n),y:Math.round((h-f)/g*t.height/n)}}const Ou=e=>Math.round(10*e)/10;function b_(e,i,t){const n=i||1,r=Math.floor(e.height*n),a=Math.floor(e.width*n);e.height=r/n,e.width=a/n;const s=e.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||s.height!==r||s.width!==a)&&(e.currentDevicePixelRatio=n,s.height=r,s.width=a,e.ctx.setTransform(n,0,0,n,0,0),!0)}const O3=function(){let e=!1;try{const i={get passive(){return e=!0,!1}};window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch(i){}return e}();function T_(e,i){const t=function C3(e,i){return Ol(e).getPropertyValue(i)}(e,i),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function xr(e,i,t,n){return{x:e.x+t*(i.x-e.x),y:e.y+t*(i.y-e.y)}}function S3(e,i,t,n){return{x:e.x+t*(i.x-e.x),y:"middle"===n?t<.5?e.y:i.y:"after"===n?t<1?e.y:i.y:t>0?i.y:e.y}}function A3(e,i,t,n){const r={x:e.cp2x,y:e.cp2y},a={x:i.cp1x,y:i.cp1y},s=xr(e,r,t),l=xr(r,a,t),c=xr(a,i,t),h=xr(s,l,t),u=xr(l,c,t);return xr(h,u,t)}const M_=new Map;function wa(e,i,t){return function E3(e,i){i=i||{};const t=e+JSON.stringify(i);let n=M_.get(t);return n||(n=new Intl.NumberFormat(e,i),M_.set(t,n)),n}(i,t).format(e)}function fo(e,i,t){return e?function(e,i){return{x:t=>e+e+i-t,setWidth(t){i=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,n)=>t-n,leftForLtr:(t,n)=>t-n}}(i,t):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,i)=>e+i,leftForLtr:(e,i)=>e}}function w_(e,i){let t,n;("ltr"===i||"rtl"===i)&&(t=e.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",i,"important"),e.prevTextDirection=n)}function P_(e,i){void 0!==i&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",i[0],i[1]))}function O_(e){return"angle"===e?{between:va,compare:vS,normalize:rn}:{between:hi,compare:(i,t)=>i-t,normalize:i=>i}}function S_({start:e,end:i,count:t,loop:n,style:r}){return{start:e%t,end:i%t,loop:n&&(i-e+1)%t==0,style:r}}function A_(e,i,t){if(!t)return[e];const{property:n,start:r,end:a}=t,s=i.length,{compare:l,between:c,normalize:h}=O_(n),{start:u,end:d,loop:f,style:p}=function R3(e,i,t){const{property:n,start:r,end:a}=t,{between:s,normalize:l}=O_(n),c=i.length;let f,p,{start:h,end:u,loop:d}=e;if(d){for(h+=c,u+=c,f=0,p=c;f<p&&s(l(i[h%c][n]),r,a);++f)h--,u--;h%=c,u%=c}return u<h&&(u+=c),{start:h,end:u,loop:d,style:e.style}}(e,i,t),g=[];let v,y,C,_=!1,m=null;for(let w=u,P=u;w<=d;++w)y=i[w%s],!y.skip&&(v=h(y[n]),v!==C&&(_=c(v,r,a),null===m&&(_||c(r,C,v)&&0!==l(r,C))&&(m=0===l(v,r)?w:P),null!==m&&(!_||0===l(a,v)||c(a,C,v))&&(g.push(S_({start:m,end:w,loop:f,count:s,style:p})),m=null),P=w,C=v));return null!==m&&g.push(S_({start:m,end:d,loop:f,count:s,style:p})),g}function E_(e,i){const t=[],n=e.segments;for(let r=0;r<n.length;r++){const a=A_(n[r],e.points,i);a.length&&t.push(...a)}return t}function D_(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function F3(e,i){return i&&JSON.stringify(e)!==JSON.stringify(i)}var fi=new class U3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,t,n,r){const s=t.duration;t.listeners[r].forEach(l=>l({chart:i,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Wg.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const a=n.items;let c,s=a.length-1,l=!1;for(;s>=0;--s)c=a[s],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(i),l=!0):(a[s]=a[a.length-1],a.pop());l&&(r.draw(),this._notify(r,n,i,"progress")),a.length||(n.running=!1,this._notify(r,n,i,"complete"),n.initial=!1),t+=a.length}),this._lastDate=i,0===t&&(this._running=!1)}_getAnims(i){const t=this._charts;let n=t.get(i);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(i,n)),n}listen(i,t,n){this._getAnims(i).listeners[t].push(n)}add(i,t){!t||!t.length||this._getAnims(i).items.push(...t)}has(i){return this._getAnims(i).items.length>0}start(i){const t=this._charts.get(i);!t||(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(i){if(!this._running)return!1;const t=this._charts.get(i);return!(!t||!t.running||!t.items.length)}stop(i){const t=this._charts.get(i);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(i,t,Date.now(),"complete")}remove(i){return this._charts.delete(i)}};const R_="transparent",q3={boolean:(e,i,t)=>t>.5?i:e,color(e,i,t){const n=c_(e||R_),r=n.valid&&c_(i||R_);return r&&r.valid?r.mix(n,t).hexString():i},number:(e,i,t)=>e+(i-e)*t};class G3{constructor(i,t,n,r){const a=t[n];r=Bt([i.to,r,a,i.from]);const s=Bt([i.from,a,r]);this._active=!0,this._fn=i.fn||q3[i.type||typeof s],this._easing=ya[i.easing]||ya.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(i,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],a=n-this._start,s=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(s,i.duration)),this._total+=a,this._loop=!!i.loop,this._to=Bt([i.to,t,r,i.from]),this._from=Bt([i.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){const t=i-this._start,n=this._duration,r=this._prop,a=this._from,s=this._loop,l=this._to;let c;if(this._active=a!==l&&(s||t<n),!this._active)return this._target[r]=l,void this._notify(!0);t<0?this._target[r]=a:(c=t/n%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(a,l,c))}wait(){const i=this._promises||(this._promises=[]);return new Promise((t,n)=>{i.push({res:t,rej:n})})}_notify(i){const t=i?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}bt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Y3=Object.keys(bt.animation);bt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),bt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),bt.describe("animations",{_fallback:"animation"}),bt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class Z_{constructor(i,t){this._chart=i,this._properties=new Map,this.configure(t)}configure(i){if(!Ct(i))return;const t=this._properties;Object.getOwnPropertyNames(i).forEach(n=>{const r=i[n];if(!Ct(r))return;const a={};for(const s of Y3)a[s]=r[s];(zt(r.properties)&&r.properties||[n]).forEach(s=>{(s===n||!t.has(s))&&t.set(s,a)})})}_animateOptions(i,t){const n=t.options,r=function B3(e,i){if(!i)return;let t=e.options;if(t)return t.$shared&&(e.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;e.options=i}(i,n);if(!r)return[];const a=this._createAnimations(r,n);return n.$shared&&function H3(e,i){const t=[],n=Object.keys(i);for(let r=0;r<n.length;r++){const a=e[n[r]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}(i.options.$animations,n).then(()=>{i.options=n},()=>{}),a}_createAnimations(i,t){const n=this._properties,r=[],a=i.$animations||(i.$animations={}),s=Object.keys(t),l=Date.now();let c;for(c=s.length-1;c>=0;--c){const h=s[c];if("$"===h.charAt(0))continue;if("options"===h){r.push(...this._animateOptions(i,t));continue}const u=t[h];let d=a[h];const f=n.get(h);if(d){if(f&&d.active()){d.update(f,u,l);continue}d.cancel()}f&&f.duration?(a[h]=d=new G3(f,i,h,u),r.push(d)):i[h]=u}return r}update(i,t){if(0===this._properties.size)return void Object.assign(i,t);const n=this._createAnimations(i,t);return n.length?(fi.add(this._chart,n),!0):void 0}}function L_(e,i){const t=e&&e.options||{},n=t.reverse,r=void 0===t.min?i:0,a=void 0===t.max?i:0;return{start:n?a:r,end:n?r:a}}function k_(e,i){const t=[],n=e._getSortedDatasetMetas(i);let r,a;for(r=0,a=n.length;r<a;++r)t.push(n[r].index);return t}function N_(e,i,t,n={}){const r=e.keys,a="single"===n.mode;let s,l,c,h;if(null!==i){for(s=0,l=r.length;s<l;++s){if(c=+r[s],c===t){if(n.all)continue;break}h=e.values[c],oe(h)&&(a||0===i||Yn(i)===Yn(h))&&(i+=h)}return i}}function F_(e,i){const t=e&&e.options.stacked;return t||void 0===t&&void 0!==i.stack}function Q3(e,i,t){const n=e[i]||(e[i]={});return n[t]||(n[t]={})}function U_(e,i,t,n){for(const r of i.getMatchingVisibleMetas(n).reverse()){const a=e[r.index];if(t&&a>0||!t&&a<0)return r.index}return null}function q_(e,i){const{chart:t,_cachedMeta:n}=e,r=t._stacks||(t._stacks={}),{iScale:a,vScale:s,index:l}=n,c=a.axis,h=s.axis,u=function X3(e,i,t){return`${e.id}.${i.id}.${t.stack||t.type}`}(a,s,n),d=i.length;let f;for(let p=0;p<d;++p){const g=i[p],{[c]:_,[h]:m}=g;f=(g._stacks||(g._stacks={}))[h]=Q3(r,u,_),f[l]=m,f._top=U_(f,s,!0,n.type),f._bottom=U_(f,s,!1,n.type)}}function Su(e,i){const t=e.scales;return Object.keys(t).filter(n=>t[n].axis===i).shift()}function Pa(e,i){const t=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){i=i||e._parsed;for(const r of i){const a=r._stacks;if(!a||void 0===a[n]||void 0===a[n][t])return;delete a[n][t]}}}const Au=e=>"reset"===e||"none"===e,G_=(e,i)=>i?e:Object.assign({},e);let Hn=(()=>{class e{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=F_(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Pa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),a=(f,p,g,_)=>"x"===f?p:"r"===f?_:g,s=n.xAxisID=ht(r.xAxisID,Su(t,"x")),l=n.yAxisID=ht(r.yAxisID,Su(t,"y")),c=n.rAxisID=ht(r.rAxisID,Su(t,"r")),h=n.indexAxis,u=n.iAxisID=a(h,s,l,c),d=n.vAxisID=a(h,l,s,c);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Bg(this._data,this),t._stacked&&Pa(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Ct(n))this._data=function J3(e){const i=Object.keys(e),t=new Array(i.length);let n,r,a;for(n=0,r=i.length;n<r;++n)a=i[n],t[n]={x:a,y:e[a]};return t}(n);else if(r!==n){if(r){Bg(r,this);const a=this._cachedMeta;Pa(a),a._parsed=[]}n&&Object.isExtensible(n)&&function bS(e,i){e._chartjs?e._chartjs.listeners.push(i):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Hg.forEach(t=>{const n="_onData"+lu(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...a){const s=r.apply(this,a);return e._chartjs.listeners.forEach(l=>{"function"==typeof l[n]&&l[n](...a)}),s}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let a=!1;this._dataCheck();const s=n._stacked;n._stacked=F_(n.vScale,n),n.stack!==r.stack&&(a=!0,Pa(n),n.stack=r.stack),this._resyncElements(t),(a||s!==n._stacked)&&q_(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:a}=this,{iScale:s,_stacked:l}=r,c=s.axis;let d,f,p,h=0===t&&n===a.length||r._sorted,u=t>0&&r._parsed[t-1];if(!1===this._parsing)r._parsed=a,r._sorted=!0,p=a;else{p=zt(a[t])?this.parseArrayData(r,a,t,n):Ct(a[t])?this.parseObjectData(r,a,t,n):this.parsePrimitiveData(r,a,t,n);const g=()=>null===f[c]||u&&f[c]<u[c];for(d=0;d<n;++d)r._parsed[d+t]=f=p[d],h&&(g()&&(h=!1),u=f);r._sorted=h}l&&q_(this,p)}parsePrimitiveData(t,n,r,a){const{iScale:s,vScale:l}=t,c=s.axis,h=l.axis,u=s.getLabels(),d=s===l,f=new Array(a);let p,g,_;for(p=0,g=a;p<g;++p)_=p+r,f[p]={[c]:d||s.parse(u[_],_),[h]:l.parse(n[_],_)};return f}parseArrayData(t,n,r,a){const{xScale:s,yScale:l}=t,c=new Array(a);let h,u,d,f;for(h=0,u=a;h<u;++h)d=h+r,f=n[d],c[h]={x:s.parse(f[0],d),y:l.parse(f[1],d)};return c}parseObjectData(t,n,r,a){const{xScale:s,yScale:l}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,u=new Array(a);let d,f,p,g;for(d=0,f=a;d<f;++d)p=d+r,g=n[p],u[d]={x:s.parse(Zi(g,c),p),y:l.parse(Zi(g,h),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this._cachedMeta,l=n[t.axis];return N_({keys:k_(this.chart,!0),values:n._stacks[t.axis]},l,s.index,{mode:r})}updateRangeFromParsed(t,n,r,a){const s=r[n.axis];let l=null===s?NaN:s;const c=a&&r._stacks[n.axis];a&&c&&(a.values=c,l=N_(a,s,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const r=this._cachedMeta,a=r._parsed,s=r._sorted&&t===r.iScale,l=a.length,c=this._getOtherScale(t),h=((e,i,t)=>e&&!i.hidden&&i._stacked&&{keys:k_(this.chart,!0),values:null})(n,r),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=function $3(e){const{min:i,max:t,minDefined:n,maxDefined:r}=e.getUserBounds();return{min:n?i:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}(c);let p,g;function _(){g=a[p];const m=g[c.axis];return!oe(g[t.axis])||d>m||f<m}for(p=0;p<l&&(_()||(this.updateRangeFromParsed(u,t,g,h),!s));++p);if(s)for(p=l-1;p>=0;--p)if(!_()){this.updateRangeFromParsed(u,t,g,h);break}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let a,s,l;for(a=0,s=n.length;a<s;++a)l=n[a][t.axis],oe(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,a=n.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:a?""+a.getLabelForValue(s[a.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=function W3(e){let i,t,n,r;return Ct(e)?(i=e.top,t=e.right,n=e.bottom,r=e.left):i=t=n=r=e,{top:i,right:t,bottom:n,left:r,disabled:!1===e}}(ht(this.options.clip,function V3(e,i,t){if(!1===t)return!1;const n=L_(e,t),r=L_(i,t);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this._cachedMeta,a=r.data||[],s=this.chart.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||a.length-c,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,s,c,h),d=c;d<c+h;++d){const f=a[d];f.hidden||(f.active&&u?l.push(f):f.draw(t,s))}for(d=0;d<l.length;++d)l[d].draw(t,s)}getStyle(t,n){const r=n?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const a=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];s=l.$context||(l.$context=function tA(e,i,t){return Fi(e,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:t,index:i,mode:"default",type:"data"})}(this.getContext(),t,l)),s.parsed=this.getParsed(t),s.raw=a.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=function K3(e,i){return Fi(e,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=a,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const a="active"===n,s=this._cachedDataOpts,l=t+"-"+n,c=s[l],h=this.enableOptionSharing&&fn(r);if(c)return G_(c,h);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),f=a?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),d),g=Object.keys(bt.elements[t]),m=u.resolveNamedOptions(p,g,()=>this.getContext(r,a),f);return m.$shared&&(m.$shared=h,s[l]=Object.freeze(G_(m,h))),m}_resolveAnimations(t,n,r){const a=this.chart,s=this._cachedDataOpts,l=`animation-${n}`,c=s[l];if(c)return c;let h;if(!1!==a.options.animation){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),p=d.getOptionScopes(this.getDataset(),f);h=d.createResolver(p,this.getContext(t,r,n))}const u=new Z_(a,h&&h.animations);return h&&h._cacheable&&(s[l]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||Au(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),a=this._sharedOptions,s=this.getSharedOptions(r),l=this.includeOptions(n,s)||s!==a;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:l}}updateElement(t,n,r,a){Au(a)?Object.assign(t,r):this._resolveAnimations(n,a).update(t,r)}updateSharedOptions(t,n,r){t&&!Au(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,a){t.active=a;const s=this.getStyle(n,a);this._resolveAnimations(n,r,a).update(t,{options:!a&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[c,h,u]of this._syncList)this[c](h,u);this._syncList=[];const a=r.length,s=n.length,l=Math.min(s,a);l&&this.parse(0,l),s>a?this._insertElements(a,s-a,t):s<a&&this._removeElements(s,a-s)}_insertElements(t,n,r=!0){const a=this._cachedMeta,s=a.data,l=t+n;let c;const h=u=>{for(u.length+=n,c=u.length-1;c>=l;c--)u[c]=u[c-n]};for(h(s),c=t;c<l;++c)s[c]=new this.dataElementType;this._parsing&&h(a._parsed),this.parse(t,n),r&&this.updateElements(s,t,n,"reset")}updateElements(t,n,r,a){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const a=r._parsed.splice(t,n);r._stacked&&Pa(r,a)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,a]=t;this[n](r,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return e.defaults={},e})();function iA(e){const i=e.iScale,t=function nA(e,i){if(!e._cache.$bar){const t=e.getMatchingVisibleMetas(i);let n=[];for(let r=0,a=t.length;r<a;r++)n=n.concat(t[r].controller.getAllParsedValues(e));e._cache.$bar=Vg(n.sort((r,a)=>r-a))}return e._cache.$bar}(i,e.type);let r,a,s,l,n=i._length;const c=()=>{32767===s||-32768===s||(fn(l)&&(n=Math.min(n,Math.abs(s-l)||n)),l=s)};for(r=0,a=t.length;r<a;++r)s=i.getPixelForValue(t[r]),c();for(l=void 0,r=0,a=i.ticks.length;r<a;++r)s=i.getPixelForTick(r),c();return n}function j_(e,i,t,n){return zt(e)?function aA(e,i,t,n){const r=t.parse(e[0],n),a=t.parse(e[1],n),s=Math.min(r,a),l=Math.max(r,a);let c=s,h=l;Math.abs(s)>Math.abs(l)&&(c=l,h=s),i[t.axis]=h,i._custom={barStart:c,barEnd:h,start:r,end:a,min:s,max:l}}(e,i,t,n):i[t.axis]=t.parse(e,n),i}function z_(e,i,t,n){const r=e.iScale,a=e.vScale,s=r.getLabels(),l=r===a,c=[];let h,u,d,f;for(h=t,u=t+n;h<u;++h)f=i[h],d={},d[r.axis]=l||r.parse(s[h],h),c.push(j_(f,d,a,h));return c}function Eu(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function cA(e,i,t,n){let r=i.borderSkipped;const a={};if(!r)return void(e.borderSkipped=a);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:l,reverse:c,top:h,bottom:u}=function lA(e){let i,t,n,r,a;return e.horizontal?(i=e.base>e.x,t="left",n="right"):(i=e.base<e.y,t="bottom",n="top"),i?(r="end",a="start"):(r="start",a="end"),{start:t,end:n,reverse:i,top:r,bottom:a}}(e);"middle"===r&&t&&(e.enableBorderRadius=!0,(t._top||0)===n?r=h:(t._bottom||0)===n?r=u:(a[Y_(u,s,l,c)]=!0,r=h)),a[Y_(r,s,l,c)]=!0,e.borderSkipped=a}function Y_(e,i,t,n){return n?(e=function hA(e,i,t){return e===i?t:e===t?i:e}(e,i,t),e=H_(e,t,i)):e=H_(e,i,t),e}function H_(e,i,t){return"start"===e?i:"end"===e?t:e}function uA(e,{inflateAmount:i},t){e.inflateAmount="auto"===i?1===t?.33:0:i}Hn.prototype.datasetElementType=null,Hn.prototype.dataElementType=null;let B_=(()=>{class e extends Hn{parsePrimitiveData(t,n,r,a){return z_(t,n,r,a)}parseArrayData(t,n,r,a){return z_(t,n,r,a)}parseObjectData(t,n,r,a){const{iScale:s,vScale:l}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,u="x"===s.axis?c:h,d="x"===l.axis?c:h,f=[];let p,g,_,m;for(p=r,g=r+a;p<g;++p)m=n[p],_={},_[s.axis]=s.parse(Zi(m,u),p),f.push(j_(Zi(m,d),_,l,p));return f}updateRangeFromParsed(t,n,r,a){super.updateRangeFromParsed(t,n,r,a);const s=r._custom;s&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:a}=n,s=this.getParsed(t),l=s._custom,c=Eu(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(s[a.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,a){const s="reset"===a,{index:l,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,a);for(let g=n;g<n+r;g++){const _=this.getParsed(g),m=s||yt(_[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(g),v=this._calculateBarIndexPixels(g,d),y=(_._stacks||{})[c.axis],C={horizontal:u,base:m.base,enableBorderRadius:!y||Eu(_._custom)||l===y._top||l===y._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};p&&(C.options=f||this.resolveDataElementOptions(g,t[g].active?"active":a));const x=C.options||t[g].options;cA(C,x,y,l),uA(C,x,d.ratio),this.updateElement(t[g],g,C,a)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,a=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,l=[],c=h=>{const u=h.controller.getParsed(n),d=u&&u[h.vScale.axis];if(yt(d)||isNaN(d))return!0};for(const h of a)if((void 0===n||!c(h))&&((!1===s||-1===l.indexOf(h.stack)||void 0===s&&void 0===h.stack)&&l.push(h.stack),h.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,r){const a=this._getStacks(t,r),s=void 0!==n?a.indexOf(n):-1;return-1===s?a.length-1:s}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,a=[];let s,l;for(s=0,l=n.data.length;s<l;++s)a.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const c=t.barThickness;return{min:c||iA(n),pixels:a,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:a,minBarLength:s}}=this,l=a||0,c=this.getParsed(t),h=c._custom,u=Eu(h);let g,_,d=c[n.axis],f=0,p=r?this.applyStack(n,c,r):d;p!==d&&(f=p-d,p=d),u&&(d=h.barStart,p=h.barEnd-h.barStart,0!==d&&Yn(d)!==Yn(h.barEnd)&&(f=0),f+=d);const m=yt(a)||u?f:a;let v=n.getPixelForValue(m);if(g=this.chart.getDataVisibility(t)?n.getPixelForValue(f+p):v,_=g-v,Math.abs(_)<s){_=function sA(e,i,t){return 0!==e?Yn(e):(i.isHorizontal()?1:-1)*(i.min>=t?1:-1)}(_,n,l)*s,d===l&&(v-=_/2);const y=n.getPixelForDecimal(0),C=n.getPixelForDecimal(1),x=Math.min(y,C),b=Math.max(y,C);v=Math.max(Math.min(v,b),x),g=v+_}if(v===n.getPixelForValue(l)){const y=Yn(_)*n.getLineWidthForValue(l)/2;v+=y,_-=y}return{size:_,base:v,head:g,center:g+_/2}}_calculateBarIndexPixels(t,n){const r=n.scale,a=this.options,s=a.skipNull,l=ht(a.maxBarThickness,1/0);let c,h;if(n.grouped){const u=s?this._getStackCount(t):n.stackCount,d="flex"===a.barThickness?function oA(e,i,t,n){const r=i.pixels,a=r[e];let s=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=t.categoryPercentage;null===s&&(s=a-(null===l?i.end-i.start:l-a)),null===l&&(l=a+a-s);const h=a-(a-Math.min(s,l))/2*c;return{chunk:Math.abs(l-s)/2*c/n,ratio:t.barPercentage,start:h}}(t,n,a,u):function rA(e,i,t,n){const r=t.barThickness;let a,s;return yt(r)?(a=i.min*t.categoryPercentage,s=t.barPercentage):(a=r*n,s=1),{chunk:a/n,ratio:s,start:i.pixels[e]-a/2}}(t,n,a,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);c=d.start+d.chunk*f+d.chunk/2,h=Math.min(l,d.chunk*d.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),h=Math.min(l,n.min*n.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,a=r.length;let s=0;for(;s<a;++s)null!==this.getParsed(s)[n.axis]&&r[s].draw(this._ctx)}}return e.id="bar",e.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},e.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},e})(),V_=(()=>{class e extends Hn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,r,a){const s=super.parsePrimitiveData(t,n,r,a);for(let l=0;l<s.length;l++)s[l]._custom=this.resolveDataElementOptions(l+r).radius;return s}parseArrayData(t,n,r,a){const s=super.parseArrayData(t,n,r,a);for(let l=0;l<s.length;l++)s[l]._custom=ht(n[r+l][2],this.resolveDataElementOptions(l+r).radius);return s}parseObjectData(t,n,r,a){const s=super.parseObjectData(t,n,r,a);for(let l=0;l<s.length;l++){const c=n[r+l];s[l]._custom=ht(c&&c.r&&+c.r,this.resolveDataElementOptions(l+r).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,{xScale:r,yScale:a}=n,s=this.getParsed(t),l=r.getLabelForValue(s.x),c=a.getLabelForValue(s.y),h=s._custom;return{label:n.label,value:"("+l+", "+c+(h?", "+h:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,r,a){const s="reset"===a,{iScale:l,vScale:c}=this._cachedMeta,{sharedOptions:h,includeOptions:u}=this._getSharedOptions(n,a),d=l.axis,f=c.axis;for(let p=n;p<n+r;p++){const g=t[p],_=!s&&this.getParsed(p),m={},v=m[d]=s?l.getPixelForDecimal(.5):l.getPixelForValue(_[d]),y=m[f]=s?c.getBasePixel():c.getPixelForValue(_[f]);m.skip=isNaN(v)||isNaN(y),u&&(m.options=h||this.resolveDataElementOptions(p,g.active?"active":a),s&&(m.options.radius=0)),this.updateElement(g,p,m,a)}}resolveDataElementOptions(t,n){const r=this.getParsed(t);let a=super.resolveDataElementOptions(t,n);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const s=a.radius;return"active"!==n&&(a.radius=0),a.radius+=ht(r&&r._custom,s),a}}return e.id="bubble",e.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},e.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},e})(),Iu=(()=>{class e extends Hn{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,a=this._cachedMeta;if(!1===this._parsing)a._parsed=r;else{let l,c,s=h=>+r[h];if(Ct(r[t])){const{key:h="value"}=this._parsing;s=u=>+Zi(r[u],h)}for(l=t,c=t+n;l<c;++l)a._parsed[l]=s(l)}}_getRotation(){return Sn(this.options.rotation-90)}_getCircumference(){return Sn(this.options.circumference)}_getRotationExtents(){let t=Ut,n=-Ut;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const a=this.chart.getDatasetMeta(r).controller,s=a._getRotation(),l=a._getCircumference();t=Math.min(t,s),n=Math.max(n,s+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,a=this._cachedMeta,s=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-l)/2,0),h=Math.min(((e,i)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:e/i)(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:_,offsetY:m}=function dA(e,i,t){let n=1,r=1,a=0,s=0;if(i<Ut){const l=e,c=l+i,h=Math.cos(l),u=Math.sin(l),d=Math.cos(c),f=Math.sin(c),p=(C,x,b)=>va(C,l,c,!0)?1:Math.max(x,x*t,b,b*t),g=(C,x,b)=>va(C,l,c,!0)?-1:Math.min(x,x*t,b,b*t),_=p(0,h,d),m=p(ne,u,f),v=g(Wt,h,d),y=g(Wt+ne,u,f);n=(_-v)/2,r=(m-y)/2,a=-(_+v)/2,s=-(m+y)/2}return{ratioX:n,ratioY:r,offsetX:a,offsetY:s}}(f,d,h),C=Math.max(Math.min((r.width-l)/p,(r.height-l)/g)/2,0),x=kg(this.options.radius,C),T=(x-Math.max(x*h,0))/this._getVisibleDatasetWeightTotal();this.offsetX=_*x,this.offsetY=m*x,a.total=this.calculateTotal(),this.outerRadius=x-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,n){const r=this.options,a=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||null===a._parsed[t]||a.data[t].hidden?0:this.calculateCircumference(a._parsed[t]*s/Ut)}updateElements(t,n,r,a){const s="reset"===a,l=this.chart,c=l.chartArea,d=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=s&&l.options.animation.animateScale,g=p?0:this.innerRadius,_=p?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(n,a);let C,y=this._getRotation();for(C=0;C<n;++C)y+=this._circumference(C,s);for(C=n;C<n+r;++C){const x=this._circumference(C,s),b=t[C],T={x:d+this.offsetX,y:f+this.offsetY,startAngle:y,endAngle:y+x,circumference:x,outerRadius:_,innerRadius:g};v&&(T.options=m||this.resolveDataElementOptions(C,b.active?"active":a)),y+=x,this.updateElement(b,C,T,a)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let a,r=0;for(a=0;a<n.length;a++){const s=t._parsed[a];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ut*(Math.abs(t)/n):0}getLabelAndValue(t){const r=this.chart,a=r.data.labels||[],s=wa(this._cachedMeta._parsed[t],r.options.locale);return{label:a[t]||"",value:s}}getMaxBorderWidth(t){let n=0;const r=this.chart;let a,s,l,c,h;if(!t)for(a=0,s=r.data.datasets.length;a<s;++a)if(r.isDatasetVisible(a)){l=r.getDatasetMeta(a),t=l.data,c=l.controller;break}if(!t)return 0;for(a=0,s=t.length;a<s;++a)h=c.resolveDataElementOptions(a),"inner"!==h.borderAlign&&(n=Math.max(n,h.borderWidth||0,h.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,a=t.length;r<a;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return e.id="doughnut",e.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},e.descriptors={_scriptable:i=>"spacing"!==i,_indexable:i=>"spacing"!==i},e.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const t=i.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=i.legend.options;return t.labels.map((r,a)=>{const l=i.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!i.getDataVisibility(a),index:a}})}return[]}},onClick(i,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(i){let t=i.label;const n=": "+i.formattedValue;return zt(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}},e})(),W_=(()=>{class e extends Hn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:a=[],_dataset:s}=n,l=this.chart._animationsDisabled;let{start:c,count:h}=Xg(n,a,l);this._drawStart=c,this._drawCount=h,$g(n)&&(c=0,h=a.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=a;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:u},t),this.updateElements(a,c,h,t)}updateElements(t,n,r,a){const s="reset"===a,{iScale:l,vScale:c,_stacked:h,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,a),p=l.axis,g=c.axis,{spanGaps:_,segment:m}=this.options,v=lo(_)?_:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||"none"===a;let C=n>0&&this.getParsed(n-1);for(let x=n;x<n+r;++x){const b=t[x],T=this.getParsed(x),M=y?b:{},w=yt(T[g]),P=M[p]=l.getPixelForValue(T[p],x),D=M[g]=s||w?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,T,h):T[g],x);M.skip=isNaN(P)||isNaN(D)||w,M.stop=x>0&&Math.abs(T[p]-C[p])>v,m&&(M.parsed=T,M.raw=u.data[x]),f&&(M.options=d||this.resolveDataElementOptions(x,b.active?"active":a)),y||this.updateElement(b,x,M,a),C=T}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,a=t.data||[];if(!a.length)return r;const s=a[0].size(this.resolveDataElementOptions(0)),l=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(r,s,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return e.id="line",e.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},e.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},e})(),J_=(()=>{class e extends Hn{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const r=this.chart,a=r.data.labels||[],s=wa(this._cachedMeta._parsed[t].r,r.options.locale);return{label:a[t]||"",value:s}}parseObjectData(t,n,r,a){return y_.bind(this)(t,n,r,a)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,a)=>{const s=this.getParsed(a).r;!isNaN(s)&&this.chart.getDataVisibility(a)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,r=t.options,a=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(a/2,0),c=(s-Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,n,r,a){const s="reset"===a,l=this.chart,h=l.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*Wt;let _,g=p;const m=360/this.countVisibleElements();for(_=0;_<n;++_)g+=this._computeAngle(_,a,m);for(_=n;_<n+r;_++){const v=t[_];let y=g,C=g+this._computeAngle(_,a,m),x=l.getDataVisibility(_)?u.getDistanceFromCenterForValue(this.getParsed(_).r):0;g=C,s&&(h.animateScale&&(x=0),h.animateRotate&&(y=C=p));const b={x:d,y:f,innerRadius:0,outerRadius:x,startAngle:y,endAngle:C,options:this.resolveDataElementOptions(_,v.active?"active":a)};this.updateElement(v,_,b,a)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&n++}),n}_computeAngle(t,n,r){return this.chart.getDataVisibility(t)?Sn(this.resolveDataElementOptions(t,n).angle||r):0}}return e.id="polarArea",e.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},e.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){const t=i.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=i.legend.options;return t.labels.map((r,a)=>{const l=i.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!i.getDataVisibility(a),index:a}})}return[]}},onClick(i,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:i=>i.chart.data.labels[i.dataIndex]+": "+i.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},e})(),X_=(()=>{class e extends Iu{}return e.id="pie",e.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},e})(),$_=(()=>{class e extends Hn{getLabelAndValue(t){const n=this._cachedMeta.vScale,r=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(t,n,r,a){return y_.bind(this)(t,n,r,a)}update(t){const n=this._cachedMeta,r=n.dataset,a=n.data||[],s=n.iScale.getLabels();if(r.points=a,"resize"!==t){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:s.length===a.length,options:l},t)}this.updateElements(a,0,a.length,t)}updateElements(t,n,r,a){const s=this._cachedMeta.rScale,l="reset"===a;for(let c=n;c<n+r;c++){const h=t[c],u=this.resolveDataElementOptions(c,h.active?"active":a),d=s.getPointPositionForValue(c,this.getParsed(c).r),f=l?s.xCenter:d.x,p=l?s.yCenter:d.y,g={x:f,y:p,angle:d.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(h,c,g,a)}}}return e.id="radar",e.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},e.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},e})();class An{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(i){const{x:t,y:n}=this.getProps(["x","y"],i);return{x:t,y:n}}hasValue(){return lo(this.x)&&lo(this.y)}getProps(i,t){const n=this.$animations;if(!t||!n)return this;const r={};return i.forEach(a=>{r[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),r}}An.defaults={},An.defaultRoutes=void 0;const Q_={values:e=>zt(e)?e:""+e,numeric(e,i,t){if(0===e)return"0";const n=this.chart.options.locale;let r,a=e;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),a=function fA(e,i){let t=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value;return Math.abs(t)>=1&&e!==Math.floor(e)&&(t=e-Math.floor(e)),t}(e,t)}const s=pn(Math.abs(a)),l=Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),wa(e,n,c)},logarithmic(e,i,t){if(0===e)return"0";const n=e/Math.pow(10,Math.floor(pn(e)));return 1===n||2===n||5===n?Q_.numeric.call(this,e,i,t):""}};var Sl={formatters:Q_};function Al(e,i,t,n,r){const a=ht(n,0),s=Math.min(ht(r,e.length),e.length);let c,h,u,l=0;for(t=Math.ceil(t),r&&(c=r-n,t=c/Math.floor(c/t)),u=a;u<0;)l++,u=Math.round(a+l*t);for(h=Math.max(a,0);h<s;h++)h===u&&(i.push(e[h]),l++,u=Math.round(a+l*t))}bt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Sl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),bt.route("scale.ticks","color","","color"),bt.route("scale.grid","color","","borderColor"),bt.route("scale.grid","borderColor","","borderColor"),bt.route("scale.title","color","","color"),bt.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),bt.describe("scales",{_fallback:"scale"}),bt.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const K_=(e,i,t)=>"top"===i||"left"===i?e[i]+t:e[i]-t;function tm(e,i){const t=[],n=e.length/i,r=e.length;let a=0;for(;a<r;a+=n)t.push(e[Math.floor(a)]);return t}function CA(e,i,t){const n=e.ticks.length,r=Math.min(i,n-1),a=e._startPixel,s=e._endPixel,l=1e-6;let h,c=e.getPixelForTick(r);if(!(t&&(h=1===n?Math.max(c-a,s-c):0===i?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<i?h:-h,c<a-l||c>s+l)))return c}function Oa(e){return e.drawTicks?e.tickLength:0}function em(e,i){if(!e.display)return 0;const t=le(e.font,i),n=be(e.padding);return(zt(e.text)?e.text.length:1)*t.lineHeight+n.height}function wA(e,i,t){let n=du(e);return(t&&"right"!==i||!t&&"right"===i)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Cr extends An{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,t){return i}getUserBounds(){let{_userMin:i,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return i=dn(i,Number.POSITIVE_INFINITY),t=dn(t,Number.NEGATIVE_INFINITY),n=dn(n,Number.POSITIVE_INFINITY),r=dn(r,Number.NEGATIVE_INFINITY),{min:dn(i,n),max:dn(t,r),minDefined:oe(i),maxDefined:oe(t)}}getMinMax(i){let s,{min:t,max:n,minDefined:r,maxDefined:a}=this.getUserBounds();if(r&&a)return{min:t,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)s=l[c].controller.getMinMax(this,i),r||(t=Math.min(t,s.min)),a||(n=Math.max(n,s.max));return t=a&&t>n?n:t,n=r&&t>n?t:n,{min:dn(t,dn(n,t)),max:dn(n,dn(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ft(this.options.beforeUpdate,[this])}update(i,t,n){const{beginAtZero:r,grace:a,ticks:s}=this.options,l=s.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function r3(e,i,t){const{min:n,max:r}=e,a=kg(i,(r-n)/2),s=(l,c)=>t&&0===l?0:l+c;return{min:s(n,-Math.abs(a)),max:s(r,a)}}(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?tm(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=function pA(e,i){const t=e.options.ticks,n=t.maxTicksLimit||function gA(e){const i=e.options.offset,t=e._tickSize();return Math.floor(Math.min(e._length/t+(i?0:1),e._maxLength/t))}(e),r=t.major.enabled?function mA(e){const i=[];let t,n;for(t=0,n=e.length;t<n;t++)e[t].major&&i.push(t);return i}(i):[],a=r.length,s=r[0],l=r[a-1],c=[];if(a>n)return function vA(e,i,t,n){let s,r=0,a=t[0];for(n=Math.ceil(n),s=0;s<e.length;s++)s===a&&(i.push(e[s]),r++,a=t[r*n])}(i,c,r,a/n),c;const h=function _A(e,i,t){const n=function yA(e){const i=e.length;let t,n;if(i<2)return!1;for(n=e[0],t=1;t<i;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),r=i.length/t;if(!n)return Math.max(r,1);const a=function _S(e){const i=[],t=Math.sqrt(e);let n;for(n=1;n<t;n++)e%n==0&&(i.push(n),i.push(e/n));return t===(0|t)&&i.push(t),i.sort((r,a)=>r-a).pop(),i}(n);for(let s=0,l=a.length-1;s<l;s++){const c=a[s];if(c>r)return c}return Math.max(r,1)}(r,i,n);if(a>0){let u,d;const f=a>1?Math.round((l-s)/(a-1)):null;for(Al(i,c,h,yt(f)?0:s-f,s),u=0,d=a-1;u<d;u++)Al(i,c,h,r[u],r[u+1]);return Al(i,c,h,l,yt(f)?i.length:l+f),c}return Al(i,c,h),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,n,i=this.options.reverse;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,i=!i),this._startPixel=t,this._endPixel=n,this._reversePixels=i,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ft(this.options.afterUpdate,[this])}beforeSetDimensions(){Ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ft(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),Ft(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){const t=this.options.ticks;let n,r,a;for(n=0,r=i.length;n<r;n++)a=i[n],a.label=Ft(t.callback,[a.value,n,i],this)}afterTickToLabelConversion(){Ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const i=this.options,t=i.ticks,n=this.ticks.length,r=t.minRotation||0,a=t.maxRotation;let l,c,h,s=r;if(!this._isVisible()||!t.display||r>=a||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=me(this.chart.width-d,0,this.maxWidth);l=i.offset?this.maxWidth/n:p/(n-1),d+6>l&&(l=p/(n-(i.offset?.5:1)),c=this.maxHeight-Oa(i.grid)-t.padding-em(i.title,this.chart.options.font),h=Math.sqrt(d*d+f*f),s=cu(Math.min(Math.asin(me((u.highest.height+6)/l,-1,1)),Math.asin(me(c/h,-1,1))-Math.asin(me(f/h,-1,1)))),s=Math.max(r,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){Ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ft(this.options.beforeFit,[this])}fit(){const i={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:a}}=this,s=this._isVisible(),l=this.isHorizontal();if(s){const c=em(r,t.options.font);if(l?(i.width=this.maxWidth,i.height=Oa(a)+c):(i.height=this.maxHeight,i.width=Oa(a)+c),n.display&&this.ticks.length){const{first:h,last:u,widest:d,highest:f}=this._getLabelSizes(),p=2*n.padding,g=Sn(this.labelRotation),_=Math.cos(g),m=Math.sin(g);l?i.height=Math.min(this.maxHeight,i.height+(n.mirror?0:m*d.width+_*f.height)+p):i.width=Math.min(this.maxWidth,i.width+(n.mirror?0:_*d.width+m*f.height)+p),this._calculatePadding(h,u,m,_)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,t,n,r){const{ticks:{align:a,padding:s},position:l}=this.options,c=0!==this.labelRotation,h="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?h?(f=r*i.width,p=n*t.height):(f=n*i.height,p=r*t.width):"start"===a?p=t.width:"end"===a?f=i.width:"inner"!==a&&(f=i.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+s)*this.width/(this.width-d),0)}else{let u=t.height/2,d=i.height/2;"start"===a?(u=0,d=i.height):"end"===a&&(u=t.height,d=0),this.paddingTop=u+s,this.paddingBottom=d+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ft(this.options.afterFit,[this])}isHorizontal(){const{axis:i,position:t}=this.options;return"top"===t||"bottom"===t||"x"===i}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(i),t=0,n=i.length;t<n;t++)yt(i[t].label)&&(i.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=tm(n,t)),this._labelSizes=i=this._computeLabelSizes(n,n.length)}return i}_computeLabelSizes(i,t){const{ctx:n,_longestTextCache:r}=this,a=[],s=[];let h,u,d,f,p,g,_,m,v,y,C,l=0,c=0;for(h=0;h<t;++h){if(f=i[h].label,p=this._resolveTickFontOptions(h),n.font=g=p.string,_=r[g]=r[g]||{data:{},gc:[]},m=p.lineHeight,v=y=0,yt(f)||zt(f)){if(zt(f))for(u=0,d=f.length;u<d;++u)C=f[u],!yt(C)&&!zt(C)&&(v=bl(n,_.data,_.gc,v,C),y+=m)}else v=bl(n,_.data,_.gc,v,f),y=m;a.push(v),s.push(y),l=Math.max(v,l),c=Math.max(y,c)}!function bA(e,i){Dt(e,t=>{const n=t.gc,r=n.length/2;let a;if(r>i){for(a=0;a<r;++a)delete t.data[n[a]];n.splice(0,r)}})}(r,t);const x=a.indexOf(l),b=s.indexOf(c),T=M=>({width:a[M]||0,height:s[M]||0});return{first:T(0),last:T(t-1),widest:T(x),highest:T(b),widths:a,heights:s}}getLabelForValue(i){return i}getPixelForValue(i,t){return NaN}getValueForPixel(i){}getPixelForTick(i){const t=this.ticks;return i<0||i>t.length-1?null:this.getPixelForValue(t[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);const t=this._startPixel+i*this._length;return function yS(e){return me(e,-32768,32767)}(this._alignToPixels?gr(this.chart,t,0):t)}getDecimalForPixel(i){const t=(i-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:i,max:t}=this;return i<0&&t<0?t:i>0&&t>0?i:0}getContext(i){const t=this.ticks||[];if(i>=0&&i<t.length){const n=t[i];return n.$context||(n.$context=function MA(e,i,t){return Fi(e,{tick:t,index:i,type:"tick"})}(this.getContext(),i,n))}return this.$context||(this.$context=function TA(e,i){return Fi(e,{scale:i,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const i=this.options.ticks,t=Sn(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),s=i.autoSkipPadding||0,l=a?a.widest.width+s:0,c=a?a.highest.height+s:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const i=this.options.display;return"auto"!==i?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){const t=this.axis,n=this.chart,r=this.options,{grid:a,position:s}=r,l=a.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),d=Oa(a),f=[],p=a.setContext(this.getContext()),g=p.drawBorder?p.borderWidth:0,_=g/2,m=function(Z){return gr(n,Z,g)};let v,y,C,x,b,T,M,w,P,D,R,L;if("top"===s)v=m(this.bottom),T=this.bottom-d,w=v-_,D=m(i.top)+_,L=i.bottom;else if("bottom"===s)v=m(this.top),D=i.top,L=m(i.bottom)-_,T=v+_,w=this.top+d;else if("left"===s)v=m(this.right),b=this.right-d,M=v-_,P=m(i.left)+_,R=i.right;else if("right"===s)v=m(this.left),P=i.left,R=m(i.right)-_,b=v+_,M=this.left+d;else if("x"===t){if("center"===s)v=m((i.top+i.bottom)/2+.5);else if(Ct(s)){const Z=Object.keys(s)[0];v=m(this.chart.scales[Z].getPixelForValue(s[Z]))}D=i.top,L=i.bottom,T=v+_,w=T+d}else if("y"===t){if("center"===s)v=m((i.left+i.right)/2);else if(Ct(s)){const Z=Object.keys(s)[0];v=m(this.chart.scales[Z].getPixelForValue(s[Z]))}b=v-_,M=b-d,P=i.left,R=i.right}const G=ht(r.ticks.maxTicksLimit,u),W=Math.max(1,Math.ceil(u/G));for(y=0;y<u;y+=W){const Z=a.setContext(this.getContext(y)),F=Z.lineWidth,j=Z.color,ot=Z.borderDash||[],pt=Z.borderDashOffset,xt=Z.tickWidth,Rt=Z.tickColor,I=Z.tickBorderDash||[],Nt=Z.tickBorderDashOffset;C=CA(this,y,l),void 0!==C&&(x=gr(n,C,F),c?b=M=P=R=x:T=w=D=L=x,f.push({tx1:b,ty1:T,tx2:M,ty2:w,x1:P,y1:D,x2:R,y2:L,width:F,color:j,borderDash:ot,borderDashOffset:pt,tickWidth:xt,tickColor:Rt,tickBorderDash:I,tickBorderDashOffset:Nt}))}return this._ticksLength=u,this._borderValue=v,f}_computeLabelItems(i){const t=this.axis,n=this.options,{position:r,ticks:a}=n,s=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:u,mirror:d}=a,f=Oa(n.grid),p=f+u,g=d?-u:p,_=-Sn(this.labelRotation),m=[];let v,y,C,x,b,T,M,w,P,D,R,L,G="middle";if("top"===r)T=this.bottom-g,M=this._getXAxisLabelAlignment();else if("bottom"===r)T=this.top+g,M=this._getXAxisLabelAlignment();else if("left"===r){const Z=this._getYAxisLabelAlignment(f);M=Z.textAlign,b=Z.x}else if("right"===r){const Z=this._getYAxisLabelAlignment(f);M=Z.textAlign,b=Z.x}else if("x"===t){if("center"===r)T=(i.top+i.bottom)/2+p;else if(Ct(r)){const Z=Object.keys(r)[0];T=this.chart.scales[Z].getPixelForValue(r[Z])+p}M=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(i.left+i.right)/2-p;else if(Ct(r)){const Z=Object.keys(r)[0];b=this.chart.scales[Z].getPixelForValue(r[Z])}M=this._getYAxisLabelAlignment(f).textAlign}"y"===t&&("start"===c?G="top":"end"===c&&(G="bottom"));const W=this._getLabelSizes();for(v=0,y=l.length;v<y;++v){C=l[v],x=C.label;const Z=a.setContext(this.getContext(v));w=this.getPixelForTick(v)+a.labelOffset,P=this._resolveTickFontOptions(v),D=P.lineHeight,R=zt(x)?x.length:1;const F=R/2,j=Z.color,ot=Z.textStrokeColor,pt=Z.textStrokeWidth;let Rt,xt=M;if(s?(b=w,"inner"===M&&(xt=v===y-1?this.options.reverse?"left":"right":0===v?this.options.reverse?"right":"left":"center"),L="top"===r?"near"===h||0!==_?-R*D+D/2:"center"===h?-W.highest.height/2-F*D+D:D/2-W.highest.height:"near"===h||0!==_?D/2:"center"===h?W.highest.height/2-F*D:W.highest.height-R*D,d&&(L*=-1)):(T=w,L=(1-R)*D/2),Z.showLabelBackdrop){const I=be(Z.backdropPadding),Nt=W.heights[v],nt=W.widths[v];let Zt=T+L-I.top,Yt=b-I.left;switch(G){case"middle":Zt-=Nt/2;break;case"bottom":Zt-=Nt}switch(M){case"center":Yt-=nt/2;break;case"right":Yt-=nt}Rt={left:Yt,top:Zt,width:nt+I.width,height:Nt+I.height,color:Z.backdropColor}}m.push({rotation:_,label:x,font:P,color:j,strokeColor:ot,strokeWidth:pt,textOffset:L,textAlign:xt,textBaseline:G,translation:[b,T],backdrop:Rt})}return m}_getXAxisLabelAlignment(){const{position:i,ticks:t}=this.options;if(-Sn(this.labelRotation))return"top"===i?"left":"right";let r="center";return"start"===t.align?r="left":"end"===t.align?r="right":"inner"===t.align&&(r="inner"),r}_getYAxisLabelAlignment(i){const{position:t,ticks:{crossAlign:n,mirror:r,padding:a}}=this.options,l=i+a,c=this._getLabelSizes().widest.width;let h,u;return"left"===t?r?(u=this.right+a,"near"===n?h="left":"center"===n?(h="center",u+=c/2):(h="right",u+=c)):(u=this.right-l,"near"===n?h="right":"center"===n?(h="center",u-=c/2):(h="left",u=this.left)):"right"===t?r?(u=this.left+a,"near"===n?h="right":"center"===n?(h="center",u-=c/2):(h="left",u-=c)):(u=this.left+l,"near"===n?h="left":"center"===n?(h="center",u+=c/2):(h="right",u=this.right)):h="right",{textAlign:h,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const i=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:i.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:i.width}:void 0}drawBackground(){const{ctx:i,options:{backgroundColor:t},left:n,top:r,width:a,height:s}=this;t&&(i.save(),i.fillStyle=t,i.fillRect(n,r,a,s),i.restore())}getLineWidthForValue(i){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(a=>a.value===i);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(i){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i));let a,s;const l=(c,h,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(t.display)for(a=0,s=r.length;a<s;++a){const c=r[a];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:i,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(!a)return;const s=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,u,d;this.isHorizontal()?(c=gr(i,this.left,a)-a/2,h=gr(i,this.right,s)+s/2,u=d=l):(u=gr(i,this.top,a)-a/2,d=gr(i,this.bottom,s)+s/2,c=h=l),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(c,u),t.lineTo(h,d),t.stroke(),t.restore()}drawLabels(i){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&Tl(n,r);const a=this._labelItems||(this._labelItems=this._computeLabelItems(i));let s,l;for(s=0,l=a.length;s<l;++s){const c=a[s],h=c.font,u=c.label;c.backdrop&&(n.fillStyle=c.backdrop.color,n.fillRect(c.backdrop.left,c.backdrop.top,c.backdrop.width,c.backdrop.height)),_r(n,u,0,c.textOffset,h,c)}r&&Ml(n)}drawTitle(){const{ctx:i,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const a=le(n.font),s=be(n.padding),l=n.align;let c=a.lineHeight/2;"bottom"===t||"center"===t||Ct(t)?(c+=s.bottom,zt(n.text)&&(c+=a.lineHeight*(n.text.length-1))):c+=s.top;const{titleX:h,titleY:u,maxWidth:d,rotation:f}=function PA(e,i,t,n){const{top:r,left:a,bottom:s,right:l,chart:c}=e,{chartArea:h,scales:u}=c;let f,p,g,d=0;const _=s-r,m=l-a;if(e.isHorizontal()){if(p=Ee(n,a,l),Ct(t)){const v=Object.keys(t)[0];g=u[v].getPixelForValue(t[v])+_-i}else g="center"===t?(h.bottom+h.top)/2+_-i:K_(e,t,i);f=l-a}else{if(Ct(t)){const v=Object.keys(t)[0];p=u[v].getPixelForValue(t[v])-m+i}else p="center"===t?(h.left+h.right)/2-m+i:K_(e,t,i);g=Ee(n,s,r),d="left"===t?-ne:ne}return{titleX:p,titleY:g,maxWidth:f,rotation:d}}(this,c,t,l);_r(i,n.text,0,0,a,{color:n.color,maxWidth:d,rotation:f,textAlign:wA(l,t,r),textBaseline:"middle",translation:[h,u]})}draw(i){!this._isVisible()||(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){const i=this.options,t=i.ticks&&i.ticks.z||0,n=ht(i.grid&&i.grid.z,-1);return this._isVisible()&&this.draw===Cr.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]:[{z:t,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(i){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let a,s;for(a=0,s=t.length;a<s;++a){const l=t[a];l[n]===this.id&&(!i||l.type===i)&&r.push(l)}return r}_resolveTickFontOptions(i){return le(this.options.ticks.setContext(this.getContext(i)).font)}_maxDigits(){const i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}}class El{constructor(i,t,n){this.type=i,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(i){return Object.prototype.isPrototypeOf.call(this.type.prototype,i.prototype)}register(i){const t=Object.getPrototypeOf(i);let n;(function AA(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,a=i.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+i);return a in r||(r[a]=i,function OA(e,i,t){const n=zn(Object.create(null),[t?bt.get(t):{},bt.get(i),e.defaults]);bt.set(i,n),e.defaultRoutes&&function SA(e,i){Object.keys(i).forEach(t=>{const n=t.split("."),r=n.pop(),a=[e].concat(n).join("."),s=i[t].split("."),l=s.pop(),c=s.join(".");bt.route(a,r,c,l)})}(i,e.defaultRoutes),e.descriptors&&bt.describe(i,e.descriptors)}(i,s,n),this.override&&bt.override(i.id,i.overrides)),s}get(i){return this.items[i]}unregister(i){const t=this.items,n=i.id,r=this.scope;n in t&&delete t[n],r&&n in bt[r]&&(delete bt[r][n],this.override&&delete pr[n])}}var Bn=new class EA{constructor(){this.controllers=new El(Hn,"datasets",!0),this.elements=new El(An,"elements"),this.plugins=new El(Object,"plugins"),this.scales=new El(Cr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...i){this._each("register",i)}remove(...i){this._each("unregister",i)}addControllers(...i){this._each("register",i,this.controllers)}addElements(...i){this._each("register",i,this.elements)}addPlugins(...i){this._each("register",i,this.plugins)}addScales(...i){this._each("register",i,this.scales)}getController(i){return this._get(i,this.controllers,"controller")}getElement(i){return this._get(i,this.elements,"element")}getPlugin(i){return this._get(i,this.plugins,"plugin")}getScale(i){return this._get(i,this.scales,"scale")}removeControllers(...i){this._each("unregister",i,this.controllers)}removeElements(...i){this._each("unregister",i,this.elements)}removePlugins(...i){this._each("unregister",i,this.plugins)}removeScales(...i){this._each("unregister",i,this.scales)}_each(i,t,n){[...t].forEach(r=>{const a=n||this._getRegistryForType(r);n||a.isForType(r)||a===this.plugins&&r.id?this._exec(i,a,r):Dt(r,s=>{const l=n||this._getRegistryForType(s);this._exec(i,l,s)})})}_exec(i,t,n){const r=lu(i);Ft(n["before"+r],[],n),t[i](n),Ft(n["after"+r],[],n)}_getRegistryForType(i){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(i))return n}return this.plugins}_get(i,t,n){const r=t.get(i);if(void 0===r)throw new Error('"'+i+'" is not a registered '+n+".");return r}};let nm=(()=>{class e extends Hn{update(t){const n=this._cachedMeta,{data:r=[]}=n,a=this.chart._animationsDisabled;let{start:s,count:l}=Xg(n,r,a);if(this._drawStart=s,this._drawCount=l,$g(n)&&(s=0,l=r.length),this.options.showLine){const{dataset:c,_dataset:h}=n;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!h._decimated,c.points=r;const u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!a,options:u},t)}this.updateElements(r,s,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=Bn.getElement("line")),super.addElements()}updateElements(t,n,r,a){const s="reset"===a,{iScale:l,vScale:c,_stacked:h,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(n,a),f=this.getSharedOptions(d),p=this.includeOptions(a,f),g=l.axis,_=c.axis,{spanGaps:m,segment:v}=this.options,y=lo(m)?m:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||s||"none"===a;let x=n>0&&this.getParsed(n-1);for(let b=n;b<n+r;++b){const T=t[b],M=this.getParsed(b),w=C?T:{},P=yt(M[_]),D=w[g]=l.getPixelForValue(M[g],b),R=w[_]=s||P?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,M,h):M[_],b);w.skip=isNaN(D)||isNaN(R)||P,w.stop=b>0&&Math.abs(M[g]-x[g])>y,v&&(w.parsed=M,w.raw=u.data[b]),p&&(w.options=f||this.resolveDataElementOptions(b,T.active?"active":a)),C||this.updateElement(T,b,w,a),x=M}this.updateSharedOptions(f,a,d)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let c=0;for(let h=n.length-1;h>=0;--h)c=Math.max(c,n[h].size(this.resolveDataElementOptions(h))/2);return c>0&&c}const r=t.dataset,a=r.options&&r.options.borderWidth||0;if(!n.length)return a;const s=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,s,l)/2}}return e.id="scatter",e.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},e.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:i=>"("+i.label+", "+i.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},e})();function br(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var DA={_date:(()=>{class e{constructor(t){this.options=t||{}}init(t){}formats(){return br()}parse(t,n){return br()}format(t,n){return br()}add(t,n,r){return br()}diff(t,n,r){return br()}startOf(t,n,r){return br()}endOf(t,n){return br()}}return e.override=function(i){Object.assign(e.prototype,i)},e})()};function RA(e,i,t,n){const{controller:r,data:a,_sorted:s}=e,l=r._cachedMeta.iScale;if(l&&i===l.axis&&"r"!==i&&s&&a.length){const c=l._reversePixels?xS:ui;if(!n)return c(a,i,t);if(r._sharedOptions){const h=a[0],u="function"==typeof h.getRange&&h.getRange(i);if(u){const d=c(a,i,t-u),f=c(a,i,t+u);return{lo:d.lo,hi:f.hi}}}}return{lo:0,hi:a.length-1}}function Sa(e,i,t,n,r){const a=e.getSortedVisibleDatasetMetas(),s=t[i];for(let l=0,c=a.length;l<c;++l){const{index:h,data:u}=a[l],{lo:d,hi:f}=RA(a[l],i,s,r);for(let p=d;p<=f;++p){const g=u[p];g.skip||n(g,h,p)}}}function Du(e,i,t,n,r){const a=[];return!r&&!e.isPointInArea(i)||Sa(e,t,i,function(l,c,h){!r&&!Ta(l,e.chartArea,0)||l.inRange(i.x,i.y,n)&&a.push({element:l,datasetIndex:c,index:h})},!0),a}function Ru(e,i,t,n,r,a){return a||e.isPointInArea(i)?"r"!==t||n?function kA(e,i,t,n,r,a){let s=[];const l=function ZA(e){const i=-1!==e.indexOf("x"),t=-1!==e.indexOf("y");return function(n,r){const a=i?Math.abs(n.x-r.x):0,s=t?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}(t);let c=Number.POSITIVE_INFINITY;return Sa(e,t,i,function h(u,d,f){const p=u.inRange(i.x,i.y,r);if(n&&!p)return;const g=u.getCenterPoint(r);if(!a&&!e.isPointInArea(g)&&!p)return;const m=l(i,g);m<c?(s=[{element:u,datasetIndex:d,index:f}],c=m):m===c&&s.push({element:u,datasetIndex:d,index:f})}),s}(e,i,t,n,r,a):function LA(e,i,t,n){let r=[];return Sa(e,t,i,function a(s,l,c){const{startAngle:h,endAngle:u}=s.getProps(["startAngle","endAngle"],n),{angle:d}=Yg(s,{x:i.x,y:i.y});va(d,h,u)&&r.push({element:s,datasetIndex:l,index:c})}),r}(e,i,t,r):[]}function im(e,i,t,n,r){const a=[],s="x"===t?"inXRange":"inYRange";let l=!1;return Sa(e,t,i,(c,h,u)=>{c[s](i[t],r)&&(a.push({element:c,datasetIndex:h,index:u}),l=l||c.inRange(i.x,i.y,r))}),n&&!l?[]:a}var NA={evaluateInteractionItems:Sa,modes:{index(e,i,t,n){const r=yr(i,e),a=t.axis||"x",s=t.includeInvisible||!1,l=t.intersect?Du(e,r,a,n,s):Ru(e,r,a,!1,n,s),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const u=l[0].index,d=h.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:h.index,index:u})}),c):[]},dataset(e,i,t,n){const r=yr(i,e),a=t.axis||"xy",s=t.includeInvisible||!1;let l=t.intersect?Du(e,r,a,n,s):Ru(e,r,a,!1,n,s);if(l.length>0){const c=l[0].datasetIndex,h=e.getDatasetMeta(c).data;l=[];for(let u=0;u<h.length;++u)l.push({element:h[u],datasetIndex:c,index:u})}return l},point:(e,i,t,n)=>Du(e,yr(i,e),t.axis||"xy",n,t.includeInvisible||!1),nearest:(e,i,t,n)=>Ru(e,yr(i,e),t.axis||"xy",t.intersect,n,t.includeInvisible||!1),x:(e,i,t,n)=>im(e,yr(i,e),"x",t.intersect,n),y:(e,i,t,n)=>im(e,yr(i,e),"y",t.intersect,n)}};const rm=["left","top","right","bottom"];function Aa(e,i){return e.filter(t=>t.pos===i)}function om(e,i){return e.filter(t=>-1===rm.indexOf(t.pos)&&t.box.axis===i)}function Ea(e,i){return e.sort((t,n)=>{const r=i?n:t,a=i?t:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function am(e,i,t,n){return Math.max(e[t],i[t])+Math.max(e[n],i[n])}function sm(e,i){e.top=Math.max(e.top,i.top),e.left=Math.max(e.left,i.left),e.bottom=Math.max(e.bottom,i.bottom),e.right=Math.max(e.right,i.right)}function jA(e,i,t,n){const{pos:r,box:a}=t,s=e.maxPadding;if(!Ct(r)){t.size&&(e[r]-=t.size);const d=n[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?a.height:a.width),t.size=d.size/d.count,e[r]+=t.size}a.getPadding&&sm(s,a.getPadding());const l=Math.max(0,i.outerWidth-am(s,e,"left","right")),c=Math.max(0,i.outerHeight-am(s,e,"top","bottom")),h=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,t.horizontal?{same:h,other:u}:{same:u,other:h}}function YA(e,i){const t=i.maxPadding;return function n(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{a[s]=Math.max(i[s],t[s])}),a}(e?["left","right"]:["top","bottom"])}function Ia(e,i,t,n){const r=[];let a,s,l,c,h,u;for(a=0,s=e.length,h=0;a<s;++a){l=e[a],c=l.box,c.update(l.width||i.w,l.height||i.h,YA(l.horizontal,i));const{same:d,other:f}=jA(i,t,l,n);h|=d&&r.length,u=u||f,c.fullSize||r.push(l)}return h&&Ia(r,i,t,n)||u}function Il(e,i,t,n,r){e.top=t,e.left=i,e.right=i+n,e.bottom=t+r,e.width=n,e.height=r}function lm(e,i,t,n){const r=t.padding;let{x:a,y:s}=i;for(const l of e){const c=l.box,h=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/h.weight||1;if(l.horizontal){const d=i.w*u,f=h.size||c.height;fn(h.start)&&(s=h.start),c.fullSize?Il(c,r.left,s,t.outerWidth-r.right-r.left,f):Il(c,i.left+h.placed,s,d,f),h.start=s,h.placed+=d,s=c.bottom}else{const d=i.h*u,f=h.size||c.width;fn(h.start)&&(a=h.start),c.fullSize?Il(c,a,r.top,f,t.outerHeight-r.bottom-r.top):Il(c,a,i.top+h.placed,f,d),h.start=a,h.placed+=d,a=c.right}}i.x=a,i.y=s}bt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ie={addBox(e,i){e.boxes||(e.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(t){i.draw(t)}}]},e.boxes.push(i)},removeBox(e,i){const t=e.boxes?e.boxes.indexOf(i):-1;-1!==t&&e.boxes.splice(t,1)},configure(e,i,t){i.fullSize=t.fullSize,i.position=t.position,i.weight=t.weight},update(e,i,t,n){if(!e)return;const r=be(e.options.layout.padding),a=Math.max(i-r.width,0),s=Math.max(t-r.height,0),l=function GA(e){const i=function FA(e){const i=[];let t,n,r,a,s,l;for(t=0,n=(e||[]).length;t<n;++t)r=e[t],({position:a,options:{stack:s,stackWeight:l=1}}=r),i.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&a+s,stackWeight:l});return i}(e),t=Ea(i.filter(h=>h.box.fullSize),!0),n=Ea(Aa(i,"left"),!0),r=Ea(Aa(i,"right")),a=Ea(Aa(i,"top"),!0),s=Ea(Aa(i,"bottom")),l=om(i,"x"),c=om(i,"y");return{fullSize:t,leftAndTop:n.concat(a),rightAndBottom:r.concat(c).concat(s).concat(l),chartArea:Aa(i,"chartArea"),vertical:n.concat(r).concat(c),horizontal:a.concat(s).concat(l)}}(e.boxes),c=l.vertical,h=l.horizontal;Dt(e.boxes,_=>{"function"==typeof _.beforeLayout&&_.beforeLayout()});const u=c.reduce((_,m)=>m.box.options&&!1===m.box.options.display?_:_+1,0)||1,d=Object.freeze({outerWidth:i,outerHeight:t,padding:r,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/u,hBoxMaxHeight:s/2}),f=Object.assign({},r);sm(f,be(n));const p=Object.assign({maxPadding:f,w:a,h:s,x:r.left,y:r.top},r),g=function qA(e,i){const t=function UA(e){const i={};for(const t of e){const{stack:n,pos:r,stackWeight:a}=t;if(!n||!rm.includes(r))continue;const s=i[n]||(i[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return i}(e),{vBoxMaxWidth:n,hBoxMaxHeight:r}=i;let a,s,l;for(a=0,s=e.length;a<s;++a){l=e[a];const{fullSize:c}=l.box,h=t[l.stack],u=h&&l.stackWeight/h.weight;l.horizontal?(l.width=u?u*n:c&&i.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&i.availableHeight)}return t}(c.concat(h),d);Ia(l.fullSize,p,d,g),Ia(c,p,d,g),Ia(h,p,d,g)&&Ia(c,p,d,g),function zA(e){const i=e.maxPadding;function t(n){const r=Math.max(i[n]-e[n],0);return e[n]+=r,r}e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}(p),lm(l.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,lm(l.rightAndBottom,p,d,g),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Dt(l.chartArea,_=>{const m=_.box;Object.assign(m,e.chartArea),m.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class cm{acquireContext(i,t){}releaseContext(i){return!1}addEventListener(i,t,n){}removeEventListener(i,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(i,t,n,r){return t=Math.max(0,t||i.width),n=n||i.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(i){return!0}updateConfig(i){}}class HA extends cm{acquireContext(i){return i&&i.getContext&&i.getContext("2d")||null}updateConfig(i){i.options.animation=!1}}const Dl="$chartjs",BA={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hm=e=>null===e||""===e,um=!!O3&&{passive:!0};function JA(e,i,t){e.canvas.removeEventListener(i,t,um)}function Rl(e,i){for(const t of e)if(t===i||t.contains(i))return!0}function $A(e,i,t){const n=e.canvas,r=new MutationObserver(a=>{let s=!1;for(const l of a)s=s||Rl(l.addedNodes,n),s=s&&!Rl(l.removedNodes,n);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function QA(e,i,t){const n=e.canvas,r=new MutationObserver(a=>{let s=!1;for(const l of a)s=s||Rl(l.removedNodes,n),s=s&&!Rl(l.addedNodes,n);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const Da=new Map;let dm=0;function fm(){const e=window.devicePixelRatio;e!==dm&&(dm=e,Da.forEach((i,t)=>{t.currentDevicePixelRatio!==e&&i()}))}function eE(e,i,t){const n=e.canvas,r=n&&Pu(n);if(!r)return;const a=Jg((l,c)=>{const h=r.clientWidth;t(l,c),h<r.clientWidth&&t()},window),s=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,u=c.contentRect.height;0===h&&0===u||a(h,u)});return s.observe(r),function KA(e,i){Da.size||window.addEventListener("resize",fm),Da.set(e,i)}(e,a),s}function Zu(e,i,t){t&&t.disconnect(),"resize"===i&&function tE(e){Da.delete(e),Da.size||window.removeEventListener("resize",fm)}(e)}function nE(e,i,t){const n=e.canvas,r=Jg(a=>{null!==e.ctx&&t(function XA(e,i){const t=BA[e.type]||e.type,{x:n,y:r}=yr(e,i);return{type:t,chart:i,native:e,x:void 0!==n?n:null,y:void 0!==r?r:null}}(a,e))},e,a=>{const s=a[0];return[s,s.offsetX,s.offsetY]});return function WA(e,i,t){e.addEventListener(i,t,um)}(n,i,r),r}class iE extends cm{acquireContext(i,t){const n=i&&i.getContext&&i.getContext("2d");return n&&n.canvas===i?(function VA(e,i){const t=e.style,n=e.getAttribute("height"),r=e.getAttribute("width");if(e[Dl]={initial:{height:n,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",hm(r)){const a=T_(e,"width");void 0!==a&&(e.width=a)}if(hm(n))if(""===e.style.height)e.height=e.width/(i||2);else{const a=T_(e,"height");void 0!==a&&(e.height=a)}}(i,t),n):null}releaseContext(i){const t=i.canvas;if(!t[Dl])return!1;const n=t[Dl].initial;["height","width"].forEach(a=>{const s=n[a];yt(s)?t.removeAttribute(a):t.setAttribute(a,s)});const r=n.style||{};return Object.keys(r).forEach(a=>{t.style[a]=r[a]}),t.width=t.width,delete t[Dl],!0}addEventListener(i,t,n){this.removeEventListener(i,t),(i.$proxies||(i.$proxies={}))[t]=({attach:$A,detach:QA,resize:eE}[t]||nE)(i,t,n)}removeEventListener(i,t){const n=i.$proxies||(i.$proxies={}),r=n[t];r&&(({attach:Zu,detach:Zu,resize:Zu}[t]||JA)(i,t,r),n[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(i,t,n,r){return function P3(e,i,t,n){const r=Ol(e),a=vr(r,"margin"),s=Pl(r.maxWidth,e,"clientWidth")||_l,l=Pl(r.maxHeight,e,"clientHeight")||_l,c=function w3(e,i,t){let n,r;if(void 0===i||void 0===t){const a=Pu(e);if(a){const s=a.getBoundingClientRect(),l=Ol(a),c=vr(l,"border","width"),h=vr(l,"padding");i=s.width-h.width-c.width,t=s.height-h.height-c.height,n=Pl(l.maxWidth,a,"clientWidth"),r=Pl(l.maxHeight,a,"clientHeight")}else i=e.clientWidth,t=e.clientHeight}return{width:i,height:t,maxWidth:n||_l,maxHeight:r||_l}}(e,i,t);let{width:h,height:u}=c;if("content-box"===r.boxSizing){const d=vr(r,"border","width"),f=vr(r,"padding");h-=f.width+d.width,u-=f.height+d.height}return h=Math.max(0,h-a.width),u=Math.max(0,n?Math.floor(h/n):u-a.height),h=Ou(Math.min(h,s,c.maxWidth)),u=Ou(Math.min(u,l,c.maxHeight)),h&&!u&&(u=Ou(h/2)),{width:h,height:u}}(i,t,n,r)}isAttached(i){const t=Pu(i);return!(!t||!t.isConnected)}}class oE{constructor(){this._init=[]}notify(i,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(i,!0),this._notify(this._init,i,"install"));const a=r?this._descriptors(i).filter(r):this._descriptors(i),s=this._notify(a,i,t,n);return"afterDestroy"===t&&(this._notify(a,i,"stop"),this._notify(this._init,i,"uninstall")),s}_notify(i,t,n,r){r=r||{};for(const a of i){const s=a.plugin;if(!1===Ft(s[n],[t,r,a.options],s)&&r.cancelable)return!1}return!0}invalidate(){yt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(i){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(i);return this._notifyStateChanges(i),t}_createDescriptors(i,t){const n=i&&i.config,r=ht(n.options&&n.options.plugins,{}),a=function aE(e){const i={},t=[],n=Object.keys(Bn.plugins.items);for(let a=0;a<n.length;a++)t.push(Bn.getPlugin(n[a]));const r=e.plugins||[];for(let a=0;a<r.length;a++){const s=r[a];-1===t.indexOf(s)&&(t.push(s),i[s.id]=!0)}return{plugins:t,localIds:i}}(n);return!1!==r||t?function lE(e,{plugins:i,localIds:t},n,r){const a=[],s=e.getContext();for(const l of i){const c=l.id,h=sE(n[c],r);null!==h&&a.push({plugin:l,options:cE(e.config,{plugin:l,local:t[c]},h,s)})}return a}(i,a,r,t):[]}_notifyStateChanges(i){const t=this._oldCache||[],n=this._cache,r=(a,s)=>a.filter(l=>!s.some(c=>l.plugin.id===c.plugin.id));this._notify(r(t,n),i,"stop"),this._notify(r(n,t),i,"start")}}function sE(e,i){return i||!1!==e?!0===e?{}:e:null}function cE(e,{plugin:i,local:t},n,r){const a=e.pluginScopeKeys(i),s=e.getOptionScopes(n,a);return t&&i.defaults&&s.push(i.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lu(e,i){return((i.datasets||{})[e]||{}).indexAxis||i.indexAxis||(bt.datasets[e]||{}).indexAxis||"x"}function ku(e,i){return"x"===e||"y"===e?e:i.axis||function dE(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}(i.position)||e.charAt(0).toLowerCase()}function pm(e){const i=e.options||(e.options={});i.plugins=ht(i.plugins,{}),i.scales=function fE(e,i){const t=pr[e.type]||{scales:{}},n=i.scales||{},r=Lu(e.type,i),a=Object.create(null),s=Object.create(null);return Object.keys(n).forEach(l=>{const c=n[l];if(!Ct(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=ku(l,c),u=function uE(e,i){return e===i?"_index_":"_value_"}(h,r),d=t.scales||{};a[h]=a[h]||l,s[l]=ga(Object.create(null),[{axis:h},c,d[h],d[u]])}),e.data.datasets.forEach(l=>{const c=l.type||e.type,h=l.indexAxis||Lu(c,i),d=(pr[c]||{}).scales||{};Object.keys(d).forEach(f=>{const p=function hE(e,i){let t=e;return"_index_"===e?t=i:"_value_"===e&&(t="x"===i?"y":"x"),t}(f,h),g=l[p+"AxisID"]||a[p]||p;s[g]=s[g]||Object.create(null),ga(s[g],[{axis:p},n[g],d[f]])})}),Object.keys(s).forEach(l=>{const c=s[l];ga(c,[bt.scales[c.type],bt.scale])}),s}(e,i)}function gm(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const _m=new Map,mm=new Set;function Zl(e,i){let t=_m.get(e);return t||(t=i(),_m.set(e,t),mm.add(t)),t}const Ra=(e,i,t)=>{const n=Zi(i,t);void 0!==n&&e.add(n)};class gE{constructor(i){this._config=function pE(e){return(e=e||{}).data=gm(e.data),pm(e),e}(i),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(i){this._config.type=i}get data(){return this._config.data}set data(i){this._config.data=gm(i)}get options(){return this._config.options}set options(i){this._config.options=i}get plugins(){return this._config.plugins}update(){const i=this._config;this.clearCache(),pm(i)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(i){return Zl(i,()=>[[`datasets.${i}`,""]])}datasetAnimationScopeKeys(i,t){return Zl(`${i}.transition.${t}`,()=>[[`datasets.${i}.transitions.${t}`,`transitions.${t}`],[`datasets.${i}`,""]])}datasetElementScopeKeys(i,t){return Zl(`${i}-${t}`,()=>[[`datasets.${i}.elements.${t}`,`datasets.${i}`,`elements.${t}`,""]])}pluginScopeKeys(i){const t=i.id;return Zl(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...i.additionalOptionScopes||[]]])}_cachedScopes(i,t){const n=this._scopeCache;let r=n.get(i);return(!r||t)&&(r=new Map,n.set(i,r)),r}getOptionScopes(i,t,n){const{options:r,type:a}=this,s=this._cachedScopes(i,n),l=s.get(t);if(l)return l;const c=new Set;t.forEach(u=>{i&&(c.add(i),u.forEach(d=>Ra(c,i,d))),u.forEach(d=>Ra(c,r,d)),u.forEach(d=>Ra(c,pr[a]||{},d)),u.forEach(d=>Ra(c,bt,d)),u.forEach(d=>Ra(c,yu,d))});const h=Array.from(c);return 0===h.length&&h.push(Object.create(null)),mm.has(t)&&s.set(t,h),h}chartOptionScopes(){const{options:i,type:t}=this;return[i,pr[t]||{},bt.datasets[t]||{},{type:t},bt,yu]}resolveNamedOptions(i,t,n,r=[""]){const a={$shared:!0},{resolver:s,subPrefixes:l}=vm(this._resolverCache,i,r);let c=s;(function mE(e,i){const{isScriptable:t,isIndexable:n}=f_(e);for(const r of i){const a=t(r),s=n(r),l=(s||a)&&e[r];if(a&&(Li(l)||_E(l))||s&&zt(l))return!0}return!1})(s,t)&&(a.$shared=!1,c=ho(s,n=Li(n)?n():n,this.createResolver(i,n,l)));for(const h of t)a[h]=c[h];return a}createResolver(i,t,n=[""],r){const{resolver:a}=vm(this._resolverCache,i,n);return Ct(t)?ho(a,t,void 0,r):a}}function vm(e,i,t){let n=e.get(i);n||(n=new Map,e.set(i,n));const r=t.join();let a=n.get(r);return a||(a={resolver:Tu(i,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,a)),a}const _E=e=>Ct(e)&&Object.getOwnPropertyNames(e).reduce((i,t)=>i||Li(e[t]),!1),yE=["top","bottom","left","right","chartArea"];function ym(e,i){return"top"===e||"bottom"===e||-1===yE.indexOf(e)&&"x"===i}function xm(e,i){return function(t,n){return t[e]===n[e]?t[i]-n[i]:t[e]-n[e]}}function Cm(e){const i=e.chart,t=i.options.animation;i.notifyPlugins("afterRender"),Ft(t&&t.onComplete,[e],i)}function xE(e){const i=e.chart,t=i.options.animation;Ft(t&&t.onProgress,[e],i)}function bm(e){return C_()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ll={},Tm=e=>{const i=bm(e);return Object.values(Ll).filter(t=>t.canvas===i).pop()};function CE(e,i,t){const n=Object.keys(e);for(const r of n){const a=+r;if(a>=i){const s=e[r];delete e[r],(t>0||a>i)&&(e[a+t]=s)}}}class Za{constructor(i,t){const n=this.config=new gE(t),r=bm(i),a=Tm(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function rE(e){return!C_()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?HA:iE}(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,s.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;this.id=sS(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new oE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function TS(e,i){let t;return function(...n){return i?(clearTimeout(t),t=setTimeout(e,i,n)):e.apply(this,n),i}}(d=>this.update(d),s.resizeDelay||0),this._dataChanges=[],Ll[this.id]=this,l&&c?(fi.listen(this,"complete",Cm),fi.listen(this,"progress",xE),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:i,maintainAspectRatio:t},width:n,height:r,_aspectRatio:a}=this;return yt(i)?t&&a?a:r?n/r:null:i}get data(){return this.config.data}set data(i){this.config.data=i}get options(){return this._options}set options(i){this.config.options=i}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():b_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return h_(this.canvas,this.ctx),this}stop(){return fi.stop(this),this}resize(i,t){fi.running(this)?this._resizeBeforeDraw={width:i,height:t}:this._resize(i,t)}_resize(i,t){const n=this.options,s=this.platform.getMaximumSize(this.canvas,i,t,n.maintainAspectRatio&&this.aspectRatio),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,b_(this,l,!0)&&(this.notifyPlugins("resize",{size:s}),Ft(n.onResize,[this,s],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){Dt(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const i=this.options,t=i.scales,n=this.scales,r=Object.keys(n).reduce((s,l)=>(s[l]=!1,s),{});let a=[];t&&(a=a.concat(Object.keys(t).map(s=>{const l=t[s],c=ku(s,l),h="r"===c,u="x"===c;return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),Dt(a,s=>{const l=s.options,c=l.id,h=ku(c,l),u=ht(l.type,s.dtype);(void 0===l.position||ym(l.position,h)!==ym(s.dposition))&&(l.position=s.dposition),r[c]=!0;let d=null;c in n&&n[c].type===u?d=n[c]:(d=new(Bn.getScale(u))({id:c,type:u,ctx:this.ctx,chart:this}),n[d.id]=d),d.init(l,i)}),Dt(r,(s,l)=>{s||delete n[l]}),Dt(n,s=>{Ie.configure(this,s,s.options),Ie.addBox(this,s)})}_updateMetasets(){const i=this._metasets,t=this.data.datasets.length,n=i.length;if(i.sort((r,a)=>r.index-a.index),n>t){for(let r=t;r<n;++r)this._destroyDatasetMeta(r);i.splice(t,n-t)}this._sortedMetasets=i.slice(0).sort(xm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:i,data:{datasets:t}}=this;i.length>t.length&&delete this._stacks,i.forEach((n,r)=>{0===t.filter(a=>a===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const i=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const a=t[n];let s=this.getDatasetMeta(n);const l=a.type||this.config.type;if(s.type&&s.type!==l&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=l,s.indexAxis=a.indexAxis||Lu(l,this.options),s.order=a.order||0,s.index=n,s.label=""+a.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const c=Bn.getController(l),{datasetElementType:h,dataElementType:u}=bt.datasets[l];Object.assign(c.prototype,{dataElementType:Bn.getElement(u),datasetElementType:h&&Bn.getElement(h)}),s.controller=new c(this,n),i.push(s.controller)}}return this._updateMetasets(),i}_resetElements(){Dt(this.data.datasets,(i,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(i){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:i,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let h=0,u=this.data.datasets.length;h<u;h++){const{controller:d}=this.getDatasetMeta(h),f=!r&&-1===a.indexOf(d);d.buildOrUpdateElements(f),s=Math.max(+d.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||Dt(a,h=>{h.reset()}),this._updateDatasets(i),this.notifyPlugins("afterUpdate",{mode:i}),this._layers.sort(xm("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Dt(this.scales,i=>{Ie.removeBox(this,i)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const i=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(i.events);(!Ug(t,n)||!!this._responsiveListeners!==i.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:i}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:a}of t)CE(i,r,"_removeElements"===n?-a:a)}_getUniformDataChanges(){const i=this._dataChanges;if(!i||!i.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=a=>new Set(i.filter(s=>s[0]===a).map((s,l)=>l+","+s.splice(1).join(","))),r=n(0);for(let a=1;a<t;a++)if(!Ug(r,n(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(i){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ie.update(this,this.width,this.height,i);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Dt(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(i){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:i,cancelable:!0})){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Li(i)?i({datasetIndex:t}):i);this.notifyPlugins("afterDatasetsUpdate",{mode:i})}}_updateDataset(i,t){const n=this.getDatasetMeta(i),r={meta:n,index:i,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(fi.has(this)?this.attached&&!fi.running(this)&&fi.start(this):(this.draw(),Cm({chart:this})))}draw(){let i;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(i=0;i<t.length&&t[i].z<=0;++i)t[i].draw(this.chartArea);for(this._drawDatasets();i<t.length;++i)t[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(i){const t=this._sortedMetasets,n=[];let r,a;for(r=0,a=t.length;r<a;++r){const s=t[r];(!i||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const i=this.getSortedVisibleDatasetMetas();for(let t=i.length-1;t>=0;--t)this._drawDataset(i[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(i){const t=this.ctx,n=i._clip,r=!n.disabled,a=this.chartArea,s={meta:i,index:i.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&Tl(t,{left:!1===n.left?0:a.left-n.left,right:!1===n.right?this.width:a.right+n.right,top:!1===n.top?0:a.top-n.top,bottom:!1===n.bottom?this.height:a.bottom+n.bottom}),i.controller.draw(),r&&Ml(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(i){return Ta(i,this.chartArea,this._minPadding)}getElementsAtEventForMode(i,t,n,r){const a=NA.modes[t];return"function"==typeof a?a(this,i,n,r):[]}getDatasetMeta(i){const t=this.data.datasets[i],n=this._metasets;let r=n.filter(a=>a&&a._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:i,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Fi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(i){const t=this.data.datasets[i];if(!t)return!1;const n=this.getDatasetMeta(i);return"boolean"==typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(i,t){this.getDatasetMeta(i).hidden=!t}toggleDataVisibility(i){this._hiddenIndices[i]=!this._hiddenIndices[i]}getDataVisibility(i){return!this._hiddenIndices[i]}_updateVisibility(i,t,n){const r=n?"show":"hide",a=this.getDatasetMeta(i),s=a.controller._resolveAnimations(void 0,r);fn(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(i,n),s.update(a,{visible:n}),this.update(l=>l.datasetIndex===i?r:void 0))}hide(i,t){this._updateVisibility(i,t,!1)}show(i,t){this._updateVisibility(i,t,!0)}_destroyDatasetMeta(i){const t=this._metasets[i];t&&t.controller&&t.controller._destroy(),delete this._metasets[i]}_stop(){let i,t;for(this.stop(),fi.remove(this),i=0,t=this.data.datasets.length;i<t;++i)this._destroyDatasetMeta(i)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:i,ctx:t}=this;this._stop(),this.config.clearCache(),i&&(this.unbindEvents(),h_(i,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Ll[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...i){return this.canvas.toDataURL(...i)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const i=this._listeners,t=this.platform,n=(a,s)=>{t.addEventListener(this,a,s),i[a]=s},r=(a,s,l)=>{a.offsetX=s,a.offsetY=l,this._eventHandler(a)};Dt(this.options.events,a=>n(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const i=this._responsiveListeners,t=this.platform,n=(c,h)=>{t.addEventListener(this,c,h),i[c]=h},r=(c,h)=>{i[c]&&(t.removeEventListener(this,c,h),delete i[c])},a=(c,h)=>{this.canvas&&this.resize(c,h)};let s;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",a),n("detach",s)};s=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),n("attach",l)},t.isAttached(this.canvas)?l():s()}unbindEvents(){Dt(this._listeners,(i,t)=>{this.platform.removeEventListener(this,t,i)}),this._listeners={},Dt(this._responsiveListeners,(i,t)=>{this.platform.removeEventListener(this,t,i)}),this._responsiveListeners=void 0}updateHoverStyle(i,t,n){const r=n?"set":"remove";let a,s,l,c;for("dataset"===t&&(a=this.getDatasetMeta(i[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=i.length;l<c;++l){s=i[l];const h=s&&this.getDatasetMeta(s.datasetIndex).controller;h&&h[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(i){const t=this._active||[],n=i.map(({datasetIndex:a,index:s})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[s],index:s}});!pl(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(i,t,n){return this._plugins.notify(this,i,t,n)}_updateHoverStyles(i,t,n){const r=this.options.hover,a=(c,h)=>c.filter(u=>!h.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),s=a(t,i),l=n?i:a(i,t);s.length&&this.updateHoverStyle(s,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(i,t){const n={event:i,replay:t,cancelable:!0,inChartArea:this.isPointInArea(i)},r=s=>(s.options.events||this.options.events).includes(i.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const a=this._handleEvent(i,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(a||n.changed)&&this.render(),this}_handleEvent(i,t,n){const{_active:r=[],options:a}=this,l=this._getActiveElements(i,r,n,t),c=function fS(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(i),h=function bE(e,i,t,n){return t&&"mouseout"!==e.type?n?i:e:null}(i,this._lastEvent,n,c);n&&(this._lastEvent=null,Ft(a.onHover,[i,l,this],this),c&&Ft(a.onClick,[i,l,this],this));const u=!pl(l,r);return(u||t)&&(this._active=l,this._updateHoverStyles(l,r,t)),this._lastEvent=h,u}_getActiveElements(i,t,n,r){if("mouseout"===i.type)return[];if(!n)return t;const a=this.options.hover;return this.getElementsAtEventForMode(i,a.mode,a,r)}}const Mm=()=>Dt(Za.instances,e=>e._plugins.invalidate()),Ui=!0;function wm(e,i,t){const{startAngle:n,pixelMargin:r,x:a,y:s,outerRadius:l,innerRadius:c}=i;let h=r/l;e.beginPath(),e.arc(a,s,l,n-h,t+h),c>r?(h=r/c,e.arc(a,s,c,t+h,n-h,!0)):e.arc(a,s,r,t+ne,n-ne),e.closePath(),e.clip()}function po(e,i,t,n){return{x:t+e*Math.cos(i),y:n+e*Math.sin(i)}}function Nu(e,i,t,n,r,a){const{x:s,y:l,startAngle:c,pixelMargin:h,innerRadius:u}=i,d=Math.max(i.outerRadius+n+t-h,0),f=u>0?u+n+t+h:0;let p=0;const g=r-c;if(n){const j=((u>0?u-n:0)+(d>0?d-n:0))/2;p=(g-(0!==j?g*j/(j+n):g))/2}const m=(g-Math.max(.001,g*d-t/Wt)/d)/2,v=c+m+p,y=r-m-p,{outerStart:C,outerEnd:x,innerStart:b,innerEnd:T}=function ME(e,i,t,n){const r=function TE(e){return bu(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),a=(t-i)/2,s=Math.min(a,n*i/2),l=c=>{const h=(t-Math.min(a,c))*n/2;return me(c,0,Math.min(a,h))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:me(r.innerStart,0,s),innerEnd:me(r.innerEnd,0,s)}}(i,f,d,y-v),M=d-C,w=d-x,P=v+C/M,D=y-x/w,R=f+b,L=f+T,G=v+b/R,W=y-T/L;if(e.beginPath(),a){if(e.arc(s,l,d,P,D),x>0){const j=po(w,D,s,l);e.arc(j.x,j.y,x,D,y+ne)}const Z=po(L,y,s,l);if(e.lineTo(Z.x,Z.y),T>0){const j=po(L,W,s,l);e.arc(j.x,j.y,T,y+ne,W+Math.PI)}if(e.arc(s,l,f,y-T/f,v+b/f,!0),b>0){const j=po(R,G,s,l);e.arc(j.x,j.y,b,G+Math.PI,v-ne)}const F=po(M,v,s,l);if(e.lineTo(F.x,F.y),C>0){const j=po(M,P,s,l);e.arc(j.x,j.y,C,v-ne,P)}}else{e.moveTo(s,l);const Z=Math.cos(P)*d+s,F=Math.sin(P)*d+l;e.lineTo(Z,F);const j=Math.cos(D)*d+s,ot=Math.sin(D)*d+l;e.lineTo(j,ot)}e.closePath()}Object.defineProperties(Za,{defaults:{enumerable:Ui,value:bt},instances:{enumerable:Ui,value:Ll},overrides:{enumerable:Ui,value:pr},registry:{enumerable:Ui,value:Bn},version:{enumerable:Ui,value:"3.9.1"},getChart:{enumerable:Ui,value:Tm},register:{enumerable:Ui,value:(...e)=>{Bn.add(...e),Mm()}},unregister:{enumerable:Ui,value:(...e)=>{Bn.remove(...e),Mm()}}});class go extends An{constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,t,n){const r=this.getProps(["x","y"],n),{angle:a,distance:s}=Yg(r,{x:i,y:t}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=this.options.spacing/2,g=ht(d,c-l)>=Ut||va(a,l,c),_=hi(s,h+f,u+f);return g&&_}getCenterPoint(i){const{x:t,y:n,startAngle:r,endAngle:a,innerRadius:s,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],i),{offset:c,spacing:h}=this.options,u=(r+a)/2,d=(s+l+h+c)/2;return{x:t+Math.cos(u)*d,y:n+Math.sin(u)*d}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:t,circumference:n}=this,r=(t.offset||0)/2,a=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Ut?Math.floor(n/Ut):0,0===n||this.innerRadius<0||this.outerRadius<0)return;i.save();let l=0;if(r){l=r/2;const h=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(h)*l,Math.sin(h)*l),this.circumference>=Wt&&(l=r)}i.fillStyle=t.backgroundColor,i.strokeStyle=t.borderColor;const c=function wE(e,i,t,n,r){const{fullCircles:a,startAngle:s,circumference:l}=i;let c=i.endAngle;if(a){Nu(e,i,t,n,s+Ut,r);for(let h=0;h<a;++h)e.fill();isNaN(l)||(c=s+l%Ut,l%Ut==0&&(c+=Ut))}return Nu(e,i,t,n,c,r),e.fill(),c}(i,this,l,a,s);(function OE(e,i,t,n,r,a){const{options:s}=i,{borderWidth:l,borderJoinStyle:c}=s,h="inner"===s.borderAlign;!l||(h?(e.lineWidth=2*l,e.lineJoin=c||"round"):(e.lineWidth=l,e.lineJoin=c||"bevel"),i.fullCircles&&function PE(e,i,t){const{x:n,y:r,startAngle:a,pixelMargin:s,fullCircles:l}=i,c=Math.max(i.outerRadius-s,0),h=i.innerRadius+s;let u;for(t&&wm(e,i,a+Ut),e.beginPath(),e.arc(n,r,h,a+Ut,a,!0),u=0;u<l;++u)e.stroke();for(e.beginPath(),e.arc(n,r,c,a,a+Ut),u=0;u<l;++u)e.stroke()}(e,i,h),h&&wm(e,i,r),Nu(e,i,t,n,r,a),e.stroke())})(i,this,l,a,c,s),i.restore()}}function Pm(e,i,t=i){e.lineCap=ht(t.borderCapStyle,i.borderCapStyle),e.setLineDash(ht(t.borderDash,i.borderDash)),e.lineDashOffset=ht(t.borderDashOffset,i.borderDashOffset),e.lineJoin=ht(t.borderJoinStyle,i.borderJoinStyle),e.lineWidth=ht(t.borderWidth,i.borderWidth),e.strokeStyle=ht(t.borderColor,i.borderColor)}function SE(e,i,t){e.lineTo(t.x,t.y)}function Om(e,i,t={}){const n=e.length,{start:r=0,end:a=n-1}=t,{start:s,end:l}=i,c=Math.max(r,s),h=Math.min(a,l);return{count:n,start:c,loop:i.loop,ilen:h<c&&!(r<s&&a<s||r>l&&a>l)?n+h-c:h-c}}function EE(e,i,t,n){const{points:r,options:a}=i,{count:s,start:l,loop:c,ilen:h}=Om(r,t,n),u=function AE(e){return e.stepped?XS:e.tension||"monotone"===e.cubicInterpolationMode?$S:SE}(a);let p,g,_,{move:d=!0,reverse:f}=n||{};for(p=0;p<=h;++p)g=r[(l+(f?h-p:p))%s],!g.skip&&(d?(e.moveTo(g.x,g.y),d=!1):u(e,_,g,f,a.stepped),_=g);return c&&(g=r[(l+(f?h:0))%s],u(e,_,g,f,a.stepped)),!!c}function IE(e,i,t,n){const r=i.points,{count:a,start:s,ilen:l}=Om(r,t,n),{move:c=!0,reverse:h}=n||{};let f,p,g,_,m,v,u=0,d=0;const y=x=>(s+(h?l-x:x))%a,C=()=>{_!==m&&(e.lineTo(u,m),e.lineTo(u,_),e.lineTo(u,v))};for(c&&(p=r[y(0)],e.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=r[y(f)],p.skip)continue;const x=p.x,b=p.y,T=0|x;T===g?(b<_?_=b:b>m&&(m=b),u=(d*u+x)/++d):(C(),e.lineTo(x,b),g=T,d=0,_=m=b),v=b}C()}function Fu(e){const i=e.options;return e._decimated||e._loop||i.tension||"monotone"===i.cubicInterpolationMode||i.stepped||i.borderDash&&i.borderDash.length?EE:IE}go.id="arc",go.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},go.defaultRoutes={backgroundColor:"backgroundColor"};const LE="function"==typeof Path2D;let La=(()=>{class e extends An{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(x3(this._points,r,t,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function k3(e,i){const t=e.points,n=e.options.spanGaps,r=t.length;if(!r)return[];const a=!!e._loop,{start:s,end:l}=function Z3(e,i,t,n){let r=0,a=i-1;if(t&&!n)for(;r<i&&!e[r].skip;)r++;for(;r<i&&e[r].skip;)r++;for(r%=i,t&&(a+=r);a>r&&e[a%i].skip;)a--;return a%=i,{start:r,end:a}}(t,r,a,n);return function I_(e,i,t,n){return n&&n.setContext&&t?function N3(e,i,t,n){const r=e._chart.getContext(),a=D_(e.options),{_datasetIndex:s,options:{spanGaps:l}}=e,c=t.length,h=[];let u=a,d=i[0].start,f=d;function p(g,_,m,v){const y=l?-1:1;if(g!==_){for(g+=c;t[g%c].skip;)g-=y;for(;t[_%c].skip;)_+=y;g%c!=_%c&&(h.push({start:g%c,end:_%c,loop:m,style:v}),u=v,d=_%c)}}for(const g of i){d=l?d:g.start;let m,_=t[d%c];for(f=d+1;f<=g.end;f++){const v=t[f%c];m=D_(n.setContext(Fi(r,{type:"segment",p0:_,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),F3(m,u)&&p(d,f-1,g.loop,u),_=v,u=m}d<f-1&&p(d,f-1,g.loop,u)}return h}(e,i,t,n):i}(e,!0===n?[{start:s,end:l,loop:a}]:function L3(e,i,t,n){const r=e.length,a=[];let c,s=i,l=e[i];for(c=i+1;c<=t;++c){const h=e[c%r];h.skip||h.stop?l.skip||(a.push({start:i%r,end:(c-1)%r,loop:n=!1}),i=s=h.stop?c:null):(s=c,l.skip&&(i=c)),l=h}return null!==s&&a.push({start:i%r,end:s%r,loop:n}),a}(t,s,l<s?l+r:l,!!e._fullLoop&&0===s&&l===r-1),t,i)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,r=t.length;return r&&this.points[t[r-1].end]}interpolate(t,n){const r=this.options,a=t[n],s=this.points,l=E_(this,{property:n,start:a,end:a});if(!l.length)return;const c=[],h=function DE(e){return e.stepped?S3:e.tension||"monotone"===e.cubicInterpolationMode?A3:xr}(r);let u,d;for(u=0,d=l.length;u<d;++u){const{start:f,end:p}=l[u],g=s[f],_=s[p];if(g===_){c.push(g);continue}const v=h(g,_,Math.abs((a-g[n])/(_[n]-g[n])),r.stepped);v[n]=t[n],c.push(v)}return 1===c.length?c[0]:c}pathSegment(t,n,r){return Fu(this)(t,this,n,r)}path(t,n,r){const a=this.segments,s=Fu(this);let l=this._loop;n=n||0,r=r||this.points.length-n;for(const c of a)l&=s(t,this,c,{start:n,end:n+r-1});return!!l}draw(t,n,r,a){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function kE(e,i,t,n){LE&&!i.options.segment?function RE(e,i,t,n){let r=i._path;r||(r=i._path=new Path2D,i.path(r,t,n)&&r.closePath()),Pm(e,i.options),e.stroke(r)}(e,i,t,n):function ZE(e,i,t,n){const{segments:r,options:a}=i,s=Fu(i);for(const l of r)Pm(e,a,l.style),e.beginPath(),s(e,i,l,{start:t,end:t+n-1})&&e.closePath(),e.stroke()}(e,i,t,n)}(t,this,r,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return e.id="line",e.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},e.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},e.descriptors={_scriptable:!0,_indexable:i=>"borderDash"!==i&&"fill"!==i},e})();function Sm(e,i,t,n){const r=e.options,{[t]:a}=e.getProps([t],n);return Math.abs(i-a)<r.radius+r.hitRadius}let Uu=(()=>{class e extends An{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){const a=this.options,{x:s,y:l}=this.getProps(["x","y"],r);return Math.pow(t-s,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,n){return Sm(this,t,"x",n)}inYRange(t,n){return Sm(this,t,"y",n)}getCenterPoint(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){let n=(t=t||this.options||{}).radius||0;return n=Math.max(n,n&&t.hoverRadius||0),2*(n+(n&&t.borderWidth||0))}draw(t,n){const r=this.options;this.skip||r.radius<.1||!Ta(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,Cu(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}return e.id="point",e.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},e.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},e})();function Am(e,i){const{x:t,y:n,base:r,width:a,height:s}=e.getProps(["x","y","base","width","height"],i);let l,c,h,u,d;return e.horizontal?(d=s/2,l=Math.min(t,r),c=Math.max(t,r),h=n-d,u=n+d):(d=a/2,l=t-d,c=t+d,h=Math.min(n,r),u=Math.max(n,r)),{left:l,top:h,right:c,bottom:u}}function qi(e,i,t,n){return e?0:me(i,t,n)}function qu(e,i,t,n){const r=null===i,a=null===t,l=e&&!(r&&a)&&Am(e,n);return l&&(r||hi(i,l.left,l.right))&&(a||hi(t,l.top,l.bottom))}function GE(e,i){e.rect(i.x,i.y,i.w,i.h)}function Gu(e,i,t={}){const n=e.x!==t.x?-i:0,r=e.y!==t.y?-i:0;return{x:e.x+n,y:e.y+r,w:e.w+((e.x+e.w!==t.x+t.w?i:0)-n),h:e.h+((e.y+e.h!==t.y+t.h?i:0)-r),radius:e.radius}}class _o extends An{constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:a,outer:s}=function UE(e){const i=Am(e),t=i.right-i.left,n=i.bottom-i.top,r=function NE(e,i,t){const r=e.borderSkipped,a=d_(e.options.borderWidth);return{t:qi(r.top,a.top,0,t),r:qi(r.right,a.right,0,i),b:qi(r.bottom,a.bottom,0,t),l:qi(r.left,a.left,0,i)}}(e,t/2,n/2),a=function FE(e,i,t){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,a=mr(r),s=Math.min(i,t),l=e.borderSkipped,c=n||Ct(r);return{topLeft:qi(!c||l.top||l.left,a.topLeft,0,s),topRight:qi(!c||l.top||l.right,a.topRight,0,s),bottomLeft:qi(!c||l.bottom||l.left,a.bottomLeft,0,s),bottomRight:qi(!c||l.bottom||l.right,a.bottomRight,0,s)}}(e,t/2,n/2);return{outer:{x:i.left,y:i.top,w:t,h:n,radius:a},inner:{x:i.left+r.l,y:i.top+r.t,w:t-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}(this),l=function qE(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}(s.radius)?Ma:GE;i.save(),(s.w!==a.w||s.h!==a.h)&&(i.beginPath(),l(i,Gu(s,t,a)),i.clip(),l(i,Gu(a,-t,s)),i.fillStyle=n,i.fill("evenodd")),i.beginPath(),l(i,Gu(a,t)),i.fillStyle=r,i.fill(),i.restore()}inRange(i,t,n){return qu(this,i,t,n)}inXRange(i,t){return qu(this,i,null,t)}inYRange(i,t){return qu(this,null,i,t)}getCenterPoint(i){const{x:t,y:n,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],i);return{x:a?(t+r)/2:t,y:a?n:(n+r)/2}}getRange(i){return"x"===i?this.width/2:this.height/2}}function ju(e,i,t,n){if(n)return;let r=i[e],a=t[e];return"angle"===e&&(r=rn(r),a=rn(a)),{property:e,start:r,end:a}}function zu(e,i,t){for(;i>e;i--){const n=t[i];if(!isNaN(n.x)&&!isNaN(n.y))break}return i}function Dm(e,i,t,n){return e&&i?n(e[t],i[t]):e?e[t]:i?i[t]:0}function Rm(e,i){let t=[],n=!1;return zt(e)?(n=!0,t=e):t=function WE(e,i){const{x:t=null,y:n=null}=e||{},r=i.points,a=[];return i.segments.forEach(({start:s,end:l})=>{l=zu(s,l,r);const c=r[s],h=r[l];null!==n?(a.push({x:c.x,y:n}),a.push({x:h.x,y:n})):null!==t&&(a.push({x:t,y:c.y}),a.push({x:t,y:h.y}))}),a}(e,i),t.length?new La({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function Zm(e){return e&&!1!==e.fill}function JE(e,i,t){let r=e[i].fill;const a=[i];let s;if(!t)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!oe(r))return r;if(s=e[r],!s)return!1;if(s.visible)return r;a.push(r),r=s.fill}return!1}function XE(e,i,t){const n=function tI(e){const i=e.options,t=i.fill;let n=ht(t&&t.target,t);return void 0===n&&(n=!!i.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(e);if(Ct(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return oe(r)&&Math.floor(r)===r?function $E(e,i,t,n){return("-"===e||"+"===e)&&(t=i+t),!(t===i||t<0||t>=n)&&t}(n[0],i,r,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function iI(e,i,t){const n=[];for(let r=0;r<t.length;r++){const a=t[r],{first:s,last:l,point:c}=rI(a,i,"x");if(!(!c||s&&l))if(s)n.unshift(c);else if(e.push(c),!l)break}e.push(...n)}function rI(e,i,t){const n=e.interpolate(i,t);if(!n)return{};const r=n[t],a=e.segments,s=e.points;let l=!1,c=!1;for(let h=0;h<a.length;h++){const u=a[h],d=s[u.start][t],f=s[u.end][t];if(hi(r,d,f)){l=r===d,c=r===f;break}}return{first:l,last:c,point:n}}_o.id="bar",_o.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},_o.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Lm{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,t,n){const{x:r,y:a,radius:s}=this;return i.arc(r,a,s,(t=t||{start:0,end:Ut}).end,t.start,!0),!n.bounds}interpolate(i){const{x:t,y:n,radius:r}=this,a=i.angle;return{x:t+Math.cos(a)*r,y:n+Math.sin(a)*r,angle:a}}}function Yu(e,i,t){const n=function oI(e){const{chart:i,fill:t,line:n}=e;if(oe(t))return function aI(e,i){const t=e.getDatasetMeta(i);return t&&e.isDatasetVisible(i)?t.dataset:null}(i,t);if("stack"===t)return function eI(e){const{scale:i,index:t,line:n}=e,r=[],a=n.segments,s=n.points,l=function nI(e,i){const t=[],n=e.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const a=n[r];if(a.index===i)break;a.hidden||t.unshift(a.dataset)}return t}(i,t);l.push(Rm({x:null,y:i.bottom},n));for(let c=0;c<a.length;c++){const h=a[c];for(let u=h.start;u<=h.end;u++)iI(r,s[u],l)}return new La({points:r,options:{}})}(e);if("shape"===t)return!0;const r=function sI(e){return(e.scale||{}).getPointPositionForValue?function cI(e){const{scale:i,fill:t}=e,n=i.options,r=i.getLabels().length,a=n.reverse?i.max:i.min,s=function KE(e,i,t){let n;return n="start"===e?t:"end"===e?i.options.reverse?i.min:i.max:Ct(e)?e.value:i.getBaseValue(),n}(t,i,a),l=[];if(n.grid.circular){const c=i.getPointPositionForValue(0,a);return new Lm({x:c.x,y:c.y,radius:i.getDistanceFromCenterForValue(s)})}for(let c=0;c<r;++c)l.push(i.getPointPositionForValue(c,s));return l}(e):function lI(e){const{scale:i={},fill:t}=e,n=function QE(e,i){let t=null;return"start"===e?t=i.bottom:"end"===e?t=i.top:Ct(e)?t=i.getPixelForValue(e.value):i.getBasePixel&&(t=i.getBasePixel()),t}(t,i);if(oe(n)){const r=i.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(e)}(e);return r instanceof Lm?r:Rm(r,n)}(i),{line:r,scale:a,axis:s}=i,l=r.options,c=l.fill,h=l.backgroundColor,{above:u=h,below:d=h}=c||{};n&&r.points.length&&(Tl(e,t),function hI(e,i){const{line:t,target:n,above:r,below:a,area:s,scale:l}=i,c=t._loop?"angle":i.axis;e.save(),"x"===c&&a!==r&&(km(e,n,s.top),Nm(e,{line:t,target:n,color:r,scale:l,property:c}),e.restore(),e.save(),km(e,n,s.bottom)),Nm(e,{line:t,target:n,color:a,scale:l,property:c}),e.restore()}(e,{line:r,target:n,above:u,below:d,area:t,scale:a,axis:s}),Ml(e))}function km(e,i,t){const{segments:n,points:r}=i;let a=!0,s=!1;e.beginPath();for(const l of n){const{start:c,end:h}=l,u=r[c],d=r[zu(c,h,r)];a?(e.moveTo(u.x,u.y),a=!1):(e.lineTo(u.x,t),e.lineTo(u.x,u.y)),s=!!i.pathSegment(e,l,{move:s}),s?e.closePath():e.lineTo(d.x,t)}e.lineTo(i.first().x,t),e.closePath(),e.clip()}function Nm(e,i){const{line:t,target:n,property:r,color:a,scale:s}=i,l=function VE(e,i,t){const n=e.segments,r=e.points,a=i.points,s=[];for(const l of n){let{start:c,end:h}=l;h=zu(c,h,r);const u=ju(t,r[c],r[h],l.loop);if(!i.segments){s.push({source:l,target:u,start:r[c],end:r[h]});continue}const d=E_(i,u);for(const f of d){const p=ju(t,a[f.start],a[f.end],f.loop),g=A_(l,r,p);for(const _ of g)s.push({source:_,target:f,start:{[t]:Dm(u,p,"start",Math.max)},end:{[t]:Dm(u,p,"end",Math.min)}})}}return s}(t,n,r);for(const{source:c,target:h,start:u,end:d}of l){const{style:{backgroundColor:f=a}={}}=c,p=!0!==n;e.save(),e.fillStyle=f,uI(e,s,p&&ju(r,u,d)),e.beginPath();const g=!!t.pathSegment(e,c);let _;if(p){g?e.closePath():Fm(e,n,d,r);const m=!!n.pathSegment(e,h,{move:g,reverse:!0});_=g&&m,_||Fm(e,n,u,r)}e.closePath(),e.fill(_?"evenodd":"nonzero"),e.restore()}}function uI(e,i,t){const{top:n,bottom:r}=i.chart.chartArea,{property:a,start:s,end:l}=t||{};"x"===a&&(e.beginPath(),e.rect(s,n,l-s,r-n),e.clip())}function Fm(e,i,t,n){const r=i.interpolate(t,n);r&&e.lineTo(r.x,r.y)}var Um={id:"filler",afterDatasetsUpdate(e,i,t){const n=(e.data.datasets||[]).length,r=[];let a,s,l,c;for(s=0;s<n;++s)a=e.getDatasetMeta(s),l=a.dataset,c=null,l&&l.options&&l instanceof La&&(c={visible:e.isDatasetVisible(s),index:s,fill:XE(l,s,n),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:l}),a.$filler=c,r.push(c);for(s=0;s<n;++s)c=r[s],c&&!1!==c.fill&&(c.fill=JE(r,s,t.propagate))},beforeDraw(e,i,t){const n="beforeDraw"===t.drawTime,r=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let s=r.length-1;s>=0;--s){const l=r[s].$filler;!l||(l.line.updateControlPoints(a,l.axis),n&&l.fill&&Yu(e.ctx,l,a))}},beforeDatasetsDraw(e,i,t){if("beforeDatasetsDraw"!==t.drawTime)return;const n=e.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const a=n[r].$filler;Zm(a)&&Yu(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,i,t){const n=i.meta.$filler;!Zm(n)||"beforeDatasetDraw"!==t.drawTime||Yu(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const qm=(e,i)=>{let{boxHeight:t=i,boxWidth:n=i}=e;return e.usePointStyle&&(t=Math.min(t,i),n=e.pointStyleWidth||Math.min(n,i)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(i,t)}};class Gm extends An{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,t,n){this.maxWidth=i,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const i=this.options.labels||{};let t=Ft(i.generateLabels,[this.chart],this)||[];i.filter&&(t=t.filter(n=>i.filter(n,this.chart.data))),i.sort&&(t=t.sort((n,r)=>i.sort(n,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:i,ctx:t}=this;if(!i.display)return void(this.width=this.height=0);const n=i.labels,r=le(n.font),a=r.size,s=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=qm(n,a);let h,u;t.font=r.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(s,a,l,c)+10):(u=this.maxHeight,h=this._fitCols(s,a,l,c)+10),this.width=Math.min(h,i.maxWidth||this.maxWidth),this.height=Math.min(u,i.maxHeight||this.maxHeight)}_fitRows(i,t,n,r){const{ctx:a,maxWidth:s,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],u=r+l;let d=i;a.textAlign="left",a.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,_)=>{const m=n+t/2+a.measureText(g.text).width;(0===_||h[h.length-1]+m+2*l>s)&&(d+=u,h[h.length-(_>0?0:1)]=0,p+=u,f++),c[_]={left:0,top:p,row:f,width:m,height:r},h[h.length-1]+=m+l}),d}_fitCols(i,t,n,r){const{ctx:a,maxHeight:s,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],u=s-i;let d=l,f=0,p=0,g=0,_=0;return this.legendItems.forEach((m,v)=>{const y=n+t/2+a.measureText(m.text).width;v>0&&p+r+2*l>u&&(d+=f+l,h.push({width:f,height:p}),g+=f+l,_++,f=p=0),c[v]={left:g,top:p,col:_,width:y,height:r},f=Math.max(f,y),p+=r+l}),d+=f,h.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const i=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:a}}=this,s=fo(a,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ee(n,this.left+r,this.right-this.lineWidths[l]);for(const h of t)l!==h.row&&(l=h.row,c=Ee(n,this.left+r,this.right-this.lineWidths[l])),h.top+=this.top+i+r,h.left=s.leftForLtr(s.x(c),h.width),c+=h.width+r}else{let l=0,c=Ee(n,this.top+i+r,this.bottom-this.columnSizes[l].height);for(const h of t)h.col!==l&&(l=h.col,c=Ee(n,this.top+i+r,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+r,h.left=s.leftForLtr(s.x(h.left),h.width),c+=h.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const i=this.ctx;Tl(i,this),this._draw(),Ml(i)}}_draw(){const{options:i,columnSizes:t,lineWidths:n,ctx:r}=this,{align:a,labels:s}=i,l=bt.color,c=fo(i.rtl,this.left,this.width),h=le(s.font),{color:u,padding:d}=s,f=h.size,p=f/2;let g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:_,boxHeight:m,itemHeight:v}=qm(s,f),x=this.isHorizontal(),b=this._computeTitleHeight();g=x?{x:Ee(a,this.left+d,this.right-n[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:Ee(a,this.top+b+d,this.bottom-t[0].height),line:0},w_(this.ctx,i.textDirection);const T=v+d;this.legendItems.forEach((M,w)=>{r.strokeStyle=M.fontColor||u,r.fillStyle=M.fontColor||u;const P=r.measureText(M.text).width,D=c.textAlign(M.textAlign||(M.textAlign=s.textAlign)),R=_+p+P;let L=g.x,G=g.y;c.setWidth(this.width),x?w>0&&L+R+d>this.right&&(G=g.y+=T,g.line++,L=g.x=Ee(a,this.left+d,this.right-n[g.line])):w>0&&G+T>this.bottom&&(L=g.x=L+t[g.line].width+d,g.line++,G=g.y=Ee(a,this.top+b+d,this.bottom-t[g.line].height)),function(M,w,P){if(isNaN(_)||_<=0||isNaN(m)||m<0)return;r.save();const D=ht(P.lineWidth,1);if(r.fillStyle=ht(P.fillStyle,l),r.lineCap=ht(P.lineCap,"butt"),r.lineDashOffset=ht(P.lineDashOffset,0),r.lineJoin=ht(P.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=ht(P.strokeStyle,l),r.setLineDash(ht(P.lineDash,[])),s.usePointStyle){const R={radius:m*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:D},L=c.xPlus(M,_/2);u_(r,R,L,w+p,s.pointStyleWidth&&_)}else{const R=w+Math.max((f-m)/2,0),L=c.leftForLtr(M,_),G=mr(P.borderRadius);r.beginPath(),Object.values(G).some(W=>0!==W)?Ma(r,{x:L,y:R,w:_,h:m,radius:G}):r.rect(L,R,_,m),r.fill(),0!==D&&r.stroke()}r.restore()}(c.x(L),G,M),L=((e,i,t,n)=>e===(n?"left":"right")?t:"center"===e?(i+t)/2:i)(D,L+_+p,x?L+R:this.right,i.rtl),function(M,w,P){_r(r,P.text,M,w+v/2,h,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})}(c.x(L),G,M),x?g.x+=R+d:g.y+=T}),P_(this.ctx,i.textDirection)}drawTitle(){const i=this.options,t=i.title,n=le(t.font),r=be(t.padding);if(!t.display)return;const a=fo(i.rtl,this.left,this.width),s=this.ctx,l=t.position,h=r.top+n.size/2;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+h,d=Ee(i.align,d,this.right-f);else{const g=this.columnSizes.reduce((_,m)=>Math.max(_,m.height),0);u=h+Ee(i.align,this.top,this.bottom-g-i.labels.padding-this._computeTitleHeight())}const p=Ee(l,d,d+f);s.textAlign=a.textAlign(du(l)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,_r(s,t.text,p,u,n)}_computeTitleHeight(){const i=this.options.title,t=le(i.font),n=be(i.padding);return i.display?t.lineHeight+n.height:0}_getLegendItemAt(i,t){let n,r,a;if(hi(i,this.left,this.right)&&hi(t,this.top,this.bottom))for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(r=a[n],hi(i,r.left,r.left+r.width)&&hi(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(i){const t=this.options;if(!function fI(e,i){return!(("mousemove"!==e&&"mouseout"!==e||!i.onHover&&!i.onLeave)&&(!i.onClick||"click"!==e&&"mouseup"!==e))}(i.type,t))return;const n=this._getLegendItemAt(i.x,i.y);if("mousemove"===i.type||"mouseout"===i.type){const r=this._hoveredItem,a=((e,i)=>null!==e&&null!==i&&e.datasetIndex===i.datasetIndex&&e.index===i.index)(r,n);r&&!a&&Ft(t.onLeave,[i,r,this],this),this._hoveredItem=n,n&&!a&&Ft(t.onHover,[i,n,this],this)}else n&&Ft(t.onClick,[i,n,this],this)}}var jm={id:"legend",_element:Gm,start(e,i,t){const n=e.legend=new Gm({ctx:e.ctx,options:t,chart:e});Ie.configure(e,n,t),Ie.addBox(e,n)},stop(e){Ie.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,i,t){const n=e.legend;Ie.configure(e,n,t),n.options=t},afterUpdate(e){const i=e.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(e,i){i.replay||e.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,i,t){const n=i.datasetIndex,r=t.chart;r.isDatasetVisible(n)?(r.hide(n),i.hidden=!0):(r.show(n),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const i=e.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:r,color:a}}=e.legend.options;return e._getSortedDatasetMetas().map(s=>{const l=s.controller.getStyle(t?0:void 0),c=be(l.borderWidth);return{text:i[s.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:s.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Hu extends An{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=i,this.height=this.bottom=t;const r=zt(n.text)?n.text.length:1;this._padding=be(n.padding);const a=r*le(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const i=this.options.position;return"top"===i||"bottom"===i}_drawArgs(i){const{top:t,left:n,bottom:r,right:a,options:s}=this,l=s.align;let h,u,d,c=0;return this.isHorizontal()?(u=Ee(l,n,a),d=t+i,h=a-n):("left"===s.position?(u=n+i,d=Ee(l,r,t),c=-.5*Wt):(u=a-i,d=Ee(l,t,r),c=.5*Wt),h=r-t),{titleX:u,titleY:d,maxWidth:h,rotation:c}}draw(){const i=this.ctx,t=this.options;if(!t.display)return;const n=le(t.font),a=n.lineHeight/2+this._padding.top,{titleX:s,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(a);_r(i,t.text,0,0,n,{color:t.color,maxWidth:c,rotation:h,textAlign:du(t.align),textBaseline:"middle",translation:[s,l]})}}var zm={id:"title",_element:Hu,start(e,i,t){!function pI(e,i){const t=new Hu({ctx:e.ctx,options:i,chart:e});Ie.configure(e,t,i),Ie.addBox(e,t),e.titleBlock=t}(e,t)},stop(e){Ie.removeBox(e,e.titleBlock),delete e.titleBlock},beforeUpdate(e,i,t){const n=e.titleBlock;Ie.configure(e,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ka={average(e){if(!e.length)return!1;let i,t,n=0,r=0,a=0;for(i=0,t=e.length;i<t;++i){const s=e[i].element;if(s&&s.hasValue()){const l=s.tooltipPosition();n+=l.x,r+=l.y,++a}}return{x:n/a,y:r/a}},nearest(e,i){if(!e.length)return!1;let a,s,l,t=i.x,n=i.y,r=Number.POSITIVE_INFINITY;for(a=0,s=e.length;a<s;++a){const c=e[a].element;if(c&&c.hasValue()){const u=hu(i,c.getCenterPoint());u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,n=c.y}return{x:t,y:n}}};function Vn(e,i){return i&&(zt(i)?Array.prototype.push.apply(e,i):e.push(i)),e}function pi(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function _I(e,i){const{element:t,datasetIndex:n,index:r}=i,a=e.getDatasetMeta(n).controller,{label:s,value:l}=a.getLabelAndValue(r);return{chart:e,label:s,parsed:a.getParsed(r),raw:e.data.datasets[n].data[r],formattedValue:l,dataset:a.getDataset(),dataIndex:r,datasetIndex:n,element:t}}function Ym(e,i){const t=e.chart.ctx,{body:n,footer:r,title:a}=e,{boxWidth:s,boxHeight:l}=i,c=le(i.bodyFont),h=le(i.titleFont),u=le(i.footerFont),d=a.length,f=r.length,p=n.length,g=be(i.padding);let _=g.height,m=0,v=n.reduce((x,b)=>x+b.before.length+b.lines.length+b.after.length,0);v+=e.beforeBody.length+e.afterBody.length,d&&(_+=d*h.lineHeight+(d-1)*i.titleSpacing+i.titleMarginBottom),v&&(_+=p*(i.displayColors?Math.max(l,c.lineHeight):c.lineHeight)+(v-p)*c.lineHeight+(v-1)*i.bodySpacing),f&&(_+=i.footerMarginTop+f*u.lineHeight+(f-1)*i.footerSpacing);let y=0;const C=function(x){m=Math.max(m,t.measureText(x).width+y)};return t.save(),t.font=h.string,Dt(e.title,C),t.font=c.string,Dt(e.beforeBody.concat(e.afterBody),C),y=i.displayColors?s+2+i.boxPadding:0,Dt(n,x=>{Dt(x.before,C),Dt(x.lines,C),Dt(x.after,C)}),y=0,t.font=u.string,Dt(e.footer,C),t.restore(),m+=g.width,{width:m,height:_}}function yI(e,i,t,n){const{x:r,width:a}=t,{width:s,chartArea:{left:l,right:c}}=e;let h="center";return"center"===n?h=r<=(l+c)/2?"left":"right":r<=a/2?h="left":r>=s-a/2&&(h="right"),function vI(e,i,t,n){const{x:r,width:a}=n,s=t.caretSize+t.caretPadding;if("left"===e&&r+a+s>i.width||"right"===e&&r-a-s<0)return!0}(h,e,i,t)&&(h="center"),h}function Hm(e,i,t){const n=t.yAlign||i.yAlign||function mI(e,i){const{y:t,height:n}=i;return t<n/2?"top":t>e.height-n/2?"bottom":"center"}(e,t);return{xAlign:t.xAlign||i.xAlign||yI(e,i,t,n),yAlign:n}}function Bm(e,i,t,n){const{caretSize:r,caretPadding:a,cornerRadius:s}=e,{xAlign:l,yAlign:c}=t,h=r+a,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=mr(s);let g=function xI(e,i){let{x:t,width:n}=e;return"right"===i?t-=n:"center"===i&&(t-=n/2),t}(i,l);const _=function CI(e,i,t){let{y:n,height:r}=e;return"top"===i?n+=t:n-="bottom"===i?r+t:r/2,n}(i,c,h);return"center"===c?"left"===l?g+=h:"right"===l&&(g-=h):"left"===l?g-=Math.max(u,f)+r:"right"===l&&(g+=Math.max(d,p)+r),{x:me(g,0,n.width-i.width),y:me(_,0,n.height-i.height)}}function Nl(e,i,t){const n=be(t.padding);return"center"===i?e.x+e.width/2:"right"===i?e.x+e.width-n.right:e.x+n.left}function Vm(e){return Vn([],pi(e))}function Wm(e,i){const t=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return t?e.override(t):e}let Jm=(()=>{class e extends An{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),a=r.enabled&&n.options.animation&&r.animations,s=new Z_(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=function bI(e,i,t){return Fi(e,{tooltip:i,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,a=r.beforeTitle.apply(this,[t]),s=r.title.apply(this,[t]),l=r.afterTitle.apply(this,[t]);let c=[];return c=Vn(c,pi(a)),c=Vn(c,pi(s)),c=Vn(c,pi(l)),c}getBeforeBody(t,n){return Vm(n.callbacks.beforeBody.apply(this,[t]))}getBody(t,n){const{callbacks:r}=n,a=[];return Dt(t,s=>{const l={before:[],lines:[],after:[]},c=Wm(r,s);Vn(l.before,pi(c.beforeLabel.call(this,s))),Vn(l.lines,c.label.call(this,s)),Vn(l.after,pi(c.afterLabel.call(this,s))),a.push(l)}),a}getAfterBody(t,n){return Vm(n.callbacks.afterBody.apply(this,[t]))}getFooter(t,n){const{callbacks:r}=n,a=r.beforeFooter.apply(this,[t]),s=r.footer.apply(this,[t]),l=r.afterFooter.apply(this,[t]);let c=[];return c=Vn(c,pi(a)),c=Vn(c,pi(s)),c=Vn(c,pi(l)),c}_createItems(t){const n=this._active,r=this.chart.data,a=[],s=[],l=[];let h,u,c=[];for(h=0,u=n.length;h<u;++h)c.push(_I(this.chart,n[h]));return t.filter&&(c=c.filter((d,f,p)=>t.filter(d,f,p,r))),t.itemSort&&(c=c.sort((d,f)=>t.itemSort(d,f,r))),Dt(c,d=>{const f=Wm(t.callbacks,d);a.push(f.labelColor.call(this,d)),s.push(f.labelPointStyle.call(this,d)),l.push(f.labelTextColor.call(this,d))}),this.labelColors=a,this.labelPointStyles=s,this.labelTextColors=l,this.dataPoints=c,c}update(t,n){const r=this.options.setContext(this.getContext()),a=this._active;let s,l=[];if(a.length){const c=ka[r.position].call(this,a,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const h=this._size=Ym(this,r),u=Object.assign({},c,h),d=Hm(this.chart,r,u),f=Bm(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:f.x,y:f.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=l,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,a){const s=this.getCaretPosition(t,r,a);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,r){const{xAlign:a,yAlign:s}=this,{caretSize:l,cornerRadius:c}=r,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=mr(c),{x:p,y:g}=t,{width:_,height:m}=n;let v,y,C,x,b,T;return"center"===s?(b=g+m/2,"left"===a?(v=p,y=v-l,x=b+l,T=b-l):(v=p+_,y=v+l,x=b-l,T=b+l),C=v):(y="left"===a?p+Math.max(h,d)+l:"right"===a?p+_-Math.max(u,f)-l:this.caretX,"top"===s?(x=g,b=x-l,v=y-l,C=y+l):(x=g+m,b=x+l,v=y+l,C=y-l),T=x),{x1:v,x2:y,x3:C,y1:x,y2:b,y3:T}}drawTitle(t,n,r){const a=this.title,s=a.length;let l,c,h;if(s){const u=fo(r.rtl,this.x,this.width);for(t.x=Nl(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",l=le(r.titleFont),c=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,h=0;h<s;++h)n.fillText(a[h],u.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+c,h+1===s&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,n,r,a,s){const l=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:h,boxWidth:u,boxPadding:d}=s,f=le(s.bodyFont),p=Nl(this,"left",s),g=a.x(p),m=n.y+(h<f.lineHeight?(f.lineHeight-h)/2:0);if(s.usePointStyle){const v={radius:Math.min(u,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=a.leftForLtr(g,u)+u/2,C=m+h/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,Cu(t,v,y,C),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,Cu(t,v,y,C)}else{t.lineWidth=Ct(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const v=a.leftForLtr(g,u-d),y=a.leftForLtr(a.xPlus(g,1),u-d-2),C=mr(l.borderRadius);Object.values(C).some(x=>0!==x)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Ma(t,{x:v,y:m,w:u,h,radius:C}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Ma(t,{x:y,y:m+1,w:u-2,h:h-2,radius:C}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(v,m,u,h),t.strokeRect(v,m,u,h),t.fillStyle=l.backgroundColor,t.fillRect(y,m+1,u-2,h-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:a}=this,{bodySpacing:s,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:u,boxPadding:d}=r,f=le(r.bodyFont);let p=f.lineHeight,g=0;const _=fo(r.rtl,this.x,this.width),m=function(P){n.fillText(P,_.x(t.x+g),t.y+p/2),t.y+=p+s},v=_.textAlign(l);let y,C,x,b,T,M,w;for(n.textAlign=l,n.textBaseline="middle",n.font=f.string,t.x=Nl(this,v,r),n.fillStyle=r.bodyColor,Dt(this.beforeBody,m),g=c&&"right"!==v?"center"===l?u/2+d:u+2+d:0,b=0,M=a.length;b<M;++b){for(y=a[b],C=this.labelTextColors[b],n.fillStyle=C,Dt(y.before,m),x=y.lines,c&&x.length&&(this._drawColorBox(n,t,b,_,r),p=Math.max(f.lineHeight,h)),T=0,w=x.length;T<w;++T)m(x[T]),p=f.lineHeight;Dt(y.after,m)}g=0,p=f.lineHeight,Dt(this.afterBody,m),t.y-=s}drawFooter(t,n,r){const a=this.footer,s=a.length;let l,c;if(s){const h=fo(r.rtl,this.x,this.width);for(t.x=Nl(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=h.textAlign(r.footerAlign),n.textBaseline="middle",l=le(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,c=0;c<s;++c)n.fillText(a[c],h.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+r.footerSpacing}}drawBackground(t,n,r,a){const{xAlign:s,yAlign:l}=this,{x:c,y:h}=t,{width:u,height:d}=r,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:_}=mr(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(c+f,h),"top"===l&&this.drawCaret(t,n,r,a),n.lineTo(c+u-p,h),n.quadraticCurveTo(c+u,h,c+u,h+p),"center"===l&&"right"===s&&this.drawCaret(t,n,r,a),n.lineTo(c+u,h+d-_),n.quadraticCurveTo(c+u,h+d,c+u-_,h+d),"bottom"===l&&this.drawCaret(t,n,r,a),n.lineTo(c+g,h+d),n.quadraticCurveTo(c,h+d,c,h+d-g),"center"===l&&"left"===s&&this.drawCaret(t,n,r,a),n.lineTo(c,h+f),n.quadraticCurveTo(c,h,c+f,h),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,a=r&&r.x,s=r&&r.y;if(a||s){const l=ka[t.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=Ym(this,t),h=Object.assign({},l,this._size),u=Hm(n,t,h),d=Bm(t,h,u,n);(a._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=be(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,a,n),w_(t,n.textDirection),s.y+=l.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),P_(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,a=t.map(({datasetIndex:c,index:h})=>{const u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[h],index:h}}),s=!pl(r,a),l=this._positionChanged(a,n);(s||l)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,s=this._active||[],l=this._getActiveElements(t,s,n,r),c=this._positionChanged(l,t),h=n||!pl(l,s)||c;return h&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),h}_getActiveElements(t,n,r,a){const s=this.options;if("mouseout"===t.type)return[];if(!a)return n;const l=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:r,caretY:a,options:s}=this,l=ka[s.position].call(this,t,n);return!1!==l&&(r!==l.x||a!==l.y)}}return e.positioners=ka,e})();var Xm={id:"tooltip",_element:Jm,positioners:ka,afterInit(e,i,t){t&&(e.tooltip=new Jm({chart:e,options:t}))},beforeUpdate(e,i,t){e.tooltip&&e.tooltip.initialize(t)},reset(e,i,t){e.tooltip&&e.tooltip.initialize(t)},afterDraw(e){const i=e.tooltip;if(i&&i._willRender()){const t={tooltip:i};if(!1===e.notifyPlugins("beforeTooltipDraw",t))return;i.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",t)}},afterEvent(e,i){e.tooltip&&e.tooltip.handleEvent(i.event,i.replay,i.inChartArea)&&(i.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,i)=>i.bodyFont.size,boxWidth:(e,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:ci,title(e){if(e.length>0){const i=e[0],t=i.chart.data.labels,n=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return i.dataset.label||"";if(i.label)return i.label;if(n>0&&i.dataIndex<n)return t[i.dataIndex]}return""},afterTitle:ci,beforeBody:ci,beforeLabel:ci,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let i=e.dataset.label||"";i&&(i+=": ");const t=e.formattedValue;return yt(t)||(i+=t),i},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ci,afterBody:ci,beforeFooter:ci,footer:ci,afterFooter:ci}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};class Na extends Cr{constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:r,label:a}of t)n[r]===a&&n.splice(r,1);this._addedLabels=[]}super.init(i)}parse(i,t){if(yt(i))return null;const n=this.getLabels();return((e,i)=>null===e?null:me(Math.round(e),0,i))(t=isFinite(t)&&n[t]===i?t:function wI(e,i,t,n){const r=e.indexOf(i);return-1===r?((e,i,t,n)=>("string"==typeof i?(t=e.push(i)-1,n.unshift({index:t,label:i})):isNaN(i)&&(t=null),t))(e,i,t,n):r!==e.lastIndexOf(i)?t:r}(n,i,ht(t,i),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:i,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(i||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const i=this.min,t=this.max,n=this.options.offset,r=[];let a=this.getLabels();a=0===i&&t===a.length-1?a:a.slice(i,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=i;s<=t;s++)r.push({value:s});return r}getLabelForValue(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return"number"!=typeof i&&(i=this.parse(i)),null===i?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){const t=this.ticks;return i<0||i>t.length-1?null:this.getPixelForValue(t[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}}function $m(e,i,{horizontal:t,minRotation:n}){const r=Sn(n),a=(t?Math.sin(r):Math.cos(r))||.001;return Math.min(i/a,.75*i*(""+e).length)}Na.id="category",Na.defaults={ticks:{callback:Na.prototype.getLabelForValue}};class Fl extends Cr{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,t){return yt(i)||("number"==typeof i||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){const{beginAtZero:i}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:a}=this;const s=c=>r=t?r:c,l=c=>a=n?a:c;if(i){const c=Yn(r),h=Yn(a);c<0&&h<0?l(0):c>0&&h>0&&s(0)}if(r===a){let c=1;(a>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(c=Math.abs(.05*a)),l(a+c),i||s(r-c)}this.min=r,this.max=a}getTickLimit(){const i=this.options.ticks;let r,{maxTicksLimit:t,stepSize:n}=i;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const i=this.options,t=i.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s=function OI(e,i){const t=[],{bounds:r,step:a,min:s,max:l,precision:c,count:h,maxTicks:u,maxDigits:d,includeBounds:f}=e,p=a||1,g=u-1,{min:_,max:m}=i,v=!yt(s),y=!yt(l),C=!yt(h),x=(m-_)/(d+1);let T,M,w,P,b=Gg((m-_)/g/p)*p;if(b<1e-14&&!v&&!y)return[{value:_},{value:m}];P=Math.ceil(m/b)-Math.floor(_/b),P>g&&(b=Gg(P*b/g/p)*p),yt(c)||(T=Math.pow(10,c),b=Math.ceil(b*T)/T),"ticks"===r?(M=Math.floor(_/b)*b,w=Math.ceil(m/b)*b):(M=_,w=m),v&&y&&a&&function mS(e,i){const t=Math.round(e);return t-i<=e&&t+i>=e}((l-s)/a,b/1e3)?(P=Math.round(Math.min((l-s)/b,u)),b=(l-s)/P,M=s,w=l):C?(M=v?s:M,w=y?l:w,P=h-1,b=(w-M)/P):(P=(w-M)/b,P=ma(P,Math.round(P),b/1e3)?Math.round(P):Math.ceil(P));const D=Math.max(zg(b),zg(M));T=Math.pow(10,yt(c)?D:c),M=Math.round(M*T)/T,w=Math.round(w*T)/T;let R=0;for(v&&(f&&M!==s?(t.push({value:s}),M<s&&R++,ma(Math.round((M+R*b)*T)/T,s,$m(s,x,e))&&R++):M<s&&R++);R<P;++R)t.push({value:Math.round((M+R*b)*T)/T});return y&&f&&w!==l?t.length&&ma(t[t.length-1].value,l,$m(l,x,e))?t[t.length-1].value=l:t.push({value:l}):(!y||w===l)&&t.push({value:w}),t}({maxTicks:n,bounds:i.bounds,min:i.min,max:i.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===i.bounds&&jg(s,this,"value"),i.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const i=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&i.length){const r=(n-t)/Math.max(i.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(i){return wa(i,this.chart.options.locale,this.options.ticks.format)}}class Ul extends Fl{determineDataLimits(){const{min:i,max:t}=this.getMinMax(!0);this.min=oe(i)?i:0,this.max=oe(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const i=this.isHorizontal(),t=i?this.width:this.height,n=Sn(this.options.ticks.minRotation),r=(i?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}getPixelForValue(i){return null===i?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}}function Qm(e){return e/Math.pow(10,Math.floor(pn(e)))==1}Ul.id="linear",Ul.defaults={ticks:{callback:Sl.formatters.numeric}};class Bu extends Cr{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,t){const n=Fl.prototype.parse.apply(this,[i,t]);if(0!==n)return oe(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:i,max:t}=this.getMinMax(!0);this.min=oe(i)?Math.max(0,i):null,this.max=oe(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:i,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const a=c=>n=i?n:c,s=c=>r=t?r:c,l=(c,h)=>Math.pow(10,Math.floor(pn(c))+h);n===r&&(n<=0?(a(1),s(10)):(a(l(n,-1)),s(l(r,1)))),n<=0&&a(l(r,-1)),r<=0&&s(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&a(l(n,-1)),this.min=n,this.max=r}buildTicks(){const i=this.options,n=function SI(e,i){const t=Math.floor(pn(i.max)),n=Math.ceil(i.max/Math.pow(10,t)),r=[];let a=dn(e.min,Math.pow(10,Math.floor(pn(i.min)))),s=Math.floor(pn(a)),l=Math.floor(a/Math.pow(10,s)),c=s<0?Math.pow(10,Math.abs(s)):1;do{r.push({value:a,major:Qm(a)}),++l,10===l&&(l=1,++s,c=s>=0?1:c),a=Math.round(l*Math.pow(10,s)*c)/c}while(s<t||s===t&&l<n);const h=dn(e.max,a);return r.push({value:h,major:Qm(a)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===i.bounds&&jg(n,this,"value"),i.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(i){return void 0===i?"0":wa(i,this.chart.options.locale,this.options.ticks.format)}configure(){const i=this.min;super.configure(),this._startValue=pn(i),this._valueRange=pn(this.max)-pn(i)}getPixelForValue(i){return(void 0===i||0===i)&&(i=this.min),null===i||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:(pn(i)-this._startValue)/this._valueRange)}getValueForPixel(i){const t=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+t*this._valueRange)}}function Vu(e){const i=e.ticks;if(i.display&&e.display){const t=be(i.backdropPadding);return ht(i.font&&i.font.size,bt.font.size)+t.height}return 0}function AI(e,i,t){return t=zt(t)?t:[t],{w:JS(e,i.string,t),h:t.length*i.lineHeight}}function Km(e,i,t,n,r){return e===n||e===r?{start:i-t/2,end:i+t/2}:e<n||e>r?{start:i-t,end:i}:{start:i,end:i+t}}function II(e,i,t,n,r){const a=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t));let l=0,c=0;n.start<i.l?(l=(i.l-n.start)/a,e.l=Math.min(e.l,i.l-l)):n.end>i.r&&(l=(n.end-i.r)/a,e.r=Math.max(e.r,i.r+l)),r.start<i.t?(c=(i.t-r.start)/s,e.t=Math.min(e.t,i.t-c)):r.end>i.b&&(c=(r.end-i.b)/s,e.b=Math.max(e.b,i.b+c))}function RI(e){return 0===e||180===e?"center":e<180?"left":"right"}function ZI(e,i,t){return"right"===t?e-=i:"center"===t&&(e-=i/2),e}function LI(e,i,t){return 90===t||270===t?e-=i/2:(t>270||t<90)&&(e-=i),e}function tv(e,i,t,n){const{ctx:r}=e;if(t)r.arc(e.xCenter,e.yCenter,i,0,Ut);else{let a=e.getPointPosition(0,i);r.moveTo(a.x,a.y);for(let s=1;s<n;s++)a=e.getPointPosition(s,i),r.lineTo(a.x,a.y)}}Bu.id="logarithmic",Bu.defaults={ticks:{callback:Sl.formatters.logarithmic,major:{enabled:!0}}};class mo extends Fl{constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const i=this._padding=be(Vu(this.options)/2),t=this.width=this.maxWidth-i.width,n=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+t/2+i.left),this.yCenter=Math.floor(this.top+n/2+i.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:i,max:t}=this.getMinMax(!1);this.min=oe(i)&&!isNaN(i)?i:0,this.max=oe(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Vu(this.options))}generateTickLabels(i){Fl.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((t,n)=>{const r=Ft(this.options.pointLabels.callback,[t,n],this);return r||0===r?r:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){const i=this.options;i.display&&i.pointLabels.display?function EI(e){const i={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},t=Object.assign({},i),n=[],r=[],a=e._pointLabels.length,s=e.options.pointLabels,l=s.centerPointLabels?Wt/a:0;for(let c=0;c<a;c++){const h=s.setContext(e.getPointLabelContext(c));r[c]=h.padding;const u=e.getPointPosition(c,e.drawingArea+r[c],l),d=le(h.font),f=AI(e.ctx,d,e._pointLabels[c]);n[c]=f;const p=rn(e.getIndexAngle(c)+l),g=Math.round(cu(p));II(t,i,p,Km(g,u.x,f.w,0,180),Km(g,u.y,f.h,90,270))}e.setCenterPoint(i.l-t.l,t.r-i.r,i.t-t.t,t.b-i.b),e._pointLabelItems=function DI(e,i,t){const n=[],r=e._pointLabels.length,a=e.options,s=Vu(a)/2,l=e.drawingArea,c=a.pointLabels.centerPointLabels?Wt/r:0;for(let h=0;h<r;h++){const u=e.getPointPosition(h,l+s+t[h],c),d=Math.round(cu(rn(u.angle+ne))),f=i[h],p=LI(u.y,f.h,d),g=RI(d),_=ZI(u.x,f.w,g);n.push({x:u.x,y:p,textAlign:g,left:_,top:p,right:_+f.w,bottom:p+f.h})}return n}(e,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,t,n,r){this.xCenter+=Math.floor((i-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,t,n,r))}getIndexAngle(i){return rn(i*(Ut/(this._pointLabels.length||1))+Sn(this.options.startAngle||0))}getDistanceFromCenterForValue(i){if(yt(i))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*t:(i-this.min)*t}getValueForDistanceFromCenter(i){if(yt(i))return NaN;const t=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(i){const t=this._pointLabels||[];if(i>=0&&i<t.length){const n=t[i];return function FI(e,i,t){return Fi(e,{label:t,index:i,type:"pointLabel"})}(this.getContext(),i,n)}}getPointPosition(i,t,n=0){const r=this.getIndexAngle(i)-ne+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(i,t){return this.getPointPosition(i,this.getDistanceFromCenterForValue(t))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){const{left:t,top:n,right:r,bottom:a}=this._pointLabelItems[i];return{left:t,top:n,right:r,bottom:a}}drawBackground(){const{backgroundColor:i,grid:{circular:t}}=this.options;if(i){const n=this.ctx;n.save(),n.beginPath(),tv(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=i,n.fill(),n.restore()}}drawGrid(){const i=this.ctx,t=this.options,{angleLines:n,grid:r}=t,a=this._pointLabels.length;let s,l,c;if(t.pointLabels.display&&function kI(e,i){const{ctx:t,options:{pointLabels:n}}=e;for(let r=i-1;r>=0;r--){const a=n.setContext(e.getPointLabelContext(r)),s=le(a.font),{x:l,y:c,textAlign:h,left:u,top:d,right:f,bottom:p}=e._pointLabelItems[r],{backdropColor:g}=a;if(!yt(g)){const _=mr(a.borderRadius),m=be(a.backdropPadding);t.fillStyle=g;const v=u-m.left,y=d-m.top,C=f-u+m.width,x=p-d+m.height;Object.values(_).some(b=>0!==b)?(t.beginPath(),Ma(t,{x:v,y,w:C,h:x,radius:_}),t.fill()):t.fillRect(v,y,C,x)}_r(t,e._pointLabels[r],l,c+s.lineHeight/2,s,{color:a.color,textAlign:h,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((h,u)=>{0!==u&&(l=this.getDistanceFromCenterForValue(h.value),function NI(e,i,t,n){const r=e.ctx,a=i.circular,{color:s,lineWidth:l}=i;!a&&!n||!s||!l||t<0||(r.save(),r.strokeStyle=s,r.lineWidth=l,r.setLineDash(i.borderDash),r.lineDashOffset=i.borderDashOffset,r.beginPath(),tv(e,t,a,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(u-1)),l,a))}),n.display){for(i.save(),s=a-1;s>=0;s--){const h=n.setContext(this.getPointLabelContext(s)),{color:u,lineWidth:d}=h;!d||!u||(i.lineWidth=d,i.strokeStyle=u,i.setLineDash(h.borderDash),i.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),c=this.getPointPosition(s,l),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(c.x,c.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){const i=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let a,s;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(r),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((l,c)=>{if(0===c&&!t.reverse)return;const h=n.setContext(this.getContext(c)),u=le(h.font);if(a=this.getDistanceFromCenterForValue(this.ticks[c].value),h.showLabelBackdrop){i.font=u.string,s=i.measureText(l.label).width,i.fillStyle=h.backdropColor;const d=be(h.backdropPadding);i.fillRect(-s/2-d.left,-a-u.size/2-d.top,s+d.width,u.size+d.height)}_r(i,l.label,0,-a,u,{color:h.color})}),i.restore()}drawTitle(){}}mo.id="radialLinear",mo.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Sl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},mo.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},mo.descriptors={angleLines:{_fallback:"grid"}};const ql={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Be=Object.keys(ql);function UI(e,i){return e-i}function ev(e,i){if(yt(i))return null;const t=e._adapter,{parser:n,round:r,isoWeekday:a}=e._parseOpts;let s=i;return"function"==typeof n&&(s=n(s)),oe(s)||(s="string"==typeof n?t.parse(s,n):t.parse(s)),null===s?null:(r&&(s="week"!==r||!lo(a)&&!0!==a?t.startOf(s,r):t.startOf(s,"isoWeek",a)),+s)}function nv(e,i,t,n){const r=Be.length;for(let a=Be.indexOf(e);a<r-1;++a){const s=ql[Be[a]],l=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-i)/(l*s.size))<=n)return Be[a]}return Be[r-1]}function iv(e,i,t){if(t){if(t.length){const{lo:n,hi:r}=uu(t,i);e[t[n]>=i?t[n]:t[r]]=!0}}else e[i]=!0}function rv(e,i,t){const n=[],r={},a=i.length;let s,l;for(s=0;s<a;++s)l=i[s],r[l]=s,n.push({value:l,major:!1});return 0!==a&&t?function jI(e,i,t,n){const r=e._adapter,a=+r.startOf(i[0].value,n),s=i[i.length-1].value;let l,c;for(l=a;l<=s;l=+r.add(l,1,n))c=t[l],c>=0&&(i[c].major=!0);return i}(e,n,r,t):n}let Wu=(()=>{class e extends Cr{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n){const r=t.time||(t.time={}),a=this._adapter=new DA._date(t.adapters.date);a.init(n),ga(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return void 0===t?null:ev(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:a,max:s,minDefined:l,maxDefined:c}=this.getUserBounds();function h(u){!l&&!isNaN(u.min)&&(a=Math.min(a,u.min)),!c&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!l||!c)&&(h(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&h(this.getMinMax(!1))),a=oe(a)&&!isNaN(a)?a:+n.startOf(Date.now(),r),s=oe(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(a,s-1),this.max=Math.max(a+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,a="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const s=this.min,c=function CS(e,i,t){let n=0,r=e.length;for(;n<r&&e[n]<i;)n++;for(;r>n&&e[r-1]>t;)r--;return n>0||r<e.length?e.slice(n,r):e}(a,s,this.max);return this._unit=n.unit||(r.autoSkip?nv(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):function qI(e,i,t,n,r){for(let a=Be.length-1;a>=Be.indexOf(t);a--){const s=Be[a];if(ql[s].common&&e._adapter.diff(r,n,s)>=i-1)return s}return Be[t?Be.indexOf(t):0]}(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function GI(e){for(let i=Be.indexOf(e)+1,t=Be.length;i<t;++i)if(ql[Be[i]].common)return Be[i]}(this._unit):void 0,this.initOffsets(a),t.reverse&&c.reverse(),rv(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let a,s,n=0,r=0;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),n=1===t.length?1-a:(this.getDecimalForValue(t[1])-a)/2,s=this.getDecimalForValue(t[t.length-1]),r=1===t.length?s:(s-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=me(n,0,l),r=me(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,a=this.options,s=a.time,l=s.unit||nv(s.minUnit,n,r,this._getLabelCapacity(n)),c=ht(s.stepSize,1),h="week"===l&&s.isoWeekday,u=lo(h)||!0===h,d={};let p,g,f=n;if(u&&(f=+t.startOf(f,"isoWeek",h)),f=+t.startOf(f,u?"day":l),t.diff(r,n,l)>1e5*c)throw new Error(n+" and "+r+" are too far apart with stepSize of "+c+" "+l);const _="data"===a.ticks.source&&this.getDataTimestamps();for(p=f,g=0;p<r;p=+t.add(p,c,l),g++)iv(d,p,_);return(p===r||"ticks"===a.bounds||1===g)&&iv(d,p,_),Object.keys(d).sort((m,v)=>m-v).map(m=>+m)}getLabelForValue(t){const r=this.options.time;return this._adapter.format(t,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(t,n,r,a){const s=this.options,l=s.time.displayFormats,c=this._unit,h=this._majorUnit,d=h&&l[h],f=r[n],g=this._adapter.format(t,a||(h&&d&&f&&f.major?d:c&&l[c])),_=s.ticks.callback;return _?Ft(_,[g,n,r],this):g}generateTickLabels(t){let n,r,a;for(n=0,r=t.length;n<r;++n)a=t[n],a.label=this._tickFormatFunction(a.value,n,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,a=Sn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(a),l=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:r*s+c*l,h:r*l+c*s}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,a=r[n.unit]||r.millisecond,s=this._tickFormatFunction(t,0,rv(this,[t],this._majorUnit),a),l=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let n,r,t=this._cache.data||[];if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,r=a.length;n<r;++n)t=t.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const a=this.getLabels();for(n=0,r=a.length;n<r;++n)t.push(ev(this,a[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Vg(t.sort(UI))}}return e.id="time",e.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},e})();function Gl(e,i,t){let a,s,l,c,n=0,r=e.length-1;t?(i>=e[n].pos&&i<=e[r].pos&&({lo:n,hi:r}=ui(e,"pos",i)),({pos:a,time:l}=e[n]),({pos:s,time:c}=e[r])):(i>=e[n].time&&i<=e[r].time&&({lo:n,hi:r}=ui(e,"time",i)),({time:a,pos:l}=e[n]),({time:s,pos:c}=e[r]));const h=s-a;return h?l+(c-l)*(i-a)/h:l}class jl extends Wu{constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const i=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(i);this._minPos=Gl(t,this.min),this._tableRange=Gl(t,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){const{min:t,max:n}=this,r=[],a=[];let s,l,c,h,u;for(s=0,l=i.length;s<l;++s)h=i[s],h>=t&&h<=n&&r.push(h);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,l=r.length;s<l;++s)u=r[s+1],c=r[s-1],h=r[s],Math.round((u+c)/2)!==h&&a.push({time:h,pos:s/(l-1)});return a}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return i=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,i=this._cache.all=i,i}getDecimalForValue(i){return(Gl(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){const t=this._offsets,n=this.getDecimalForPixel(i)/t.factor-t.end;return Gl(this._table,n*this._tableRange+this._minPos,!0)}}jl.id="timeseries",jl.defaults=Wu.defaults;var YI=Y(1884);const zl=function VI(e,i){return e===i||e!=e&&i!=i},Yl=function WI(e,i){for(var t=e.length;t--;)if(zl(e[t][0],i))return t;return-1};var XI=Array.prototype.splice;function vo(e){var i=-1,t=null==e?0:e.length;for(this.clear();++i<t;){var n=e[i];this.set(n[0],n[1])}}vo.prototype.clear=function HI(){this.__data__=[],this.size=0},vo.prototype.delete=function $I(e){var i=this.__data__,t=Yl(i,e);return!(t<0||(t==i.length-1?i.pop():XI.call(i,t,1),--this.size,0))},vo.prototype.get=function KI(e){var i=this.__data__,t=Yl(i,e);return t<0?void 0:i[t][1]},vo.prototype.has=function e6(e){return Yl(this.__data__,e)>-1},vo.prototype.set=function i6(e,i){var t=this.__data__,n=Yl(t,e);return n<0?(++this.size,t.push([e,i])):t[n][1]=i,this};const Hl=vo,ov="object"==typeof global&&global&&global.Object===Object&&global;var p6="object"==typeof self&&self&&self.Object===Object&&self;const yo=ov||p6||Function("return this")();var _6=yo.Symbol,av=Object.prototype,m6=av.hasOwnProperty,v6=av.toString,Fa=_6?_6.toStringTag:void 0;var b6=Object.prototype.toString;var sv=_6?_6.toStringTag:void 0;const Vl=function O6(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":sv&&sv in Object(e)?function y6(e){var i=m6.call(e,Fa),t=e[Fa];try{e[Fa]=void 0;var n=!0}catch(a){}var r=v6.call(e);return n&&(i?e[Fa]=t:delete e[Fa]),r}(e):function T6(e){return b6.call(e)}(e)},Tr=function S6(e){var i=typeof e;return null!=e&&("object"==i||"function"==i)},Ju=function R6(e){if(!Tr(e))return!1;var i=Vl(e);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i},Xu=yo["__core-js_shared__"];var lv=function(){var e=/[^.]+$/.exec(Xu&&Xu.keys&&Xu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var F6=Function.prototype.toString;var j6=/^\[object .+?Constructor\]$/,V6=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const J6=function W6(e){return!(!Tr(e)||function L6(e){return!!lv&&lv in e}(e))&&(Ju(e)?V6:j6).test(function U6(e){if(null!=e){try{return F6.call(e)}catch(i){}try{return e+""}catch(i){}}return""}(e))},$u=function Q6(e,i){var t=function X6(e,i){return null==e?void 0:e[i]}(e,i);return J6(t)?t:void 0},cv=$u(yo,"Map"),Ua=$u(Object,"create");var s5=Object.prototype.hasOwnProperty;var u5=Object.prototype.hasOwnProperty;function xo(e){var i=-1,t=null==e?0:e.length;for(this.clear();++i<t;){var n=e[i];this.set(n[0],n[1])}}xo.prototype.clear=function e5(){this.__data__=Ua?Ua(null):{},this.size=0},xo.prototype.delete=function i5(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i},xo.prototype.get=function l5(e){var i=this.__data__;if(Ua){var t=i[e];return"__lodash_hash_undefined__"===t?void 0:t}return s5.call(i,e)?i[e]:void 0},xo.prototype.has=function d5(e){var i=this.__data__;return Ua?void 0!==i[e]:u5.call(i,e)},xo.prototype.set=function g5(e,i){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Ua&&void 0===i?"__lodash_hash_undefined__":i,this};const hv=xo,Wl=function C5(e,i){var t=e.__data__;return function y5(e){var i=typeof e;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==e:null===e}(i)?t["string"==typeof i?"string":"hash"]:t.map};function Co(e){var i=-1,t=null==e?0:e.length;for(this.clear();++i<t;){var n=e[i];this.set(n[0],n[1])}}Co.prototype.clear=function m5(){this.size=0,this.__data__={hash:new hv,map:new(cv||Hl),string:new hv}},Co.prototype.delete=function b5(e){var i=Wl(this,e).delete(e);return this.size-=i?1:0,i},Co.prototype.get=function M5(e){return Wl(this,e).get(e)},Co.prototype.has=function P5(e){return Wl(this,e).has(e)},Co.prototype.set=function S5(e,i){var t=Wl(this,e),n=t.size;return t.set(e,i),this.size+=t.size==n?0:1,this};const E5=Co;function bo(e){var i=this.__data__=new Hl(e);this.size=i.size}bo.prototype.clear=function o6(){this.__data__=new Hl,this.size=0},bo.prototype.delete=function s6(e){var i=this.__data__,t=i.delete(e);return this.size=i.size,t},bo.prototype.get=function c6(e){return this.__data__.get(e)},bo.prototype.has=function u6(e){return this.__data__.has(e)},bo.prototype.set=function D5(e,i){var t=this.__data__;if(t instanceof Hl){var n=t.__data__;if(!cv||n.length<199)return n.push([e,i]),this.size=++t.size,this;t=this.__data__=new E5(n)}return t.set(e,i),this.size=t.size,this};const Z5=bo;var L5=function(){try{var e=$u(Object,"defineProperty");return e({},"",{}),e}catch(i){}}();const Jl=L5,Qu=function k5(e,i,t){"__proto__"==i&&Jl?Jl(e,i,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[i]=t},Ku=function N5(e,i,t){(void 0!==t&&!zl(e[i],t)||void 0===t&&!(i in e))&&Qu(e,i,t)};var U5=function F5(e){return function(i,t,n){for(var r=-1,a=Object(i),s=n(i),l=s.length;l--;){var c=s[e?l:++r];if(!1===t(a[c],c,a))break}return i}}();const q5=U5;var uv="object"==typeof exports&&exports&&!exports.nodeType&&exports,dv=uv&&"object"==typeof module&&module&&!module.nodeType&&module,fv=dv&&dv.exports===uv?yo.Buffer:void 0,pv=fv?fv.allocUnsafe:void 0;const gv=yo.Uint8Array,W5=function V5(e,i){var t=i?function H5(e){var i=new e.constructor(e.byteLength);return new gv(i).set(new gv(e)),i}(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)};var _v=Object.create,$5=function(){function e(){}return function(i){if(!Tr(i))return{};if(_v)return _v(i);e.prototype=i;var t=new e;return e.prototype=void 0,t}}();const Q5=$5;var tD=function K5(e,i){return function(t){return e(i(t))}}(Object.getPrototypeOf,Object);const mv=tD;var eD=Object.prototype;const vv=function nD(e){var i=e&&e.constructor;return e===("function"==typeof i&&i.prototype||eD)},qa=function oD(e){return null!=e&&"object"==typeof e},yv=function sD(e){return qa(e)&&"[object Arguments]"==Vl(e)};var xv=Object.prototype,lD=xv.hasOwnProperty,cD=xv.propertyIsEnumerable,hD=yv(function(){return arguments}())?yv:function(e){return qa(e)&&lD.call(e,"callee")&&!cD.call(e,"callee")};const td=hD,ed=Array.isArray,Cv=function fD(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},nd=function pD(e){return null!=e&&Cv(e.length)&&!Ju(e)};var bv="object"==typeof exports&&exports&&!exports.nodeType&&exports,Tv=bv&&"object"==typeof module&&module&&!module.nodeType&&module,Mv=Tv&&Tv.exports===bv?yo.Buffer:void 0;const wv=(Mv?Mv.isBuffer:void 0)||function mD(){return!1};var Pv=Function.prototype.toString,wD=Object.prototype.hasOwnProperty,PD=Pv.call(Object);var Vt={};Vt["[object Float32Array]"]=Vt["[object Float64Array]"]=Vt["[object Int8Array]"]=Vt["[object Int16Array]"]=Vt["[object Int32Array]"]=Vt["[object Uint8Array]"]=Vt["[object Uint8ClampedArray]"]=Vt["[object Uint16Array]"]=Vt["[object Uint32Array]"]=!0,Vt["[object Arguments]"]=Vt["[object Array]"]=Vt["[object ArrayBuffer]"]=Vt["[object Boolean]"]=Vt["[object DataView]"]=Vt["[object Date]"]=Vt["[object Error]"]=Vt["[object Function]"]=Vt["[object Map]"]=Vt["[object Number]"]=Vt["[object Object]"]=Vt["[object RegExp]"]=Vt["[object Set]"]=Vt["[object String]"]=Vt["[object WeakMap]"]=!1;var Ov="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ga=Ov&&"object"==typeof module&&module&&!module.nodeType&&module,id=Ga&&Ga.exports===Ov&&ov.process,rR=function(){try{return Ga&&Ga.require&&Ga.require("util").types||id&&id.binding&&id.binding("util")}catch(i){}}(),Av=rR&&rR.isTypedArray;const Ev=Av?function eR(e){return function(i){return e(i)}}(Av):function KD(e){return qa(e)&&Cv(e.length)&&!!Vt[Vl(e)]},rd=function aR(e,i){if(("constructor"!==i||"function"!=typeof e[i])&&"__proto__"!=i)return e[i]};var lR=Object.prototype.hasOwnProperty;const hR=function cR(e,i,t){var n=e[i];(!lR.call(e,i)||!zl(n,t)||void 0===t&&!(i in e))&&Qu(e,i,t)};var _R=/^(?:0|[1-9]\d*)$/;const Iv=function mR(e,i){var t=typeof e;return!!(i=null==i?9007199254740991:i)&&("number"==t||"symbol"!=t&&_R.test(e))&&e>-1&&e%1==0&&e<i};var yR=Object.prototype.hasOwnProperty;const CR=function xR(e,i){var t=ed(e),n=!t&&td(e),r=!t&&!n&&wv(e),a=!t&&!n&&!r&&Ev(e),s=t||n||r||a,l=s?function fR(e,i){for(var t=-1,n=Array(e);++t<e;)n[t]=i(t);return n}(e.length,String):[],c=l.length;for(var h in e)(i||yR.call(e,h))&&(!s||!("length"==h||r&&("offset"==h||"parent"==h)||a&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Iv(h,c)))&&l.push(h);return l};var wR=Object.prototype.hasOwnProperty;const OR=function PR(e){if(!Tr(e))return function bR(e){var i=[];if(null!=e)for(var t in Object(e))i.push(t);return i}(e);var i=vv(e),t=[];for(var n in e)"constructor"==n&&(i||!wR.call(e,n))||t.push(n);return t},Dv=function SR(e){return nd(e)?CR(e,!0):OR(e)},ER=function AR(e){return function uR(e,i,t,n){var r=!t;t||(t={});for(var a=-1,s=i.length;++a<s;){var l=i[a],c=n?n(t[l],e[l],l,t,e):void 0;void 0===c&&(c=e[l]),r?Qu(t,l,c):hR(t,l,c)}return t}(e,Dv(e))},DR=function IR(e,i,t,n,r,a,s){var l=rd(e,t),c=rd(i,t),h=s.get(c);if(h)Ku(e,t,h);else{var u=a?a(l,c,t+"",e,i,s):void 0,d=void 0===u;if(d){var f=ed(c),p=!f&&wv(c),g=!f&&!p&&Ev(c);u=c,f||p||g?ed(l)?u=l:function gD(e){return qa(e)&&nd(e)}(l)?u=function J5(e,i){var t=-1,n=e.length;for(i||(i=Array(n));++t<n;)i[t]=e[t];return i}(l):p?(d=!1,u=function j5(e,i){if(i)return e.slice();var t=e.length,n=pv?pv(t):new e.constructor(t);return e.copy(n),n}(c,!0)):g?(d=!1,u=W5(c,!0)):u=[]:function OD(e){if(!qa(e)||"[object Object]"!=Vl(e))return!1;var i=mv(e);if(null===i)return!0;var t=wD.call(i,"constructor")&&i.constructor;return"function"==typeof t&&t instanceof t&&Pv.call(t)==PD}(c)||td(c)?(u=l,td(l)?u=ER(l):(!Tr(l)||Ju(l))&&(u=function iD(e){return"function"!=typeof e.constructor||vv(e)?{}:Q5(mv(e))}(c))):d=!1}d&&(s.set(c,u),r(u,c,n,a,s),s.delete(c)),Ku(e,t,u)}},RR=function Rv(e,i,t,n,r){e!==i&&q5(i,function(a,s){if(r||(r=new Z5),Tr(a))DR(e,i,s,t,Rv,n,r);else{var l=n?n(rd(e,s),a,s+"",e,i,r):void 0;void 0===l&&(l=a),Ku(e,s,l)}},Dv)},Zv=function ZR(e){return e},kR=function LR(e,i,t){switch(t.length){case 0:return e.call(i);case 1:return e.call(i,t[0]);case 2:return e.call(i,t[0],t[1]);case 3:return e.call(i,t[0],t[1],t[2])}return e.apply(i,t)};var Lv=Math.max;const qR=function UR(e){return function(){return e}};var GR=Jl?function(e,i){return Jl(e,"toString",{configurable:!0,enumerable:!1,value:qR(i),writable:!0})}:Zv,HR=Date.now,VR=function BR(e){var i=0,t=0;return function(){var n=HR(),r=16-(n-t);if(t=n,r>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}(GR);const WR=VR,XR=function JR(e,i){return WR(function NR(e,i,t){return i=Lv(void 0===i?e.length-1:i,0),function(){for(var n=arguments,r=-1,a=Lv(n.length-i,0),s=Array(a);++r<a;)s[r]=n[i+r];r=-1;for(var l=Array(i+1);++r<i;)l[r]=n[r];return l[i]=t(s),kR(e,this,l)}}(e,i,Zv),e+"")};var tZ=function KR(e){return XR(function(i,t){var n=-1,r=t.length,a=r>1?t[r-1]:void 0,s=r>2?t[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,s&&function $R(e,i,t){if(!Tr(t))return!1;var n=typeof i;return!!("number"==n?nd(t)&&Iv(i,t.length):"string"==n&&i in t)&&zl(t[i],e)}(t[0],t[1],s)&&(a=r<3?void 0:a,r=1),i=Object(i);++n<r;){var l=t[n];l&&e(i,l,n,a)}return i})}(function(e,i,t){RR(e,i,t)});const kv=tZ;var Nv=Y(1135);let eZ=(()=>{class e{constructor(){this.colorschemesOptions=new Nv.X(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fv=(()=>{class e{constructor(t,n,r){this.element=t,this.zone=n,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new o.vpe,this.chartHover=new o.vpe,this.subs=[],this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe((0,YI.x)()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(t){const n=["type"],r=Object.getOwnPropertyNames(t);if(r.some(a=>n.includes(a))||r.every(a=>t[a].isFirstChange()))this.render();else{const a=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,a.data),Object.assign(this.chart.config.plugins,a.plugins),Object.assign(this.chart.config.options,a.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Za(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>{var n;return null===(n=this.chart)||void 0===n?void 0:n.update(t)})}hideDataset(t,n){this.chart&&(this.chart.getDatasetMeta(t).hidden=n,this.update())}isDatasetHidden(t){var n,r;return null===(r=null===(n=this.chart)||void 0===n?void 0:n.getDatasetMeta(t))||void 0===r?void 0:r.hidden}toBase64Image(){var t;return null===(t=this.chart)||void 0===t?void 0:t.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return kv({onHover:(t,n)=>{this.chartHover.observed&&n&&!n.length||this.zone.run(()=>this.chartHover.emit({event:t,active:n}))},onClick:(t,n)=>{!this.chartClick.observed||this.zone.run(()=>this.chartClick.emit({event:t,active:n}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),plugins:this.plugins,options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(eZ))},e.\u0275dir=o.lG2({type:e,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[o.TTD]}),e})();const nZ=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],iZ={datasets:{line:{backgroundColor:e=>Ue(qe(e.datasetIndex),.4),borderColor:e=>Ue(qe(e.datasetIndex),1),pointBackgroundColor:e=>Ue(qe(e.datasetIndex),1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:e=>Ue(qe(e.datasetIndex),.8)},bar:{backgroundColor:e=>Ue(qe(e.datasetIndex),.6),borderColor:e=>Ue(qe(e.datasetIndex),1),hoverBackgroundColor:e=>Ue(qe(e.datasetIndex),.8),hoverBorderColor:e=>Ue(qe(e.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:e=>Ue(qe(e.dataIndex),.6),borderColor:"#fff",hoverBackgroundColor:e=>Ue(qe(e.dataIndex),1),hoverBorderColor:e=>Ue(qe(e.dataIndex),1)},get pie(){return this.doughnut},polarArea:{backgroundColor:e=>Ue(qe(e.dataIndex),.6),borderColor:e=>Ue(qe(e.dataIndex),1),hoverBackgroundColor:e=>Ue(qe(e.dataIndex),.8),hoverBorderColor:e=>Ue(qe(e.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Ue(e,i){return"rgba("+e.concat(i).join(",")+")"}function od(e,i){return Math.floor(Math.random()*(i-e+1))+e}function qe(e=0){return nZ[e]||function rZ(){return[od(0,255),od(0,255),od(0,255)]}()}Za.register(zm,Xm,Um,jm,W_,La,Uu,Ul,Na,B_,_o,Iu,go,$_,mo,X_,J_,V_,nm,jl);let Uv=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),oZ=(()=>{class e{constructor(t){(null==t?void 0:t.plugins)&&Za.register(...null==t?void 0:t.plugins);const n=kv(iZ,(null==t?void 0:t.defaults)||{});bt.set(n)}static forRoot(t){return{ngModule:e,providers:[{provide:Uv,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(Uv,8))},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[]]}),e})();var qv=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),ja_textSize=function(e,i,t){var l,n=[].concat(i),r=n.length,a=e.font,s=0;for(e.font=t.string,l=0;l<r;++l)s=Math.max(e.measureText(n[l]).width,s);return e.font=a,{height:r*t.lineHeight,width:s}};function ad(e,i){var t=i.x,n=i.y;if(null===t)return{x:0,y:-1};if(null===n)return{x:1,y:0};var r=e.x-t,a=e.y-n,s=Math.sqrt(r*r+a*a);return{x:s?r/s:0,y:s?a/s:-1}}function Xl(e,i,t){var n=0;return e<t.left?n|=1:e>t.right&&(n|=2),i<t.top?n|=8:i>t.bottom&&(n|=4),n}function $l(e,i){var r,a,t=i.anchor,n=e;return i.clamp&&(n=function lZ(e,i){for(var c,h,u,t=e.x0,n=e.y0,r=e.x1,a=e.y1,s=Xl(t,n,i),l=Xl(r,a,i);s|l&&!(s&l);)8&(c=s||l)?(h=t+(r-t)*(i.top-n)/(a-n),u=i.top):4&c?(h=t+(r-t)*(i.bottom-n)/(a-n),u=i.bottom):2&c?(u=n+(a-n)*(i.right-t)/(r-t),h=i.right):1&c&&(u=n+(a-n)*(i.left-t)/(r-t),h=i.left),c===s?s=Xl(t=h,n=u,i):l=Xl(r=h,a=u,i);return{x0:t,x1:r,y0:n,y1:a}}(n,i.area)),"start"===t?(r=n.x0,a=n.y0):"end"===t?(r=n.x1,a=n.y1):(r=(n.x0+n.x1)/2,a=(n.y0+n.y1)/2),function aZ(e,i,t,n,r){switch(r){case"center":t=n=0;break;case"bottom":t=0,n=1;break;case"right":t=1,n=0;break;case"left":t=-1,n=0;break;case"top":t=0,n=-1;break;case"start":t=-t,n=-n;break;case"end":break;default:r*=Math.PI/180,t=Math.cos(r),n=Math.sin(r)}return{x:e,y:i,vx:t,vy:n}}(r,a,e.vx,e.vy,i.align)}var Ql={arc:function(e,i){var t=(e.startAngle+e.endAngle)/2,n=Math.cos(t),r=Math.sin(t),a=e.innerRadius,s=e.outerRadius;return $l({x0:e.x+n*a,y0:e.y+r*a,x1:e.x+n*s,y1:e.y+r*s,vx:n,vy:r},i)},point:function(e,i){var t=ad(e,i.origin),n=t.x*e.options.radius,r=t.y*e.options.radius;return $l({x0:e.x-n,y0:e.y-r,x1:e.x+n,y1:e.y+r,vx:t.x,vy:t.y},i)},bar:function(e,i){var t=ad(e,i.origin),n=e.x,r=e.y,a=0,s=0;return e.horizontal?(n=Math.min(e.x,e.base),a=Math.abs(e.base-e.x)):(r=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),$l({x0:n,y0:r+s,x1:n+a,y1:r,vx:t.x,vy:t.y},i)},fallback:function(e,i){var t=ad(e,i.origin);return $l({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:t.x,vy:t.y},i)}},gi=function(e){return Math.round(e*qv)/qv};function hZ(e,i){var t=i.chart.getDatasetMeta(i.datasetIndex).vScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var n=t.getBasePixel();return e.horizontal?{x:n,y:null}:{x:null,y:n}}function uZ(e){return e instanceof go?Ql.arc:e instanceof Uu?Ql.point:e instanceof _o?Ql.bar:Ql.fallback}function gZ(e,i,t){var n=e.shadowBlur,r=t.stroked,a=gi(t.x),s=gi(t.y),l=gi(t.w);r&&e.strokeText(i,a,s,l),t.filled&&(n&&r&&(e.shadowBlur=0),e.fillText(i,a,s,l),n&&r&&(e.shadowBlur=n))}var Hv=function(e,i,t,n){var r=this;r._config=e,r._index=n,r._model=null,r._rects=null,r._ctx=i,r._el=t};zn(Hv.prototype,{_modelize:function(e,i,t,n){var r=this,a=r._index,s=le(Bt([t.font,{}],n,a)),l=Bt([t.color,bt.color],n,a);return{align:Bt([t.align,"center"],n,a),anchor:Bt([t.anchor,"center"],n,a),area:n.chart.chartArea,backgroundColor:Bt([t.backgroundColor,null],n,a),borderColor:Bt([t.borderColor,null],n,a),borderRadius:Bt([t.borderRadius,0],n,a),borderWidth:Bt([t.borderWidth,0],n,a),clamp:Bt([t.clamp,!1],n,a),clip:Bt([t.clip,!1],n,a),color:l,display:e,font:s,lines:i,offset:Bt([t.offset,4],n,a),opacity:Bt([t.opacity,1],n,a),origin:hZ(r._el,n),padding:be(Bt([t.padding,4],n,a)),positioner:uZ(r._el),rotation:Bt([t.rotation,0],n,a)*(Math.PI/180),size:ja_textSize(r._ctx,i,s),textAlign:Bt([t.textAlign,"start"],n,a),textShadowBlur:Bt([t.textShadowBlur,0],n,a),textShadowColor:Bt([t.textShadowColor,l],n,a),textStrokeColor:Bt([t.textStrokeColor,l],n,a),textStrokeWidth:Bt([t.textStrokeWidth,0],n,a)}},update:function(e){var s,l,c,i=this,t=null,n=null,r=i._index,a=i._config,h=Bt([a.display,!0],e,r);h&&(c=yt(l=ht(Ft(a.formatter,[s=e.dataset.data[r],e]),s))?[]:function(e){var t,i=[];for(e=[].concat(e);e.length;)"string"==typeof(t=e.pop())?i.unshift.apply(i,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):yt(e)||i.unshift(""+t);return i}(l)).length&&(n=function cZ(e){var i=e.borderWidth||0,t=e.padding,n=e.size.height,r=e.size.width,a=-r/2,s=-n/2;return{frame:{x:a-t.left-i,y:s-t.top-i,w:r+t.width+2*i,h:n+t.height+2*i},text:{x:a,y:s,w:r,h:n}}}(t=i._modelize(h,c,a,e))),i._model=t,i._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,i){var s,n=e.ctx,r=this._model,a=this._rects;!this.visible()||(n.save(),r.clip&&(s=r.area,n.beginPath(),n.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),n.clip()),n.globalAlpha=function(e,i,t){return Math.max(e,Math.min(i,t))}(0,r.opacity,1),n.translate(gi(i.x),gi(i.y)),n.rotate(r.rotation),function fZ(e,i,t){var n=t.backgroundColor,r=t.borderColor,a=t.borderWidth;!n&&(!r||!a)||(e.beginPath(),function dZ(e,i,t,n,r,a){var s=Math.PI/2;if(a){var l=Math.min(a,r/2,n/2),c=i+l,h=t+l,u=i+n-l,d=t+r-l;e.moveTo(i,h),c<u&&h<d?(e.arc(c,h,l,-Math.PI,-s),e.arc(u,h,l,-s,0),e.arc(u,d,l,0,s),e.arc(c,d,l,s,Math.PI)):c<u?(e.moveTo(c,t),e.arc(u,h,l,-s,s),e.arc(c,h,l,s,Math.PI+s)):h<d?(e.arc(c,h,l,-Math.PI,0),e.arc(c,d,l,0,Math.PI)):e.arc(c,h,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(i,t)}else e.rect(i,t,n,r)}(e,gi(i.x)+a/2,gi(i.y)+a/2,gi(i.w)-a,gi(i.h)-a,t.borderRadius),e.closePath(),n&&(e.fillStyle=n,e.fill()),r&&a&&(e.strokeStyle=r,e.lineWidth=a,e.lineJoin="miter",e.stroke()))}(n,a.frame,r),function _Z(e,i,t,n){var f,r=n.textAlign,a=n.color,s=!!a,l=n.font,c=i.length,h=n.textStrokeColor,u=n.textStrokeWidth,d=h&&u;if(c&&(s||d))for(t=function pZ(e,i,t){var n=t.lineHeight,r=e.w,a=e.x;return"center"===i?a+=r/2:("end"===i||"right"===i)&&(a+=r),{h:n,w:r,x:a,y:e.y+n/2}}(t,r,l),e.font=l.string,e.textAlign=r,e.textBaseline="middle",e.shadowBlur=n.textShadowBlur,e.shadowColor=n.textShadowColor,s&&(e.fillStyle=a),d&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=h),f=0,c=i.length;f<c;++f)gZ(e,i[f],{stroked:d,filled:s,w:t.w,x:t.x,y:t.y+t.h*f})}(n,r.lines,a.text,r),n.restore())}});var mZ=Number.MIN_SAFE_INTEGER||-9007199254740991,vZ=Number.MAX_SAFE_INTEGER||9007199254740991;function za(e,i,t){var n=Math.cos(t),r=Math.sin(t),a=i.x,s=i.y;return{x:a+n*(e.x-a)-r*(e.y-s),y:s+r*(e.x-a)+n*(e.y-s)}}function Bv(e,i){var a,s,h,t=vZ,n=mZ,r=i.origin;for(a=0;a<e.length;++a)h=i.vx*((s=e[a]).x-r.x)+i.vy*(s.y-r.y),t=Math.min(t,h),n=Math.max(n,h);return{min:t,max:n}}function Kl(e,i){var t=i.x-e.x,n=i.y-e.y,r=Math.sqrt(t*t+n*n);return{vx:(i.x-e.x)/r,vy:(i.y-e.y)/r,origin:e,ln:r}}var Vv=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function Wv(e,i,t){var n=i.positioner(e,i),r=n.vx,a=n.vy;if(!r&&!a)return{x:n.x,y:n.y};var s=t.w,l=t.h,c=i.rotation,h=Math.abs(s/2*Math.cos(c))+Math.abs(l/2*Math.sin(c)),u=Math.abs(s/2*Math.sin(c))+Math.abs(l/2*Math.cos(c)),d=1/Math.max(Math.abs(r),Math.abs(a));return h*=r*d,u*=a*d,{x:n.x+(h+=i.offset*r),y:n.y+(u+=i.offset*a)}}zn(Vv.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,i,t){this._rotation=t,this._rect={x:i.x+e.x,y:i.y+e.y,w:i.w,h:i.h}},contains:function(e){var i=this,n=i._rect;return!((e=za(e,i.center(),-i._rotation)).x<n.x-1||e.y<n.y-1||e.x>n.x+n.w+2||e.y>n.y+n.h+2)},intersects:function(e){var r,a,s,i=this._points(),t=e._points(),n=[Kl(i[0],i[1]),Kl(i[0],i[3])];for(this._rotation!==e._rotation&&n.push(Kl(t[0],t[1]),Kl(t[0],t[3])),r=0;r<n.length;++r)if(a=Bv(i,n[r]),s=Bv(t,n[r]),a.max<s.min||s.max<a.min)return!1;return!0},_points:function(){var e=this,i=e._rect,t=e._rotation,n=e.center();return[za({x:i.x,y:i.y},n,t),za({x:i.x+i.w,y:i.y},n,t),za({x:i.x+i.w,y:i.y+i.h},n,t),za({x:i.x,y:i.y+i.h},n,t)]}});var Ya={prepare:function(e){var t,n,r,a,s,i=[];for(t=0,r=e.length;t<r;++t)for(n=0,a=e[t].length;n<a;++n)i.push(s=e[t][n]),s.$layout={_box:new Vv,_hidable:!1,_visible:!0,_set:t,_idx:s._index};return i.sort(function(l,c){var h=l.$layout,u=c.$layout;return h._idx===u._idx?u._set-h._set:u._idx-h._idx}),this.update(i),i},update:function(e){var t,n,r,a,s,i=!1;for(t=0,n=e.length;t<n;++t)a=(r=e[t]).model(),(s=r.$layout)._hidable=a&&"auto"===a.display,s._visible=r.visible(),i|=s._hidable;i&&function xZ(e){var i,t,n,r,a,s,l;for(i=0,t=e.length;i<t;++i)(r=(n=e[i]).$layout)._visible&&(l=new Proxy(n._el,{get:(c,h)=>c.getProps([h],!0)[h]}),a=n.geometry(),s=Wv(l,n.model(),a),r._box.update(s,a,n.rotation()));(function yZ(e,i){var t,n,r,a;for(t=e.length-1;t>=0;--t)for(r=e[t].$layout,n=t-1;n>=0&&r._visible;--n)(a=e[n].$layout)._visible&&r._box.intersects(a._box)&&i(r,a)})(e,function(c,h){var u=c._hidable,d=h._hidable;u&&d||d?h._visible=!1:u&&(c._visible=!1)})}(e)},lookup:function(e,i){var t,n;for(t=e.length-1;t>=0;--t)if((n=e[t].$layout)&&n._visible&&n._box.contains(i))return e[t];return null},draw:function(e,i){var t,n,r,a,s,l;for(t=0,n=i.length;t<n;++t)(a=(r=i[t]).$layout)._visible&&(s=r.geometry(),l=Wv(r._el,r.model(),s),a._box.update(l,s,r.rotation()),r.draw(e,l))}},bZ={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if(yt(e))return null;var t,n,r,i=e;if(Ct(e))if(yt(e.label))if(yt(e.r))for(i="",r=0,n=(t=Object.keys(e)).length;r<n;++r)i+=(0!==r?", ":"")+t[r]+": "+e[t[r]];else i=e.r;else i=e.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Ve="$datalabels",Jv="$default";function sd(e,i,t,n){if(i){var s,r=t.$context,a=t.$groups;!i[a._set]||(s=i[a._set][a._key])&&!0===Ft(s,[r,n])&&(e[Ve]._dirty=!0,t.update(r))}}var OZ={id:"datalabels",defaults:bZ,beforeInit:function(e){e[Ve]={_actives:[]}},beforeUpdate:function(e){var i=e[Ve];i._listened=!1,i._listeners={},i._datasets=[],i._labels=[]},afterDatasetUpdate:function(e,i,t){var d,f,p,g,_,m,v,y,n=i.index,r=e[Ve],a=r._datasets[n]=[],s=e.isDatasetVisible(n),l=e.data.datasets[n],c=function TZ(e,i){var a,s,t=e.datalabels,n={},r=[];return!1===t?null:(!0===t&&(t={}),i=zn({},[i,t]),a=i.labels||{},s=Object.keys(a),delete i.labels,s.length?s.forEach(function(l){a[l]&&r.push(zn({},[i,a[l],{_key:l}]))}):r.push(i),n=r.reduce(function(l,c){return Dt(c.listeners||{},function(h,u){l[u]=l[u]||{},l[u][c._key||Jv]=h}),delete c.listeners,l},{}),{labels:r,listeners:n})}(l,t),h=i.meta.data||[],u=e.ctx;for(u.save(),d=0,p=h.length;d<p;++d)if((v=h[d])[Ve]=[],s&&v&&e.getDataVisibility(d)&&!v.skip)for(f=0,g=c.labels.length;f<g;++f)m=(_=c.labels[f])._key,(y=new Hv(_,u,v,d)).$groups={_set:n,_key:m||Jv},y.$context={active:!1,chart:e,dataIndex:d,dataset:l,datasetIndex:n},y.update(y.$context),v[Ve].push(y),a.push(y);u.restore(),zn(r._listeners,c.listeners,{merger:function(C,x,b){x[C]=x[C]||{},x[C][i.index]=b[C],r._listened=!0}})},afterUpdate:function(e){e[Ve]._labels=Ya.prepare(e[Ve]._datasets)},afterDatasetsDraw:function(e){Ya.draw(e,e[Ve]._labels)},beforeEvent:function(e,i){if(e[Ve]._listened){var t=i.event;switch(t.type){case"mousemove":case"mouseout":!function wZ(e,i){var r,a,t=e[Ve],n=t._listeners;if(n.enter||n.leave){if("mousemove"===i.type)a=Ya.lookup(t._labels,i);else if("mouseout"!==i.type)return;r=t._hovered,t._hovered=a,function MZ(e,i,t,n,r){var a,s;!t&&!n||(t?n?t!==n&&(s=a=!0):s=!0:a=!0,s&&sd(e,i.leave,t,r),a&&sd(e,i.enter,n,r))}(e,n,r,a,i)}}(e,t);break;case"click":!function PZ(e,i){var t=e[Ve],n=t._listeners.click,r=n&&Ya.lookup(t._labels,i);r&&sd(e,n,r,i)}(e,t)}}},afterEvent:function(e){var a,s,l,c,h,u,d,i=e[Ve],r=function(e,i){var r,a,s,l,t=e.slice(),n=[];for(r=0,s=i.length;r<s;++r)-1===(a=t.indexOf(l=i[r]))?n.push([l,1]):t.splice(a,1);for(r=0,s=t.length;r<s;++r)n.push([t[r],-1]);return n}(i._actives,i._actives=e.getActiveElements());for(a=0,s=r.length;a<s;++a)if((h=r[a])[1])for(l=0,c=(d=h[0].element[Ve]||[]).length;l<c;++l)(u=d[l]).$context.active=1===h[1],u.update(u.$context);(i._dirty||r.length)&&(Ya.update(i._labels),e.render()),delete i._dirty}};const Ha=e=>new Intl.NumberFormat("es-MX",{maximumFractionDigits:2,minimumFractionDigits:2,minimumIntegerDigits:1}).format(e);var Tt=Y(3737),ce=Y(3874),Gi=Y(9772),Kt=Y(7423),Ba=Y(7322),SZ=Y(4107),q=Y(3075),tc=Y(508);function AZ(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",16),o._uU(2),o.qZA(),o.qZA()),2&e){const t=i.$implicit,n=o.oxw(2);o.xp6(2),o.AsE("",t.type,": ",n.getFormattedNumber(t.count),"")}}function EZ(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"div",13),o._UZ(2,"canvas",14),o.qZA(),o.YNc(3,AZ,3,2,"div",15),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.Q6J("data",t.chartData)("type",t.chartType)("options",t.chartOptions)("plugins",t.chartPlugins),o.xp6(1),o.Q6J("ngForOf",t.totalElements)}}function IZ(e,i){if(1&e&&(o.TgZ(0,"h2",17),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.Oqu(t.dataGraph.message)}}function DZ(e,i){if(1&e&&(o.TgZ(0,"mat-option",20),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("value",t.value),o.xp6(1),o.hij(" ",t.view," ")}}function RZ(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-form-field"),o.TgZ(1,"mat-select",18),o.NdJ("ngModelChange",function(r){return o.CHM(t),o.oxw().graphSelect=r})("selectionChange",function(){return o.CHM(t),o.oxw().updateGraph()}),o.YNc(2,DZ,2,2,"mat-option",19),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngModel",t.graphSelect),o.xp6(1),o.Q6J("ngForOf",t.dataGraph.selectData)}}let ZZ=(()=>{class e{constructor(t){this.dataGraph=t,this.availableGraphs=[],this.selectedTypeGraph=0,this.graphSelect=0,this.titleGraph="",this.chartLabels=[],this.chartType="pie",this.chartColors=[],this.totalElements=[],this.chartPlugins=[OZ],this.getGraphTypes(),t.selectData.length>0&&this.updateGraph()}ngOnInit(){}updateGraph(){var t;if(this.titleGraph=this.dataGraph[this.graphSelect].title,this.chartColors=this.dataGraph[this.graphSelect].chartColors[0].backgroundColor,this.totalElements=this.dataGraph[this.graphSelect].total,"bar"===this.availableGraphs[this.selectedTypeGraph].type)this.chartType=this.availableGraphs[this.selectedTypeGraph].typeChart,this.chartData={labels:[],datasets:[]},this.chartOptions={responsive:!0,aspectRatio:7/3,elements:{line:{tension:.5}},scales:{x:{},y:{}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end",formatter:n=>this.getFormattedNumber(n)},tooltip:{callbacks:{title:n=>n[0].label.split(":")[0].split("\\n"),label:n=>{const r=[],s=this.getFormattedNumber(n.raw);return r.push(`${n.dataset.label}: ${s}`),r}}}}},"radar"===this.availableGraphs[this.selectedTypeGraph].typeChart&&(this.chartOptions.scales={x:{display:!1},y:{display:!1}}),this.chartData.labels=this.dataGraph[this.graphSelect].chartLabels,this.chartData.datasets=this.dataGraph[this.graphSelect].chartData,this.chartColors.map((n,r)=>{this.chartData.datasets[r].borderColor=n,"radar"===this.availableGraphs[this.selectedTypeGraph].typeChart&&(n+="66"),this.chartData.datasets[r].backgroundColor=n,this.chartData.datasets[r].hoverBackgroundColor=n});else{this.chartLabels=[],this.chartType=this.availableGraphs[this.selectedTypeGraph].typeChart,this.chartData={labels:[],datasets:[{data:[],backgroundColor:[],hoverBackgroundColor:[]}]},this.chartOptions={responsive:!0,aspectRatio:7/3,plugins:{legend:{position:"left"},datalabels:{display:!1,formatter:(n,r)=>{if(r.chart.data.labels)return r.chart.data.labels[r.dataIndex]}},tooltip:{callbacks:{title:n=>n[0].label.split(":")[0].split("\\n"),label:n=>{const r=[],a=this.dataGraph[this.graphSelect].chartData[n.dataIndex],s=(100*a/this.dataGraph[this.graphSelect].total[0].count).toFixed(2),l=this.getFormattedNumber(a);if(r.push(`Total: ${s}% [${l}]`),this.dataGraph[this.graphSelect].extraData.length>0){const c=this.dataGraph[this.graphSelect].extraData[n.dataIndex];if(c.name===n.label.split(":")[0]){const h=this.dataGraph[this.graphSelect].total.findIndex(p=>p.type===c.type),u=h>=0?this.dataGraph[this.graphSelect].total[h].count:0,d=u>0?(100*c.data/u).toFixed(2):"",f=this.getFormattedNumber(c.data);r.push(`${c.type}: ${d}% [${f}]`)}}return r}}}}};for(let n=0;n<this.dataGraph[this.graphSelect].chartLabels.length;n++){const r=this.dataGraph[this.graphSelect].chartData[n],a=(100*r/this.dataGraph[this.graphSelect].total[0].count).toFixed(2),s=this.getFormattedNumber(r);this.chartLabels.push(`${this.dataGraph[this.graphSelect].chartLabels[n]}: ${a}% [${s}]`)}this.chartData.labels=this.chartLabels,this.chartData.datasets=[{data:this.dataGraph[this.graphSelect].chartData,backgroundColor:this.chartColors,hoverBackgroundColor:this.chartColors}]}null===(t=this.chart)||void 0===t||t.render()}getFormattedNumber(t){return Ha(t)}getGraphTypes(){this.availableGraphs=this.dataGraph.isGraphBar?[{type:"bar",typeChart:"bar"},{type:"bar",typeChart:"line"},{type:"bar",typeChart:"radar"}]:[{type:"pie",typeChart:"pie"},{type:"pie",typeChart:"doughnut"},{type:"pie",typeChart:"polarArea"}]}changeGraph(){this.selectedTypeGraph=this.selectedTypeGraph+1>=this.availableGraphs.length?0:this.selectedTypeGraph+1,this.updateGraph()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.WI))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-chart-dialog"]],viewQuery:function(t,n){if(1&t&&o.Gf(Fv,5),2&t){let r;o.iGM(r=o.CRH())&&(n.chart=r.first)}},decls:22,vars:6,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],["mat-dialog-title",""],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[1,"title"],["matTooltip","Cambiar tipo gr\xe1fica",1,"clickable",3,"click"],[4,"ngIf","ngIfElse"],["noGraph",""],[4,"ngIf"],["mat-button","",3,"mat-dialog-close"],[1,"chart"],["baseChart","",3,"data","type","options","plugins"],[4,"ngFor","ngForOf"],[1,"totals"],[1,"no-data"],["name","graphic",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"h4",6),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.TgZ(9,"h3"),o._uU(10),o.qZA(),o.TgZ(11,"mat-icon",8),o.NdJ("click",function(){return n.changeGraph()}),o._uU(12," assessment "),o.qZA(),o.qZA(),o._UZ(13,"hr"),o.TgZ(14,"mat-dialog-content"),o.YNc(15,EZ,4,5,"div",9),o.YNc(16,IZ,2,1,"ng-template",null,10,o.W1O),o.qZA(),o.TgZ(18,"mat-dialog-actions"),o.YNc(19,RZ,3,2,"mat-form-field",11),o.TgZ(20,"button",12),o._uU(21,"Aceptar"),o.qZA(),o.qZA(),o.qZA()),2&t){const r=o.MAs(17);o.xp6(7),o.Oqu(n.dataGraph.title),o.xp6(3),o.Oqu(n.titleGraph),o.xp6(5),o.Q6J("ngIf",n.dataGraph.selectData.length>0)("ngIfElse",r),o.xp6(4),o.Q6J("ngIf",n.dataGraph.selectData.length>1),o.xp6(1),o.Q6J("mat-dialog-close",!0)}},directives:[Tt.Zt,ct.uh,Tt.Bh,ce.Hw,Gi.gM,ct.xY,B.O5,ct.H8,Kt.lW,ct.ZT,Fv,B.sg,Ba.KE,SZ.gD,q.JJ,q.On,tc.ey],styles:["mat-dialog-actions[_ngcontent-%COMP%]{justify-content:flex-end}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:16px}.title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row;overflow:hidden}.no-data[_ngcontent-%COMP%]{color:red}.totals[_ngcontent-%COMP%]{font-size:12pt;font-weight:700}.mat-dialog-title[_ngcontent-%COMP%]{position:relative;padding:0;margin:-24px 0 -16px;display:flex;justify-content:center;align-items:center}.dragdrop-handle[_ngcontent-%COMP%]{color:#000;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}"]}),e})();var LZ=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),kZ=function(e){function i(t){var n=this,r=void 0!==t.requestEncoding?t.requestEncoding:"KVP",a=t.tileGrid,s=t.urls;return void 0===s&&void 0!==t.url&&(s=Yp(t.url)),(n=e.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,imageSmoothing:t.imageSmoothing,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:a,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:s,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection})||this).version_=void 0!==t.version?t.version:"1.0.0",n.format_=void 0!==t.format?t.format:"image/jpeg",n.dimensions_=void 0!==t.dimensions?t.dimensions:{},n.layer_=t.layer,n.matrixSet_=t.matrixSet,n.style_=t.style,n.requestEncoding_=r,n.setKey(n.getKeyForDimensions_()),s&&s.length>0&&(n.tileUrlFunction=Hh(s.map(n.createFromWMTSTemplate.bind(n)))),n}return LZ(i,e),i.prototype.setUrls=function(t){this.urls=t;var n=t.join("\n");this.setTileUrlFunction(Hh(t.map(this.createFromWMTSTemplate.bind(this))),n)},i.prototype.getDimensions=function(){return this.dimensions_},i.prototype.getFormat=function(){return this.format_},i.prototype.getLayer=function(){return this.layer_},i.prototype.getMatrixSet=function(){return this.matrixSet_},i.prototype.getRequestEncoding=function(){return this.requestEncoding_},i.prototype.getStyle=function(){return this.style_},i.prototype.getVersion=function(){return this.version_},i.prototype.getKeyForDimensions_=function(){var t=0,n=[];for(var r in this.dimensions_)n[t++]=r+"-"+this.dimensions_[r];return n.join("/")},i.prototype.updateDimensions=function(t){dt(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},i.prototype.createFromWMTSTemplate=function(t){var n=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==n&&dt(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==n?ur(t,r):t.replace(/\{(\w+?)\}/g,function(l,c){return c.toLowerCase()in r?r[c.toLowerCase()]:l});var a=this.tileGrid,s=this.dimensions_;return function(l,c,h){if(l){var u={TileMatrix:a.getMatrixId(l[0]),TileCol:l[1],TileRow:l[2]};dt(u,s);var d=t;return"KVP"==n?ur(d,u):d.replace(/\{(\w+?)\}/g,function(f,p){return u[p]})}}},i}($s);const NZ=kZ;var FZ=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xv=function(e){function i(t){var n=e.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})||this;return n.matrixIds_=t.matrixIds,n}return FZ(i,e),i.prototype.getMatrixId=function(t){return this.matrixIds_[t]},i.prototype.getMatrixIds=function(){return this.matrixIds_},i}(zh);const UZ=Xv;var qZ=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),GZ=function(e){function i(t){var r=t||{},a=void 0!==r.projection?r.projection:"EPSG:3857",s=void 0!==r.tileGrid?r.tileGrid:function Fb(e){var i=e||{},t=i.extent||St("EPSG:3857").getExtent(),n={extent:t,minZoom:i.minZoom,tileSize:i.tileSize,resolutions:jp(t,i.maxZoom,i.tileSize,i.maxResolution)};return new zh(n)}({extent:Yh(a),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,imageSmoothing:r.imageSmoothing,opaque:r.opaque,projection:a,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return qZ(i,e),i}($s);const jZ=GZ;class zZ extends Ko{}class YZ extends Ko{}let ld=(()=>{class e{constructor(t){this.mapService=t,this.layers={},this.layerOrder=[]}initialize(){this.layers={},this.layerOrder=[]}getLayer(t){return this.layers[t]}hasLayer(t){return!!this.layers[t]}get LayerCount(){return this.layerOrder.length||0}getIdentifyLayers(){const t=[];return this.layerOrder.map(n=>{n.identify&&t.push(this.layers[n.id])}),t.filter(n=>n.isVisible())}hasLayerVisible(){return Object.values(this.layers).some(t=>t.isVisible())}getVisibleLayers(){return this.layerOrder.map(t=>this.layers[t.id]).filter(t=>t.isVisible())}addLayer(t,n){if(this.layers[t])return console.log("El id ya existe"),t;let r;if("WMTS"===n.type){const s=JSON.parse(n.options),l=new Xs({opacity:n.opacity,source:new NZ({attributions:n.attribution,url:n.server,layer:n.service,matrixSet:s.matrixset,format:s.format,projection:s.projection,tileGrid:new UZ({origin:s.grid.origin,resolutions:s.grid.resolutions,matrixIds:s.grid.matrixIds}),style:s.style,wrapX:!0}),extent:s.extent});r=new zZ(n.title,l,n.legend)}else r="XYZ"===n.type?new YZ(n.title,new Xs({source:new jZ({url:n.server,crossOrigin:null,projection:n.options})}),n.attribution):ta.createWmsLayer(n.title,"TILE"===n.type?Ei.TILE:Ei.IMAGE,"geoserver",n.server,n.service,n.legend,n.attribution);return r.setId(t),this.layers[t]=r,this.mapService.addLayer(r),this.layerOrder.push({id:t,identify:n.hasIdentify}),r.Layer.setZIndex(n.zIndex),t}removeLayer(t){if(!this.layers[t])return console.log("El id no existe"),!1;const n=this.layerOrder.findIndex(r=>r.id===t);return delete this.layers[t],this.layerOrder=[...this.layerOrder.slice(0,n),...this.layerOrder.slice(n+1)],this.mapService.removeLayer(t),!0}setOpacity(t,n){return this.layers[t]?(this.layers[t].setOpacity(n),!0):(console.log("El id no existe"),!1)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG($t))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ae=Y(4004),HZ=Y(262),$v=Y(9646),Mr=Y(8502),U=Y(2340),En=Y(520),Te=Y(9291);let BZ=(()=>{class e extends Mr.t{constructor(t,n,r){super(t,n,r)}getStatistic(t,n,r){return this.post(`${U.N.constants.API_URL}/graph/${t}/${r.hasBar?"bar":"pie"}`,{service:n,graphOptions:r}).pipe((0,ae.U)(s=>Array.isArray(s)?s.map(l=>({title:l.title,chartColors:l.chartColors,chartData:l.chartData,chartLabels:l.chartLabels,total:l.total,extraData:l.extraData})):{message:s}),(0,HZ.K)(s=>(0,$v.of)({message:"Server Error"===s.message?"Error al conectar con API":s.message})))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var cd=Y(2368),VZ=Y(8029),WZ=Y(773);function JZ(e,i){if(1&e&&(o.TgZ(0,"div"),o._UZ(1,"div",8),o.qZA()),2&e){const t=o.oxw(2);o.xp6(1),o.Akn(t.color)}}function XZ(e,i){if(1&e&&o._UZ(0,"img",9),2&e){const t=o.oxw(2);o.Q6J("src",t.getIcon(),o.LSH)}}function $Z(e,i){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,JZ,2,2,"div",6),o.YNc(2,XZ,1,1,"ng-template",null,7,o.W1O),o.qZA()),2&e){const t=o.MAs(3),n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.isHex(n.contenido))("ngIfElse",t)}}function QZ(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"span",23),o.NdJ("click",function(){o.CHM(t);const r=o.oxw(2);return r.openChart(r.contenido)}),o._UZ(1,"img",24),o.qZA()}}function KZ(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"span",25),o.TgZ(1,"button",26),o.NdJ("click",function(){o.CHM(t);const r=o.oxw(2);return r.navigateToLayer(r.contenido)}),o.O4$(),o.TgZ(2,"svg",27),o._UZ(3,"circle",28),o._UZ(4,"path",29),o._UZ(5,"path",30),o._UZ(6,"path",31),o._UZ(7,"path",32),o.qZA(),o.qZA(),o.qZA()}}function tL(e,i){1&e&&(o.TgZ(0,"span"),o._UZ(1,"mat-spinner",34),o.qZA()),2&e&&(o.xp6(1),o.Q6J("diameter",20))}function eL(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-icon",35),o.NdJ("click",function(){o.CHM(t);const r=o.oxw(3);return r.refreshData(r.contenido)}),o._uU(1,"refresh"),o.qZA()}}function nL(e,i){if(1&e&&(o.TgZ(0,"span",25),o.YNc(1,tL,2,1,"span",6),o.YNc(2,eL,2,0,"ng-template",null,33,o.W1O),o.qZA()),2&e){const t=o.MAs(3),n=o.oxw(2);o.xp6(1),o.Q6J("ngIf",n.isRefreshing)("ngIfElse",t)}}function iL(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",10),o.TgZ(1,"div",11),o.TgZ(2,"label",12),o._uU(3," Opacidad "),o.qZA(),o.TgZ(4,"span",13),o._uU(5),o.ALo(6,"number"),o.qZA(),o.TgZ(7,"div",14),o.TgZ(8,"mat-slider",15,16),o.NdJ("change",function(r){o.CHM(t);const a=o.oxw();return a.updateOpacity(a.contenido,r.value)})("input",function(r){o.CHM(t);const a=o.oxw();return a.updateOpacity(a.contenido,r.value)}),o.qZA(),o.YNc(10,QZ,2,0,"span",17),o.YNc(11,KZ,8,0,"span",18),o.YNc(12,nL,4,2,"span",18),o.qZA(),o.qZA(),o.TgZ(13,"div",19),o.TgZ(14,"div",20),o.TgZ(15,"span",21),o._uU(16," Simbolog\xeda "),o.qZA(),o.qZA(),o._UZ(17,"img",22),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(5),o.hij(" ",o.xi3(6,6,100*t.opacity,"1.0-0"),"% "),o.xp6(3),o.Q6J("value",t.opacity),o.xp6(2),o.Q6J("ngIf",t.contenido.getLayerData().graphOptions.canGraph),o.xp6(1),o.Q6J("ngIf",t.contenido.IsActive&&"Google Satellite Imagery"!==t.contenido.getLayerData().title),o.xp6(1),o.Q6J("ngIf",t.contenido.getLayerData().refreshOption.canRefresh),o.xp6(5),o.Q6J("src",t.simbology,o.LSH)}}let rL=(()=>{class e{constructor(t,n,r,a,s){this.dialog=t,this.layerService=n,this.graphService=r,this.tocService=a,this.mapService=s,this.showDetails=!1,this.simbology="",this.opacity=1,this.isRefreshing=!1,this.color=""}ngOnInit(){this.showDetails=!1,this.opacity=this.contenido.getLayerData().opacity}toggleDetails(t){t.isLayer&&(this.simbology=t.getLayerData().legend,this.showDetails=!this.showDetails)}toggle(t){if(t.toggleActiveStatus(),t.isLayer){const n=t.getLayerData();t.isActive?(this.layerService.addLayer(n.id,n),this.updateOpacity(t,this.opacity)):this.layerService.removeLayer(n.id)}}updateOpacity(t,n){this.opacity=n;const r=t.getLayerData();t.isActive&&this.layerService.setOpacity(r.id,this.opacity)}openChart(t){var n=this;return se(function*(){const r=t.getLayerData();n.graphService.getStatistic(r.id,r.service,r.graphOptions).subscribe(a=>{const s=new ct.vA;if(s.disableClose=!0,s.autoFocus=!0,s.width="60vw",s.data=a,s.data.title=t.title,s.data.isGraphBar=r.graphOptions.hasBar,s.data.selectData=[],Array.isArray(a))for(let l=0;l<a.length;l++)s.data.selectData.push({view:a[l].title,value:l});n.dialog.open(ZZ,s)})})()}refreshData(t){var n=this;return se(function*(){n.isRefreshing=!0;const r=t.getLayerData();n.tocService.updateDataTocLayer(r.refreshOption).subscribe(a=>{alert(a?"Datos actualizados con \xe9xito":"No se pudo actualizar datos"),n.isRefreshing=!1},a=>{alert(a),n.isRefreshing=!1})})()}isHex(t){let n=!1;if(t.isLayer){const r=t.getLayerData().color;"#"===r[0]?(n=!0,this.color=`background-color: ${r};`):this.color=r}return n}hasColorProperty(t){let n=!1;return t.isLayer&&null!==t.getLayerData().color&&(n=!0),n}getIcon(){return`assets/icons/layer/${this.color}`}navigateToLayer(t){const n=t.getLayerData(),r=[];fetch(`${n.server}?service=WMS&version=1.1.1&request=GetCapabilities&format=text/xml`).then(s=>s.text()).then(s=>{var l,c,h,u;let f=(new DOMParser).parseFromString(s,"application/xml");const p=Array.from(f.querySelectorAll("Layer Layer")).find(g=>{var _;return(null===(_=g.querySelector("Name"))||void 0===_?void 0:_.textContent)===n.service.split(":")[1]});p&&p.querySelector("BoundingBox")&&(r.push(Number(null===(l=p.querySelector("BoundingBox"))||void 0===l?void 0:l.getAttribute("minx"))),r.push(Number(null===(c=p.querySelector("BoundingBox"))||void 0===c?void 0:c.getAttribute("miny"))),r.push(Number(null===(h=p.querySelector("BoundingBox"))||void 0===h?void 0:h.getAttribute("maxx"))),r.push(Number(null===(u=p.querySelector("BoundingBox"))||void 0===u?void 0:u.getAttribute("maxy")))),4===r.length&&this.mapService.getMapById(this.mapService.default).moveTo(r,!0)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.uw),o.Y36(ld),o.Y36(BZ),o.Y36(su.I),o.Y36($t))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-layer-item"]],inputs:{contenido:"contenido"},decls:8,vars:5,consts:[[1,"item"],["color","primary",1,"clickable",3,"click"],[4,"ngIf"],[1,"noselect","clickable","layer-label",3,"click"],[3,"checked","change"],["class","item item-details",4,"ngIf"],[4,"ngIf","ngIfElse"],["hasIcon",""],[1,"color"],["alt","capa",1,"icon-layer",3,"src"],[1,"item","item-details"],[1,"layer-opacity"],["for","opacity-slider",1,"opacity-slider-label"],[1,"opacity-slider-legend"],[1,"opacity-content"],["id","opacity-slider","min","0","max","1","step","0.01","color","warn",3,"value","change","input"],["oslider",""],["class","chart-icon",3,"click",4,"ngIf"],["class","chart-icon",4,"ngIf"],[1,"layer-simbology"],[1,"simbology-header"],[1,"simbology-legend"],["alt","simbology",3,"src"],[1,"chart-icon",3,"click"],["src","assets/icons/grafica.svg","alt","Gr\xe1fica","height","20","width","20"],[1,"chart-icon"],["matTooltip","Zoom a capa",1,"refresh-icon","extend-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","y","0px","viewBox","0 0 18 18"],["cx","9","cy","9","r","2.5"],["d","M5.8,0H1.2C0.5,0,0,0.5,0,1.2v4.7C0,6.5,0.5,7,1.2,7c0.6,0,1.2-0.5,1.2-1.2V2.3h3.5C6.5,2.3,7,1.8,7,1.2\n                C7,0.5,6.5,0,5.8,0z"],["d","M18,5.8V1.2C18,0.5,17.5,0,16.8,0h-4.7C11.5,0,11,0.5,11,1.2c0,0.6,0.5,1.2,1.2,1.2h3.5v3.5\n                c0,0.6,0.5,1.2,1.2,1.2C17.5,7,18,6.5,18,5.8z"],["d","M12.2,18h4.7c0.6,0,1.2-0.5,1.2-1.2v-4.7c0-0.6-0.5-1.2-1.2-1.2c-0.6,0-1.2,0.5-1.2,1.2v3.5h-3.5\n                c-0.6,0-1.2,0.5-1.2,1.2S11.5,18,12.2,18z"],["d","M0,12.2v4.7C0,17.5,0.5,18,1.2,18h4.7C6.5,18,7,17.5,7,16.8c0-0.6-0.5-1.2-1.2-1.2H2.3v-3.5\n                c0-0.6-0.5-1.2-1.2-1.2C0.5,11,0,11.5,0,12.2z"],["canRefresh",""],[3,"diameter"],["matTooltip","Refrescar datos",1,"refresh-icon",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-icon",1),o.NdJ("click",function(){return n.toggleDetails(n.contenido)}),o._uU(2),o.qZA(),o.YNc(3,$Z,4,2,"div",2),o.TgZ(4,"span",3),o.NdJ("click",function(){return n.toggleDetails(n.contenido)}),o._uU(5),o.qZA(),o.TgZ(6,"mat-slide-toggle",4),o.NdJ("change",function(){return n.toggle(n.contenido)}),o.qZA(),o.qZA(),o.YNc(7,iL,18,9,"div",5)),2&t&&(o.xp6(2),o.hij(" ",n.showDetails?"remove_circle":"add_circle"," "),o.xp6(1),o.Q6J("ngIf",n.hasColorProperty(n.contenido)),o.xp6(2),o.hij(" ",n.contenido.title," "),o.xp6(1),o.Q6J("checked",n.contenido.isActive),o.xp6(1),o.Q6J("ngIf",n.showDetails))},directives:[ce.Hw,B.O5,cd.Rr,VZ.pH,Gi.gM,WZ.$g],pipes:[B.JJ],styles:[".item[_ngcontent-%COMP%]{width:100%;padding:5px 0 3px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.item[_ngcontent-%COMP%]   .layer-label[_ngcontent-%COMP%]{flex:1;padding:0 0 0 12px;cursor:pointer;font:700 12px Roboto}.item.item-details[_ngcontent-%COMP%]{flex-direction:column}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]{width:100%;height:48px}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]   .opacity-slider-label[_ngcontent-%COMP%]{margin-left:8px;font-size:12px}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]   .opacity-slider-legend[_ngcontent-%COMP%]{font-size:12px}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]   .opacity-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]   .opacity-content[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{position:relative;top:-20px;width:80%;align-self:flex-start}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]   .opacity-content[_ngcontent-%COMP%]   .chart-icon[_ngcontent-%COMP%]{margin-top:-10px;margin-left:10px;cursor:pointer}.item.item-details[_ngcontent-%COMP%]   .layer-opacity[_ngcontent-%COMP%]   .opacity-content[_ngcontent-%COMP%]   .refresh-icon[_ngcontent-%COMP%]{color:#b51e1c}.item.item-details[_ngcontent-%COMP%]   .layer-simbology[_ngcontent-%COMP%]{width:300px;display:flex;flex-direction:column;align-items:flex-start;padding:8px}.item.item-details[_ngcontent-%COMP%]   .layer-simbology[_ngcontent-%COMP%]   .simbology-header[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;justify-content:space-between}.item.item-details[_ngcontent-%COMP%]   .layer-simbology[_ngcontent-%COMP%]   .simbology-header[_ngcontent-%COMP%]   .simbology-legend[_ngcontent-%COMP%]{align-self:flex-start}.item.item-details[_ngcontent-%COMP%]   .layer-simbology[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:290px}.color[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:12px}.icon-layer[_ngcontent-%COMP%]{height:20px;width:20px;margin-left:10px}.extend-button[_ngcontent-%COMP%]{background:none;width:24px;height:24px;border:none;display:flex;justify-content:space-between;align-items:center}.extend-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;fill:#727e84;pointer-events:none}.extend-button[_ngcontent-%COMP%]:focus{outline:none}"]}),e})();function oL(e,i){if(1&e&&o._UZ(0,"img",6),2&e){const t=o.oxw(2);o.Q6J("src",t.getIcon(t.group.icon),o.LSH)}}function aL(e,i){1&e&&o._UZ(0,"sic-group-item",7),2&e&&o.Q6J("group",i.$implicit)}function sL(e,i){if(1&e&&(o.TgZ(0,"mat-expansion-panel",2),o.TgZ(1,"mat-expansion-panel-header"),o.TgZ(2,"mat-panel-title"),o.YNc(3,oL,1,1,"img",3),o.TgZ(4,"span",4),o._uU(5),o.qZA(),o.qZA(),o.qZA(),o.YNc(6,aL,1,1,"sic-group-item",5),o.qZA()),2&e){const t=o.oxw();o.xp6(3),o.Q6J("ngIf",""!=t.group.icon),o.xp6(2),o.hij(" ",t.group.title," "),o.xp6(1),o.Q6J("ngForOf",t.group.children)}}function lL(e,i){if(1&e&&o._UZ(0,"sic-layer-item",8),2&e){const t=o.oxw();o.Q6J("contenido",t.group)}}let cL=(()=>{class e{constructor(){this.isLayer=!1}ngOnInit(){this.isLayer=this.group.IsLayer}getIcon(t){return`assets/icons/group/${t}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-group-item"]],inputs:{group:"group"},decls:3,vars:2,consts:[["class","rollo",4,"ngIf","ngIfElse"],["layerIs",""],[1,"rollo"],["alt","grupo",3,"src",4,"ngIf"],[1,"group-label"],[3,"group",4,"ngFor","ngForOf"],["alt","grupo",3,"src"],[3,"group"],[3,"contenido"]],template:function(t,n){if(1&t&&(o.YNc(0,sL,7,3,"mat-expansion-panel",0),o.YNc(1,lL,1,1,"ng-template",null,1,o.W1O)),2&t){const r=o.MAs(2);o.Q6J("ngIf",!n.isLayer)("ngIfElse",r)}},directives:[B.O5,fl.ib,fl.yz,fl.yK,B.sg,e,rL],styles:["img[_ngcontent-%COMP%]{height:24px;width:24px;margin-right:10px}mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 12px}mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center}  .mat-expansion-panel-body{padding:0 10px 12px!important;background-color:#fff0}.rollo[_ngcontent-%COMP%]{margin-bottom:9px;background-color:#fffefe00}.group-label[_ngcontent-%COMP%]{flex:1;padding:0 0 0 12px;cursor:pointer}"]}),e})();function hL(e,i){1&e&&o._UZ(0,"sic-group-item",2),2&e&&o.Q6J("group",i.$implicit)}let uL=(()=>{class e extends class aS{setData(i){this.data=i}getData(){return this.data}}{constructor(t){super(),this.tocService=t,this.toc$=this.tocService.loadLayers()}ngOnInit(){}hide(){}show(){}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(su.I))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-table-of-content"]],features:[o.qOj],decls:3,vars:3,consts:[["multi","true"],[3,"group",4,"ngFor","ngForOf"],[3,"group"]],template:function(t,n){1&t&&(o.TgZ(0,"mat-accordion",0),o.YNc(1,hL,1,1,"sic-group-item",1),o.ALo(2,"async"),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngForOf",o.lcZ(2,1,n.toc$)))},directives:[fl.pp,B.sg,cL],pipes:[B.Ov],styles:["[_nghost-%COMP%]{padding:20px;flex:1 1 auto;background:transparent;border-radius:30%}"]}),e})();var dL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fL=function(e){function i(t){var n=e.call(this)||this;return n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?n.setGeometry(t):n.setProperties(t)),n}return dL(i,e),i.prototype.clone=function(){var t=new i(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},i.prototype.getGeometry=function(){return this.get(this.geometryName_)},i.prototype.getId=function(){return this.id_},i.prototype.getGeometryName=function(){return this.geometryName_},i.prototype.getStyle=function(){return this.style_},i.prototype.getStyleFunction=function(){return this.styleFunction_},i.prototype.handleGeometryChange_=function(){this.changed()},i.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Lt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=ft(t,"change",this.handleGeometryChange_,this)),this.changed()},i.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},i.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function pL(e){return"function"==typeof e?e:(Array.isArray(e)?i=e:(ut("function"==typeof e.getZIndex,41),i=[e]),function(){return i});var i}(t):void 0,this.changed()},i.prototype.setId=function(t){this.id_=t,this.changed()},i.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},i}(xn);const Wn=fL;var gL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_L=function(e){function i(t,n){var r=e.call(this)||this;return n&&!Array.isArray(t[0])?r.setFlatCoordinates(n,t):r.setCoordinates(t,n),r}return gL(i,e),i.prototype.appendPoint=function(t){this.flatCoordinates?H(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){if(a<Xi(this.getExtent(),t,n))return a;for(var s=this.flatCoordinates,l=this.stride,c=0,h=s.length;c<h;c+=l){var u=Wi(t,n,s[c],s[c+1]);if(u<a){a=u;for(var d=0;d<l;++d)r[d]=s[c+d];r.length=l}}return a},i.prototype.getCoordinates=function(){return Ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getPoint=function(t){return t<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=t?null:new oi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},i.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,r=this.stride,a=[],s=0,l=t.length;s<l;s+=r){var c=new oi(t.slice(s,s+r),n);a.push(c)}return a},i.prototype.getType=function(){return"MultiPoint"},i.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,r=this.stride,a=0,s=n.length;a<s;a+=r)if(Rc(t,n[a],n[a+1]))return!0;return!1},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=js(this.flatCoordinates,0,t,this.stride),this.changed()},i}(Mi);const nc=_L;var vL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yL=function(e){function i(t,n,r){var a=e.call(this)||this;if(a.endss_=[],a.flatInteriorPointsRevision_=-1,a.flatInteriorPoints_=null,a.maxDelta_=-1,a.maxDeltaRevision_=-1,a.orientedRevision_=-1,a.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){for(var s=a.getLayout(),l=t,c=[],h=[],u=0,d=l.length;u<d;++u){var f=l[u];0===u&&(s=f.getLayout());for(var p=c.length,g=f.getEnds(),_=0,m=g.length;_<m;++_)g[_]+=p;H(c,f.getFlatCoordinates()),h.push(g)}n=s,t=c,r=h}return void 0!==n&&r?(a.setFlatCoordinates(n,t),a.endss_=r):a.setCoordinates(t,n),a}return vL(i,e),i.prototype.appendPolygon=function(t){var n;if(this.flatCoordinates){var r=this.flatCoordinates.length;H(this.flatCoordinates,t.getFlatCoordinates());for(var a=0,s=(n=t.getEnds().slice()).length;a<s;++a)n[a]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();this.endss_.push(n),this.changed()},i.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),r=0;r<t;++r)n[r]=this.endss_[r].slice();var a=new i(this.flatCoordinates.slice(),this.layout,n);return a.applyProperties(this),a},i.prototype.closestPointXY=function(t,n,r,a){return a<Xi(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function l2(e,i,t,n,r){for(var a=0,s=t.length;a<s;++a){var l=t[a];r=vh(e,i,l,n,r),i=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function c2(e,i,t,n,r,a,s,l,c,h,u){for(var d=u||[NaN,NaN],f=0,p=t.length;f<p;++f){var g=t[f];h=xh(e,i,g,n,r,a,s,l,c,h,d),i=g[g.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,r,a))},i.prototype.containsXY=function(t,n){return function m2(e,i,t,n,r,a){if(0===t.length)return!1;for(var s=0,l=t.length;s<l;++s){var c=t[s];if(bh(e,i,c,n,r,a))return!0;i=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)},i.prototype.getArea=function(){return function u2(e,i,t,n){for(var r=0,a=0,s=t.length;a<s;++a){var l=t[a];r+=fp(e,i,l,n),i=l[l.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},i.prototype.getCoordinates=function(t){var n;return void 0!==t?xp(n=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):n=this.flatCoordinates,nh(n,0,this.endss_,this.stride)},i.prototype.getEndss=function(){return this.endss_},i.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function mL(e,i,t,n){for(var r=[],a=[1/0,1/0,-1/0,-1/0],s=0,l=t.length;s<l;++s){var c=t[s];a=of(e,i,c[0],n),r.push((a[0]+a[2])/2,(a[1]+a[3])/2),i=c[c.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function v2(e,i,t,n,r){for(var a=[],s=0,l=t.length;s<l;++s){var c=t[s];a=gp(e,i,c,n,r,2*s,a),i=c[c.length-1]}return a}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},i.prototype.getInteriorPoints=function(){return new nc(this.getFlatInteriorPoints().slice(),"XYM")},i.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function T2(e,i,t,n,r){for(var a=0,s=t.length;a<s;++a){var l=t[a];if(!yp(e,i,l,n,r))return!1;l.length&&(i=l[l.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=xp(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},i.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=function zy(e,i,t,n,r,a,s,l){for(var c=0,h=t.length;c<h;++c){var u=t[c],d=[];s=zf(e,i,u,n,r,a,s,d),l.push(d),i=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new i(n,"XY",r)},i.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var n;if(0===t)n=0;else{var r=this.endss_[t-1];n=r[r.length-1]}var a=this.endss_[t].slice(),s=a[a.length-1];if(0!==n)for(var l=0,c=a.length;l<c;++l)a[l]-=n;return new Wr(this.flatCoordinates.slice(n,s),this.layout,a)},i.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,r=this.endss_,a=[],s=0,l=0,c=r.length;l<c;++l){var h=r[l].slice(),u=h[h.length-1];if(0!==s)for(var d=0,f=h.length;d<f;++d)h[d]-=s;var p=new Wr(n.slice(s,u),t,h);a.push(p),s=u}return a},i.prototype.getType=function(){return"MultiPolygon"},i.prototype.intersectsExtent=function(t){return function C2(e,i,t,n,r){for(var a=0,s=t.length;a<s;++a){var l=t[a];if(mp(e,i,l,n,r))return!0;i=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=function h2(e,i,t,n,r){for(var a=r||[],s=0,l=0,c=t.length;l<c;++l){var h=Ch(e,i,t[l],n,a[s]);a[s++]=h,i=h[h.length-1]}return a.length=s,a}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var a=r[r.length-1];this.flatCoordinates.length=0===a.length?0:a[a.length-1]}this.changed()},i}(Mi);const hd=yL;function Qv(e,i,t,n,r,a,s){var l,c,h=(t-i)/n;if(1===h)l=i;else if(2===h)l=i,c=r;else if(0!==h){for(var u=e[i],d=e[i+1],f=0,p=[0],g=i+n;g<t;g+=n){var _=e[g],m=e[g+1];f+=Math.sqrt((_-u)*(_-u)+(m-d)*(m-d)),p.push(f),u=_,d=m}var v=r*f,y=function hs(e,i,t){for(var n,r,a=t||O,s=0,l=e.length,c=!1;s<l;)(r=+a(e[n=s+(l-s>>1)],i))<0?s=n+1:(l=n,c=!r);return c?s:~s}(p,v);y<0?(c=(v-p[-y-2])/(p[-y-1]-p[-y-2]),l=i+(-y-2)*n):l=i+y*n}var C=s>1?s:2,x=a||new Array(C);for(g=0;g<C;++g)x[g]=void 0===l?NaN:void 0===c?e[l+g]:Qn(e[l+g],e[l+n+g],c);return x}function ud(e,i,t,n,r,a){if(t==i)return null;var s;if(r<e[i+n-1])return a?((s=e.slice(i,i+n))[n-1]=r,s):null;if(e[t-1]<r)return a?((s=e.slice(t-n,t))[n-1]=r,s):null;if(r==e[i+n-1])return e.slice(i,i+n);for(var l=i/n,c=t/n;l<c;){var h=l+c>>1;r<e[(h+1)*n-1]?c=h:l=h+1}var u=e[l*n-1];if(r==u)return e.slice((l-1)*n,(l-1)*n+n);var f=(r-u)/(e[(l+1)*n-1]-u);s=[];for(var p=0;p<n-1;++p)s.push(Qn(e[(l-1)*n+p],e[l*n+p],f));return s.push(r),s}var CL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),bL=function(e){function i(t,n){var r=e.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(t[0])?r.setCoordinates(t,n):r.setFlatCoordinates(n,t),r}return CL(i,e),i.prototype.appendCoordinate=function(t){this.flatCoordinates?H(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){return a<Xi(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,r,a))},i.prototype.forEachSegment=function(t){return _p(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.getCoordinateAtM=function(t,n){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,void 0!==n&&n)},i.prototype.getCoordinates=function(){return Ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getCoordinateAt=function(t,n){return Qv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},i.prototype.getLength=function(){return sh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},i.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},i.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new i(n,"XY")},i.prototype.getType=function(){return"LineString"},i.prototype.intersectsExtent=function(t){return zs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=js(this.flatCoordinates,0,t,this.stride),this.changed()},i}(Mi);const wr=bL;var TL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ML=function(e){function i(t,n,r){var a=e.call(this)||this;if(a.ends_=[],a.maxDelta_=-1,a.maxDeltaRevision_=-1,Array.isArray(t[0]))a.setCoordinates(t,n);else if(void 0!==n&&r)a.setFlatCoordinates(n,t),a.ends_=r;else{for(var s=a.getLayout(),l=t,c=[],h=[],u=0,d=l.length;u<d;++u){var f=l[u];0===u&&(s=f.getLayout()),H(c,f.getFlatCoordinates()),h.push(c.length)}a.setFlatCoordinates(s,c),a.ends_=h}return a}return TL(i,e),i.prototype.appendLineString=function(t){this.flatCoordinates?H(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){return a<Xi(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vh(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xh(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,r,a))},i.prototype.getCoordinateAtM=function(t,n,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function xL(e,i,t,n,r,a,s){if(s)return ud(e,i,t[t.length-1],n,r,a);var l;if(r<e[n-1])return a?((l=e.slice(0,n))[n-1]=r,l):null;if(e[e.length-1]<r)return a?((l=e.slice(e.length-n))[n-1]=r,l):null;for(var c=0,h=t.length;c<h;++c){var u=t[c];if(i!=u){if(r<e[i+n-1])return null;if(r<=e[u-1])return ud(e,i,u,n,r,!1);i=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,void 0!==n&&n,void 0!==r&&r)},i.prototype.getCoordinates=function(){return Bo(this.flatCoordinates,0,this.ends_,this.stride)},i.prototype.getEnds=function(){return this.ends_},i.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new wr(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},i.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.ends_,r=this.layout,a=[],s=0,l=0,c=n.length;l<c;++l){var h=n[l],u=new wr(t.slice(s,h),r);a.push(u),s=h}return a},i.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,r=0,a=this.ends_,s=this.stride,l=0,c=a.length;l<c;++l){var h=a[l];H(t,Qv(n,r,h,s,.5)),r=h}return t},i.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=function jf(e,i,t,n,r,a,s,l){for(var c=0,h=t.length;c<h;++c){var u=t[c];s=Ns(e,i,u,n,r,a,s),l.push(s),i=u}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new i(n,"XY",r)},i.prototype.getType=function(){return"MultiLineString"},i.prototype.intersectsExtent=function(t){return function y2(e,i,t,n,r){for(var a=0,s=t.length;a<s;++a){if(zs(e,i,t[a],n,r))return!0;i=t[a]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},i.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ch(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},i}(Mi);const dd=ML;var wL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),PL=function(e){function i(t){var n=e.call(this)||this;return n.geometries_=t||null,n.changeEventsKeys_=[],n.listenGeometriesChange_(),n}return wL(i,e),i.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Lt),this.changeEventsKeys_.length=0},i.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,n=this.geometries_.length;t<n;++t)this.changeEventsKeys_.push(ft(this.geometries_[t],"change",this.changed,this))},i.prototype.clone=function(){var t=new i(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){if(a<Xi(this.getExtent(),t,n))return a;for(var s=this.geometries_,l=0,c=s.length;l<c;++l)a=s[l].closestPointXY(t,n,r,a);return a},i.prototype.containsXY=function(t,n){for(var r=this.geometries_,a=0,s=r.length;a<s;++a)if(r[a].containsXY(t,n))return!0;return!1},i.prototype.computeExtent=function(t){$i(t);for(var n=this.geometries_,r=0,a=n.length;r<a;++r)af(t,n[r].getExtent());return t},i.prototype.getGeometries=function(){return Kv(this.geometries_)},i.prototype.getGeometriesArray=function(){return this.geometries_},i.prototype.getGeometriesArrayRecursive=function(){for(var t=[],n=this.geometries_,r=0,a=n.length;r<a;++r)n[r].getType()===this.getType()?t=t.concat(n[r].getGeometriesArrayRecursive()):t.push(n[r]);return t},i.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var n=[],r=this.geometries_,a=!1,s=0,l=r.length;s<l;++s){var c=r[s],h=c.getSimplifiedGeometry(t);n.push(h),h!==c&&(a=!0)}if(a){var u=new i(null);return u.setGeometriesArray(n),u}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},i.prototype.getType=function(){return"GeometryCollection"},i.prototype.intersectsExtent=function(t){for(var n=this.geometries_,r=0,a=n.length;r<a;++r)if(n[r].intersectsExtent(t))return!0;return!1},i.prototype.isEmpty=function(){return 0===this.geometries_.length},i.prototype.rotate=function(t,n){for(var r=this.geometries_,a=0,s=r.length;a<s;++a)r[a].rotate(t,n);this.changed()},i.prototype.scale=function(t,n,r){var a=r;a||(a=je(this.getExtent()));for(var s=this.geometries_,l=0,c=s.length;l<c;++l)s[l].scale(t,n,a);this.changed()},i.prototype.setGeometries=function(t){this.setGeometriesArray(Kv(t))},i.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},i.prototype.applyTransform=function(t){for(var n=this.geometries_,r=0,a=n.length;r<a;++r)n[r].applyTransform(t);this.changed()},i.prototype.translate=function(t,n){for(var r=this.geometries_,a=0,s=r.length;a<s;++a)r[a].translate(t,n);this.changed()},i.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),e.prototype.disposeInternal.call(this)},i}(Kf);function Kv(e){for(var i=[],t=0,n=e.length;t<n;++t)i.push(e[t].clone());return i}const OL=PL;var SL=function(){function e(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return e.prototype.getReadOptions=function(i,t){var n;if(t){var r=t.dataProjection?St(t.dataProjection):this.readProjection(i);t.extent&&r&&r.getUnits()===tn.TILE_PIXELS&&(r=St(r)).setWorldExtent(t.extent),n={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(n)},e.prototype.adaptOptions=function(i){return dt({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},i)},e.prototype.getType=function(){return tt()},e.prototype.readFeature=function(i,t){return tt()},e.prototype.readFeatures=function(i,t){return tt()},e.prototype.readGeometry=function(i,t){return tt()},e.prototype.readProjection=function(i){return tt()},e.prototype.writeFeature=function(i,t){return tt()},e.prototype.writeFeatures=function(i,t){return tt()},e.prototype.writeGeometry=function(i,t){return tt()},e}();const AL=SL;function t0(e,i,t){var a,n=t?St(t.featureProjection):null,r=t?St(t.dataProjection):null;if(a=n&&r&&!ti(n,r)?(i?e.clone():e).transform(i?n:r,i?r:n):e,i&&t&&void 0!==t.decimals){var s=Math.pow(10,t.decimals);a===e&&(a=e.clone()),a.applyTransform(function(c){for(var h=0,u=c.length;h<u;++h)c[h]=Math.round(c[h]*s)/s;return c})}return a}var EL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),IL=function(e){function i(){return e.call(this)||this}return EL(i,e),i.prototype.getType=function(){return"json"},i.prototype.readFeature=function(t,n){return this.readFeatureFromObject(ic(t),this.getReadOptions(t,n))},i.prototype.readFeatures=function(t,n){return this.readFeaturesFromObject(ic(t),this.getReadOptions(t,n))},i.prototype.readFeatureFromObject=function(t,n){return tt()},i.prototype.readFeaturesFromObject=function(t,n){return tt()},i.prototype.readGeometry=function(t,n){return this.readGeometryFromObject(ic(t),this.getReadOptions(t,n))},i.prototype.readGeometryFromObject=function(t,n){return tt()},i.prototype.readProjection=function(t){return this.readProjectionFromObject(ic(t))},i.prototype.readProjectionFromObject=function(t){return tt()},i.prototype.writeFeature=function(t,n){return JSON.stringify(this.writeFeatureObject(t,n))},i.prototype.writeFeatureObject=function(t,n){return tt()},i.prototype.writeFeatures=function(t,n){return JSON.stringify(this.writeFeaturesObject(t,n))},i.prototype.writeFeaturesObject=function(t,n){return tt()},i.prototype.writeGeometry=function(t,n){return JSON.stringify(this.writeGeometryObject(t,n))},i.prototype.writeGeometryObject=function(t,n){return tt()},i}(AL);function ic(e){return"string"==typeof e?JSON.parse(e)||null:null!==e?e:null}const DL=IL;var RL=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ZL=function(e){function i(t){var n=this,r=t||{};return(n=e.call(this)||this).dataProjection=St(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(n.defaultFeatureProjection=St(r.featureProjection)),n.geometryName_=r.geometryName,n.extractGeometryName_=r.extractGeometryName,n.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],n}return RL(i,e),i.prototype.readFeatureFromObject=function(t,n){var r,a=fd((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,n),s=new Wn;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&s.setGeometryName(r.geometry_name),s.setGeometry(a),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s},i.prototype.readFeaturesFromObject=function(t,n){var a=null;if("FeatureCollection"===t.type){a=[];for(var l=t.features,c=0,h=l.length;c<h;++c)a.push(this.readFeatureFromObject(l[c],n))}else a=[this.readFeatureFromObject(t,n)];return a},i.prototype.readGeometryFromObject=function(t,n){return fd(t,n)},i.prototype.readProjectionFromObject=function(t){var r,n=t.crs;return n?"name"==n.type?r=St(n.properties.name):"EPSG"===n.type?r=St("EPSG:"+n.properties.code):ut(!1,36):r=this.dataProjection,r},i.prototype.writeFeatureObject=function(t,n){n=this.adaptOptions(n);var r={type:"Feature",geometry:null,properties:null},a=t.getId();if(void 0!==a&&(r.id=a),!t.hasProperties())return r;var s=t.getProperties(),l=t.getGeometry();return l&&(r.geometry=pd(l,n),delete s[t.getGeometryName()]),yn(s)||(r.properties=s),r},i.prototype.writeFeaturesObject=function(t,n){n=this.adaptOptions(n);for(var r=[],a=0,s=t.length;a<s;++a)r.push(this.writeFeatureObject(t[a],n));return{type:"FeatureCollection",features:r}},i.prototype.writeGeometryObject=function(t,n){return pd(t,this.adaptOptions(n))},i}(DL);function fd(e,i){if(!e)return null;var t;switch(e.type){case"Point":t=function kL(e){return new oi(e.coordinates)}(e);break;case"LineString":t=function NL(e){return new wr(e.coordinates)}(e);break;case"Polygon":t=function GL(e){return new Wr(e.coordinates)}(e);break;case"MultiPoint":t=function UL(e){return new nc(e.coordinates)}(e);break;case"MultiLineString":t=function FL(e){return new dd(e.coordinates)}(e);break;case"MultiPolygon":t=function qL(e){return new hd(e.coordinates)}(e);break;case"GeometryCollection":t=function LL(e,i){var t=e.geometries.map(function(n){return fd(n,i)});return new OL(t)}(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return t0(t,!1,i)}function pd(e,i){var n,t=(e=t0(e,!0,i)).getType();switch(t){case"Point":n=function VL(e,i){return{type:"Point",coordinates:e.getCoordinates()}}(e);break;case"LineString":n=function zL(e,i){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case"Polygon":n=function WL(e,i){var t;return i&&(t=i.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(t)}}(e,i);break;case"MultiPoint":n=function HL(e,i){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case"MultiLineString":n=function YL(e,i){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case"MultiPolygon":n=function BL(e,i){var t;return i&&(t=i.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(t)}}(e,i);break;case"GeometryCollection":n=function jL(e,i){var t=e.getGeometriesArray().map(function(n){var r=dt({},i);return delete r.featureProjection,pd(n,r)});return{type:"GeometryCollection",geometries:t}}(e,i);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+t)}return n}const gd=ZL;let ve=(()=>{class e{constructor(){}createFeature(t,n,r){let a;switch(n.type){case"MultiPolygon":a=new hd(n.coordinates,"XY");break;case"Polygon":a=new Wr(n.coordinates,"XY");break;case"Point":a=new oi(n.coordinates,"XY");break;case"MultiPoint":a=new nc(n.coordinates,"XY");break;case"LineString":a=new wr(n.coordinates,"XY");break;case"MultiLineString":a=new dd(n.coordinates,"XY");break;default:throw new Error("Geometria no soportada")}const s=new Wn(a);return s.setId(t+"."+ue()()),s.set("original",r,!0),s}parseFeatureGeometry2Geojson(t,n=32613){const r=new gd;return Object.assign(Object.assign({},r.writeGeometryObject(t.getGeometry())),{crs:{type:"name",properties:{name:`EPSG:${n}`}}})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),We=(()=>{class e extends Mr.t{constructor(t,n,r,a){super(t,n,r),this.featureService=a}getPredioAtPoint(t,n,r){return this.post(`${U.N.constants.API_URL}/catastro/predio`,{x:t,y:n,options:r}).pipe((0,ae.U)(a=>1===a.total?a.predios[0]:null))}getConstructionAtPoint(t,n){return this.post(`${U.N.constants.API_URL}/catastro/construction`,{x:t,y:n}).pipe((0,ae.U)(r=>1===r.total?r.construcciones[0]:null))}getNumeroExteriorAtPoint(t,n){return this.post(`${U.N.constants.API_URL}/catastro/numero-exterior`,{x:t,y:n}).pipe((0,ae.U)(r=>r.numerosExteriores.length>0?r.numerosExteriores[0]:null))}getHeading(t){return this.get(`${U.N.constants.API_URL}/catastro/predio/frente/${t}`)}getReferredHeading(t){return this.get(`${U.N.constants.API_URL}/catastro/predio/frente-referred/${t}`)}getManzanaAtPoint(t,n){return this.post(`${U.N.constants.API_URL}/catastro/manzana`,{x:t,y:n}).pipe((0,ae.U)(r=>1===r.total?r.manzanas[0]:null))}getColoniaAtPoint(t,n){return this.post(`${U.N.constants.API_URL}/catastro/colonia`,{x:t,y:n}).pipe((0,ae.U)(r=>1===r.total?r.colonias[0]:null))}getSectorAtPoint(t,n){return this.post(`${U.N.constants.API_URL}/catastro/sector`,{x:t,y:n}).pipe((0,ae.U)(r=>1===r.total?r.sector[0]:null))}getPredioByClave(t){return this.get(`${U.N.constants.API_URL}/catastro/predio/${t}`)}getPredioPlano(t){return this.get(`${U.N.constants.API_URL}/catastro/predio/${t}/plano`)}getReportPredioPlanoSimple(t){return this.post(`${U.N.constants.API_URL}/catastro/predio/plano-simple`,{printData:t})}getReportManzanaPlanoSimple(t){return this.post(`${U.N.constants.API_URL}/catastro/manzana/plano-simple`,{printData:t})}getReportPredioPlanoCertificado(t,n){return this.post(`${U.N.constants.API_URL}/catastro/predio/plano-certificado`,{printData:t,certificateData:n})}getReportManzanaPlanoCertificado(t,n){return this.post(`${U.N.constants.API_URL}/catastro/manzana/plano-certificado`,{printData:t,certificateData:n})}createFusion(t){return this.post(`${U.N.constants.API_URL}/catastro/fusion/generate`,{json:t})}applyFusion(t,n){return this.post(`${U.N.constants.API_URL}/catastro/fusion/apply`,{idFusion:t,idPredominante:n})}validateFusion(t){return this.post(`${U.N.constants.API_URL}/catastro/fusion/validate`,{claves:t})}validateFusionOwnerDebt(t){return this.post(`${U.N.constants.API_URL}/catastro/fusion/validate-owner-debt`,{claves:t})}getLinderos(t){return this.get(`${U.N.constants.API_URL}/catastro/division/linderos/${t}`)}deleteLinderos(t){return this.delete(`${U.N.constants.API_URL}/catastro/division/linderos/${t}`)}divideLindero(t){return this.post(`${U.N.constants.API_URL}/catastro/division/lindero`,{linderoData:t})}generateParalela(t){return this.post(`${U.N.constants.API_URL}/catastro/division/paralela`,{linderoData:t})}getParalelas(t){return this.get(`${U.N.constants.API_URL}/catastro/division/paralela/${t}`)}cleanPredioDivision(t){return this.delete(`${U.N.constants.API_URL}/catastro/division/clean/${t}`)}createDivision(t,n){return this.post(`${U.N.constants.API_URL}/catastro/division/generate`,{json:t,id:n})}applyDivision(t){return this.post(`${U.N.constants.API_URL}/catastro/division/apply`,{idDivision:t})}validateDivision(t){return this.post(`${U.N.constants.API_URL}/catastro/division/validate`,{claves:t})}alignLindero(t){return this.post(`${U.N.constants.API_URL}/catastro/division/align-lindero`,{idPredios:t})}splitConstructions(t){return this.post(`${U.N.constants.API_URL}/catastro/division/split-construction`,{idPredios:t})}getEditionLayers(){return this.get(`${U.N.constants.API_URL}/catastro/edition/layers`)}getEditionAttributes(t){return this.get(`${U.N.constants.API_URL}/catastro/edition/attribute/${t}`)}isValidClasificationConstruction(t){return this.get(`${U.N.constants.API_URL}/catastro/construction/${t}/is-valid`)}updateAttributes(t,n,r){const a=[];return n.map(s=>{a.push({idAttribute:s.idAttribute,idLayer:s.idLayer,attributeName:s.attributeName,attributeShow:s.attributeShow,hasCatalogue:s.hasCatalogue,queryCatalogue:s.queryCatalogue,catalogue:[],value:s.value,attributeType:s.attributeType})}),this.put(`${U.N.constants.API_URL}/catastro/edition/attribute/`,{layer:t,attributes:a,id:r})}getObjectAtPoint(t,n,r,a){const s=[];return n.map(l=>{s.push({idAttribute:l.idAttribute,idLayer:l.idLayer,attributeName:l.attributeName,attributeShow:l.attributeShow,hasCatalogue:l.hasCatalogue,queryCatalogue:l.queryCatalogue,catalogue:[],value:l.value,attributeType:l.attributeType})}),this.post(`${U.N.constants.API_URL}/catastro/object`,{layer:t,attributes:s,x:r,y:a}).pipe((0,ae.U)(l=>1===l.total?l.objects[0]:null))}deleteObjectById(t,n){const r=(new En.LE).append("idLayer",t.idLayer).append("schema",t.schema).append("name",t.name).append("layerName",t.layerName).append("idName",t.idName).append("canDelete",t.canDelete);return this.delete(`${U.N.constants.API_URL}/catastro/edition/${n}`,r)}getDeslindeReport(t){return this.get(`${U.N.constants.API_URL}/catastro/report/deslinde-catastral/${t}`)}addPredioCotaLegal(t){return this.post(`${U.N.constants.API_URL}/catastro/predio/cota-legal`,{idpredio:t})}getPredioInformationAtPoint(t,n){return this.post(`${U.N.constants.API_URL}/catastro/predio/information`,{x:t,y:n})}getFichaTecnicaReport(t,n){return this.get(`${U.N.constants.API_URL}/catastro/report/ficha/${t}/${n}`)}uploadGeometryKML(t,n,r,a){return this.post(`${U.N.constants.API_URL}/catastro/upload-kml`,{kml:t,name:n,description:r}).pipe((0,ae.U)(s=>s.map(l=>({id:l.id,name:l.name,description:l.description,user:l.user,fecha:l.fecha,geometry:l.geometry,feature:this.featureService.createFeature(a,l.geometry)}))))}getStreetViewTaking(t,n,r,a,s,l){return this.post(`${U.N.constants.API_URL}/catastro/street-view-taking`,{latitud:t,longitud:n,heading:r,pitch:a,zoom:s}).pipe((0,ae.U)(c=>({idCono:c.idCono,geometry:c.geometry,featureGeometry:this.featureService.createFeature(l,c.geometry),fuenteToma:c.fuenteToma,featureFuente:this.featureService.createFeature(l,c.fuenteToma),objetivoToma:c.objetivoToma,featureObjetivo:this.featureService.createFeature(l,c.objetivoToma),baseToma:c.baseToma,featureBase:this.featureService.createFeature(l,c.baseToma),extentGeom:c.extentGeom,featureExtent:this.featureService.createFeature(l,c.extentGeom),zoom:c.zoom,azimut:c.azimut,vertical:c.vertical,fecha:c.fecha,url:c.url,usuario:c.usuario,descripcion:c.descripcion})))}deleteStreetViewTaking(){return this.delete(`${U.N.constants.API_URL}/catastro/street-view-taking`)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0),o.LFG(ve))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Me=Y(2204);function JL(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",13),o.TgZ(1,"div",14),o.TgZ(2,"span",15),o._uU(3," Clave "),o.qZA(),o.TgZ(4,"span",16),o._uU(5),o.qZA(),o.qZA(),o._UZ(6,"hr"),o.TgZ(7,"div",14),o.TgZ(8,"span",15),o._uU(9," Ubicaci\xf3n "),o.qZA(),o.TgZ(10,"span",16),o._uU(11),o.qZA(),o.qZA(),o._UZ(12,"hr"),o.TgZ(13,"div",14),o.TgZ(14,"span",15),o._uU(15," N\xfamero exterior "),o.qZA(),o.TgZ(16,"span",16),o._uU(17),o.qZA(),o.qZA(),o._UZ(18,"hr"),o.TgZ(19,"div",14),o.TgZ(20,"span",15),o._uU(21," N\xfamero interior "),o.qZA(),o.TgZ(22,"span",16),o._uU(23),o.qZA(),o.qZA(),o._UZ(24,"hr"),o.TgZ(25,"div",14),o.TgZ(26,"span",15),o._uU(27," Propietario "),o.qZA(),o.TgZ(28,"span",16),o._uU(29),o.qZA(),o.qZA(),o._UZ(30,"hr"),o.TgZ(31,"button",17),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).getFichaReport(a.formattedClave,"urbano")}),o.TgZ(32,"mat-icon"),o._uU(33,"description"),o.qZA(),o._uU(34," Ficha t\xe9cnica "),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(5),o.hij(" ",t.formattedClave," "),o.xp6(6),o.hij(" ",t.ubicacion," "),o.xp6(6),o.hij(" ",t.numeroExterior," "),o.xp6(6),o.hij(" ",t.numeroInterior," "),o.xp6(6),o.hij(" ",t.propietario," ")}}function XL(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"span",11),o._uU(2," Urbano "),o.qZA(),o.YNc(3,JL,35,5,"div",12),o.qZA()),2&e){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.res.PredioUrbano)}}function $L(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",13),o.TgZ(1,"div",14),o.TgZ(2,"span",15),o._uU(3," Clave "),o.qZA(),o.TgZ(4,"span",16),o._uU(5),o.qZA(),o.qZA(),o._UZ(6,"hr"),o.TgZ(7,"div",14),o.TgZ(8,"span",15),o._uU(9," Ubicaci\xf3n "),o.qZA(),o.TgZ(10,"span",16),o._uU(11),o.qZA(),o.qZA(),o._UZ(12,"hr"),o.TgZ(13,"div",14),o.TgZ(14,"span",15),o._uU(15," N\xfamero exterior "),o.qZA(),o.TgZ(16,"span",16),o._uU(17),o.qZA(),o.qZA(),o._UZ(18,"hr"),o.TgZ(19,"div",14),o.TgZ(20,"span",15),o._uU(21," N\xfamero interior "),o.qZA(),o.TgZ(22,"span",16),o._uU(23),o.qZA(),o.qZA(),o._UZ(24,"hr"),o.TgZ(25,"div",14),o.TgZ(26,"span",15),o._uU(27," Propietario "),o.qZA(),o.TgZ(28,"span",16),o._uU(29),o.qZA(),o.qZA(),o._UZ(30,"hr"),o.TgZ(31,"button",17),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).getFichaReport(a.formattedClave,"up")}),o.TgZ(32,"mat-icon"),o._uU(33,"description"),o.qZA(),o._uU(34," Ficha t\xe9cnica "),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(5),o.hij(" ",t.formattedClave," "),o.xp6(6),o.hij(" ",t.ubicacion," "),o.xp6(6),o.hij(" ",t.numeroExterior," "),o.xp6(6),o.hij(" ",t.numeroInterior," "),o.xp6(6),o.hij(" ",t.propietario," ")}}function QL(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"span",11),o._uU(2," UP "),o.qZA(),o.YNc(3,$L,35,5,"div",12),o.qZA()),2&e){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.res.PredioUP)}}function KL(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",13),o.TgZ(1,"div",14),o.TgZ(2,"span",15),o._uU(3," Clave "),o.qZA(),o.TgZ(4,"span",16),o._uU(5),o.qZA(),o.qZA(),o._UZ(6,"hr"),o.TgZ(7,"div",14),o.TgZ(8,"span",15),o._uU(9," Ubicaci\xf3n "),o.qZA(),o.TgZ(10,"span",16),o._uU(11),o.qZA(),o.qZA(),o._UZ(12,"hr"),o.TgZ(13,"div",14),o.TgZ(14,"span",15),o._uU(15," N\xfamero exterior "),o.qZA(),o.TgZ(16,"span",16),o._uU(17),o.qZA(),o.qZA(),o._UZ(18,"hr"),o.TgZ(19,"div",14),o.TgZ(20,"span",15),o._uU(21," N\xfamero interior "),o.qZA(),o.TgZ(22,"span",16),o._uU(23),o.qZA(),o.qZA(),o._UZ(24,"hr"),o.TgZ(25,"div",14),o.TgZ(26,"span",15),o._uU(27," Propietario "),o.qZA(),o.TgZ(28,"span",16),o._uU(29),o.qZA(),o.qZA(),o._UZ(30,"hr"),o.TgZ(31,"button",17),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).getFichaReport(a.formattedClave,"rustico")}),o.TgZ(32,"mat-icon"),o._uU(33,"description"),o.qZA(),o._uU(34," Ficha t\xe9cnica "),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(5),o.hij(" ",t.formattedClave," "),o.xp6(6),o.hij(" ",t.ubicacion," "),o.xp6(6),o.hij(" ",t.numeroExterior," "),o.xp6(6),o.hij(" ",t.numeroInterior," "),o.xp6(6),o.hij(" ",t.propietario," ")}}function t4(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"span",11),o._uU(2," R\xfastico "),o.qZA(),o.YNc(3,KL,35,5,"div",12),o.qZA()),2&e){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.res.PredioRustico)}}function e4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",13),o.TgZ(1,"div",14),o.TgZ(2,"span",15),o._uU(3," Clave "),o.qZA(),o.TgZ(4,"span",16),o._uU(5),o.qZA(),o.qZA(),o._UZ(6,"hr"),o.TgZ(7,"div",14),o.TgZ(8,"span",15),o._uU(9," Ubicaci\xf3n "),o.qZA(),o.TgZ(10,"span",16),o._uU(11),o.qZA(),o.qZA(),o._UZ(12,"hr"),o.TgZ(13,"div",14),o.TgZ(14,"span",15),o._uU(15," N\xfamero exterior "),o.qZA(),o.TgZ(16,"span",16),o._uU(17),o.qZA(),o.qZA(),o._UZ(18,"hr"),o.TgZ(19,"div",14),o.TgZ(20,"span",15),o._uU(21," N\xfamero interior "),o.qZA(),o.TgZ(22,"span",16),o._uU(23),o.qZA(),o.qZA(),o._UZ(24,"hr"),o.TgZ(25,"div",14),o.TgZ(26,"span",15),o._uU(27," Propietario "),o.qZA(),o.TgZ(28,"span",16),o._uU(29),o.qZA(),o.qZA(),o._UZ(30,"hr"),o.TgZ(31,"button",17),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).getFichaReport(a.formattedClave,"parcela")}),o.TgZ(32,"mat-icon"),o._uU(33,"description"),o.qZA(),o._uU(34," Ficha t\xe9cnica "),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(5),o.hij(" ",t.formattedClave," "),o.xp6(6),o.hij(" ",t.ubicacion," "),o.xp6(6),o.hij(" ",t.numeroExterior," "),o.xp6(6),o.hij(" ",t.numeroInterior," "),o.xp6(6),o.hij(" ",t.propietario," ")}}function n4(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"span",11),o._uU(2," Parcela "),o.qZA(),o.YNc(3,e4,35,5,"div",12),o.qZA()),2&e){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.res.PredioParcela)}}let i4=(()=>{class e{constructor(t,n,r,a){this.dialogRef=t,this.res=n,this.dialog=r,this.catastroService=a,this.title="Predio",this.backdropMessage="Descargando ficha t\xe9cnica...",this.showLoading=!1}ngOnInit(){}callClose(){this.dialogRef.close(!0)}getFichaReport(t,n){this.showLoading=!0,this.catastroService.getFichaTecnicaReport(t,n).subscribe(r=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${r.uri}`,"_blank","noopener noreferrer")},r=>{console.log(r),this.showLoading=!1,window.alert(`No se pudo generar la ficha t\xe9cnica con la clave ${t}`)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36(ct.WI),o.Y36(ct.uw),o.Y36(We))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-predio-preview"]],decls:19,vars:7,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],[1,"dialog-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"identify-element-container"],[4,"ngIf"],[3,"backdropMessage","showingLoading"],[1,"feature-title"],["class","element-item",4,"ngFor","ngForOf"],[1,"element-item"],[1,"feature-content"],[1,"attribute-name"],[1,"attribute-value"],["mat-flat-button","","color","primary","matTooltip","Ficha t\xe9cnica",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-icon"),o._uU(3,"pageview"),o.qZA(),o.TgZ(4,"div",2),o.O4$(),o.TgZ(5,"svg",3),o._UZ(6,"path",4),o._UZ(7,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"span",6),o._uU(9),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return n.callClose()}),o.TgZ(11,"mat-icon"),o._uU(12," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",8),o.YNc(14,XL,4,1,"div",9),o.YNc(15,QL,4,1,"div",9),o.YNc(16,t4,4,1,"div",9),o.YNc(17,n4,4,1,"div",9),o.qZA(),o.qZA(),o._UZ(18,"sic-backdrop",10)),2&t&&(o.xp6(9),o.hij(" ",n.title," "),o.xp6(5),o.Q6J("ngIf",n.res.PredioUrbano.length>0),o.xp6(1),o.Q6J("ngIf",n.res.PredioUP.length>0),o.xp6(1),o.Q6J("ngIf",n.res.PredioRustico.length>0),o.xp6(1),o.Q6J("ngIf",n.res.PredioParcela.length>0),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,ce.Hw,Tt.Bh,Kt.lW,B.O5,Me.q,B.sg,Gi.gM],styles:[".dialog-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.identify-element-container[_ngcontent-%COMP%]{font-size:10pt;max-height:286px;width:300px;overflow-y:auto;margin-left:-10px}.identify-element-container[_ngcontent-%COMP%]   .element-item[_ngcontent-%COMP%]{margin-top:10px}.identify-element-container[_ngcontent-%COMP%]   .feature-content[_ngcontent-%COMP%]{overflow-wrap:break-word}.identify-element-container[_ngcontent-%COMP%]   .attribute-name[_ngcontent-%COMP%]{display:inline-block;width:80px;text-align:left;font-weight:700;overflow-wrap:break-word;vertical-align:top}.identify-element-container[_ngcontent-%COMP%]   .attribute-value[_ngcontent-%COMP%]{display:inline-block;width:150px;text-align:left;font-weight:400;margin-left:10px}.identify-element-container[_ngcontent-%COMP%]   .feature-title[_ngcontent-%COMP%]{display:block;width:98%;font-size:12pt;font-weight:700;padding:4px 110px;background-color:#b51e1c80}.identify-element-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:98%}@media screen and (min-width: 400px){.identify-element-container[_ngcontent-%COMP%]{width:280px}.identify-element-container[_ngcontent-%COMP%]   .attribute-name[_ngcontent-%COMP%]{width:98px}.identify-element-container[_ngcontent-%COMP%]   .attribute-value[_ngcontent-%COMP%]{width:154px}}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}"]}),e})();function o4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var a4=function e(i,t){if(i===t)return!0;if(i&&t&&"object"==typeof i&&"object"==typeof t){if(i.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(i)){if((n=i.length)!=t.length)return!1;for(r=n;0!=r--;)if(!e(i[r],t[r]))return!1;return!0}if(i.constructor===RegExp)return i.source===t.source&&i.flags===t.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===t.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===t.toString();if((n=(a=Object.keys(i)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!=r--;){var s=a[r];if(!e(i[s],t[s]))return!1}return!0}return i!=i&&t!=t},s4=o4(a4);const e0="__googleMapsScriptId";var Pr=(()=>(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(Pr||(Pr={})),Pr))();class Or{constructor({apiKey:i,authReferrerPolicy:t,channel:n,client:r,id:a=e0,language:s,libraries:l=[],mapIds:c,nonce:h,region:u,retries:d=3,url:f="https://maps.googleapis.com/maps/api/js",version:p}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=i,this.authReferrerPolicy=t,this.channel=n,this.client=r,this.id=a||e0,this.language=s,this.libraries=l,this.mapIds=c,this.nonce=h,this.region=u,this.retries=d,this.url=f,this.version=p,Or.instance){if(!s4(this.options,Or.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Or.instance.options)}`);return Or.instance}Or.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Pr.FAILURE:this.done?Pr.SUCCESS:this.loading?Pr.LOADING:Pr.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let i=this.url;return i+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(i+=`&key=${this.apiKey}`),this.channel&&(i+=`&channel=${this.channel}`),this.client&&(i+=`&client=${this.client}`),this.libraries.length>0&&(i+=`&libraries=${this.libraries.join(",")}`),this.language&&(i+=`&language=${this.language}`),this.region&&(i+=`&region=${this.region}`),this.version&&(i+=`&v=${this.version}`),this.mapIds&&(i+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(i+=`&auth_referrer_policy=${this.authReferrerPolicy}`),i}deleteScript(){const i=document.getElementById(this.id);i&&i.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((i,t)=>{this.loadCallback(n=>{n?t(n.error):i(window.google)})})}importLibrary(i){return this.execute(),google.maps.importLibrary(i)}loadCallback(i){this.callbacks.push(i),this.execute()}setScript(){var i,t;if(document.getElementById(this.id))return void this.callback();const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(a=>!n[a]&&delete n[a]),(null===(t=null===(i=null==window?void 0:window.google)||void 0===i?void 0:i.maps)||void 0===t?void 0:t.importLibrary)||(a=>{let s,l,c,h="The Google Maps JavaScript API",u="google",d="importLibrary",f="__ib__",p=document,g=window;g=g[u]||(g[u]={});const _=g.maps||(g.maps={}),m=new Set,v=new URLSearchParams,y=()=>s||(s=new Promise((C,x)=>function r4(e,i,t,n){return new(t||(t=Promise))(function(a,s){function l(u){try{h(n.next(u))}catch(d){s(d)}}function c(u){try{h(n.throw(u))}catch(d){s(d)}}function h(u){u.done?a(u.value):function r(a){return a instanceof t?a:new t(function(s){s(a)})}(u.value).then(l,c)}h((n=n.apply(e,i||[])).next())})}(this,void 0,void 0,function*(){var b;for(c in yield l=p.createElement("script"),l.id=this.id,v.set("libraries",[...m]+""),a)v.set(c.replace(/[A-Z]/g,T=>"_"+T[0].toLowerCase()),a[c]);v.set("callback",u+".maps."+f),l.src=this.url+"?"+v,_[f]=C,l.onerror=()=>s=x(Error(h+" could not load.")),l.nonce=this.nonce||(null===(b=p.querySelector("script[nonce]"))||void 0===b?void 0:b.nonce)||"",p.head.append(l)})));_[d]?console.warn(h+" only loads once. Ignoring:",a):_[d]=(C,...x)=>m.add(C)&&y().then(()=>_[d](C,...x))})(n);const r=this.libraries.map(a=>this.importLibrary(a));r.length||r.push(this.importLibrary("core")),Promise.all(r).then(()=>this.callback(),a=>{const s=new ErrorEvent("error",{error:a});this.loadErrorCallback(s)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(i){if(this.errors.push(i),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=i,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(i=>{i(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setScript())}}}var he=(()=>(function(e){e[e.LatLong=1]="LatLong",e[e.EPSG_3857=2]="EPSG_3857",e[e.EPSG_4326=3]="EPSG_4326",e[e.EPSG_6368=4]="EPSG_6368",e[e.EPSG_32613=5]="EPSG_32613",e[e.EPSG_6369=6]="EPSG_6369",e[e.EPSG_100000=7]="EPSG_100000"}(he||(he={})),he))();let rc=(()=>{class e{constructor(){}reproject(t,n,r){const a=au(this.getProjectionString(t),this.getProjectionString(n),r);return{x:a.x,y:a.y}}getProjectionString(t){switch(t){case he.LatLong:return"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs";case he.EPSG_3857:return"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs";case he.EPSG_4326:return"+proj=longlat +datum=WGS84 +no_defs";case he.EPSG_6368:return"+proj=utm +zone=13 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs";case he.EPSG_32613:return"+proj=utm +zone=13 +datum=WGS84 +units=m +no_defs";case he.EPSG_6369:return"+proj=utm +zone=14 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs";case he.EPSG_100000:return"+proj=lcc +lat_1=19.21666666000047 +lat_2=19.48333333000023 +lat_0=19.03333330000026 +lon_0=-99.1666666599984 +x_0=40031.5 +y_0=-53.5 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _d=Y(4128);let n0=(()=>{class e{constructor(t,n){this.layerService=t,this.http=n}identifyFeatures(t,n,r,a){const l=(a||this.layerService.getIdentifyLayers()).map(c=>{const h=c.Layer.getSource().getFeatureInfoUrl(t,n,r,{INFO_FORMAT:"application/json",FEATURE_COUNT:50});return{layer:c.Title,url:h}});return(0,_d.D)([...l.map(c=>this.http.get(c.url).pipe((0,ae.U)(h=>({name:c.layer,layers:h.features.map(u=>({id:u.id.split(".")[1],name:u.id.split(".")[0],properties:Object.entries(u.properties).map(([d,f])=>({value:f,key:d})),geometry:u.geometry}))}))))])}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(ld),o.LFG(En.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var i0=Y(7429);let r0=(()=>{class e{constructor(){this.status="close",this.portal$=new Nv.X(null)}registerPortalOutletComponent(t){if(!t)throw Error("PortalOutlet component no puede ser nulo");this.portalOutlet=t}open(t,n){if(this.status="open",!this.portalOutlet)throw Error("PortalOutlet no registrado");this.portalOutlet.hasAttached()&&this.portalOutlet.detach();const r={id:n.id?n.id:n.label+"."+ue()(),portal:new i0.C5(t),options:n};this.portal$.next(r),this.attachedPortal=this.portalOutlet.attach(r.portal),this.attachedPortal.instance.setData(n.data),this.attachedPortal.instance.show()}close(){if(this.status="close",!this.portalOutlet)throw Error("PortalHost no registrado");this.portalOutlet.hasAttached()&&(this.attachedPortal.instance.hide(),this.portalOutlet.detach()),this.attachedPortal=null,this.portal$.next(null)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l4=(()=>{class e extends Mr.t{constructor(t,n,r,a){super(t,n,r),this.featureService=a}search(t,n){const r=(new En.LE).append("filter",t);return this.get(`${U.N.constants.API_URL}/search`,r).pipe((0,ae.U)(a=>a.map(s=>({term:s.term,group:s.group,status:!0,total:s.items.length,content:s.items.map(l=>({type:s.term,display:l.display,data:l.data,feature:this.featureService.createFeature(n,l.data.geometry,l.data)}))}))))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0),o.LFG(ve))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c4=Y(8675),oc=Y(7531),ac=Y(3092);function h4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-icon",7),o.NdJ("click",function(){o.CHM(t);const r=o.oxw(),a=o.MAs(4);return r.doSearch(a.value)}),o._uU(1," search "),o.qZA()}}function u4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-icon",7),o.NdJ("click",function(){return o.CHM(t),o.oxw().clearSearch()}),o._uU(1," clear "),o.qZA()}}function d4(e,i){if(1&e&&(o.TgZ(0,"mat-option",8),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t.search," ")}}let f4=(()=>{class e{constructor(){this.myControl=new q.NI(""),this.activeSearch=!1,this.options=[],this.placeholder="Buscar...",this.search=new o.vpe}ngOnInit(){this.options=[],this.filteredOptions=this.myControl.valueChanges.pipe((0,c4.O)(null),(0,ae.U)(t=>t&&"object"==typeof t?t.search:t),(0,ae.U)(t=>t?this.filter(t):this.options.slice())),this.myControl.valueChanges.subscribe(t=>{"object"==typeof t&&this.doSearch(t.search)})}doSearchWithEvent(t){if(0!==this.myControl.value.length){if(!(t.keyCode>=48&&t.keyCode<=90||t.keyCode>=96&&t.keyCode<=105||13===t.keyCode||190===t.keyCode))return;this.activeSearch=!0,this.search.emit({value:this.myControl.value,keyCode:t.code})}}doSearch(t){0!==t.length&&(this.activeSearch=!0,this.search.emit({value:t,keyCode:null}))}clearSearch(){this.myControl.setValue(""),this.activeSearch=!1,this.search.emit({value:null,keyCode:null})}filter(t){return this.options.filter(n=>new RegExp(t,"gi").test(n.search))}displayFn(t){return t&&t.search}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-search-bar"]],inputs:{placeholder:"placeholder"},outputs:{search:"search"},decls:9,vars:9,consts:[[1,"search-bar-component"],["class","search-icon clickable",3,"click",4,"ngIf"],["type","text","name","search","matInput","",1,"search-input","mat-elevation-z2",3,"placeholder","formControl","matAutocomplete","keyup"],["searchForm",""],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"search-icon","clickable",3,"click"],[3,"value"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.YNc(1,h4,2,0,"mat-icon",1),o.YNc(2,u4,2,0,"mat-icon",1),o.TgZ(3,"input",2,3),o.NdJ("keyup",function(a){return n.doSearchWithEvent(a)}),o.qZA(),o.qZA(),o.TgZ(5,"mat-autocomplete",4,5),o.YNc(7,d4,2,2,"mat-option",6),o.ALo(8,"async"),o.qZA()),2&t){const r=o.MAs(6);o.xp6(1),o.Q6J("ngIf",!n.activeSearch),o.xp6(1),o.Q6J("ngIf",n.activeSearch),o.xp6(1),o.Q6J("placeholder",n.placeholder)("formControl",n.myControl)("matAutocomplete",r),o.xp6(2),o.Q6J("displayWith",n.displayFn),o.xp6(2),o.Q6J("ngForOf",o.lcZ(8,7,n.filteredOptions))}},directives:[B.O5,oc.Nt,q.Fj,ac.ZL,q.JJ,q.oH,ac.XC,B.sg,ce.Hw,tc.ey],pipes:[B.Ov],styles:["[_nghost-%COMP%]{position:absolute;top:80px;left:0;width:100%;max-width:420px!important;z-index:500;pointer-events:auto}.search-component[_ngcontent-%COMP%]{position:relative;width:100%;padding:0}.search-input[_ngcontent-%COMP%]{height:48px;margin:0;border:0;padding-left:16px;padding-right:32px;width:100%;background-color:#fff!important}.search-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:16px}"]}),e})();function p4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-icon",9),o.NdJ("click",function(){o.CHM(t);const r=o.oxw(),a=o.MAs(7);return r.doSearch(a.value)}),o._uU(1,"search"),o.qZA()}}function g4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"mat-icon",9),o.NdJ("click",function(){return o.CHM(t),o.oxw().clearSearch()}),o._uU(1,"clear"),o.qZA()}}function _4(e,i){if(1&e&&(o.TgZ(0,"mat-option",10),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t.search," ")}}let m4=(()=>{class e extends f4{constructor(){super(...arguments),this.menu=new o.vpe}ngOnInit(){}openMenu(){this.menu.emit("open")}}return e.\u0275fac=function(){let i;return function(n){return(i||(i=o.n5z(e)))(n||e)}}(),e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-menu-search-bar"]],outputs:{menu:"menu"},features:[o.qOj],decls:12,vars:9,consts:[[1,"search-bar-component"],[1,"menu-icon","clickable",3,"click"],[1,"separator"],["class","search-icon clickable",3,"click",4,"ngIf"],["type","text","name","search","matInput","",1,"search-input","mat-elevation-z2",3,"placeholder","formControl","matAutocomplete","keyup"],["searchform",""],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"search-icon","clickable",3,"click"],[3,"value"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-icon",1),o.NdJ("click",function(){return n.openMenu()}),o._uU(2,"menu"),o.qZA(),o._UZ(3,"div",2),o.YNc(4,p4,2,0,"mat-icon",3),o.YNc(5,g4,2,0,"mat-icon",3),o.TgZ(6,"input",4,5),o.NdJ("keyup",function(a){return n.doSearchWithEvent(a)}),o.qZA(),o.qZA(),o.TgZ(8,"mat-autocomplete",6,7),o.YNc(10,_4,2,2,"mat-option",8),o.ALo(11,"async"),o.qZA()),2&t){const r=o.MAs(9);o.xp6(4),o.Q6J("ngIf",!n.activeSearch),o.xp6(1),o.Q6J("ngIf",n.activeSearch),o.xp6(1),o.Q6J("placeholder",n.placeholder)("formControl",n.myControl)("matAutocomplete",r),o.xp6(2),o.Q6J("displayWith",n.displayFn),o.xp6(2),o.Q6J("ngForOf",o.lcZ(11,7,n.filteredOptions))}},directives:[ce.Hw,B.O5,oc.Nt,q.Fj,ac.ZL,q.JJ,q.oH,ac.XC,B.sg,tc.ey],pipes:[B.Ov],styles:["[_nghost-%COMP%]{position:absolute;top:80px;left:0;width:100%;max-width:420px!important;z-index:500;pointer-events:auto}[_nghost-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.search-component[_ngcontent-%COMP%]{position:relative;width:100%;padding:0}.search-input[_ngcontent-%COMP%]{height:48px;margin:0;border:0;border-radius:2px;padding-left:68px;padding-right:32px;width:100%;background-color:#fff!important}.search-icon[_ngcontent-%COMP%]{position:absolute;top:12px;right:16px}.menu-icon[_ngcontent-%COMP%]{position:absolute;top:12px;left:16px}.separator[_ngcontent-%COMP%]{position:absolute;left:56px;top:6px;width:1px;height:36px;background:#d7d7d7}"]}),e})();var In=Y(1777);const v4=["portalOutletContainer"];function y4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"header",5),o.TgZ(1,"button",6),o.NdJ("click",function(){return o.CHM(t),o.oxw().closePanel()}),o.TgZ(2,"mat-icon",7),o._uU(3," arrow_back "),o.qZA(),o.qZA(),o._UZ(4,"img",8),o.qZA()}}function x4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"header",9),o.TgZ(1,"mat-icon",7),o._uU(2," layers "),o.qZA(),o.TgZ(3,"span",10),o._uU(4),o.qZA(),o._UZ(5,"div",11),o.TgZ(6,"button",12),o.NdJ("click",function(){return o.CHM(t),o.oxw().closePanel()}),o.TgZ(7,"mat-icon",7),o._uU(8," close "),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(4),o.hij(" ",t.title," ")}}let C4=(()=>{class e{constructor(t,n,r,a){this.panelService=t,this.componentFactoryResolver=n,this.appRef=r,this.injector=a,this.state="open",this.header="small",this.title="Side panel"}ngOnInit(){this.portalOutlet=new i0.u0(this.portalOutletContainer.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),this.panelService.registerPortalOutletComponent(this.portalOutlet),this.panelService.portal$.subscribe(t=>{t?(this.header=t.options.headerSize,this.title=t.options.title,this.state="open"):(this.title="",this.state="close")})}closePanel(){this.panelService.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r0),o.Y36(o._Vd),o.Y36(o.z2F),o.Y36(o.zs3))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-side-panel"]],viewQuery:function(t,n){if(1&t&&o.Gf(v4,7),2&t){let r;o.iGM(r=o.CRH())&&(n.portalOutletContainer=r.first)}},decls:5,vars:3,consts:[[1,"panel","mat-elevation-z2"],["class","panel-header large-header",4,"ngIf"],["class","panel-header small-header",4,"ngIf"],[1,"portal-host"],["portalOutletContainer",""],[1,"panel-header","large-header"],["mat-icon-button","",1,"back-button",3,"click"],[1,"header-icon"],["src","","alt","SIMICEG"],[1,"panel-header","small-header"],[1,"panel-title"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.YNc(1,y4,5,0,"header",1),o.YNc(2,x4,9,1,"header",2),o._UZ(3,"div",3,4),o.qZA()),2&t&&(o.Q6J("@toggleSidePanel",n.state),o.xp6(1),o.Q6J("ngIf","large"==n.header),o.xp6(1),o.Q6J("ngIf","small"==n.header))},directives:[B.O5,Kt.lW,ce.Hw],styles:["[_nghost-%COMP%]{position:fixed;top:128px;left:0;bottom:0;width:95%;max-width:420px;pointer-events:none;z-index:999}.panel[_ngcontent-%COMP%]{background-color:#fff;width:420px!important;max-width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;pointer-events:auto}.panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{color:#fff;background-color:#b51e1c}.panel[_ngcontent-%COMP%]   .panel-header.large-header[_ngcontent-%COMP%]{height:148px;max-height:148px;min-height:148px;display:flex;justify-content:center;align-items:center;padding:15px}.panel[_ngcontent-%COMP%]   .panel-header.large-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px}.panel[_ngcontent-%COMP%]   .panel-header.large-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:144.7px;height:66.5}.panel[_ngcontent-%COMP%]   .panel-header.small-header[_ngcontent-%COMP%]{height:50px;max-height:50px;min-height:50px;padding:5px 10px;display:flex;flex-direction:row;align-items:center}.panel[_ngcontent-%COMP%]   .panel-header.small-header[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{padding-left:15px;color:#fff;font-size:14pt;margin-right:auto}.panel[_ngcontent-%COMP%]   .portal-host[_ngcontent-%COMP%]{flex:1 1 auto;overflow:auto;display:flex;flex-direction:column;scrollbar-width:thin}.header-icon[_ngcontent-%COMP%]{color:#fff}"],data:{animation:[(0,In.X$)("toggleSidePanel",[(0,In.SB)("open",(0,In.oB)({width:"360px","max-width":"100%",display:"flex"})),(0,In.SB)("close",(0,In.oB)({width:"0px","max-width":"0px",display:"flex",visibility:"hidden"})),(0,In.eR)("open => close",(0,In.jt)("150ms ease-in",(0,In.oB)({width:"0px",visibility:"hidden"}))),(0,In.eR)("close => open",(0,In.jt)("150ms ease-in",(0,In.oB)({width:"360px","max-width":"100%",visibility:"unset"})))])]}}),e})();var b4=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),T4=function(e){function i(t){var n=e.call(this)||this;n.options=t,n.id=t.id,n.insertFirst=void 0===t.insertFirst||t.insertFirst,n.stopEvent=void 0===t.stopEvent||t.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",n.element.style.position="absolute",n.element.style.pointerEvents="auto";var r=t.autoPan;return r&&"object"!=typeof r&&(r={animation:t.autoPanAnimation,margin:t.autoPanMargin}),n.autoPan=r||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener("element",n.handleElementChanged),n.addChangeListener("map",n.handleMapChanged),n.addChangeListener("offset",n.handleOffsetChanged),n.addChangeListener("position",n.handlePositionChanged),n.addChangeListener("positioning",n.handlePositioningChanged),void 0!==t.element&&n.setElement(t.element),n.setOffset(void 0!==t.offset?t.offset:[0,0]),n.setPositioning(void 0!==t.positioning?t.positioning:"top-left"),void 0!==t.position&&n.setPosition(t.position),n}return b4(i,e),i.prototype.getElement=function(){return this.get("element")},i.prototype.getId=function(){return this.id},i.prototype.getMap=function(){return this.get("map")},i.prototype.getOffset=function(){return this.get("offset")},i.prototype.getPosition=function(){return this.get("position")},i.prototype.getPositioning=function(){return this.get("positioning")},i.prototype.handleElementChanged=function(){Wd(this.element);var t=this.getElement();t&&this.element.appendChild(t)},i.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(ps(this.element),Lt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=ft(t,"postrender",this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}},i.prototype.render=function(){this.updatePixelPosition()},i.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},i.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},i.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},i.prototype.setElement=function(t){this.set("element",t)},i.prototype.setMap=function(t){this.set("map",t)},i.prototype.setOffset=function(t){this.set("offset",t)},i.prototype.setPosition=function(t){this.set("position",t)},i.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},i.prototype.panIntoView=function(t){var n=this.getMap();if(n&&n.getTargetElement()&&this.get("position")){var r=this.getRect(n.getTargetElement(),n.getSize()),a=this.getElement(),s=this.getRect(a,[t1(a),e1(a)]),l=t||{},c=void 0===l.margin?20:l.margin;if(!Kn(r,s)){var h=s[0]-r[0],u=r[2]-s[2],d=s[1]-r[1],f=r[3]-s[3],p=[0,0];if(h<0?p[0]=h-c:u<0&&(p[0]=Math.abs(u)+c),d<0?p[1]=d-c:f<0&&(p[1]=Math.abs(f)+c),0!==p[0]||0!==p[1]){var g=n.getView().getCenterInternal(),_=n.getPixelFromCoordinateInternal(g);if(!_)return;var m=[_[0]+p[0],_[1]+p[1]],v=l.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(m),duration:v.duration,easing:v.easing})}}}},i.prototype.getRect=function(t,n){var r=t.getBoundingClientRect(),a=r.left+window.pageXOffset,s=r.top+window.pageYOffset;return[a,s,a+n[0],s+n[1]]},i.prototype.setPositioning=function(t){this.set("positioning",t)},i.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},i.prototype.updatePixelPosition=function(){var t=this.getMap(),n=this.getPosition();if(t&&t.isRendered()&&n){var r=t.getPixelFromCoordinate(n),a=t.getSize();this.updateRenderedPosition(r,a)}else this.setVisible(!1)},i.prototype.updateRenderedPosition=function(t,n){var r=this.element.style,a=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var h="0%",u="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?h="-100%":("bottom-center"==s||"center-center"==s||"top-center"==s)&&(h="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?u="-100%":("center-left"==s||"center-center"==s||"center-right"==s)&&(u="-50%");var d="translate("+h+", "+u+") translate("+(Math.round(t[0]+a[0])+"px")+", "+(Math.round(t[1]+a[1])+"px")+")";this.rendered.transform_!=d&&(this.rendered.transform_=d,r.transform=d,r.msTransform=d)},i.prototype.getOptions=function(){return this.options},i}(xn);const md=T4;function M4(e,i){if(1&e&&(o.TgZ(0,"div",2),o.TgZ(1,"span",3),o._uU(2),o.qZA(),o.TgZ(3,"span",4),o._uU(4),o.qZA(),o.qZA()),2&e){const t=i.$implicit,n=o.oxw();o.xp6(2),o.hij(" ",n.filterKey(t.key)," "),o.xp6(2),o.hij(" ",t.value," ")}}let w4=(()=>{class e{constructor(){}ngOnInit(){""===this.feature.name&&(this.feature.name="Capa raster")}filterKey(t){return t.replace(/_/g," ")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-feature-container"]],inputs:{feature:"feature"},decls:3,vars:2,consts:[[1,"attribute-header"],["class","feature-content",4,"ngFor","ngForOf"],[1,"feature-content"],[1,"attribute-name"],[1,"attribute-value"]],template:function(t,n){1&t&&(o.TgZ(0,"header",0),o._uU(1),o.qZA(),o.YNc(2,M4,5,2,"div",1)),2&t&&(o.xp6(1),o.hij(" ",n.feature.name,"\n"),o.xp6(1),o.Q6J("ngForOf",n.feature.properties))},directives:[B.sg],styles:["[_nghost-%COMP%]{color:#19222b}.feature-content[_ngcontent-%COMP%]{overflow-wrap:break-word}.attribute-header[_ngcontent-%COMP%]{display:block;text-align:center;font-weight:700;background-color:#b51e1c33;padding:5px}.attribute-name[_ngcontent-%COMP%]{display:inline-block;width:110px;text-align:left;font-weight:700;overflow-wrap:break-word;vertical-align:top;padding-left:10px}.attribute-value[_ngcontent-%COMP%]{display:inline-block;width:160px;text-align:left;font-weight:400;margin-left:10px}.file[_ngcontent-%COMP%]{color:#5a84c1}@media screen and (min-width: 600px){.attribute-name[_ngcontent-%COMP%]{width:130px}.attribute-value[_ngcontent-%COMP%]{width:180px}}"]}),e})();function P4(e,i){1&e&&o._UZ(0,"sic-feature-container",7),2&e&&o.Q6J("feature",i.$implicit)}function O4(e,i){1&e&&(o.TgZ(0,"div",8),o._uU(1," No se encontr\xf3 informaci\xf3n en este punto "),o.qZA())}function S4(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"div",4),o._uU(2),o.qZA(),o.YNc(3,P4,1,1,"sic-feature-container",5),o.YNc(4,O4,2,0,"div",6),o.qZA()),2&e){const t=i.$implicit;o.xp6(2),o.Oqu(t.name),o.xp6(1),o.Q6J("ngForOf",t.layers),o.xp6(1),o.Q6J("ngIf",0===t.layers.length)}}let A4=(()=>{class e{constructor(t,n){this.mapService=t,this.elementRef=n,this.position=[0,0],this.closed=new o.vpe}ngOnInit(){this.popupOverlay=null}ngOnChanges(t){Object.entries(t).some(([n,r])=>-1!==["position"].indexOf(n))&&t.position.currentValue?this.showOverlay():this.closeOverlay()}showOverlay(){if(this.popupOverlay)this.popupOverlay.setPosition(this.position);else{this.popupOverlay=new md({element:this.elementRef.nativeElement,position:this.position,autoPan:!0});try{this.mapService.addOverlay(this.popupOverlay,this.mapId)}catch(t){}}}closeOverlay(){this.mapService.removeOverlay(this.popupOverlay,this.mapId),this.popupOverlay=null}callClose(){this.closed.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(o.SBq))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-identify-container"]],inputs:{position:"position",mapId:"mapId",elements:"elements"},outputs:{closed:"closed"},features:[o.TTD],decls:7,vars:1,consts:[["mat-icon-button","",1,"close-button",3,"click"],[1,"identify-container-title"],[1,"identify-container-body"],[4,"ngFor","ngForOf"],[1,"layer-title"],[3,"feature",4,"ngFor","ngForOf"],["class","noinfo-text",4,"ngIf"],[3,"feature"],[1,"noinfo-text"]],template:function(t,n){1&t&&(o.TgZ(0,"button",0),o.NdJ("click",function(){return n.callClose()}),o.TgZ(1,"mat-icon"),o._uU(2," close "),o.qZA(),o.qZA(),o.TgZ(3,"div",1),o._uU(4,"Identifica"),o.qZA(),o.TgZ(5,"div",2),o.YNc(6,S4,5,3,"div",3),o.qZA()),2&t&&(o.xp6(6),o.Q6J("ngForOf",n.elements))},directives:[Kt.lW,ce.Hw,B.sg,B.O5,w4],styles:['[_nghost-%COMP%]{position:absolute;bottom:12px;left:-145px;width:300px;max-height:260px;background:rgba(255,255,255,.9);padding:0;box-shadow:3px 3px 28px #00001d}.close-button[_ngcontent-%COMP%]{position:absolute;right:0;top:-6px}.close-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.identify-container-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center}.identify-container-body[_ngcontent-%COMP%]{max-height:210px;font-size:9pt;margin-bottom:10px;overflow-y:auto}.identify-container-body[_ngcontent-%COMP%]   .layer-title[_ngcontent-%COMP%]{font-size:11pt;font-weight:700;padding:3px 10px;background-color:#b51e1c80}.noinfo-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:8px}[_nghost-%COMP%]:after, .ol-popup[_ngcontent-%COMP%]:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}[_nghost-%COMP%]:after{border-top-color:#b51e1ce6;border-width:10px;left:145px;margin-left:-10px}@media screen and (max-width: 600px){[_nghost-%COMP%]{width:340px;max-height:320px}.close-button[_ngcontent-%COMP%]{width:36px;height:46px;line-height:unset}.identify-container-title[_ngcontent-%COMP%]{height:36px;font-size:12pt}.identify-container-body[_ngcontent-%COMP%]{max-height:270px;font-size:10pt}}']}),e})();var A=Y(4999);let sc=(()=>{class e extends Mr.t{constructor(t,n,r){super(t,n,r)}executeSimpleAvaluo(t){return this.post(`${U.N.constants.API_URL}/avaluo/simple`,{idPredio:t})}executeMultipleAvaluo(t,n){return this.post(`${U.N.constants.API_URL}/avaluo/multiple`,{idPredio:t,layer:n})}getAvaluoData(t){return this.get(`${U.N.constants.API_URL}/avaluo/${t}/data`)}getAvaluoReport(t,n){return this.get(`${U.N.constants.API_URL}/avaluo/report/${t}/${n}`)}hasAvaluo(t){return this.get(`${U.N.constants.API_URL}/avaluo/has-avaluo/${t}`)}deleteMultipleAvaluo(){return this.delete(`${U.N.constants.API_URL}/avaluo/multiple`)}executeReferredAvaluo(t,n){return this.post(`${U.N.constants.API_URL}/avaluo/referido`,{idPredio:t,year:n})}getAvaluoReferred(t,n){return this.get(`${U.N.constants.API_URL}/avaluo/referido/${t}/${n}`)}getAvaluoReferredReport(t,n){return this.get(`${U.N.constants.API_URL}/avaluo/report/referido/${t}/${n}`)}hasAvaluoReferred(t,n){return this.get(`${U.N.constants.API_URL}/avaluo/referido/has-avaluo/${t}/${n}`)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function E4(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.hij("Selecciona ",t.layerToFusion," para fusionar")}}function I4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Clave"),o.qZA())}function D4(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function R4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Subpredio"),o.qZA())}function Z4(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.unidad)}}function L4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Cuenta"),o.qZA())}function k4(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.cuenta)}}function N4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"\xc1rea cartogr\xe1fica"),o.qZA())}function F4(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.area,"1.2-2"),"m")}}function U4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Acciones"),o.qZA())}function q4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",33),o.TgZ(1,"button",34),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).deleteSelected(a.idPredio)}),o.TgZ(2,"mat-icon"),o._uU(3,"delete_forever"),o.qZA(),o.qZA(),o.qZA()}}function G4(e,i){1&e&&o._UZ(0,"tr",35)}const o0=function(e){return{predominante:e}};function j4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",36),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).selectedPredominante(a)}),o.qZA()}if(2&e){const t=i.$implicit,n=o.oxw(2);o.Q6J("ngClass",o.VKq(1,o0,t.idPredio===n.predioPredominante.idPredio))}}function z4(e,i){1&e&&(o.TgZ(0,"tr",37),o.TgZ(1,"td",38),o._uU(2," No se han agregado predios a fusionar "),o.qZA(),o.qZA())}function Y4(e,i){1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2,"Haz clic en la fila del predio predominante"),o.qZA(),o.qZA())}function H4(e,i){if(1&e&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&e){const t=o.oxw(3);o.xp6(1),o.hij("Predio predominante ",t.predioPredominante.clave,"")}}function B4(e,i){if(1&e&&(o.TgZ(0,"div",6),o.YNc(1,Y4,3,0,"div",39),o.YNc(2,H4,2,1,"ng-template",null,40,o.W1O),o.qZA()),2&e){const t=o.MAs(3),n=o.oxw(2);o.xp6(1),o.Q6J("ngIf",""===n.predioPredominante.idPredio)("ngIfElse",t)}}const a0=function(e){return{correct:e}};function V4(e,i){if(1&e&&(o.TgZ(0,"div",41),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.Q6J("ngClass",o.VKq(2,a0,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}function W4(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"header"),o._uU(2),o.qZA(),o.TgZ(3,"section"),o.TgZ(4,"div",14),o.TgZ(5,"table",15),o.ynx(6,16),o.YNc(7,I4,2,0,"th",17),o.YNc(8,D4,2,1,"td",18),o.BQk(),o.ynx(9,19),o.YNc(10,R4,2,0,"th",17),o.YNc(11,Z4,2,1,"td",18),o.BQk(),o.ynx(12,20),o.YNc(13,L4,2,0,"th",17),o.YNc(14,k4,2,1,"td",18),o.BQk(),o.ynx(15,21),o.YNc(16,N4,2,0,"th",17),o.YNc(17,F4,5,4,"td",18),o.BQk(),o.ynx(18,22),o.YNc(19,U4,2,0,"th",17),o.YNc(20,q4,4,0,"td",23),o.BQk(),o.YNc(21,G4,1,0,"tr",24),o.YNc(22,j4,1,3,"tr",25),o.YNc(23,z4,3,0,"tr",26),o.qZA(),o.qZA(),o.qZA(),o.YNc(24,B4,4,2,"div",27),o.YNc(25,V4,2,4,"div",28),o.TgZ(26,"div",29),o.TgZ(27,"button",30),o.NdJ("click",function(){return o.CHM(t),o.oxw().generateFusion()}),o._uU(28," Genera fusi\xf3n "),o.qZA(),o.TgZ(29,"button",30),o.NdJ("click",function(){return o.CHM(t),o.oxw().applyFusion()}),o._uU(30," Aplica fusi\xf3n "),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(2),o.hij("Predios (",t.prediosSelected.length,")"),o.xp6(3),o.Q6J("dataSource",t.predios),o.xp6(16),o.Q6J("matHeaderRowDef",t.predioColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",t.predioColumns),o.xp6(2),o.Q6J("ngIf",t.prediosSelected.length>1),o.xp6(1),o.Q6J("ngIf",t.showResult),o.xp6(2),o.Q6J("disabled",t.prediosSelected.length<2),o.xp6(2),o.Q6J("disabled",""===t.predioPredominante.idPredio||t.prediosSelected.length<2)}}function J4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Bloque"),o.qZA())}function X4(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.bloque)}}function $4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Niveles"),o.qZA())}function Q4(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.niveles)}}function K4(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Clasificaci\xf3n"),o.qZA())}function tk(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clasificacion)}}function ek(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"\xc1rea construcci\xf3n"),o.qZA())}function nk(e,i){if(1&e&&(o.TgZ(0,"td",32),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.sc,"1.2-2"),"m")}}function ik(e,i){1&e&&(o.TgZ(0,"th",31),o._uU(1,"Acciones"),o.qZA())}function rk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",33),o.TgZ(1,"button",46),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).deleteSelected(a.idConstruccion)}),o.TgZ(2,"mat-icon"),o._uU(3,"delete_forever"),o.qZA(),o.qZA(),o.qZA()}}function ok(e,i){1&e&&o._UZ(0,"tr",35)}function ak(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",36),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).selectedPredominante(a)}),o.qZA()}if(2&e){const t=i.$implicit,n=o.oxw(2);o.Q6J("ngClass",o.VKq(1,o0,t.idConstruccion===n.constructionPredominante.idConstruccion))}}function sk(e,i){1&e&&(o.TgZ(0,"tr",37),o.TgZ(1,"td",38),o._uU(2," No se han agregado construcciones a fusionar "),o.qZA(),o.qZA())}function lk(e,i){1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2,"Haz clic en la fila de la construcci\xf3n predominante"),o.qZA(),o.qZA())}function ck(e,i){if(1&e&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&e){const t=o.oxw(3);o.xp6(1),o.hij("Construcci\xf3n predominante ",t.constructionPredominante.bloque,"")}}function hk(e,i){if(1&e&&(o.TgZ(0,"div",6),o.YNc(1,lk,3,0,"div",39),o.YNc(2,ck,2,1,"ng-template",null,47,o.W1O),o.qZA()),2&e){const t=o.MAs(3),n=o.oxw(2);o.xp6(1),o.Q6J("ngIf",""===n.constructionPredominante.idConstruccion)("ngIfElse",t)}}function uk(e,i){if(1&e&&(o.TgZ(0,"div",41),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.Q6J("ngClass",o.VKq(2,a0,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}function dk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",5),o.TgZ(1,"header"),o._uU(2),o.qZA(),o.TgZ(3,"section"),o.TgZ(4,"div",14),o.TgZ(5,"table",15),o.ynx(6,42),o.YNc(7,J4,2,0,"th",17),o.YNc(8,X4,2,1,"td",18),o.BQk(),o.ynx(9,43),o.YNc(10,$4,2,0,"th",17),o.YNc(11,Q4,2,1,"td",18),o.BQk(),o.ynx(12,44),o.YNc(13,K4,2,0,"th",17),o.YNc(14,tk,2,1,"td",18),o.BQk(),o.ynx(15,45),o.YNc(16,ek,2,0,"th",17),o.YNc(17,nk,5,4,"td",18),o.BQk(),o.ynx(18,22),o.YNc(19,ik,2,0,"th",17),o.YNc(20,rk,4,0,"td",23),o.BQk(),o.YNc(21,ok,1,0,"tr",24),o.YNc(22,ak,1,3,"tr",25),o.YNc(23,sk,3,0,"tr",26),o.qZA(),o.qZA(),o.qZA(),o.YNc(24,hk,4,2,"div",27),o.YNc(25,uk,2,4,"div",28),o.TgZ(26,"div",29),o.TgZ(27,"button",30),o.NdJ("click",function(){return o.CHM(t),o.oxw().generateFusion()}),o._uU(28," Genera fusi\xf3n "),o.qZA(),o.TgZ(29,"button",30),o.NdJ("click",function(){return o.CHM(t),o.oxw().applyFusion()}),o._uU(30," Aplica fusi\xf3n "),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(2),o.hij("Construcciones (",t.constructionsSelected.length,")"),o.xp6(3),o.Q6J("dataSource",t.constructions),o.xp6(16),o.Q6J("matHeaderRowDef",t.constructionColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",t.constructionColumns),o.xp6(2),o.Q6J("ngIf",t.constructionsSelected.length>1),o.xp6(1),o.Q6J("ngIf",t.showResult),o.xp6(2),o.Q6J("disabled",t.constructionsSelected.length<2),o.xp6(2),o.Q6J("disabled",""===t.constructionPredominante.idConstruccion||t.constructionsSelected.length<2)}}const _n="[FUSION_TOOL]",s0=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})}),l0=new mt({stroke:new J({color:"#0000FF",width:2,lineDash:void 0}),fill:new Q({color:"rgba(0, 0, 255, 0.2)"}),image:new At({radius:5,stroke:new J({color:"rgba(0, 0, 255, 0.3)"}),fill:new Q({color:"rgba(0, 0, 255, 0.3)"})})});let fk=(()=>{class e{constructor(t,n,r,a,s){this.dialogRef=t,this.mapService=n,this.catastroService=r,this.featureService=a,this.avaluoService=s,this.backdropMessage="...",this.showLoading=!1,this.layerSelected="",this.isLayerSelected=!1,this.layerToFusion="",this.predios=new A.by([]),this.predioColumns=["clave","subpredio","cuenta","areaCartografica","actions"],this.constructions=new A.by([]),this.constructionColumns=["bloque","niveles","clasificacion","areaConstruction","actions"],this.showResult=!1,this.resultCorrect=!0,this.resultMessage="",this.prediosSelected=[],this.predioPredominante={idPredio:"",predio:"",edificio:"",unidad:"",cuenta:"",clave:"",folioreal:"",CURT:"",idambito:"",casoVinculoPadron:0,frente:[],geometry:null,construction:[],area:0},this.constructionsSelected=[],this.constructionPredominante={idConstruccion:"",bloque:"",niveles:0,idtechumbre:"",clasificacion:"",alturaPromedio:0,alturaMedia:0,alturaMinima:0,alturaMaxima:0,alturaMayoritaria:0,idCons:"",idPredio:"",sc:0,geometry:null},this.currentFusion={idFusion:"",json:"",user:"",fecha:null,tramite:"",generado:!1,geometry:null},this.folioSICAM=0}ngOnInit(){}ngAfterViewInit(){}ngOnDestroy(){this.mapService.clearDrawings(_n),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}callClose(){this.dialogRef.close()}handleSelectLayer(){this.layerToFusion="predio"===this.layerSelected?"predios":"construcciones",this.isLayerSelected=!0,this.folioSICAM=0,""!==this.layerToFusion&&!this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}mapClickHandler(){return t=>{this.showResult=!1,this.backdropMessage="Obteniendo datos...",this.showLoading=!0,this.folioSICAM=0;const[n,r]=t.coordinate;switch(this.layerSelected){case"predio":this.catastroService.getPredioAtPoint(n,r,{frentes:!1,construcciones:!1}).subscribe(s=>{if(null!==s&&-1===this.prediosSelected.findIndex(c=>c.idPredio===s.idPredio)){this.prediosSelected.push(s),this.predios.data=this.prediosSelected;const c=this.featureService.createFeature(`${_n}.${s.idPredio}`,s.geometry,{idPredio:s.idPredio,clave:s.clave,cuenta:""});this.mapService.drawFeature(c,s0)}this.showLoading=!1});break;case"construction":this.catastroService.getConstructionAtPoint(n,r).subscribe(s=>{if(null!==s&&-1===this.constructionsSelected.findIndex(c=>c.idConstruccion===s.idConstruccion)){this.constructionsSelected.push(s),this.constructions.data=this.constructionsSelected;const c=this.featureService.createFeature(`${_n}.${s.idConstruccion}`,s.geometry,{idConstruccion:s.idConstruccion,bloque:s.bloque,niveles:s.niveles,clasificacion:s.clasificacion});this.mapService.drawFeature(c,s0)}this.showLoading=!1})}}}deleteSelected(t){switch(this.layerSelected){case"predio":const n=this.prediosSelected.filter(a=>a.idPredio!==t);this.prediosSelected=n,this.predios.data=this.prediosSelected,this.mapService.clearDrawings(`${_n}.${t}`),this.predioPredominante={idPredio:"",predio:"",edificio:"",unidad:"",cuenta:"",clave:"",folioreal:"",CURT:"",idambito:"",casoVinculoPadron:0,frente:[],geometry:null,construction:[],area:0};break;case"construction":const r=this.constructionsSelected.filter(a=>a.idConstruccion!==t);this.constructionsSelected=r,this.constructions.data=this.constructionsSelected,this.mapService.clearDrawings(`${_n}.${t}`),this.constructionPredominante={idConstruccion:"",bloque:"",niveles:0,idtechumbre:"",clasificacion:"",alturaPromedio:0,alturaMedia:0,alturaMinima:0,alturaMaxima:0,alturaMayoritaria:0,idCons:"",idPredio:"",sc:0,geometry:null}}}selectedPredominante(t){var n;let r;switch(this.layerSelected){case"predio":this.predioPredominante=t,r=this.featureService.createFeature(_n,this.predioPredominante.geometry,{idPredio:this.predioPredominante.idPredio,clave:this.predioPredominante.clave,cuenta:this.predioPredominante.cuenta});break;case"construction":this.constructionPredominante=t,r=this.featureService.createFeature(_n,this.constructionPredominante.geometry,{idConstruccion:this.constructionPredominante.idConstruccion,bloque:this.constructionPredominante.bloque,niveles:this.constructionPredominante.niveles,clasificacion:this.constructionPredominante.clasificacion})}const a=null===(n=r.getGeometry())||void 0===n?void 0:n.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(a)}generateFusion(){this.backdropMessage="Generando fusi\xf3n...",this.showLoading=!0;let t="";const n=[];switch(this.layerSelected){case"predio":const r={Predio:this.prediosSelected.map(s=>(n.push(s.clave),{id:s.idPredio}))};t=JSON.stringify(r);break;case"construction":const a={Construccion:this.constructionsSelected.map(s=>({id:s.idConstruccion}))};t=JSON.stringify(a);break;default:this.showLoading=!1}""!==t?this.catastroService.createFusion(t).subscribe(r=>{var a;if(this.currentFusion=r,null===this.currentFusion.geometry)this.resultMessage="La fusi\xf3n no es posible",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1;else if("predio"===this.layerSelected)this.catastroService.validateFusion(n).subscribe(s=>{this.folioSICAM=s,0!==this.folioSICAM?this.catastroService.validateFusionOwnerDebt(n).subscribe(l=>{var c;if("Procede"===l){this.resultCorrect=!0,this.resultMessage="Fusi\xf3n generada";const h=this.featureService.createFeature(_n,this.currentFusion.geometry,{idFusion:this.currentFusion.idFusion,json:this.currentFusion.json,user:this.currentFusion.user});this.mapService.drawFeature(h,l0);const u=null===(c=h.getGeometry())||void 0===c?void 0:c.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(u)}else this.folioSICAM=0,this.resultCorrect=!1,this.resultMessage=l;this.showResult=!0,this.showLoading=!1},l=>{console.log(l),this.showResult=!0,this.showLoading=!1,this.resultCorrect=!1,this.resultMessage="Error al validar mismo propietario y si adeuda"}):(this.resultCorrect=!1,this.resultMessage="Fusi\xf3n no v\xe1lida",this.showResult=!0,this.showLoading=!1)},s=>{console.log(s),this.showResult=!0,this.showLoading=!1,this.resultCorrect=!1,this.resultMessage="Error al validar fusi\xf3n"});else{this.folioSICAM=-1,this.resultCorrect=!0,this.resultMessage="Fusi\xf3n generada";const s=this.featureService.createFeature(_n,this.currentFusion.geometry,{idFusion:this.currentFusion.idFusion,json:this.currentFusion.json,user:this.currentFusion.user});this.mapService.drawFeature(s,l0);const l=null===(a=s.getGeometry())||void 0===a?void 0:a.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(l),this.showResult=!0,this.showLoading=!1}}):(this.resultMessage="Sin datos para fusionar",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1)}applyFusion(){if(this.backdropMessage="Aplicando fusi\xf3n...",this.showLoading=!0,this.showResult=!1,0!==this.folioSICAM)if(""!==this.currentFusion.idFusion)if(null!==this.currentFusion.geometry)switch(this.layerSelected){case"predio":this.catastroService.applyFusion(this.currentFusion.idFusion,this.predioPredominante.idPredio).subscribe(t=>{var n;if(t){const a=null===(n=this.featureService.createFeature(_n,this.currentFusion.geometry,{idFusion:this.currentFusion.idFusion,json:this.currentFusion.json,user:this.currentFusion.user}).getGeometry())||void 0===n?void 0:n.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(a),this.cleanFusion(),this.resultMessage="Fusi\xf3n de predios aplicada",this.resultCorrect=!0,this.showLoading=!1}else this.resultMessage="Error al aplicar fusi\xf3n de predios",this.resultCorrect=!1,this.showLoading=!1;this.showResult=!0});break;case"construction":this.catastroService.applyFusion(this.currentFusion.idFusion,this.constructionPredominante.idConstruccion).subscribe(t=>{var n;if(t){const a=null===(n=this.featureService.createFeature(_n,this.currentFusion.geometry,{idFusion:this.currentFusion.idFusion,json:this.currentFusion.json,user:this.currentFusion.user}).getGeometry())||void 0===n?void 0:n.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(a),this.resultMessage="Fusi\xf3n de construcciones aplicada",this.resultCorrect=!0,this.showLoading=!1}else this.resultMessage="Error al aplicar fusi\xf3n de construcciones",this.resultCorrect=!1,this.showLoading=!1;this.showResult=!0,this.cleanFusion()})}else this.resultMessage="No se puede aplicar esta fusi\xf3n",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1;else this.resultMessage="No se ha generado la fusi\xf3n",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1;else this.resultMessage="La fusi\xf3n debe ser valida",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1}cleanFusion(){this.mapService.clearDrawings(_n),this.prediosSelected=[],this.predioPredominante={idPredio:"",predio:"",edificio:"",unidad:"",cuenta:"",clave:"",folioreal:"",CURT:"",idambito:"",casoVinculoPadron:0,frente:[],geometry:null,construction:[],area:0},this.constructionsSelected=[],this.constructionPredominante={idConstruccion:"",bloque:"",niveles:0,idtechumbre:"",clasificacion:"",alturaPromedio:0,alturaMedia:0,alturaMinima:0,alturaMaxima:0,alturaMayoritaria:0,idCons:"",idPredio:"",sc:0,geometry:null},this.currentFusion={idFusion:"",json:"",user:"",fecha:null,tramite:"",generado:!1,geometry:null},this.constructions.data=[],this.predios.data=[],this.folioSICAM=0}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36($t),o.Y36(We),o.Y36(ve),o.Y36(sc))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-predio-fusion"]],decls:24,vars:6,consts:[[1,"fusion-title"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"fusion-container"],[1,"fusion-content"],[1,"shadow"],[1,"select-layer"],["name","selectLayer",1,"full-select",3,"ngModel","ngModelChange","change"],["selected","","disabled","","value",""],["ngValue","predio"],["ngValue","construction"],[4,"ngIf"],["class","shadow",4,"ngIf"],[3,"backdropMessage","showingLoading"],[1,"data-table"],["mat-table","",3,"dataSource"],["matColumnDef","clave"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","subpredio"],["matColumnDef","cuenta"],["matColumnDef","areaCartografica"],["matColumnDef","actions"],["mat-cell","","class","action-button",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","row-pointer",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","select-layer",4,"ngIf"],["class","result-container",3,"ngClass",4,"ngIf"],[1,"action-section"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"action-button"],["mat-icon-button","","color","primary","matTooltip","Eliminar predio seleccionado",3,"click"],["mat-header-row",""],["mat-row","",1,"row-pointer",3,"ngClass","click"],[1,"mat-row"],["colspan","5",1,"mat-cell"],[4,"ngIf","ngIfElse"],["selectedPredominante",""],[1,"result-container",3,"ngClass"],["matColumnDef","bloque"],["matColumnDef","niveles"],["matColumnDef","clasificacion"],["matColumnDef","areaConstruction"],["mat-icon-button","","color","primary","matTooltip","Eliminar construcci\xf3n seleccionada",3,"click"],["selectedConstructionPredominante",""]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-icon"),o._uU(2,"view_compact"),o.qZA(),o.TgZ(3,"span",1),o._uU(4," Fusi\xf3n "),o.qZA(),o.TgZ(5,"button",2),o.NdJ("click",function(){return n.callClose()}),o.TgZ(6,"mat-icon"),o._uU(7," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(8,"div",3),o.TgZ(9,"div",4),o.TgZ(10,"div",5),o.TgZ(11,"section"),o.TgZ(12,"div",6),o.TgZ(13,"select",7),o.NdJ("ngModelChange",function(a){return n.layerSelected=a})("change",function(){return n.handleSelectLayer()}),o.TgZ(14,"option",8),o._uU(15,"Selecciona capa para tr\xe1mite de fusi\xf3n"),o.qZA(),o.TgZ(16,"option",9),o._uU(17," Predio "),o.qZA(),o.TgZ(18,"option",10),o._uU(19," Construcci\xf3n "),o.qZA(),o.qZA(),o.YNc(20,E4,3,1,"div",11),o.qZA(),o.qZA(),o.qZA(),o.YNc(21,W4,31,9,"div",12),o.YNc(22,dk,31,9,"div",12),o.qZA(),o.qZA(),o._UZ(23,"sic-backdrop",13)),2&t&&(o.xp6(13),o.Q6J("ngModel",n.layerSelected),o.xp6(7),o.Q6J("ngIf",n.isLayerSelected),o.xp6(1),o.Q6J("ngIf","predio"===n.layerSelected),o.xp6(1),o.Q6J("ngIf","construction"===n.layerSelected),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[ce.Hw,Kt.lW,q.EJ,q.JJ,q.On,q.YN,q.Kr,B.O5,Me.q,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.Ee,A.ge,A.ev,Gi.gM,A.XQ,A.Gk,B.mk],pipes:[B.JJ],styles:[".fusion-title[_ngcontent-%COMP%]{background:#b51e1c;height:28px;color:#fff;font-size:12pt;font-weight:700;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:4px 4px 0 0;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.mat-dialog-container[_ngcontent-%COMP%]{overflow:hidden}.fusion-container[_ngcontent-%COMP%]{margin:8px -20px 0 -16px}.fusion-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .fusion-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#495057;border:1px solid #ced4da;border-radius:4px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.fusion-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .fusion-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]{max-height:33vw;overflow:auto}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-weight:700;background-color:#e4b346;color:#fff;border-radius:8px 8px 0 0;padding:5px}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-align:center}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   td.attribute[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;text-align:center}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{font-size:9pt;text-align:center;max-width:150px;overflow-wrap:break-word}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{height:200px;overflow:auto}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:16px}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:32px}.fusion-container[_ngcontent-%COMP%]   .fusion-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.predominante{background-color:#e4b34680}table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   .predominante[_ngcontent-%COMP%]{background-color:#e4b3464d}.shadow[_ngcontent-%COMP%]{box-shadow:0 5px 20px -5px #00000080}.full-select[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px}.select-layer[_ngcontent-%COMP%]{padding:12px}.action-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:12px;padding-bottom:12px}.action-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;margin:4px 20px}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}"]}),e})();var pk=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),c0=function(e){function i(t,n,r){var a=e.call(this)||this;return void 0!==r&&void 0===n?a.setFlatCoordinates(r,t):a.setCenterAndRadius(t,n||0,r),a}return pk(i,e),i.prototype.clone=function(){var t=new i(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},i.prototype.closestPointXY=function(t,n,r,a){var s=this.flatCoordinates,l=t-s[0],c=n-s[1],h=l*l+c*c;if(h<a){if(0===h)for(var u=0;u<this.stride;++u)r[u]=s[u];else{var d=this.getRadius()/Math.sqrt(h);for(r[0]=s[0]+d*l,r[1]=s[1]+d*c,u=2;u<this.stride;++u)r[u]=s[u]}return r.length=this.stride,h}return a},i.prototype.containsXY=function(t,n){var r=this.flatCoordinates,a=t-r[0],s=n-r[1];return a*a+s*s<=this.getRadiusSquared_()},i.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},i.prototype.computeExtent=function(t){var n=this.flatCoordinates,r=n[this.stride]-n[0];return Tn(n[0]-r,n[1]-r,n[0]+r,n[1]+r,t)},i.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},i.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},i.prototype.getType=function(){return"Circle"},i.prototype.intersectsExtent=function(t){if(Le(t,this.getExtent())){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]||Lc(t,this.intersectsCoordinate.bind(this))}return!1},i.prototype.setCenter=function(t){var n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],a=t.slice();a[n]=a[0]+r;for(var s=1;s<n;++s)a[n+s]=t[s];this.setFlatCoordinates(this.layout,a),this.changed()},i.prototype.setCenterAndRadius=function(t,n,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var a=this.flatCoordinates,s=up(a,0,t);a[s++]=a[0]+n;for(var l=1,c=this.stride;l<c;++l)a[s++]=a[l];a.length=s,this.changed()},i.prototype.getCoordinates=function(){return null},i.prototype.setCoordinates=function(t,n){},i.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},i.prototype.rotate=function(t,n){var r=this.getCenter(),a=this.getStride();this.setCenter(ah(r,0,r.length,a,t,n,r)),this.changed()},i.prototype.translate=function(t,n){var r=this.getCenter(),a=this.getStride();this.setCenter(Wf(r,0,r.length,a,t,n,r)),this.changed()},i}(Mi);const gk=c0;var h0=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cc=function(e){function i(t,n){var r=e.call(this,t)||this;return r.feature=n,r}return h0(i,e),i}(ye),_k=function(e){function i(t){var n=this,r=t;r.stopDown||(r.stopDown=Gt),(n=e.call(this,r)||this).shouldHandle_=!1,n.downPx_=null,n.freehand_=!1,n.source_=t.source?t.source:null,n.features_=t.features?t.features:null,n.snapTolerance_=t.snapTolerance?t.snapTolerance:12,n.type_=t.type,n.mode_=function vk(e){switch(e){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+e)}}(n.type_),n.stopClick_=!!t.stopClick,n.minPoints_=t.minPoints?t.minPoints:"Polygon"===n.mode_?3:2,n.maxPoints_="Circle"===n.mode_?2:t.maxPoints?t.maxPoints:1/0,n.finishCondition_=t.finishCondition?t.finishCondition:_t;var a=t.geometryFunction;if(!a){var l,s=n.mode_;"Circle"===s?a=function(c,h,u){var d=h||new gk([NaN,NaN]),f=jt(c[0]),p=kn(f,jt(c[c.length-1]));d.setCenterAndRadius(f,Math.sqrt(p));var g=Mn();return g&&d.transform(u,g),d}:("Point"===s?l=oi:"LineString"===s?l=wr:"Polygon"===s&&(l=Wr),a=function(c,h,u){return h?h.setCoordinates("Polygon"===s?c[0].length?[c[0].concat([c[0][0]])]:[]:c):h=new l(c),h})}return n.geometryFunction_=a,n.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.overlay_=new Gs({source:new yi({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:mk(),updateWhileInteracting:!0}),n.geometryName_=t.geometryName,n.condition_=t.condition?t.condition:Rh,n.freehandCondition_=t.freehand?Dh:t.freehandCondition?t.freehandCondition:Zh,n.addChangeListener("active",n.updateState_),n}return h0(i,e),i.prototype.setMap=function(t){e.prototype.setMap.call(this,t),this.updateState_()},i.prototype.getOverlay=function(){return this.overlay_},i.prototype.handleEvent=function(t){"contextmenu"===t.originalEvent.type&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);var n=t.type===vt.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&t.type===vt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===vt.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),r=!1):this.freehand_&&t.type===vt.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=t.type===vt.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===vt.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===vt.DBLCLICK&&(r=!1),e.prototype.handleEvent.call(this,t)&&r},i.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new ai(vt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},i.prototype.handleUpEvent=function(t){var n=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||"Point"===this.mode_)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&t.preventDefault(),n},i.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,r=t.pixel,a=n[0]-r[0],s=n[1]-r[1],l=a*a+s*s;if(this.shouldHandle_=this.freehand_?l>this.squaredClickTolerance_:l<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},i.prototype.atFinish_=function(t){var n=!1;if(this.sketchFeature_){var r=!1,a=[this.finishCoordinate_],s=this.mode_;if("Point"===s)n=!0;else if("Circle"===s)n=2===this.sketchCoords_.length;else if("LineString"===s)r=this.sketchCoords_.length>this.minPoints_;else if("Polygon"===s){var l=this.sketchCoords_;r=l[0].length>this.minPoints_,a=[l[0][0],l[0][l[0].length-2]]}if(r)for(var c=this.getMap(),h=0,u=a.length;h<u;h++){var d=a[h],f=c.getPixelFromCoordinate(d),p=t[0]-f[0],g=t[1]-f[1],_=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(p*p+g*g)<=_){this.finishCoordinate_=d;break}}}return n},i.prototype.createOrUpdateSketchPoint_=function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new Wn(new oi(t)),this.updateSketchFeatures_())},i.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new Wn);var n=t.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new wr(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))},i.prototype.startDrawing_=function(t){var n=this.getMap().getView().getProjection();this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Wn(new wr(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Wn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new cc("drawstart",this.sketchFeature_))},i.prototype.modifyDrawing_=function(t){var s,l,n=this.getMap(),r=this.sketchFeature_.getGeometry(),a=n.getView().getProjection();"Point"===this.mode_?l=this.sketchCoords_:"Polygon"===this.mode_?(l=(s=this.sketchCoords_[0])[s.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):l=(s=this.sketchCoords_)[s.length-1],l[0]=t[0],l[1]=t[1],this.geometryFunction_(this.sketchCoords_,r,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),"Polygon"===r.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()},i.prototype.addToDrawing_=function(t){var a,s,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),l=this.mode_;"LineString"===l||"Circle"===l?(this.finishCoordinate_=t.slice(),(s=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?s.pop():a=!0),s.push(t.slice()),this.geometryFunction_(s,n,r)):"Polygon"===l&&((s=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?s.pop():a=!0),s.push(t.slice()),a&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),a&&this.finishDrawing()},i.prototype.removeLastPoint=function(){if(this.sketchFeature_){var r,t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),a=this.mode_;if("LineString"===a||"Circle"===a){if((r=this.sketchCoords_).splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();var s=this.finishCoordinate_.slice();r[r.length-1]=s,this.createOrUpdateSketchPoint_(s)}this.geometryFunction_(r,t,n),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===a){(r=this.sketchCoords_[0]).splice(-2,1);var l=this.sketchLine_.getGeometry();r.length>=2&&(s=r[r.length-2].slice(),r[r.length-1]=s,this.createOrUpdateSketchPoint_(s)),l.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,n)}1===r.length&&this.abortDrawing(),this.updateSketchFeatures_()}},i.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var n=this.sketchCoords_,r=t.getGeometry(),a=this.getMap().getView().getProjection();"LineString"===this.mode_?(n.pop(),this.geometryFunction_(n,r,a)):"Polygon"===this.mode_&&(n[0].pop(),this.geometryFunction_(n,r,a),n=r.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new nc([n])):"MultiLineString"===this.type_?t.setGeometry(new dd([n])):"MultiPolygon"===this.type_&&t.setGeometry(new hd([n])),this.dispatchEvent(new cc("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},i.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},i.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new cc("drawabort",t))},i.prototype.appendCoordinates=function(t){var a,n=this.mode_,r=!this.sketchFeature_;if(r&&this.startDrawing_(t[0]),"LineString"===n||"Circle"===n)a=this.sketchCoords_;else{if("Polygon"!==n)return;a=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}r&&a.shift(),a.pop();for(var s=0;s<t.length;s++)this.addToDrawing_(t[s]);var l=t[t.length-1];this.addToDrawing_(l),this.modifyDrawing_(l)},i.prototype.extend=function(t){var r=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=r.getCoordinates();var a=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=a.slice(),this.sketchCoords_.push(a.slice()),this.sketchPoint_=new Wn(new oi(a)),this.updateSketchFeatures_(),this.dispatchEvent(new cc("drawstart",this.sketchFeature_))},i.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(t)},i.prototype.updateState_=function(){var t=this.getMap(),n=this.getActive();(!t||!n)&&this.abortDrawing(),this.overlay_.setMap(n?t:null)},i}(Oi);function mk(){var e=Kc();return function(i,t){return e[i.getGeometry().getType()]}}const Va=_k;var yk=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();function u0(e){return e.feature?e.feature:e.element?e.element:void 0}var To=[],xk=function(e){function i(t){var n=this,r=t||{},a=r;return a.handleDownEvent||(a.handleDownEvent=_t),a.stopDown||(a.stopDown=Gt),(n=e.call(this,a)||this).source_=r.source?r.source:null,n.vertex_=void 0===r.vertex||r.vertex,n.edge_=void 0===r.edge||r.edge,n.features_=r.features?r.features:null,n.featuresListenerKeys_=[],n.featureChangeListenerKeys_={},n.indexedFeaturesExtents_={},n.pendingFeatures_={},n.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,n.rBush_=new Zs,n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n)},n}return yk(i,e),i.prototype.addFeature=function(t,n){var r=void 0===n||n,a=at(t),s=t.getGeometry();if(s){var l=this.SEGMENT_WRITERS_[s.getType()];l&&(this.indexedFeaturesExtents_[a]=s.getExtent([1/0,1/0,-1/0,-1/0]),l(t,s))}r&&(this.featureChangeListenerKeys_[a]=ft(t,"change",this.handleFeatureChange_,this))},i.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},i.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},i.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},i.prototype.handleEvent=function(t){var n=this.snapTo(t.pixel,t.coordinate,t.map);return n.snapped&&(t.coordinate=n.vertex.slice(0,2),t.pixel=n.vertexPixel),e.prototype.handleEvent.call(this,t)},i.prototype.handleFeatureAdd_=function(t){var n=u0(t);this.addFeature(n)},i.prototype.handleFeatureRemove_=function(t){var n=u0(t);this.removeFeature(n)},i.prototype.handleFeatureChange_=function(t){var n=t.target;if(this.handlingDownUpSequence){var r=at(n);r in this.pendingFeatures_||(this.pendingFeatures_[r]=n)}else this.updateFeature_(n)},i.prototype.handleUpEvent=function(t){var n=Io(this.pendingFeatures_);return n.length&&(n.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},i.prototype.removeFeature=function(t,n){var r=void 0===n||n,a=at(t),s=this.indexedFeaturesExtents_[a];if(s){var l=this.rBush_,c=[];l.forEachInExtent(s,function(u){t===u.feature&&c.push(u)});for(var h=c.length-1;h>=0;--h)l.remove(c[h])}r&&(Lt(this.featureChangeListenerKeys_[a]),delete this.featureChangeListenerKeys_[a])},i.prototype.setMap=function(t){var n=this.getMap(),r=this.featuresListenerKeys_,a=this.getFeatures_();n&&(r.forEach(Lt),r.length=0,a.forEach(this.forEachFeatureRemove_.bind(this))),e.prototype.setMap.call(this,t),t&&(this.features_?r.push(ft(this.features_,"add",this.handleFeatureAdd_,this),ft(this.features_,"remove",this.handleFeatureRemove_,this)):this.source_&&r.push(ft(this.source_,"addfeature",this.handleFeatureAdd_,this),ft(this.source_,"removefeature",this.handleFeatureRemove_,this)),a.forEach(this.forEachFeatureAdd_.bind(this)))},i.prototype.snapTo=function(t,n,r){var l=xe([r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),c=this.rBush_.getInExtent(l);this.vertex_&&!this.edge_&&(c=c.filter(function(L){return"Circle"!==L.feature.getGeometry().getType()}));var h=!1,u=null,d=null;if(0===c.length)return{snapped:h,vertex:u,vertexPixel:d};for(var g,f=r.getView().getProjection(),p=jt(n),_=1/0,m=0;m<c.length;++m){var v=c[m];To[0]=jt(v.segment[0]),To[1]=jt(v.segment[1]);var y=hf(p,To);y<_&&(g=v,_=y)}var C=g.segment;if(this.vertex_&&!this.edge_){var x=r.getPixelFromCoordinate(C[0]),b=r.getPixelFromCoordinate(C[1]),T=kn(t,x),M=kn(t,b);Math.sqrt(Math.min(T,M))<=this.pixelTolerance_&&(h=!0,d=r.getPixelFromCoordinate(u=T>M?C[1]:C[0]))}else if(this.edge_){var P="Circle"===g.feature.getGeometry().getType();if(P){var D=g.feature.getGeometry(),R=Mn();R&&(D=D.clone().transform(R,f)),u=er(function k1(e,i){var t=i.getRadius(),n=i.getCenter(),r=n[0],a=n[1],c=e[0]-r,h=e[1]-a;0===c&&0===h&&(c=1);var u=Math.sqrt(c*c+h*h);return[r+t*c/u,a+t*h/u]}(p,D))}else To[0]=jt(C[0]),To[1]=jt(C[1]),u=er(Fc(p,To));qc(t,d=r.getPixelFromCoordinate(u))<=this.pixelTolerance_&&(h=!0,this.vertex_&&!P)&&(x=r.getPixelFromCoordinate(C[0]),b=r.getPixelFromCoordinate(C[1]),T=kn(d,x),M=kn(d,b),Math.sqrt(Math.min(T,M))<=this.pixelTolerance_&&(d=r.getPixelFromCoordinate(u=T>M?C[1]:C[0])))}return h&&(d=[Math.round(d[0]),Math.round(d[1])]),{snapped:h,vertex:u,vertexPixel:d}},i.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},i.prototype.writeCircleGeometry_=function(t,n){var r=this.getMap().getView().getProjection(),a=n,s=Mn();s&&(a=a.clone().transform(s,r));var l=Mh(a);s&&l.transform(r,s);for(var c=l.getCoordinates()[0],h=0,u=c.length-1;h<u;++h){var d=c.slice(h,h+2),f={feature:t,segment:d};this.rBush_.insert(xe(d),f)}},i.prototype.writeGeometryCollectionGeometry_=function(t,n){for(var r=n.getGeometriesArray(),a=0;a<r.length;++a){var s=this.SEGMENT_WRITERS_[r[a].getType()];s&&s(t,r[a])}},i.prototype.writeLineStringGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length-1;a<s;++a){var l=r.slice(a,a+2),c={feature:t,segment:l};this.rBush_.insert(xe(l),c)}},i.prototype.writeMultiLineStringGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,h=l.length-1;c<h;++c){var u=l.slice(c,c+2),d={feature:t,segment:u};this.rBush_.insert(xe(u),d)}},i.prototype.writeMultiPointGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a){var l=r[a],c={feature:t,segment:[l,l]};this.rBush_.insert(n.getExtent(),c)}},i.prototype.writeMultiPolygonGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,h=l.length;c<h;++c)for(var u=l[c],d=0,f=u.length-1;d<f;++d){var p=u.slice(d,d+2),g={feature:t,segment:p};this.rBush_.insert(xe(p),g)}},i.prototype.writePointGeometry_=function(t,n){var r=n.getCoordinates(),a={feature:t,segment:[r,r]};this.rBush_.insert(n.getExtent(),a)},i.prototype.writePolygonGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,h=l.length-1;c<h;++c){var u=l.slice(c,c+2),d={feature:t,segment:u};this.rBush_.insert(xe(u),d)}},i}(Oi);const d0=xk;var Ck=Y(8505);let f0=(()=>{class e extends Mr.t{constructor(t,n,r){super(t,n,r),this.snapLayers=[]}saveSnapConfig(t){this.snapLayers=t}getSnapLayers(){return this.snapLayers}getConfiguration(){return this.config?(0,$v.of)(this.config):this.get(`${U.N.constants.API_URL}/snap/layers`).pipe((0,ae.U)(t=>t),(0,Ck.b)(t=>{this.config=t,this.snapLayers=t}))}getFeatures(t,n,r){const a=(new En.LE).append("bbox",n.join(",")).append("scale",`${r}`);return this.get(`${U.N.constants.API_URL}/snap/${t}/query`,a).pipe((0,ae.U)(s=>s))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var hc=Y(7446);function bk(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.hij("Selecciona ",t.layerToFusion," a subdividir")}}function Tk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Lado"),o.qZA())}function Mk(e,i){if(1&e&&(o.TgZ(0,"td",37),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.lado)}}function wk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Medida lindero"),o.qZA())}function Pk(e,i){if(1&e&&(o.TgZ(0,"td",37),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.distancia,"1.2-2")," m")}}function Ok(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Distancia"),o.qZA())}function Sk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"input",38),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.distance=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("ngModel",t.distance)}}function Ak(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Elementos"),o.qZA())}function Ek(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"input",39),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.element=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("ngModel",t.element)}}function Ik(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Vector dirigido"),o.qZA())}function Dk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"mat-checkbox",40),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.isDirected=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("checked",t.isDirected)("ngModel",t.isDirected)}}function Rk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Limpiar lindero"),o.qZA())}function Zk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"mat-checkbox",41),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.needToClean=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("checked",t.needToClean)("ngModel",t.needToClean)}}function Lk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Acciones"),o.qZA())}function kk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",42),o.TgZ(1,"button",43),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().moveToLindero(a)}),o.TgZ(2,"mat-icon"),o._uU(3,"visibility"),o.qZA(),o.qZA(),o.TgZ(4,"button",44),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().divideLindero(a)}),o.TgZ(5,"mat-icon"),o._uU(6,"linear_scale"),o.qZA(),o.qZA(),o.TgZ(7,"button",45),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().getParalela(a)}),o.TgZ(8,"mat-icon"),o._uU(9,"swap_horiz"),o.qZA(),o.qZA(),o.qZA()}}function Nk(e,i){1&e&&o._UZ(0,"tr",46)}function Fk(e,i){1&e&&o._UZ(0,"tr",47)}function Uk(e,i){1&e&&(o.TgZ(0,"tr",48),o.TgZ(1,"td",49),o._uU(2," No se han obtenido linderos para subdividir "),o.qZA(),o.qZA())}function qk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Lado"),o.qZA())}function Gk(e,i){if(1&e&&(o.TgZ(0,"td",37),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.lado)}}function jk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Medida lindero"),o.qZA())}function zk(e,i){if(1&e&&(o.TgZ(0,"td",37),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.distancia,"1.2-2")," m")}}function Yk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Distancia"),o.qZA())}function Hk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"input",38),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.distance=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("ngModel",t.distance)}}function Bk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Elementos"),o.qZA())}function Vk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"input",39),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.element=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("ngModel",t.element)}}function Wk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Vector dirigido"),o.qZA())}function Jk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"mat-checkbox",40),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.isDirected=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("checked",t.isDirected)("ngModel",t.isDirected)}}function Xk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Limpiar lindero"),o.qZA())}function $k(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",37),o.TgZ(1,"mat-checkbox",41),o.NdJ("ngModelChange",function(r){return o.CHM(t).$implicit.needToClean=r}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.Q6J("checked",t.needToClean)("ngModel",t.needToClean)}}function Qk(e,i){1&e&&(o.TgZ(0,"th",36),o._uU(1,"Acciones"),o.qZA())}function Kk(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",51),o.TgZ(1,"button",52),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).moveToParalela(a)}),o.TgZ(2,"mat-icon"),o._uU(3,"visibility"),o.qZA(),o.qZA(),o.TgZ(4,"button",53),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).divideParalela(a)}),o.TgZ(5,"mat-icon"),o._uU(6,"linear_scale"),o.qZA(),o.qZA(),o.qZA()}}function tN(e,i){1&e&&o._UZ(0,"tr",46)}function eN(e,i){1&e&&o._UZ(0,"tr",47)}function nN(e,i){1&e&&(o.TgZ(0,"tr",48),o.TgZ(1,"td",49),o._uU(2," No se han obtenido paralelas para subdividir "),o.qZA(),o.qZA())}function iN(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"header"),o._uU(2),o.qZA(),o.TgZ(3,"section"),o.TgZ(4,"div",12),o.TgZ(5,"table",13),o.ynx(6,14),o.YNc(7,qk,2,0,"th",15),o.YNc(8,Gk,2,1,"td",16),o.BQk(),o.ynx(9,17),o.YNc(10,jk,2,0,"th",15),o.YNc(11,zk,3,4,"td",16),o.BQk(),o.ynx(12,18),o.YNc(13,Yk,2,0,"th",15),o.YNc(14,Hk,2,1,"td",16),o.BQk(),o.ynx(15,19),o.YNc(16,Bk,2,0,"th",15),o.YNc(17,Vk,2,1,"td",16),o.BQk(),o.ynx(18,20),o.YNc(19,Wk,2,0,"th",15),o.YNc(20,Jk,2,2,"td",16),o.BQk(),o.ynx(21,21),o.YNc(22,Xk,2,0,"th",15),o.YNc(23,$k,2,2,"td",16),o.BQk(),o.ynx(24,22),o.YNc(25,Qk,2,0,"th",15),o.YNc(26,Kk,7,0,"td",50),o.BQk(),o.YNc(27,tN,1,0,"tr",24),o.YNc(28,eN,1,0,"tr",25),o.YNc(29,nN,3,0,"tr",26),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.hij("Paralelas (",t.paralelas.data.length,")"),o.xp6(3),o.Q6J("dataSource",t.paralelas),o.xp6(22),o.Q6J("matHeaderRowDef",t.linderoColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",t.linderoColumns)}}const rN=function(e){return{correct:e}};function oN(e,i){if(1&e&&(o.TgZ(0,"div",54),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(2,rN,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}const p0="[DIVISION_TOOL]",Sr="[DIVISION_TOOL][LINDERO]",uc="[DIVISION_TOOL][LINESTRING]",sN=new mt({fill:new Q({color:"rgba(143, 175, 0, 0.2)"}),stroke:new J({color:"rgba(143, 175, 0, 0.5)",lineDash:[10,10],width:2}),image:new At({radius:5,stroke:new J({color:"rgba(143, 175, 0, 0.7)"}),fill:new Q({color:"rgba(143, 175, 0, 0.2)"})})}),Wa=new mt({stroke:new J({color:"#8faf00",width:3,lineDash:void 0}),image:new At({radius:5,stroke:new J({color:"#8faf00"}),fill:new Q({color:"#8faf00"})})}),lN=new mt({stroke:new J({color:"#0000FF",width:2,lineDash:void 0}),fill:new Q({color:"rgba(0, 0, 255, 0.2)"}),image:new At({radius:5,stroke:new J({color:"rgba(0, 0, 255, 0.3)"}),fill:new Q({color:"rgba(0, 0, 255, 0.3)"})})}),vd="[DIVISION_SNAP]",g0=new mt({stroke:new J({color:"rgba(241, 229, 53, 0.8)",lineDash:[10,10],width:2}),image:new At({radius:5,stroke:new J({color:"rgba(241, 229, 53, 0.8)"}),fill:new Q({color:"rgba(241, 229, 53, 0.8)"})})});let cN=(()=>{class e{constructor(t,n,r,a,s){this.dialogRef=t,this.mapService=n,this.catastroService=r,this.featureService=a,this.snapService=s,this.backdropMessage="...",this.showLoading=!1,this.showResult=!1,this.resultCorrect=!0,this.resultMessage="",this.layerSelected="",this.isLayerSelected=!1,this.layerToFusion="",this.lineStringDivision=null,this.currentDivision={idDivision:"",lineJSON:"",idGeometry:"",user:"",fecha:null,tramite:"",generado:!1,geometry:null},this.linderos=new A.by([]),this.linderoColumns=["lado","medida","distancia","elemento","dirigido","limpiar","actions"],this.paralelas=new A.by([]),this.folioSICAM=0,this.drawActive=!1,this.configSnapLayers=[{name:"Puntos",snap:!0},{name:"Predio",snap:!1},{name:"Construccion",snap:!1}],this.sourceInteraction=new yi,this.snapSource=new yi,this.changeConfigSnap()}ngOnInit(){}ngOnDestroy(){this.mapService.clearDrawings(p0),this.sourceInteraction.clear(),this.sourceInteraction=null,this.deactivateInteractions(),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null),this.deactivateSnap(),this.snapSource.clear(),this.snapSource=null,this.objectGeoSelected&&(this.cleanDivision(),this.catastroService.deleteLinderos(this.objectGeoSelected.idPredio).subscribe(t=>{}))}callClose(){this.dialogRef.close()}handleSelectLayer(){this.deleteDraw(),this.deactivateInteractions(),this.deactivateSnap(),this.folioSICAM=0,this.linderos.data=[],this.paralelas.data=[],this.layerToFusion="predio"===this.layerSelected?"predio":"construcci\xf3n",this.isLayerSelected=!0,""!==this.layerToFusion&&!this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}mapClickHandler(){return t=>{this.objectGeoSelected?(this.backdropMessage="Limpiando predio...",this.cleanDivision(!1),this.catastroService.deleteLinderos(this.objectGeoSelected.idPredio).subscribe(a=>{})):this.deleteDraw(),this.backdropMessage="Obteniendo linderos...",this.showLoading=!0,this.showResult=!1,this.folioSICAM=0,this.linderos.data=[],this.paralelas.data=[],this.mapService.clearDrawings(Sr);const[n,r]=t.coordinate;switch(this.layerSelected){case"predio":this.catastroService.getPredioAtPoint(n,r,{frentes:!1,construcciones:!1}).subscribe(s=>{if(null!==s){this.objectGeoSelected=s,this.catastroService.getLinderos(this.objectGeoSelected.idPredio).subscribe(c=>{this.linderos.data=c,this.showLoading=!1});const l=this.featureService.createFeature(Sr,this.objectGeoSelected.geometry,{idPredio:this.objectGeoSelected.idPredio,clave:this.objectGeoSelected.clave,cuenta:""});this.mapService.drawFeature(l,Wa)}else this.showLoading=!1});break;case"construction":this.catastroService.getConstructionAtPoint(n,r).subscribe(s=>{if(null!==s){this.objectGeoSelected=s,this.linderos.data=[];const l=this.featureService.createFeature(Sr,this.objectGeoSelected.geometry,{idConstruccion:this.objectGeoSelected.idConstruccion,bloque:this.objectGeoSelected.bloque,niveles:this.objectGeoSelected.niveles,clasificacion:this.objectGeoSelected.clasificacion});this.mapService.drawFeature(l,Wa),this.showLoading=!1}else this.showLoading=!1})}}}moveToLindero(t){var n;const r=this.featureService.createFeature(Sr,t.geometry,{idLindero:t.idLindero,idPredio:t.idPredio});this.mapService.clearDrawings(Sr),this.mapService.drawFeature(r,Wa);const a=null===(n=r.getGeometry())||void 0===n?void 0:n.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(a)}moveToParalela(t){var n;const r=this.featureService.createFeature(Sr,t.geometry,{idParalela:t.idParalela,idLindero:t.idLindero,idPredio:t.idPredio});this.mapService.clearDrawings(Sr),this.mapService.drawFeature(r,Wa);const a=null===(n=r.getGeometry())||void 0===n?void 0:n.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(a)}divideLindero(t){this.backdropMessage="Dividiendo lindero...",this.showLoading=!0,this.catastroService.divideLindero(t).subscribe(n=>{this.showLoading=!1,this.resultMessage="Lindero seleccionado dividido",this.resultCorrect=!0,this.showResult=!0},n=>{console.log(n),this.showLoading=!1,this.resultMessage="Error al dividir lindero",this.resultCorrect=!1,this.showResult=!0})}divideParalela(t){this.backdropMessage="Dividiendo paralela...",this.showLoading=!0,this.catastroService.divideLindero({idLindero:t.idParalela,idPredio:t.idPredio,usuario:t.user,fecha:t.fecha,procesado:!0,lado:t.lado,distancia:t.distancia,geometry:t.geometry,distance:t.distance,element:t.element,isDirected:t.isDirected,needToClean:t.needToClean}).subscribe(r=>{this.showLoading=!1,this.resultMessage="Paralela seleccionada dividida",this.resultCorrect=!0,this.showResult=!0},r=>{console.log(r),this.showLoading=!1,this.resultMessage="Error al dividir paralela",this.resultCorrect=!1,this.showResult=!0})}getParalela(t){this.backdropMessage="Generando paralela...",this.showLoading=!0;let n="";this.catastroService.generateParalela(t).subscribe(r=>{switch(this.layerSelected){case"predio":n=this.objectGeoSelected.idPredio;break;case"construction":n=this.objectGeoSelected.idConstruccion}this.catastroService.getParalelas(n).subscribe(a=>{this.paralelas.data=a,this.showLoading=!1,this.resultMessage="Paralelas generadas al lindero",this.resultCorrect=!0,this.showResult=!0})},r=>{console.log(r),this.showLoading=!1,this.resultMessage="Error al generar paralelas",this.resultCorrect=!1,this.showResult=!0})}activateSnapLayer(t,n){const r=this.configSnapLayers.findIndex(a=>a.name===n);-1!==r&&(this.configSnapLayers[r].snap=t.checked,this.changeConfigSnap()),this.deactivateSnap(),this.drawActive&&this.activateSnap()}drawDivision(t){this.drawActive=t.checked,this.deactivateInteractions(),this.deactivateSnap(),this.stopMapClicEvents(this.drawActive),this.drawActive&&(this.mapService.clearDrawings(uc),this.drawLine(),this.activateSnap())}deleteDraw(){this.mapService.clearDrawings(uc),this.lineStringDivision=null}cleanDraw(){this.deleteDraw(),this.deactivateInteractions(),this.deactivateSnap(),this.drawLine(),this.activateSnap()}cleanDivision(t=!0){t&&(this.backdropMessage="Limpiando predio...",this.showLoading=!0),this.showResult=!1,this.deleteDraw(),this.catastroService.cleanPredioDivision(this.objectGeoSelected.idPredio).subscribe(n=>{this.paralelas.data=[],t&&(this.showLoading=!1)},n=>{console.log(n),t&&(this.showLoading=!1)})}generateDivision(){this.backdropMessage="Generando subdivisi\xf3n...",this.showLoading=!0;let t="",n="";const r=[];switch(this.layerSelected){case"predio":n=this.objectGeoSelected.idPredio,r.push(this.objectGeoSelected.clave),t=JSON.stringify({Predio:this.lineStringDivision});break;case"construction":n=this.objectGeoSelected.idConstruccion,t=JSON.stringify({Construccion:this.lineStringDivision});break;default:this.showLoading=!1}""!==t&&this.catastroService.createDivision(t,n).subscribe(a=>{this.currentDivision=a,null===this.currentDivision.geometry?(this.resultMessage="La subdivisi\xf3n no es posible",this.resultCorrect=!1):this.catastroService.validateDivision(r).subscribe(s=>{var l;if(this.folioSICAM=s,0!==this.folioSICAM){if(this.resultCorrect=!0,this.resultMessage="Subdivisi\xf3n generada","GeometryCollection"===this.currentDivision.geometry.type){const c=[];this.currentDivision.geometry.geometries.map(d=>{c.push(this.featureService.createFeature("[DIVISION_TOOL][RESULT]",d,{idDivision:this.currentDivision.idDivision,json:this.currentDivision.lineJSON,idGeom:this.currentDivision.idGeometry,user:this.currentDivision.user}))}),this.mapService.getMapById(this.mapService.default).drawFeatures(c,lN);const u=null===(l=c[0].getGeometry())||void 0===l?void 0:l.getExtent();this.mapService.getMapById(this.mapService.default).moveTo(u)}}else this.resultCorrect=!1,this.resultMessage="Subdivisi\xf3n no v\xe1lida";this.mapService.clearDrawings(uc),this.showResult=!0,this.showLoading=!1},s=>{console.log(s),this.showResult=!0,this.showLoading=!1,this.resultCorrect=!1,this.resultMessage="Error al validar subdivisi\xf3n"})})}applyDivision(){this.backdropMessage="Aplicando subdivisi\xf3n...",this.showLoading=!0,this.showResult=!1,0!==this.folioSICAM?""!==this.currentDivision.idDivision?null!==this.currentDivision.geometry?this.catastroService.applyDivision(this.currentDivision.idDivision).subscribe(t=>{t?(this.cleanResults(),this.resultMessage="Subdivisi\xf3n aplicada",this.resultCorrect=!0,this.showLoading=!1):(this.resultMessage="Error al aplicar subdivisi\xf3n",this.resultCorrect=!1,this.showLoading=!1),this.showResult=!0}):(this.resultMessage="No se puede aplicar esta subdivisi\xf3n",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1):(this.resultMessage="No se ha generado la subdivisi\xf3n",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1):(this.resultMessage="La subdivisi\xf3n debe ser valida",this.resultCorrect=!1,this.showResult=!0,this.showLoading=!1)}deactivateInteractions(){this.mapInteraction&&this.mapService.removeInteraction(this.mapInteraction)}deactivateSnap(){this.mapMoveSnapHandler&&(this.mapService.removeEventHandler(this.mapMoveSnapHandler),this.mapMoveSnapHandler=null),this.mapService.removeInteraction(this.snapInteraction),this.snapInteraction=null,this.snapSource.clear(),this.mapService.clearDrawings(vd)}stopMapClicEvents(t){""===this.layerToFusion?t?this.mapEventHandlerId||(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,()=>{},"HIGH")):(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null):t?(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,()=>{},"HIGH")):(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}activateSnap(){const t=this;(!this.snapLayers||!Array.isArray(this.snapLayers))&&(this.snapLayers=this.snapService.getSnapLayers()),this.mapMoveSnapHandler&&(this.mapService.removeEventHandler(this.mapMoveSnapHandler),this.mapMoveSnapHandler=null),this.mapMoveSnapHandler=this.mapService.addEventHandler(Ht.MOVEEND,s=>{const l=s.map.getView(),c=l.calculateExtent(s.map.getSize()),u=1*l.getResolution()*39.37*(25.4/.28);t.loadSnapFeatures(c,u)},"SPECIAL");const r=this.mapService.getMapById(this.mapService.default).getViewExtent(),a=1*this.mapService.getMapById(this.mapService.default).getViewResolution()*39.37*(25.4/.28);this.loadSnapFeatures(r,a),this.snapInteraction=new d0({source:this.snapSource}),this.mapService.addInteraction(this.snapInteraction)}loadSnapFeatures(t,n){const r=this;(0,_d.D)(r.snapLayers.map(a=>r.snapService.getFeatures(a.id,t,n))).subscribe(a=>{const s=new gd,l=a.map(c=>c.geometries.map(h=>{const u=s.readGeometry(h,{dataProjection:"EPSG:6368",featureProjection:"EPSG:6368"}),d=new Wn(u);return d.setId(vd+ue()()),d.setStyle(g0),d})).reduce((c,h)=>c.concat(h),[]);r.mapService.clearDrawings(vd),l.map(c=>r.mapService.drawFeature(c,g0)),this.snapSource.addFeatures(l)})}drawLine(){this.mapInteraction=new Va({source:this.sourceInteraction,type:"LineString",style:sN}),this.mapService.addInteraction(this.mapInteraction),this.mapInteraction.once("drawstart",t=>{}),this.mapInteraction.once("drawend",t=>{const n=t.feature.clone();n.setId(`${uc}.${ue()()}`),this.lineStringDivision=this.featureService.parseFeatureGeometry2Geojson(n),this.mapService.drawFeature(n,Wa)})}cleanResults(){this.mapService.clearDrawings(p0),this.cleanDivision(),this.currentDivision={idDivision:"",lineJSON:"",idGeometry:"",user:"",fecha:null,tramite:"",generado:!1,geometry:null},this.catastroService.deleteLinderos(this.objectGeoSelected.idPredio).subscribe(t=>{this.objectGeoSelected=null}),this.linderos.data=[],this.paralelas.data=[],this.folioSICAM=0}changeConfigSnap(){this.snapService.getConfiguration().subscribe(t=>{this.snapLayers=t.filter(n=>{const r=this.configSnapLayers.find(a=>a.name===n.layer);if(void 0!==r&&r.snap)return n})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36($t),o.Y36(We),o.Y36(ve),o.Y36(f0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-predio-divison"]],decls:76,vars:15,consts:[[1,"division-title"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"division-container"],[1,"division-content"],[1,"shadow"],[1,"select-layer"],["name","selectLayer",1,"full-select",3,"ngModel","ngModelChange","change"],["selected","","disabled","","value",""],["ngValue","predio"],["ngValue","construction"],[4,"ngIf"],[1,"data-table"],["mat-table","",3,"dataSource"],["matColumnDef","lado"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","medida"],["matColumnDef","distancia"],["matColumnDef","elemento"],["matColumnDef","dirigido"],["matColumnDef","limpiar"],["matColumnDef","actions"],["mat-cell","","colspan","3","class","action-button",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","row-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"snap-select-section"],[3,"change"],[1,"draw-section"],["mat-mini-fab","","color","primary","title","Borrar dibujo subdivisi\xf3n",3,"disabled","click"],["mat-mini-fab","","color","primary","title","Limpia y reinicia subdivisi\xf3n",3,"disabled","click"],["class","result-container",3,"ngClass",4,"ngIf"],[1,"action-section"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"backdropMessage","showingLoading"],["mat-header-cell",""],["mat-cell",""],["type","text",3,"ngModel","ngModelChange"],["type","number",3,"ngModel","ngModelChange"],["matTooltip","La acci\xf3n se realiza en el sentido hacia donde va el vector del lindero",3,"checked","ngModel","ngModelChange"],["matTooltip","Se limpia el lindero antes de realizar la acci\xf3n",3,"checked","ngModel","ngModelChange"],["mat-cell","","colspan","3",1,"action-button"],["mat-icon-button","","color","primary","matTooltip","Zoom al lindero seleccionado",3,"click"],["mat-icon-button","","color","primary","matTooltip","Divide lindero seleccionado",3,"click"],["mat-icon-button","","color","primary","matTooltip","Genera l\xednea paralela",3,"click"],["mat-header-row",""],["mat-row","",1,"row-pointer"],[1,"mat-row"],["colspan","7",1,"mat-cell"],["mat-cell","","colspan","2","class","action-button",4,"matCellDef"],["mat-cell","","colspan","2",1,"action-button"],["mat-icon-button","","color","primary","matTooltip","Zoom a la paralela seleccionada",3,"click"],["mat-icon-button","","color","primary","matTooltip","Divide paralela seleccionada",3,"click"],[1,"result-container",3,"ngClass"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-icon"),o._uU(2,"view_comfy"),o.qZA(),o.TgZ(3,"span",1),o._uU(4," Subdivisi\xf3n "),o.qZA(),o.TgZ(5,"button",2),o.NdJ("click",function(){return n.callClose()}),o.TgZ(6,"mat-icon"),o._uU(7," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(8,"div",3),o.TgZ(9,"div",4),o.TgZ(10,"div",5),o.TgZ(11,"section"),o.TgZ(12,"div",6),o.TgZ(13,"select",7),o.NdJ("ngModelChange",function(a){return n.layerSelected=a})("change",function(){return n.handleSelectLayer()}),o.TgZ(14,"option",8),o._uU(15,"Selecciona capa para tr\xe1mite de subdivisi\xf3n"),o.qZA(),o.TgZ(16,"option",9),o._uU(17," Predio "),o.qZA(),o.TgZ(18,"option",10),o._uU(19," Construcci\xf3n "),o.qZA(),o.qZA(),o.YNc(20,bk,3,1,"div",11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"div",5),o.TgZ(22,"header"),o._uU(23),o.qZA(),o.TgZ(24,"section"),o.TgZ(25,"div",12),o.TgZ(26,"table",13),o.ynx(27,14),o.YNc(28,Tk,2,0,"th",15),o.YNc(29,Mk,2,1,"td",16),o.BQk(),o.ynx(30,17),o.YNc(31,wk,2,0,"th",15),o.YNc(32,Pk,3,4,"td",16),o.BQk(),o.ynx(33,18),o.YNc(34,Ok,2,0,"th",15),o.YNc(35,Sk,2,1,"td",16),o.BQk(),o.ynx(36,19),o.YNc(37,Ak,2,0,"th",15),o.YNc(38,Ek,2,1,"td",16),o.BQk(),o.ynx(39,20),o.YNc(40,Ik,2,0,"th",15),o.YNc(41,Dk,2,2,"td",16),o.BQk(),o.ynx(42,21),o.YNc(43,Rk,2,0,"th",15),o.YNc(44,Zk,2,2,"td",16),o.BQk(),o.ynx(45,22),o.YNc(46,Lk,2,0,"th",15),o.YNc(47,kk,10,0,"td",23),o.BQk(),o.YNc(48,Nk,1,0,"tr",24),o.YNc(49,Fk,1,0,"tr",25),o.YNc(50,Uk,3,0,"tr",26),o.qZA(),o.qZA(),o.qZA(),o.YNc(51,iN,30,5,"div",11),o.TgZ(52,"div"),o.TgZ(53,"span",27),o._uU(54,"Ajustarse a:"),o.qZA(),o.TgZ(55,"div",27),o.TgZ(56,"mat-slide-toggle",28),o.NdJ("change",function(a){return n.activateSnapLayer(a,"Predio")}),o._uU(57,"Predio"),o.qZA(),o.TgZ(58,"mat-slide-toggle",28),o.NdJ("change",function(a){return n.activateSnapLayer(a,"Construccion")}),o._uU(59,"Construcci\xf3n"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(60,"div",29),o.TgZ(61,"mat-slide-toggle",28),o.NdJ("change",function(a){return n.drawDivision(a)}),o._uU(62,"Dibuja subdivisi\xf3n"),o.qZA(),o.TgZ(63,"button",30),o.NdJ("click",function(){return n.cleanDraw()}),o.TgZ(64,"mat-icon"),o._uU(65,"delete"),o.qZA(),o.qZA(),o.TgZ(66,"button",31),o.NdJ("click",function(){return n.cleanDivision()}),o.TgZ(67,"mat-icon"),o._uU(68,"autorenew"),o.qZA(),o.qZA(),o.qZA(),o.YNc(69,oN,2,4,"div",32),o.TgZ(70,"div",33),o.TgZ(71,"button",34),o.NdJ("click",function(){return n.generateDivision()}),o._uU(72," Genera subdivisi\xf3n "),o.qZA(),o.TgZ(73,"button",34),o.NdJ("click",function(){return n.applyDivision()}),o._uU(74," Aplica subdivisi\xf3n "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(75,"sic-backdrop",35)),2&t&&(o.xp6(13),o.Q6J("ngModel",n.layerSelected),o.xp6(7),o.Q6J("ngIf",n.isLayerSelected),o.xp6(3),o.hij("Linderos (",n.linderos.data.length,")"),o.xp6(3),o.Q6J("dataSource",n.linderos),o.xp6(22),o.Q6J("matHeaderRowDef",n.linderoColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.linderoColumns),o.xp6(2),o.Q6J("ngIf",n.paralelas.data.length>0),o.xp6(12),o.Q6J("disabled",null===n.lineStringDivision),o.xp6(3),o.Q6J("disabled",void 0===n.objectGeoSelected),o.xp6(3),o.Q6J("ngIf",n.showResult),o.xp6(2),o.Q6J("disabled",void 0===n.objectGeoSelected||null===n.lineStringDivision),o.xp6(2),o.Q6J("disabled",void 0===n.objectGeoSelected||null===n.lineStringDivision),o.xp6(2),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[ce.Hw,Kt.lW,q.EJ,q.JJ,q.On,q.YN,q.Kr,B.O5,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.Ee,cd.Rr,Me.q,A.ge,A.ev,q.Fj,q.wV,hc.oG,Gi.gM,A.XQ,A.Gk,B.mk],pipes:[B.JJ],styles:[".division-title[_ngcontent-%COMP%]{background:#b51e1c;height:28px;color:#fff;font-size:12pt;font-weight:700;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:4px 4px 0 0;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.mat-dialog-container[_ngcontent-%COMP%]{overflow:hidden}.division-container[_ngcontent-%COMP%]{margin:8px -20px 0 -16px}.division-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .division-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#495057;border:1px solid #ced4da;border-radius:4px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.division-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .division-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]{max-height:33vw;overflow:auto}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-weight:700;background-color:#e4b346;color:#fff;border-radius:8px 8px 0 0;padding:5px}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-align:center}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   td.attribute[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;text-align:center}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{font-size:9pt;text-align:center;max-width:150px;overflow-wrap:break-word}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{height:200px;overflow:auto}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:16px}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:32px}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:8pt}.division-container[_ngcontent-%COMP%]   .division-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100px;width:76%}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin-bottom:6px}.shadow[_ngcontent-%COMP%]{box-shadow:0 5px 20px -5px #00000080}.full-select[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px}.select-layer[_ngcontent-%COMP%]{padding:12px}.action-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:12px;padding-bottom:12px}.action-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;margin:4px 20px}.snap-select-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around}.snap-select-section[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-top:8px}.draw-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;padding-top:12px;padding-bottom:12px}.draw-section[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-top:8px}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}"]}),e})();var hN=Y(6805),uN=Y(930);function dN(e,i){const t="object"==typeof i;return new Promise((n,r)=>{const a=new uN.Hp({next:s=>{n(s),a.unsubscribe()},error:r,complete:()=>{t?n(i.defaultValue):r(new hN.K)}});e.subscribe(a)})}function fN(e,i){if(1&e&&(o.TgZ(0,"option",29),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.hij(" ",t.layerName," ")}}function pN(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.hij("Selecciona ",t.layerEdition," en el mapa para editar atributos")}}function gN(e,i){1&e&&(o.TgZ(0,"th",30),o._uU(1,"Campo"),o.qZA())}function _N(e,i){if(1&e&&(o.TgZ(0,"td",31),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.attributeShow)}}function mN(e,i){1&e&&(o.TgZ(0,"th",30),o._uU(1,"Valor"),o.qZA())}function vN(e,i){if(1&e&&(o.TgZ(0,"option",29),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("ngValue",t.id),o.xp6(1),o.hij(" ",t.descripcion," ")}}function yN(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"select",34),o.NdJ("ngModelChange",function(r){return o.CHM(t),o.oxw().$implicit.value=r}),o.TgZ(2,"option",35),o._uU(3,"Selecciona valor"),o.qZA(),o.YNc(4,vN,2,2,"option",14),o.qZA(),o.qZA()}if(2&e){const t=o.oxw().$implicit;o.xp6(1),o.Q6J("ngModel",t.value),o.xp6(3),o.Q6J("ngForOf",t.catalogue)}}function xN(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"input",36),o.NdJ("ngModelChange",function(r){return o.CHM(t),o.oxw().$implicit.value=r}),o.qZA()}if(2&e){const t=o.oxw().$implicit;o.Q6J("ngModel",t.value)}}function CN(e,i){if(1&e&&(o.TgZ(0,"td",31),o.YNc(1,yN,5,2,"div",32),o.YNc(2,xN,1,1,"ng-template",null,33,o.W1O),o.qZA()),2&e){const t=i.$implicit,n=o.MAs(3);o.xp6(1),o.Q6J("ngIf",t.hasCatalogue)("ngIfElse",n)}}function bN(e,i){1&e&&o._UZ(0,"tr",37)}function TN(e,i){1&e&&o._UZ(0,"tr",38)}function MN(e,i){1&e&&(o.TgZ(0,"tr",39),o.TgZ(1,"td",40),o._uU(2," No se han obtenido atributos para editar "),o.qZA(),o.qZA())}const wN=function(e){return{correct:e}};function PN(e,i){if(1&e&&(o.TgZ(0,"div",41),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(2,wN,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}function ON(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"label",42),o.TgZ(2,"span"),o._uU(3,"\xbfEst\xe1 seguro que desea actualizar?"),o.qZA(),o.qZA(),o.TgZ(4,"label",43),o.TgZ(5,"div",26),o.TgZ(6,"button",44),o.NdJ("click",function(){return o.CHM(t),o.oxw().validateData()}),o._uU(7," Si "),o.qZA(),o.TgZ(8,"button",44),o.NdJ("click",function(){return o.CHM(t),o.oxw().cancelUpdate()}),o._uU(9," No "),o.qZA(),o.qZA(),o.qZA(),o.qZA()}}function SN(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"label",42),o.TgZ(2,"span"),o._uU(3,"\xbfEst\xe1 seguro que desea eliminar?"),o.qZA(),o.qZA(),o.TgZ(4,"label",43),o.TgZ(5,"div",26),o.TgZ(6,"button",44),o.NdJ("click",function(){return o.CHM(t),o.oxw().deleteData()}),o._uU(7," Si "),o.qZA(),o.TgZ(8,"button",44),o.NdJ("click",function(){return o.CHM(t),o.oxw().showDelete=!1}),o._uU(9," No "),o.qZA(),o.qZA(),o.qZA(),o.qZA()}}const dc="[ATTRIBUTE_EDITION_TOOL]",AN=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let EN=(()=>{class e{constructor(t,n,r,a){this.dialogRef=t,this.mapService=n,this.catastroService=r,this.featureService=a,this.backdropMessage="...",this.showLoading=!1,this.showResult=!1,this.resultCorrect=!0,this.resultMessage="",this.isLayerSelected=!1,this.layerEdition="",this.idGeoSelected="",this.hasValidObject=!1,this.showQuestion=!1,this.showDelete=!1,this.editionAttributes=new A.by([]),this.attributeColumns=["key","value"]}ngOnInit(){this.backdropMessage="Cargando capas editables...",this.showLoading=!0,this.catastroService.getEditionLayers().subscribe(t=>{this.editionLayers=t,this.showLoading=!1})}ngOnDestroy(){this.mapService.clearDrawings(dc),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}callClose(){this.dialogRef.close()}handleSelectLayer(){switch(this.backdropMessage="Cargando atributos editables...",this.showLoading=!0,this.showResult=!1,this.showQuestion=!1,this.showDelete=!1,this.hasValidObject=!1,this.isLayerSelected=!0,this.layerSelected.name){case"Predio":this.layerEdition="predio";break;case"Construccion":this.layerEdition="construcci\xf3n";break;case"Manzana":this.layerEdition="manzana";break;case"Colonia":this.layerEdition="colonia";break;case"PredioNumeroExterior":this.layerEdition="n\xfamero exterior";break;default:this.layerEdition=this.layerSelected.layerName.toLowerCase()}this.catastroService.getEditionAttributes(this.layerSelected.idLayer).subscribe(t=>{this.editionAttributes.data=t,this.showLoading=!1}),""!==this.layerEdition&&!this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}mapClickHandler(){return t=>{this.showResult=!1,this.showQuestion=!1,this.showDelete=!1,this.hasValidObject=!1,this.backdropMessage="Cargando datos...",this.showLoading=!0;const[n,r]=t.coordinate;this.catastroService.getObjectAtPoint(this.layerSelected,this.editionAttributes.data,n,r).subscribe(a=>{if(null!==a){this.objectGeoSelected=a,this.idGeoSelected=this.objectGeoSelected.id,this.hasValidObject=!0;const s=this.featureService.createFeature(dc,this.objectGeoSelected.geometry,{id:this.objectGeoSelected.id});this.mapService.clearDrawings(dc),this.mapService.drawFeature(s,AN),this.objectGeoSelected.properties.map(l=>{this.editionAttributes.data.map(c=>{l.key===c.attributeName&&(c.value=l.value)})})}else this.mapService.clearDrawings(dc);this.showLoading=!1})}}showingQuestion(){this.showResult=!1,this.showQuestion=!0}validateData(){var t=this;return se(function*(){if(t.showResult=!1,t.showQuestion=!1,t.showDelete=!1,"Construccion"===t.layerSelected.name){t.backdropMessage="Validando datos...",t.showLoading=!0;const n=t.editionAttributes.data.findIndex(d=>"niveles"===d.attributeName),r=t.editionAttributes.data.findIndex(d=>"clasificacion"===d.attributeName),a=/^\d+\:\d+$/,s=+t.editionAttributes.data[n].value,c=t.editionAttributes.data[r].value.trim().split(",");let h=0,u=!0;for(const d of c){const f=d.trim();if(null==f.match(a)){t.resultCorrect=!1,t.resultMessage="Formato de clasificaci\xf3n incorrecto",t.showResult=!0,u=!1,t.showLoading=!1;break}{const p=f.split(":");if(h+=+p[0],!(yield dN(t.catastroService.isValidClasificationConstruction(p[1])))){t.resultCorrect=!1,t.resultMessage=`La clave de clasificaci\xf3n ${p[1]} no es v\xe1lida`,t.showResult=!0,u=!1,t.showLoading=!1;break}}}u&&(h===s?t.updateData():(t.resultCorrect=!1,t.resultMessage="El n\xfamero de niveles no coincide con el de la clasificaci\xf3n",t.showResult=!0,t.showLoading=!1))}else t.updateData()})()}updateData(){this.backdropMessage="Actualizando datos...",this.showLoading=!0,this.catastroService.updateAttributes(this.layerSelected,this.editionAttributes.data,this.idGeoSelected).subscribe(t=>{t?(this.resultCorrect=!0,this.resultMessage="Datos actualizados"):(this.resultCorrect=!1,this.resultMessage="No se pudo realizar actualizaci\xf3n"),this.showResult=!0,this.hasValidObject=!1,this.showLoading=!1},t=>{console.log(t),this.resultCorrect=!1,this.resultMessage="Error al actualizar",this.showResult=!0,this.hasValidObject=!1,this.showLoading=!1}),this.showQuestion=!1,this.showDelete=!1}cancelUpdate(){this.showQuestion=!1,this.showDelete=!1}deleteData(){this.backdropMessage="Eliminando objeto geom\xe9trico...",this.showLoading=!0,this.catastroService.deleteObjectById(this.layerSelected,this.idGeoSelected).subscribe(t=>{t?(this.resultCorrect=!0,this.resultMessage="Datos eliminados"):(this.resultCorrect=!1,this.resultMessage="No se pudo eliminar el objeto geom\xe9trico"),this.showResult=!0,this.hasValidObject=!1,this.showLoading=!1},t=>{console.log(t),this.resultCorrect=!1,this.resultMessage="Error al eliminar",this.showResult=!0,this.hasValidObject=!1,this.showLoading=!1}),this.showDelete=!1,this.showQuestion=!1}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36($t),o.Y36(We),o.Y36(ve))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-attribute-edition"]],decls:47,vars:15,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],[1,"attribute-edition-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"attribute-edition-container"],[1,"attribute-edition-content"],[1,"shadow"],[1,"select-layer"],["name","selectLayer",1,"full-select",3,"ngModel","ngModelChange","change"],["selected","","disabled","","value","undefined"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"data-table"],["mat-table","",3,"dataSource"],["matColumnDef","key"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","row-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","result-container",3,"ngClass",4,"ngIf"],[1,"action-section"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"backdropMessage","showingLoading"],[3,"ngValue"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["normalInput",""],[3,"ngModel","ngModelChange"],["selected","","disabled","","value",""],["type","text",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row","",1,"row-pointer"],[1,"mat-row"],["colspan","2",1,"mat-cell"],[1,"result-container",3,"ngClass"],["for","question"],["for","answer"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-icon"),o._uU(3,"create"),o.qZA(),o.TgZ(4,"div",2),o.O4$(),o.TgZ(5,"svg",3),o._UZ(6,"path",4),o._UZ(7,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"span",6),o._uU(9," Edici\xf3n de atributos simple "),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return n.callClose()}),o.TgZ(11,"mat-icon"),o._uU(12," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",8),o.TgZ(14,"div",9),o.TgZ(15,"div",10),o.TgZ(16,"section"),o.TgZ(17,"div",11),o.TgZ(18,"select",12),o.NdJ("ngModelChange",function(a){return n.layerSelected=a})("change",function(){return n.handleSelectLayer()}),o.TgZ(19,"option",13),o._uU(20,"Selecciona capa a editar"),o.qZA(),o.YNc(21,fN,2,2,"option",14),o.qZA(),o.YNc(22,pN,3,1,"div",15),o.qZA(),o.qZA(),o.qZA(),o.TgZ(23,"div",10),o.TgZ(24,"header"),o._uU(25),o.qZA(),o.TgZ(26,"section"),o.TgZ(27,"div",16),o.TgZ(28,"table",17),o.ynx(29,18),o.YNc(30,gN,2,0,"th",19),o.YNc(31,_N,2,1,"td",20),o.BQk(),o.ynx(32,21),o.YNc(33,mN,2,0,"th",19),o.YNc(34,CN,4,2,"td",20),o.BQk(),o.YNc(35,bN,1,0,"tr",22),o.YNc(36,TN,1,0,"tr",23),o.YNc(37,MN,3,0,"tr",24),o.qZA(),o.qZA(),o.qZA(),o.YNc(38,PN,2,4,"div",25),o.TgZ(39,"div",26),o.TgZ(40,"button",27),o.NdJ("click",function(){return n.showingQuestion()}),o._uU(41," Actualizar datos "),o.qZA(),o.TgZ(42,"button",27),o.NdJ("click",function(){return n.showDelete=!0}),o._uU(43," Eliminar objeto "),o.qZA(),o.qZA(),o.YNc(44,ON,10,0,"div",15),o.YNc(45,SN,10,0,"div",15),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(46,"sic-backdrop",28)),2&t&&(o.xp6(18),o.Q6J("ngModel",n.layerSelected),o.xp6(3),o.Q6J("ngForOf",n.editionLayers),o.xp6(1),o.Q6J("ngIf",n.isLayerSelected),o.xp6(3),o.hij("Atributos editables (",n.editionAttributes.data.length,")"),o.xp6(3),o.Q6J("dataSource",n.editionAttributes),o.xp6(7),o.Q6J("matHeaderRowDef",n.attributeColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.attributeColumns),o.xp6(2),o.Q6J("ngIf",n.showResult),o.xp6(2),o.Q6J("disabled",!1===n.hasValidObject),o.xp6(2),o.Q6J("disabled",!1===n.hasValidObject||!n.layerSelected.canDelete),o.xp6(2),o.Q6J("ngIf",n.showQuestion),o.xp6(1),o.Q6J("ngIf",n.showDelete),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,ce.Hw,Tt.Bh,Kt.lW,q.EJ,q.JJ,q.On,q.YN,q.Kr,B.sg,B.O5,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.Ee,Me.q,A.ge,A.ev,q.Fj,A.XQ,A.Gk,B.mk],styles:["[_nghost-%COMP%]{margin-right:64px!important}.attribute-edition-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.mat-dialog-container[_ngcontent-%COMP%]{overflow:hidden}.attribute-edition-container[_ngcontent-%COMP%]{margin:0 -24px}.attribute-edition-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .attribute-edition-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#495057;border:1px solid #ced4da;border-radius:4px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.attribute-edition-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .attribute-edition-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]{max-height:33vw;overflow:auto}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{background-color:#e4b346;height:32px;display:flex;justify-content:center;align-items:center;color:#fff}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-align:center}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   td.attribute[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;text-align:center}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{font-size:9pt;text-align:center;max-width:150px;overflow-wrap:break-word}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:16px}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:32px}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:8pt}.attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .attribute-edition-container[_ngcontent-%COMP%]   .attribute-edition-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{max-width:360px;width:90%}table[_ngcontent-%COMP%]{width:100%;padding:0 16px}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.predominante{background-color:#e4b34680}table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   .predominante[_ngcontent-%COMP%]{background-color:#e4b3464d}.shadow[_ngcontent-%COMP%]{box-shadow:0 5px 20px -5px #00000080}.full-select[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px}.select-layer[_ngcontent-%COMP%]{padding:12px}.action-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:12px;padding-bottom:12px}.action-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;margin:4px 20px}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}"]}),e})();function IN(e,i){1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2,"Selecciona 2 predios para realizar ajuste"),o.qZA(),o.qZA())}function DN(e,i){1&e&&(o.TgZ(0,"th",29),o._uU(1,"Clave"),o.qZA())}function RN(e,i){if(1&e&&(o.TgZ(0,"td",30),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function ZN(e,i){1&e&&(o.TgZ(0,"th",29),o._uU(1,"Subpredio"),o.qZA())}function LN(e,i){if(1&e&&(o.TgZ(0,"td",30),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.unidad)}}function kN(e,i){1&e&&(o.TgZ(0,"th",29),o._uU(1,"Cuenta"),o.qZA())}function NN(e,i){if(1&e&&(o.TgZ(0,"td",30),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.cuenta)}}function FN(e,i){1&e&&(o.TgZ(0,"th",29),o._uU(1,"\xc1rea cartogr\xe1fica"),o.qZA())}function UN(e,i){if(1&e&&(o.TgZ(0,"td",30),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.area,"1.2-2"),"m")}}function qN(e,i){1&e&&(o.TgZ(0,"th",29),o._uU(1,"Acciones"),o.qZA())}function GN(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",31),o.TgZ(1,"button",32),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().deleteSelected(a.idPredio)}),o.TgZ(2,"mat-icon"),o._uU(3,"delete_forever"),o.qZA(),o.qZA(),o.qZA()}}function jN(e,i){1&e&&o._UZ(0,"tr",33)}function zN(e,i){1&e&&o._UZ(0,"tr",34)}function YN(e,i){1&e&&(o.TgZ(0,"tr",35),o.TgZ(1,"td",36),o._uU(2," No se han seleccionado predios para ajuste "),o.qZA(),o.qZA())}const HN=function(e){return{correct:e}};function BN(e,i){if(1&e&&(o.TgZ(0,"div",37),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(2,HN,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}const yd="[CONSTRUCTION_ADJUST_TOOL]",VN=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let WN=(()=>{class e{constructor(t,n,r,a){this.dialogRef=t,this.mapService=n,this.catastroService=r,this.featureService=a,this.backdropMessage="...",this.showLoading=!1,this.optionSelected="",this.isOptionSelected=!1,this.predios=new A.by([]),this.predioColumns=["clave","subpredio","cuenta","areaCartografica","actions"],this.showResult=!1,this.resultCorrect=!0,this.resultMessage="",this.prediosSelected=[]}ngOnInit(){}ngAfterViewInit(){}ngOnDestroy(){this.mapService.clearDrawings(yd),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}callClose(){this.dialogRef.close()}handleSelectLayer(){this.isOptionSelected=!0,""!==this.optionSelected&&!this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}mapClickHandler(){return t=>{this.showResult=!1,this.backdropMessage="Obteniendo datos...",this.showLoading=!0;const[n,r]=t.coordinate;this.catastroService.getPredioAtPoint(n,r,{frentes:!1,construcciones:!1}).subscribe(s=>{if(null!==s&&-1===this.prediosSelected.findIndex(c=>c.idPredio===s.idPredio)){this.prediosSelected.push(s),this.predios.data=this.prediosSelected;const c=this.featureService.createFeature(`${yd}.${s.idPredio}`,s.geometry,{idPredio:s.idPredio,clave:s.clave,cuenta:""});this.mapService.drawFeature(c,VN)}this.showLoading=!1})}}deleteSelected(t){const n=this.prediosSelected.filter(r=>r.idPredio!==t);this.prediosSelected=n,this.predios.data=this.prediosSelected,this.mapService.clearDrawings(`${yd}.${t}`)}applyAdjust(){this.backdropMessage="Aplicando ajuste de construcciones...",this.showLoading=!0,this.showResult=!1;const t=[];this.prediosSelected.map(n=>{t.push(n.idPredio)}),"align"===this.optionSelected?this.catastroService.alignLindero(t).subscribe(n=>{n?(this.resultCorrect=!0,this.resultMessage="Ajuste de alinear de lindero realizado"):(this.resultCorrect=!1,this.resultMessage="No se pudo alinear lindero"),this.showResult=!0,this.showLoading=!1},n=>{console.log(n),this.resultCorrect=!1,this.resultMessage="Error al ejecutar alinea lindero",this.showResult=!0,this.showLoading=!1}):this.catastroService.splitConstructions(t).subscribe(n=>{n?(this.resultCorrect=!0,this.resultMessage="Ajuste de partir construcciones realizado"):(this.resultCorrect=!1,this.resultMessage="No se pudieron partir las construcciones"),this.showResult=!0,this.showLoading=!1},n=>{console.log(n),this.resultCorrect=!1,this.resultMessage="Error al ejecutar partir construcciones",this.showResult=!0,this.showLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36($t),o.Y36(We),o.Y36(ve))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-construction-adjust"]],decls:50,vars:11,consts:[[1,"construction-adjust-title"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"construction-adjust-container"],[1,"construction-adjust-content"],[1,"shadow"],[1,"select-option"],["name","selectOption",1,"full-select",3,"ngModel","ngModelChange","change"],["selected","","disabled","","value",""],["ngValue","align"],["ngValue","split"],[4,"ngIf"],[1,"data-table"],["mat-table","",3,"dataSource"],["matColumnDef","clave"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","subpredio"],["matColumnDef","cuenta"],["matColumnDef","areaCartografica"],["matColumnDef","actions"],["mat-cell","","class","action-button",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","row-pointer",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","result-container",3,"ngClass",4,"ngIf"],[1,"action-section"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"backdropMessage","showingLoading"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"action-button"],["mat-icon-button","","color","primary","matTooltip","Eliminar predio seleccionado",3,"click"],["mat-header-row",""],["mat-row","",1,"row-pointer"],[1,"mat-row"],["colspan","5",1,"mat-cell"],[1,"result-container",3,"ngClass"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-icon"),o._uU(2," settings_overscan "),o.qZA(),o.TgZ(3,"span",1),o._uU(4," Ajuste a construcciones "),o.qZA(),o.TgZ(5,"button",2),o.NdJ("click",function(){return n.callClose()}),o.TgZ(6,"mat-icon"),o._uU(7," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(8,"div",3),o.TgZ(9,"div",4),o.TgZ(10,"div",5),o.TgZ(11,"section"),o.TgZ(12,"div",6),o.TgZ(13,"select",7),o.NdJ("ngModelChange",function(a){return n.optionSelected=a})("change",function(){return n.handleSelectLayer()}),o.TgZ(14,"option",8),o._uU(15,"Selecciona tipo de ajuste"),o.qZA(),o.TgZ(16,"option",9),o._uU(17," Alinea lindero "),o.qZA(),o.TgZ(18,"option",10),o._uU(19," Partir construcciones "),o.qZA(),o.qZA(),o.YNc(20,IN,3,0,"div",11),o.qZA(),o.qZA(),o.qZA(),o.TgZ(21,"div",5),o.TgZ(22,"header"),o._uU(23),o.qZA(),o.TgZ(24,"section"),o.TgZ(25,"div",12),o.TgZ(26,"table",13),o.ynx(27,14),o.YNc(28,DN,2,0,"th",15),o.YNc(29,RN,2,1,"td",16),o.BQk(),o.ynx(30,17),o.YNc(31,ZN,2,0,"th",15),o.YNc(32,LN,2,1,"td",16),o.BQk(),o.ynx(33,18),o.YNc(34,kN,2,0,"th",15),o.YNc(35,NN,2,1,"td",16),o.BQk(),o.ynx(36,19),o.YNc(37,FN,2,0,"th",15),o.YNc(38,UN,5,4,"td",16),o.BQk(),o.ynx(39,20),o.YNc(40,qN,2,0,"th",15),o.YNc(41,GN,4,0,"td",21),o.BQk(),o.YNc(42,jN,1,0,"tr",22),o.YNc(43,zN,1,0,"tr",23),o.YNc(44,YN,3,0,"tr",24),o.qZA(),o.qZA(),o.qZA(),o.YNc(45,BN,2,4,"div",25),o.TgZ(46,"div",26),o.TgZ(47,"button",27),o.NdJ("click",function(){return n.applyAdjust()}),o._uU(48," Aplica ajuste "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(49,"sic-backdrop",28)),2&t&&(o.xp6(13),o.Q6J("ngModel",n.optionSelected),o.xp6(7),o.Q6J("ngIf",n.isOptionSelected),o.xp6(3),o.hij("Predios (",n.prediosSelected.length,")"),o.xp6(3),o.Q6J("dataSource",n.predios),o.xp6(16),o.Q6J("matHeaderRowDef",n.predioColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.predioColumns),o.xp6(2),o.Q6J("ngIf",n.showResult),o.xp6(2),o.Q6J("disabled",2!==n.prediosSelected.length),o.xp6(2),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[ce.Hw,Kt.lW,q.EJ,q.JJ,q.On,q.YN,q.Kr,B.O5,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.Ee,Me.q,A.ge,A.ev,Gi.gM,A.XQ,A.Gk,B.mk],pipes:[B.JJ],styles:[".construction-adjust-title[_ngcontent-%COMP%]{background:#b51e1c;height:28px;color:#fff;font-size:12pt;font-weight:700;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:4px 4px 0 0;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.mat-dialog-container[_ngcontent-%COMP%]{overflow:hidden}.construction-adjust-container[_ngcontent-%COMP%]{margin:8px -20px 0 -16px}.construction-adjust-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.construction-adjust-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:48%}.construction-adjust-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.construction-adjust-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .construction-adjust-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;color:#495057;border:1px solid #ced4da;border-radius:4px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.construction-adjust-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .construction-adjust-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]{max-height:33vw;overflow:auto}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-weight:700;background-color:#e4b346;color:#fff;border-radius:8px 8px 0 0;padding:5px}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-align:center}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   td.attribute[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;text-align:center}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{font-size:9pt;text-align:center;max-width:150px;overflow-wrap:break-word}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{height:180px;overflow:auto}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:16px}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:32px}.construction-adjust-container[_ngcontent-%COMP%]   .construction-adjust-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.shadow[_ngcontent-%COMP%]{box-shadow:0 5px 20px -5px #00000080}.full-select[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px}.select-option[_ngcontent-%COMP%]{padding:12px}.action-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:12px;padding-bottom:12px}.action-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;margin:4px 20px}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}"]}),e})();var _0=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),XN=function(e){function i(t,n,r,a){var s=e.call(this,t)||this;return s.selected=n,s.deselected=r,s.mapBrowserEvent=a,s}return _0(i,e),i}(ye),fc={},$N=function(e){function i(t){var a,n=e.call(this)||this,r=t||{};if(n.boundAddFeature_=n.addFeature_.bind(n),n.boundRemoveFeature_=n.removeFeature_.bind(n),n.condition_=r.condition?r.condition:wp,n.addCondition_=r.addCondition?r.addCondition:Mp,n.removeCondition_=r.removeCondition?r.removeCondition:Mp,n.toggleCondition_=r.toggleCondition?r.toggleCondition:Zh,n.multi_=!!r.multi&&r.multi,n.filter_=r.filter?r.filter:_t,n.hitTolerance_=r.hitTolerance?r.hitTolerance:0,n.style_=void 0!==r.style?r.style:function QN(){var e=Kc();return H(e.Polygon,e.LineString),H(e.GeometryCollection,e.LineString),function(i){return i.getGeometry()?e[i.getGeometry().getType()]:null}}(),n.features_=r.features||new Ne,r.layers)if("function"==typeof r.layers)a=r.layers;else{var s=r.layers;a=function(l){return S(s,l)}}else a=_t;return n.layerFilter_=a,n.featureLayerAssociation_={},n}return _0(i,e),i.prototype.addFeatureLayerAssociation_=function(t,n){this.featureLayerAssociation_[at(t)]=n},i.prototype.getFeatures=function(){return this.features_},i.prototype.getHitTolerance=function(){return this.hitTolerance_},i.prototype.getLayer=function(t){return this.featureLayerAssociation_[at(t)]},i.prototype.setHitTolerance=function(t){this.hitTolerance_=t},i.prototype.setMap=function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),e.prototype.setMap.call(this,t),t?(this.features_.addEventListener("add",this.boundAddFeature_),this.features_.addEventListener("remove",this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener("add",this.boundAddFeature_),this.features_.removeEventListener("remove",this.boundRemoveFeature_))},i.prototype.addFeature_=function(t){this.style_&&this.applySelectedStyle_(t.element)},i.prototype.removeFeature_=function(t){this.style_&&this.restorePreviousStyle_(t.element)},i.prototype.getStyle=function(){return this.style_},i.prototype.applySelectedStyle_=function(t){var n=at(t);n in fc||(fc[n]=t.getStyle()),t.setStyle(this.style_)},i.prototype.restorePreviousStyle_=function(t){for(var n=this.getMap().getInteractions().getArray(),r=n.length-1;r>=0;--r){var a=n[r];if(a!==this&&a instanceof i&&a.getStyle()&&-1!==a.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(a.getStyle())}var s=at(t);t.setStyle(fc[s]),delete fc[s]},i.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[at(t)]},i.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=this.addCondition_(t),r=this.removeCondition_(t),a=this.toggleCondition_(t),s=!n&&!r&&!a,l=t.map,c=this.getFeatures(),h=[],u=[];if(s){$e(this.featureLayerAssociation_),l.forEachFeatureAtPixel(t.pixel,function(_,m){if(this.filter_(_,m))return u.push(_),this.addFeatureLayerAssociation_(_,m),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=c.getLength()-1;d>=0;--d){var f=c.item(d),p=u.indexOf(f);p>-1?u.splice(p,1):(c.remove(f),h.push(f))}0!==u.length&&c.extend(u)}else{l.forEachFeatureAtPixel(t.pixel,function(_,m){if(this.filter_(_,m))return!n&&!a||S(c.getArray(),_)?(r||a)&&S(c.getArray(),_)&&(h.push(_),this.removeFeatureLayerAssociation_(_)):(u.push(_),this.addFeatureLayerAssociation_(_,m)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=h.length-1;g>=0;--g)c.remove(h[g]);c.extend(u)}return(u.length>0||h.length>0)&&this.dispatchEvent(new XN("select",u,h,t)),!0},i}(Jr);const m0=$N;var v0=function(){var e=function(i,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])})(i,t)};return function(i,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=i}e(i,t),i.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),x0=[0,0,0,0],Mo=[],Cd=function(e){function i(t,n,r){var a=e.call(this,t)||this;return a.features=n,a.mapBrowserEvent=r,a}return v0(i,e),i}(ye),KN=function(e){function i(t){var r,n=e.call(this,t)||this;if(n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(n),n.condition_=t.condition?t.condition:Op,n.defaultDeleteCondition_=function(a){return function(e){var i=e.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey}(a)&&wp(a)},n.deleteCondition_=t.deleteCondition?t.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:Dh,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new Zs,n.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new Gs({source:new yi({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:eF(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(n),LineString:n.writeLineStringGeometry_.bind(n),LinearRing:n.writeLineStringGeometry_.bind(n),Polygon:n.writePolygonGeometry_.bind(n),MultiPoint:n.writeMultiPointGeometry_.bind(n),MultiLineString:n.writeMultiLineStringGeometry_.bind(n),MultiPolygon:n.writeMultiPolygonGeometry_.bind(n),Circle:n.writeCircleGeometry_.bind(n),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(n)},n.source_=null,n.hitDetection_=null,t.features?r=t.features:t.source&&(n.source_=t.source,r=new Ne(n.source_.getFeatures()),n.source_.addEventListener("addfeature",n.handleSourceAdd_.bind(n)),n.source_.addEventListener("removefeature",n.handleSourceRemove_.bind(n))),!r)throw new Error("The modify interaction requires features, a source or a layer");return t.hitDetection&&(n.hitDetection_=t.hitDetection),n.features_=r,n.features_.forEach(n.addFeature_.bind(n)),n.features_.addEventListener("add",n.handleFeatureAdd_.bind(n)),n.features_.addEventListener("remove",n.handleFeatureRemove_.bind(n)),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=void 0===t.snapToPointer?!n.hitDetection_:t.snapToPointer,n}return v0(i,e),i.prototype.addFeature_=function(t){var n=t.getGeometry();if(n){var r=this.SEGMENT_WRITERS_[n.getType()];r&&r(t,n)}var a=this.getMap();a&&a.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,a),t.addEventListener("change",this.boundHandleFeatureChange_)},i.prototype.willModifyFeatures_=function(t,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Ne;for(var r=this.featuresBeingModified_.getArray(),a=0,s=n.length;a<s;++a)for(var l=n[a],c=0,h=l.length;c<h;++c){var u=l[c].feature;u&&-1===r.indexOf(u)&&this.featuresBeingModified_.push(u)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new Cd("modifystart",this.featuresBeingModified_,t))}},i.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener("change",this.boundHandleFeatureChange_)},i.prototype.removeFeatureSegmentData_=function(t){var n=this.rBush_,r=[];n.forEach(function(c){t===c.feature&&r.push(c)});for(var a=r.length-1;a>=0;--a){for(var s=r[a],l=this.dragSegments_.length-1;l>=0;--l)this.dragSegments_[l][0]===s&&this.dragSegments_.splice(l,1);n.remove(s)}},i.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.prototype.setActive.call(this,t)},i.prototype.setMap=function(t){this.overlay_.setMap(t),e.prototype.setMap.call(this,t)},i.prototype.getOverlay=function(){return this.overlay_},i.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},i.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},i.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},i.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var n=t.target;this.removeFeature_(n),this.addFeature_(n)}},i.prototype.handleFeatureRemove_=function(t){this.removeFeature_(t.element)},i.prototype.writePointGeometry_=function(t,n){var r=n.getCoordinates(),a={feature:t,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),a)},i.prototype.writeMultiPointGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a){var l=r[a],c={feature:t,geometry:n,depth:[a],index:a,segment:[l,l]};this.rBush_.insert(n.getExtent(),c)}},i.prototype.writeLineStringGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length-1;a<s;++a){var l=r.slice(a,a+2),c={feature:t,geometry:n,index:a,segment:l};this.rBush_.insert(xe(l),c)}},i.prototype.writeMultiLineStringGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,h=l.length-1;c<h;++c){var u=l.slice(c,c+2),d={feature:t,geometry:n,depth:[a],index:c,segment:u};this.rBush_.insert(xe(u),d)}},i.prototype.writePolygonGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,h=l.length-1;c<h;++c){var u=l.slice(c,c+2),d={feature:t,geometry:n,depth:[a],index:c,segment:u};this.rBush_.insert(xe(u),d)}},i.prototype.writeMultiPolygonGeometry_=function(t,n){for(var r=n.getCoordinates(),a=0,s=r.length;a<s;++a)for(var l=r[a],c=0,h=l.length;c<h;++c)for(var u=l[c],d=0,f=u.length-1;d<f;++d){var p=u.slice(d,d+2),g={feature:t,geometry:n,depth:[c,a],index:d,segment:p};this.rBush_.insert(xe(p),g)}},i.prototype.writeCircleGeometry_=function(t,n){var r=n.getCenter(),a={feature:t,geometry:n,index:0,segment:[r,r]},s={feature:t,geometry:n,index:1,segment:[r,r]},l=[a,s];a.featureSegments=l,s.featureSegments=l,this.rBush_.insert(xs(r),a);var c=n,h=Mn();if(h&&this.getMap()){var u=this.getMap().getView().getProjection();c=Mh(c=c.clone().transform(h,u)).transform(u,h)}this.rBush_.insert(c.getExtent(),s)},i.prototype.writeGeometryCollectionGeometry_=function(t,n){for(var r=n.getGeometriesArray(),a=0;a<r.length;++a){var s=r[a];(0,this.SEGMENT_WRITERS_[s.getType()])(t,s)}},i.prototype.createOrUpdateVertexFeature_=function(t,n,r){var a=this.vertexFeature_;return a?a.getGeometry().setCoordinates(t):(a=new Wn(new oi(t)),this.vertexFeature_=a,this.overlay_.getSource().addFeature(a)),a.set("features",n),a.set("geometries",r),a},i.prototype.handleEvent=function(t){return!t.originalEvent||(this.lastPointerEvent_=t,!t.map.getView().getInteracting()&&t.type==vt.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(n=!(t.type!=vt.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==vt.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),e.prototype.handleEvent.call(this,t)&&!n);var n},i.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var n=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],r=[],a=[],s=0,l=this.dragSegments_.length;s<l;++s){var c=this.dragSegments_[s],h=c[0],u=h.feature;-1===r.indexOf(u)&&r.push(u);var d=h.geometry;-1===a.indexOf(d)&&a.push(d);for(var f=h.depth,p=void 0,g=h.segment,_=c[1];n.length<d.getStride();)n.push(g[_][n.length]);switch(d.getType()){case"Point":p=n,g[0]=n,g[1]=n;break;case"MultiPoint":(p=d.getCoordinates())[h.index]=n,g[0]=n,g[1]=n;break;case"LineString":(p=d.getCoordinates())[h.index+_]=n,g[_]=n;break;case"MultiLineString":case"Polygon":(p=d.getCoordinates())[f[0]][h.index+_]=n,g[_]=n;break;case"MultiPolygon":(p=d.getCoordinates())[f[1]][f[0]][h.index+_]=n,g[_]=n;break;case"Circle":if(g[0]=n,g[1]=n,0===h.index)this.changingFeature_=!0,d.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0;var m=t.map.getView().getProjection(),v=qc(jt(d.getCenter()),jt(n)),y=Mn();if(y){var C=d.clone().transform(y,m);C.setRadius(v),v=C.transform(m,y).getRadius()}d.setRadius(v),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(d,p)}this.createOrUpdateVertexFeature_(n,r,a)},i.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var n=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var a=t.map.getView().getProjection(),s=[],l=r.getGeometry().getCoordinates(),c=xe([l]),h=this.rBush_.getInExtent(c),u={};h.sort(tF);for(var d=0,f=h.length;d<f;++d){var p=h[d],g=p.segment,_=at(p.geometry),m=p.depth;if(m&&(_+="-"+m.join("-")),u[_]||(u[_]=new Array(2)),"Circle"!==p.geometry.getType()||1!==p.index)if(!Ln(g[0],l)||u[_][0])if(!Ln(g[1],l)||u[_][1])at(g)in this.vertexSegments_&&!u[_][0]&&!u[_][1]&&this.insertVertexCondition_(t)&&s.push(p);else{if(("LineString"===p.geometry.getType()||"MultiLineString"===p.geometry.getType())&&u[_][0]&&0===u[_][0].index)continue;this.dragSegments_.push([p,1]),u[_][1]=p}else this.dragSegments_.push([p,0]),u[_][0]=p;else Ln(b0(n,p,a),l)&&!u[_][0]&&(this.dragSegments_.push([p,0]),u[_][0]=p)}s.length&&this.willModifyFeatures_(t,[s]);for(var y=s.length-1;y>=0;--y)this.insertVertex_(s[y],l)}return!!this.vertexFeature_},i.prototype.handleUpEvent=function(t){for(var n=this.dragSegments_.length-1;n>=0;--n){var r=this.dragSegments_[n][0],a=r.geometry;if("Circle"===a.getType()){var s=a.getCenter(),l=r.featureSegments[0],c=r.featureSegments[1];l.segment[0]=s,l.segment[1]=s,c.segment[0]=s,c.segment[1]=s,this.rBush_.update(xs(s),l);var h=a,u=Mn();if(u){var d=t.map.getView().getProjection();h=Mh(h=h.clone().transform(u,d)).transform(d,u)}this.rBush_.update(h.getExtent(),c)}else this.rBush_.update(xe(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new Cd("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},i.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},i.prototype.handlePointerAtPixel_=function(t,n,r){var h,u,a=this,s=r||n.getCoordinateFromPixel(t),l=n.getView().getProjection();if(this.hitDetection_&&n.forEachFeatureAtPixel(t,function(W,Z,F){if("Point"===(F=F||W.getGeometry()).getType()&&S(a.features_.getArray(),W)){u=F;var j=F.getFlatCoordinates().slice(0,2);h=[{feature:W,geometry:F,segment:[j,j]}]}return!0},{layerFilter:"object"==typeof this.hitDetection_?function(W){return W===a.hitDetection_}:void 0}),!h){var g=As(Fr(Nn(xs(s,x0)),n.getView().getResolution()*this.pixelTolerance_,x0));h=this.rBush_.getInExtent(g)}if(h&&h.length>0){var _=h.sort(function(W,Z){return C0(s,W,l)-C0(s,Z,l)})[0],m=_.segment,v=b0(s,_,l),y=n.getPixelFromCoordinate(v),C=qc(t,y);if(u||C<=this.pixelTolerance_){var x={};if(x[at(m)]=!0,this.snapToPointer_||(this.delta_[0]=v[0]-s[0],this.delta_[1]=v[1]-s[1]),"Circle"===_.geometry.getType()&&1===_.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(v,[_.feature],[_.geometry]);else{var b=n.getPixelFromCoordinate(m[0]),T=n.getPixelFromCoordinate(m[1]),M=kn(y,b),w=kn(y,T);C=Math.sqrt(Math.min(M,w)),this.snappedToVertex_=C<=this.pixelTolerance_,this.snappedToVertex_&&(v=M>w?m[1]:m[0]),this.createOrUpdateVertexFeature_(v,[_.feature],[_.geometry]);var P={};P[at(_.geometry)]=!0;for(var D=1,R=h.length;D<R;++D){var L=h[D].segment;if(!(Ln(m[0],L[0])&&Ln(m[1],L[1])||Ln(m[0],L[1])&&Ln(m[1],L[0])))break;var G=at(h[D].geometry);G in P||(P[G]=!0,x[at(L)]=!0)}}return void(this.vertexSegments_=x)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},i.prototype.insertVertex_=function(t,n){for(var h,r=t.segment,a=t.feature,s=t.geometry,l=t.depth,c=t.index;n.length<s.getStride();)n.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":(h=s.getCoordinates())[l[0]].splice(c+1,0,n);break;case"MultiPolygon":(h=s.getCoordinates())[l[1]][l[0]].splice(c+1,0,n);break;case"LineString":(h=s.getCoordinates()).splice(c+1,0,n);break;default:return}this.setGeometryCoordinates_(s,h);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(s,c,l,1);var d={segment:[r[0],n],feature:a,geometry:s,depth:l,index:c};u.insert(xe(d.segment),d),this.dragSegments_.push([d,1]);var f={segment:[n,r[1]],feature:a,geometry:s,depth:l,index:c+1};u.insert(xe(f.segment),f),this.dragSegments_.push([f,0]),this.ignoreNextSingleClick_=!0},i.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=vt.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var n=this.removeVertex_();return this.dispatchEvent(new Cd("modifyend",this.featuresBeingModified_,t)),this.featuresBeingModified_=null,n}return!1},i.prototype.removeVertex_=function(){var a,s,l,c,h,u,d,f,p,g,_,t=this.dragSegments_,n={},r=!1;for(h=t.length-1;h>=0;--h)_=at((g=(l=t[h])[0]).feature),g.depth&&(_+="-"+g.depth.join("-")),_ in n||(n[_]={}),0===l[1]?(n[_].right=g,n[_].index=g.index):1==l[1]&&(n[_].left=g,n[_].index=g.index+1);for(_ in n){switch(p=n[_].right,(f=(u=n[_].index)-1)<0&&(f=0),a=s=(c=(g=void 0!==(d=n[_].left)?d:p).geometry).getCoordinates(),r=!1,c.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(u,1),r=!0);break;case"LineString":s.length>2&&(s.splice(u,1),r=!0);break;case"MultiPolygon":a=a[g.depth[1]];case"Polygon":(a=a[g.depth[0]]).length>4&&(u==a.length-1&&(u=0),a.splice(u,1),r=!0,0===u&&(a.pop(),a.push(a[0]),f=a.length-1))}if(r){this.setGeometryCoordinates_(c,s);var m=[];if(void 0!==d&&(this.rBush_.remove(d),m.push(d.segment[0])),void 0!==p&&(this.rBush_.remove(p),m.push(p.segment[1])),void 0!==d&&void 0!==p){var v={depth:g.depth,feature:g.feature,geometry:g.geometry,index:f,segment:m};this.rBush_.insert(xe(v.segment),v)}this.updateSegmentIndices_(c,u,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return r},i.prototype.setGeometryCoordinates_=function(t,n){this.changingFeature_=!0,t.setCoordinates(n),this.changingFeature_=!1},i.prototype.updateSegmentIndices_=function(t,n,r,a){this.rBush_.forEachInExtent(t.getExtent(),function(s){s.geometry===t&&(void 0===r||void 0===s.depth||st(s.depth,r))&&s.index>n&&(s.index+=a)})},i}(Oi);function tF(e,i){return e.index-i.index}function C0(e,i,t){var n=i.geometry;if("Circle"===n.getType()){var r=n;if(1===i.index){var a=Mn();a&&(r=r.clone().transform(a,t));var s=kn(r.getCenter(),jt(e)),l=Math.sqrt(s)-r.getRadius();return l*l}}var c=jt(e);return Mo[0]=jt(i.segment[0]),Mo[1]=jt(i.segment[1]),hf(c,Mo)}function b0(e,i,t){var n=i.geometry;if("Circle"===n.getType()&&1===i.index){var r=n,a=Mn();return a&&(r=r.clone().transform(a,t)),er(r.getClosestPoint(jt(e)))}var s=jt(e);return Mo[0]=jt(i.segment[0]),Mo[1]=jt(i.segment[1]),er(Fc(s,Mo))}function eF(){var e=Kc();return function(i,t){return e.Point}}const nF=KN;var iF=Y(449);function rF(e,i){1&e&&(o.TgZ(0,"th",19),o._uU(1,"Capas"),o.qZA())}function oF(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",20),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().selection.toggle(a)}),o._uU(1),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(1),o.hij(" ",t.layer," ")}}function aF(e,i){1&e&&o._UZ(0,"th",19)}function sF(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",21),o.TgZ(1,"mat-checkbox",22),o.NdJ("click",function(r){return r.stopPropagation()})("change",function(r){const s=o.CHM(t).$implicit,l=o.oxw();return r?l.selection.toggle(s):null}),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit,n=o.oxw();o.xp6(1),o.Q6J("checked",n.selection.isSelected(t))}}function lF(e,i){1&e&&o._UZ(0,"tr",23)}function cF(e,i){1&e&&o._UZ(0,"tr",24)}let hF=(()=>{class e{constructor(t){this.data=t,this.displayedColumns=["layer","select"],this.dataSource=new A.by([]),this.selection=new iF.Ov(!0,[]),this.dataSource.data=t.snapConfiguration,this.selection.select(...this.dataSource.data.filter(n=>t.snapLayers.find(r=>r.id===n.id)))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.WI))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-snap-config"]],decls:23,vars:5,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],["mat-dialog-title",""],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-dialog-content",""],["mat-table","",3,"dataSource"],["matColumnDef","layer"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","select"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions",""],["mat-button","","color","warn","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"mat-dialog-close"],["mat-header-cell",""],["mat-cell","",3,"click"],["mat-cell",""],[3,"checked","click","change"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"h4",6),o._uU(7,"Configuraci\xf3n snap"),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.TgZ(9,"table",8),o.ynx(10,9),o.YNc(11,rF,2,0,"th",10),o.YNc(12,oF,2,1,"td",11),o.BQk(),o.ynx(13,12),o.YNc(14,aF,1,0,"th",10),o.YNc(15,sF,2,1,"td",13),o.BQk(),o.YNc(16,lF,1,0,"tr",14),o.YNc(17,cF,1,0,"tr",15),o.qZA(),o.qZA(),o.TgZ(18,"div",16),o.TgZ(19,"button",17),o._uU(20,"Cancelar"),o.qZA(),o.TgZ(21,"button",18),o._uU(22,"Aplicar"),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(9),o.Q6J("dataSource",n.dataSource),o.xp6(7),o.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.displayedColumns),o.xp6(4),o.Q6J("mat-dialog-close",n.selection.selected))},directives:[Tt.Zt,ct.uh,Tt.Bh,ct.xY,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,ct.H8,Kt.lW,ct.ZT,A.ge,A.ev,hc.oG,A.XQ,A.Gk],styles:[".mat-dialog-title[_ngcontent-%COMP%]{position:relative;top:-24px;left:-24px;right:24px;padding:24px;margin:unset;background-color:#e4b346;color:#fff;width:400px;display:flex;justify-content:center;align-items:center}.mat-dialog-actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end;padding-bottom:24px}table[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{margin:unset}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}"]}),e})();var T0=Y(9814),uF=Y(4834);function dF(e,i){if(1&e&&(o.TgZ(0,"mat-radio-button",14),o.TgZ(1,"div",11),o.TgZ(2,"mat-icon"),o._uU(3),o.qZA(),o.TgZ(4,"div"),o._uU(5),o.qZA(),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.Q6J("value",t.value),o.xp6(3),o.Oqu(t.icon),o.xp6(2),o.Oqu(t.title)}}const pc="[MEASURE_TOOL]",gc=new mt({fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),stroke:new J({color:"rgba(181, 30, 28, 0.5)",lineDash:[10,10],width:2}),image:new At({radius:5,stroke:new J({color:"rgba(228, 179, 70, 0.7)"}),fill:new Q({color:"rgba(228, 179, 70, 0.2)"})})}),_c=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})}),bd="[MEASURE_SNAP]",M0=new mt({stroke:new J({color:"rgba(228, 179, 70, 0.5)",lineDash:[10,10],width:2}),image:new At({radius:5,stroke:new J({color:"rgba(228, 179, 70, 0.7)"}),fill:new Q({color:"rgba(228, 179, 70, 0.2)"})})});let fF=(()=>{class e{constructor(t,n,r){this.mapService=t,this.snapService=n,this.dialog=r,this.measureType="",this.measures=[{title:"Punto",value:"point",icon:"gps_fixed"},{title:"Longitud",value:"longitude",icon:"timeline"},{title:"\xc1rea",value:"area",icon:"crop_3_2"},{title:"\xc1ngulo",value:"angle",icon:"call_missed_outgoing"},{title:"Eliminar",value:"delete",icon:"delete"},{title:"Editar",value:"edit",icon:"create"}],this.snapActive=!1,this.sourceInteraction=new yi,this.snapSource=new yi,this.snapService.getConfiguration().subscribe(a=>{this.snapConfig=a})}ngOnInit(){this.toolTipsGenerate=[]}ngOnDestroy(){this.toolTipsGenerate.forEach(t=>this.mapService.removeOverlay(t.tooltip)),this.removeCurrentTooltip(),this.sourceInteraction.clear(),this.sourceInteraction=null,this.deactivateInteractions(),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null),this.deactivateSnap(),this.snapSource.clear(),this.snapSource=null}measureSelect(){switch(this.stopMapClicEvents(),this.deactivateInteractions(),this.removeCurrentTooltip(),this.measureType){case"point":this.measurePoint();break;case"longitude":this.measureLongitude();break;case"angle":this.measureAngle();break;case"area":this.measureArea();break;case"delete":this.deleteGeom();break;case"edit":this.editGeom()}this.snapActive&&(this.deactivateSnap(),this.activateSnap())}deactivateInteractions(){this.mapInteraction&&this.mapService.removeInteraction(this.mapInteraction),this.selectInteraction&&this.mapService.removeInteraction(this.selectInteraction),this.modifyInteraction&&this.mapService.removeInteraction(this.modifyInteraction)}stopMapClicEvents(){this.mapEventHandlerId||(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,()=>{},"HIGH"))}removeCurrentTooltip(){this.currentTooltip&&(this.mapService.removeOverlay(this.currentTooltip),this.currentTooltip=null)}measurePoint(){this.mapInteraction=new Va({source:this.sourceInteraction,type:"Point",style:gc}),this.mapService.addInteraction(this.mapInteraction),this.mapInteraction.on("drawstart",t=>{const n=t.feature.getGeometry().getCoordinates();this.currentTooltip=this.createMeasureTooltip(`x: ${n[0].toFixed(3)}<br>y: ${n[1].toFixed(3)}`),this.currentTooltip.setPosition(t.feature.getGeometry().getLastCoordinate()),this.mapService.addOverlay(this.currentTooltip),t.feature.getGeometry().on("change",r=>{this.currentTooltip.setPosition(t.feature.getGeometry().getLastCoordinate()),this.currentTooltip.getElement().innerHTML=`x: ${n[0].toFixed(3)}<br>y: ${n[1].toFixed(3)}`})}),this.mapInteraction.on("drawend",t=>{this.removeCurrentTooltip();const n=t.feature.clone();n.setId(`${pc}.${ue()()}`),this.mapService.drawFeature(n,_c);const r=n.getGeometry().getCoordinates(),a=this.createMeasureTooltip(`x: ${r[0].toFixed(3)}<br>y: ${r[1].toFixed(3)}`);a.setPosition(n.getGeometry().getLastCoordinate()),this.mapService.addOverlay(a),this.toolTipsGenerate.push({id:n.getId(),type:"point",tooltip:a})})}measureLongitude(){this.mapInteraction=new Va({source:this.sourceInteraction,type:"LineString",style:gc}),this.mapService.addInteraction(this.mapInteraction),this.mapInteraction.on("drawstart",t=>{const n=t.feature.getGeometry().getLength();this.currentTooltip=this.createMeasureTooltip(this.getLongitudeString(n)),this.currentTooltip.setPosition(t.feature.getGeometry().getLastCoordinate()),this.mapService.addOverlay(this.currentTooltip),t.feature.getGeometry().on("change",r=>{this.currentTooltip.setPosition(t.feature.getGeometry().getLastCoordinate()),this.currentTooltip.getElement().innerHTML=this.getLongitudeString(t.feature.getGeometry().getLength())})}),this.mapInteraction.on("drawend",t=>{var n,r;this.removeCurrentTooltip();const a=t.feature.clone();a.setId(`${pc}.${ue()()}`),this.mapService.drawFeature(a,_c);const s=null===(n=a.getGeometry())||void 0===n?void 0:n.getLength(),l=this.createMeasureTooltip(this.getLongitudeString(s));l.setPosition(je(null===(r=a.getGeometry())||void 0===r?void 0:r.getExtent())),this.mapService.addOverlay(l),this.toolTipsGenerate.push({id:a.getId(),type:"longitude",tooltip:l})})}measureAngle(){this.mapInteraction=new Va({source:this.sourceInteraction,type:"LineString",style:gc,minPoints:3,maxPoints:3}),this.mapService.addInteraction(this.mapInteraction),this.mapInteraction.on("drawstart",t=>{this.currentTooltip=this.createMeasureTooltip("0\xb0"),this.mapService.addOverlay(this.currentTooltip),t.feature.getGeometry().on("change",n=>{t.feature.getGeometry().getCoordinates().length>2&&(this.currentTooltip.setPosition(t.feature.getGeometry().getCoordinates()[1]),this.currentTooltip.getElement().innerHTML=`${this.getAngle(t.feature.getGeometry().getCoordinates()).toFixed(3)}\xb0`)})}),this.mapInteraction.on("drawend",t=>{this.removeCurrentTooltip();const n=t.feature.clone();n.setId(`${pc}.${ue()()}`),this.mapService.drawFeature(n,_c);const r=this.getAngle(n.getGeometry().getCoordinates()),a=this.createMeasureTooltip(`${r.toFixed(3)}\xb0`);a.setPosition(n.getGeometry().getCoordinates()[1]),this.mapService.addOverlay(a),this.toolTipsGenerate.push({id:n.getId(),type:"angle",tooltip:a})})}measureArea(){this.mapInteraction=new Va({source:this.sourceInteraction,type:"Polygon",style:gc}),this.mapService.addInteraction(this.mapInteraction),this.mapInteraction.on("drawstart",t=>{const n=t.feature.getGeometry().getArea();this.currentTooltip=this.createMeasureTooltip(this.getAreaString(n)),this.currentTooltip.setPosition(t.feature.getGeometry().getInteriorPoint().getCoordinates()),this.mapService.addOverlay(this.currentTooltip),t.feature.getGeometry().on("change",r=>{this.currentTooltip.setPosition(t.feature.getGeometry().getInteriorPoint().getCoordinates()),this.currentTooltip.getElement().innerHTML=this.getAreaString(t.feature.getGeometry().getArea())})}),this.mapInteraction.on("drawend",t=>{var n,r;this.removeCurrentTooltip();const a=t.feature.clone();a.setId(`${pc}.${ue()()}`),this.mapService.drawFeature(a,_c);const s=null===(n=a.getGeometry())||void 0===n?void 0:n.getArea(),l=this.createMeasureTooltip(this.getAreaString(s));l.setPosition(null===(r=a.getGeometry())||void 0===r?void 0:r.getInteriorPoint().getCoordinates()),this.mapService.addOverlay(l),this.toolTipsGenerate.push({id:a.getId(),type:"area",tooltip:l})})}deleteGeom(){const t=(()=>{const n={};return n.Polygon=[new mt({fill:new Q({color:[255,255,255,.5]})}),new mt({stroke:new J({color:[255,255,255,1],width:5})}),new mt({stroke:new J({color:[0,153,255,1],width:3})})],n.MultiPolygon=n.Polygon,n.LineString=[new mt({stroke:new J({color:[255,255,255,1],width:5})}),new mt({stroke:new J({color:[0,153,255,1],width:3})})],n.MultiLineString=n.LineString,n.Point=[new mt({image:new At({radius:7,fill:new Q({color:[0,153,255,1]}),stroke:new J({color:[255,255,255,.75],width:1.5})}),zIndex:1e5})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.Point),r=>{const a=[];return this.toolTipsGenerate.map(s=>{s.id===r.getId()?this.mapService.removeOverlay(s.tooltip):a.push(s)}),this.toolTipsGenerate=a,this.mapService.clearDrawings(r.getId()),n[r.getGeometry().getType()]}})();this.selectInteraction=new m0({style:t}),this.mapService.addInteraction(this.selectInteraction)}editGeom(){const t=(()=>{const n={};return n.Polygon=[new mt({fill:new Q({color:[255,255,255,.5]})}),new mt({stroke:new J({color:[255,255,255,1],width:5})}),new mt({stroke:new J({color:[0,153,255,1],width:3})})],n.MultiPolygon=n.Polygon,n.LineString=[new mt({stroke:new J({color:[255,255,255,1],width:5})}),new mt({stroke:new J({color:[0,153,255,1],width:3})})],n.MultiLineString=n.LineString,n.Point=[new mt({image:new At({radius:7,fill:new Q({color:[0,153,255,1]}),stroke:new J({color:[255,255,255,.75],width:1.5})}),zIndex:1e5})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.Point),r=>{var a,s,l,c,h,u,d,f;if(null!=r.getId()){const p=this.toolTipsGenerate.findIndex(g=>g.id===r.getId());switch(r.getGeometry().getType()){case"Point":if(p<0){const g=r.getGeometry().getCoordinates(),_=this.createMeasureTooltip(`x: ${g[0].toFixed(3)}<br>y: ${g[1].toFixed(3)}`);_.setPosition(r.getGeometry().getLastCoordinate()),this.mapService.addOverlay(_),this.toolTipsGenerate.push({id:r.getId(),type:"point",tooltip:_})}else{this.mapService.removeOverlay(this.toolTipsGenerate[p].tooltip);const g=r.getGeometry().getCoordinates(),_=this.createMeasureTooltip(`x: ${g[0].toFixed(3)}<br>y: ${g[1].toFixed(3)}`);_.setPosition(r.getGeometry().getLastCoordinate()),this.mapService.addOverlay(_),this.toolTipsGenerate[p].tooltip=_}break;case"LineString":if(p<0)if(3===r.getGeometry().getCoordinates().length){const g=this.getAngle(r.getGeometry().getCoordinates()),_=this.createMeasureTooltip(`${g.toFixed(3)}\xb0`);_.setPosition(r.getGeometry().getCoordinates()[1]),this.mapService.addOverlay(_),this.toolTipsGenerate.push({id:r.getId(),type:"angle",tooltip:_})}else{const g=null===(a=r.getGeometry())||void 0===a?void 0:a.getLength(),_=this.createMeasureTooltip(this.getLongitudeString(g));_.setPosition(je(null===(s=r.getGeometry())||void 0===s?void 0:s.getExtent())),this.mapService.addOverlay(_),this.toolTipsGenerate.push({id:r.getId(),type:"longitude",tooltip:_})}else if(this.mapService.removeOverlay(this.toolTipsGenerate[p].tooltip),3===r.getGeometry().getCoordinates().length&&"angle"===this.toolTipsGenerate[p].type){const g=this.getAngle(r.getGeometry().getCoordinates()),_=this.createMeasureTooltip(`${g.toFixed(3)}\xb0`);_.setPosition(r.getGeometry().getCoordinates()[1]),this.mapService.addOverlay(_),this.toolTipsGenerate[p].tooltip=_}else{const g=null===(l=r.getGeometry())||void 0===l?void 0:l.getLength(),_=this.createMeasureTooltip(this.getLongitudeString(g));_.setPosition(je(null===(c=r.getGeometry())||void 0===c?void 0:c.getExtent())),this.mapService.addOverlay(_),this.toolTipsGenerate[p].tooltip=_}break;case"Polygon":if(p<0){const g=null===(h=r.getGeometry())||void 0===h?void 0:h.getArea(),_=this.createMeasureTooltip(this.getAreaString(g));_.setPosition(null===(u=r.getGeometry())||void 0===u?void 0:u.getInteriorPoint().getCoordinates()),this.mapService.addOverlay(_),this.toolTipsGenerate.push({id:r.getId(),type:"area",tooltip:_})}else{this.mapService.removeOverlay(this.toolTipsGenerate[p].tooltip);const g=null===(d=r.getGeometry())||void 0===d?void 0:d.getArea(),_=this.createMeasureTooltip(this.getAreaString(g));_.setPosition(null===(f=r.getGeometry())||void 0===f?void 0:f.getInteriorPoint().getCoordinates()),this.mapService.addOverlay(_),this.toolTipsGenerate[p].tooltip=_}break;default:console.log("No definido")}}return n[r.getGeometry().getType()]}})();this.selectInteraction=new m0({style:t}),this.modifyInteraction=new nF({features:this.selectInteraction.getFeatures(),style:t}),this.mapService.addInteraction(this.selectInteraction),this.mapService.addInteraction(this.modifyInteraction)}createMeasureTooltip(t){const n=document.createElement("div");return n.innerHTML=t,n.className="ol-tooltip ol-tooltip-static",new md({element:n,offset:[0,-7],positioning:"bottom-center"})}getLongitudeString(t){return t>1e3?`${(t/1e3).toFixed(2)} Km`:`${t.toFixed(2)} m`}getAngle(t){const n=(h,u,d)=>[h[0]-u,h[1]-d],r=h=>Math.sqrt(h.reduce((u,d)=>u+d*d,1)),s=n(t[0],t[1][0],t[1][1]),l=n(t[2],t[1][0],t[1][1]);return 180*Math.acos(((h=s)[0]*(u=l)[0]+h[1]*u[1])/(r(s)*r(l)))/Math.PI;var h,u}getAreaString(t){let n;return n=t>1e6?`${(t/1e6).toFixed(2)} Km\xb2`:t>1e4?`${(t/1e4).toFixed(2)} ha`:`${t.toFixed(2)} m\xb2`,n}snapStateChangeHandler(t){t.checked?(this.activateSnap(),this.snapActive=!0):(this.deactivateSnap(),this.snapActive=!1)}activateSnap(){const t=this;(!this.snapLayers||!Array.isArray(this.snapLayers))&&(this.snapLayers=this.snapService.getSnapLayers()),this.mapMoveSnapHandler&&(this.mapService.removeEventHandler(this.mapMoveSnapHandler),this.mapMoveSnapHandler=null),this.mapMoveSnapHandler=this.mapService.addEventHandler(Ht.MOVEEND,s=>{const l=s.map.getView(),c=l.calculateExtent(s.map.getSize()),u=1*l.getResolution()*39.37*(25.4/.28);t.loadSnapFeatures(c,u)},"SPECIAL");const r=this.mapService.getMapById(this.mapService.default).getViewExtent(),a=1*this.mapService.getMapById(this.mapService.default).getViewResolution()*39.37*(25.4/.28);this.loadSnapFeatures(r,a),this.snapInteraction=new d0({source:this.snapSource}),this.mapService.addInteraction(this.snapInteraction)}deactivateSnap(){this.mapMoveSnapHandler&&(this.mapService.removeEventHandler(this.mapMoveSnapHandler),this.mapMoveSnapHandler=null),this.mapService.removeInteraction(this.snapInteraction),this.snapInteraction=null,this.snapSource.clear(),this.mapService.clearDrawings(bd)}loadSnapFeatures(t,n){const r=this;(0,_d.D)(r.snapLayers.map(a=>r.snapService.getFeatures(a.id,t,n))).subscribe(a=>{const s=new gd,l=a.map(c=>c.geometries.map(h=>{const u=s.readGeometry(h,{dataProjection:"EPSG:32613",featureProjection:"EPSG:32613"}),d=new Wn(u);return d.setId(bd+ue()()),d.setStyle(M0),d})).reduce((c,h)=>c.concat(h),[]);r.mapService.clearDrawings(bd),l.map(c=>r.mapService.drawFeature(c,M0)),this.snapSource.addFeatures(l)})}openSnapConfigDialog(){(!this.snapLayers||!Array.isArray(this.snapLayers))&&(this.snapLayers=this.snapService.getSnapLayers()),this.dialog.open(hF,{data:{snapConfiguration:this.snapConfig,snapLayers:this.snapLayers},width:"400px"}).afterClosed().subscribe(n=>{n&&(this.snapLayers=n,this.snapService.saveSnapConfig(this.snapLayers))})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(f0),o.Y36(ct.uw))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-measure"]],decls:22,vars:2,consts:[["cdkDrag","",1,"measure-container","mat-elevation-z2"],[1,"measure-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[1,"radio-group",3,"ngModel","ngModelChange","change"],["class","radio-button",3,"value",4,"ngFor","ngForOf"],[1,"snap-container"],[3,"change"],[1,"label-container"],[1,"snap-label"],["mat-icon-button","","title","Configurar Snap",3,"click"],[1,"radio-button",3,"value"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Medici\xf3n"),o.qZA(),o.qZA(),o.TgZ(8,"mat-radio-group",7),o.NdJ("ngModelChange",function(a){return n.measureType=a})("change",function(){return n.measureSelect()}),o.YNc(9,dF,6,3,"mat-radio-button",8),o.qZA(),o._UZ(10,"mat-divider"),o.TgZ(11,"div",9),o.TgZ(12,"mat-checkbox",10),o.NdJ("change",function(a){return n.snapStateChangeHandler(a)}),o.TgZ(13,"div",11),o.TgZ(14,"mat-icon"),o._uU(15,"launch"),o.qZA(),o.TgZ(16,"div",12),o._uU(17,"Snap"),o.qZA(),o.qZA(),o.qZA(),o._UZ(18,"div",6),o.TgZ(19,"button",13),o.NdJ("click",function(){return n.openSnapConfigDialog()}),o.TgZ(20,"mat-icon"),o._uU(21,"settings"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(8),o.Q6J("ngModel",n.measureType),o.xp6(1),o.Q6J("ngForOf",n.measures))},directives:[Tt.Zt,Tt.Bh,T0.VQ,q.JJ,q.On,B.sg,uF.d,hc.oG,ce.Hw,Kt.lW,T0.U0],styles:[".measure-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.measure-container[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:12px 6px}.measure-container[_ngcontent-%COMP%]   .radio-button[_ngcontent-%COMP%]{margin:5px}.measure-container[_ngcontent-%COMP%]   .snap-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:14px}.measure-container[_ngcontent-%COMP%]   .snap-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:12px!important}.measure-container[_ngcontent-%COMP%]   .snap-container[_ngcontent-%COMP%]   .snap-label[_ngcontent-%COMP%]{margin-top:12px}.measure-container[_ngcontent-%COMP%]   .label-container[_ngcontent-%COMP%]{display:flex}.measure-container[_ngcontent-%COMP%]   .label-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 0 0 12px}.measure-container[_ngcontent-%COMP%]   .label-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:3px 12px 0}.measure-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .measure-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.measure-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .measure-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.measure-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 850px){.measure-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:106px}"]}),e})(),pF=(()=>{class e{constructor(t,n){this.mapService=t,this.reprojectionService=n,this.coordinateX=new q.NI(""),this.coordinateY=new q.NI(""),this.labelX="Coordenada X",this.labelY="Coordenada Y",this.type=new q.NI(5)}ngOnInit(){}ngOnDestroy(){this.deleteOverlay()}gotoCoordinate(){this.deleteOverlay();const t=+this.type.value,[n,r]=[Number(this.coordinateX.value),Number(this.coordinateY.value)];if(n&&r){const a=this.mapService.getMapById(this.mapService.default);if(a.setZoom(20),t===he.EPSG_32613)a.setCenter([n,r]),this.pointTooltip=this.createTooltip(`x: ${n.toFixed(2)}<br>y: ${r.toFixed(2)}`),this.mapService.addOverlay(this.pointTooltip),this.pointTooltip.setPosition([n,r]);else{const s=this.reprojectionService.reproject(he.LatLong,he.EPSG_32613,{x:n,y:r});a.setCenter([s.x,s.y]),this.pointTooltip=this.createTooltip(`x: ${s.x.toFixed(2)}<br>y: ${s.y.toFixed(2)}`),this.mapService.addOverlay(this.pointTooltip),this.pointTooltip.setPosition([s.x,s.y])}}}createTooltip(t){const n=document.createElement("div");return n.innerHTML=t,n.className="ol-tooltip ol-tooltip-static",new md({element:n,offset:[0,-7],positioning:"bottom-center"})}deleteOverlay(){this.pointTooltip&&(this.mapService.removeOverlay(this.pointTooltip),this.pointTooltip=null)}handleTypeCoord(){+this.type.value===he.EPSG_32613?(this.labelX="Coordenada X",this.labelY="Coordenada Y"):(this.labelX="Longitud Oeste",this.labelY="Latitud Norte")}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(rc))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-goto-location"]],decls:28,vars:5,consts:[["cdkDrag","",1,"goto-location-container","mat-elevation-z2"],[1,"goto-location-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["for","tipoCoordenada"],["name","tipoCoordenada","id","tipoCoordenada",1,"control",3,"formControl","change"],["value","5"],["value","1"],["for","coordinateX"],["id","coordinate","type","number",1,"control",3,"formControl"],["for","coordinateY"],["mat-flat-button","","color","primary","title","Ir a Coordenadas",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Ir a coordenada"),o.qZA(),o.qZA(),o.TgZ(8,"label",7),o.TgZ(9,"span"),o._uU(10,"Tipo"),o.qZA(),o.TgZ(11,"select",8),o.NdJ("change",function(){return n.handleTypeCoord()}),o.TgZ(12,"option",9),o._uU(13,"EPSG:32613"),o.qZA(),o.TgZ(14,"option",10),o._uU(15,"Longitud/Latitud"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"label",11),o.TgZ(17,"span"),o._uU(18),o.qZA(),o._UZ(19,"input",12),o.qZA(),o.TgZ(20,"label",13),o.TgZ(21,"span"),o._uU(22),o.qZA(),o._UZ(23,"input",12),o.qZA(),o.TgZ(24,"button",14),o.NdJ("click",function(){return n.gotoCoordinate()}),o.TgZ(25,"mat-icon"),o._uU(26,"gps_fixed"),o.qZA(),o._uU(27," Ir a Ubicaci\xf3n "),o.qZA(),o.qZA()),2&t&&(o.xp6(11),o.Q6J("formControl",n.type),o.xp6(7),o.Oqu(n.labelX),o.xp6(1),o.Q6J("formControl",n.coordinateX),o.xp6(3),o.Oqu(n.labelY),o.xp6(1),o.Q6J("formControl",n.coordinateY))},directives:[Tt.Zt,Tt.Bh,q.EJ,q.JJ,q.oH,q.YN,q.Kr,q.wV,q.Fj,Kt.lW,ce.Hw],styles:[".goto-location-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.goto-location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center;margin:16px 5px}.goto-location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:60%}.goto-location-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.goto-location-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:312px;margin:16px 5px;color:#fff}.goto-location-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .goto-location-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.goto-location-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .goto-location-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.goto-location-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 850px){.goto-location-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:76px}"]}),e})();function gF(e,i){if(1&e&&(o.TgZ(0,"option",11),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("ngValue",t),o.xp6(1),o.hij(" ",t.calle," ")}}function _F(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"select",8),o.NdJ("ngModelChange",function(r){return o.CHM(t),o.oxw().streetSelected=r})("change",function(){return o.CHM(t),o.oxw().handleSelectStreet()}),o.YNc(2,gF,2,2,"option",9),o.qZA(),o.TgZ(3,"button",10),o.NdJ("click",function(){return o.CHM(t),o.oxw().openGoogleMaps()}),o.TgZ(4,"mat-icon"),o._uU(5,"streetview"),o.qZA(),o._uU(6," Ver frente en StreetView "),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("ngModel",t.streetSelected),o.xp6(1),o.Q6J("ngForOf",t.predio.frente)}}const Td="[WATCH_FRONT_TOOL]",Md="[WATCH_FRONT_PREDIO_TOOL]",mF=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})}),vF=new mt({stroke:new J({color:"blue",width:5,lineDash:void 0}),fill:new Q({color:"rgba(0, 0, 255, 0.6)"}),image:new At({radius:5,stroke:new J({color:"#0000ff"}),fill:new Q({color:"#0000ff"})})});let yF=(()=>{class e{constructor(t,n,r,a){this.mapService=t,this.featureService=n,this.catastroService=r,this.reprojectionService=a,this.hasValidCoords=!1}ngOnInit(){this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH")}ngOnDestroy(){this.mapService.clearDrawings(Td),this.mapService.clearDrawings(Md),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}openGoogleMaps(){const t=this.reprojectionService.reproject(he.EPSG_32613,he.LatLong,{x:this.point[0],y:this.point[1]});this.catastroService.getHeading(this.streetSelected.idPredioFrente).subscribe(n=>{window.open(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${t.y},${t.x}&heading=${n}`,"_blank","noopener noreferrer")})}mapClickHandler(){return t=>{const[n,r]=t.coordinate;this.catastroService.getPredioAtPoint(n,r,{frentes:!0,construcciones:!1}).subscribe(s=>{if(s&&(this.predio=s,null!==this.predio&&this.predio.frente.length>0)){this.hasValidCoords=!0,this.streetSelected=this.predio.frente[0];const l=this.featureService.createFeature(Md,this.predio.geometry,{clave:this.predio.clave,idPredio:this.predio.idPredio});this.mapService.clearDrawings(Md),this.mapService.drawFeature(l,mF),this.handleSelectStreet()}})}}handleSelectStreet(){const t=this.featureService.createFeature(Td,this.streetSelected.geometry);this.mapService.clearDrawings(Td),this.mapService.drawFeature(t,vF),this.point=je(t.getGeometry().getExtent()),this.streetSelected.geometry.coordinates.length>2&&(this.point=t.getGeometry().getClosestPoint(this.point))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(ve),o.Y36(We),o.Y36(rc))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-watch-front"]],decls:11,vars:1,consts:[["cdkDrag","",1,"watch-front-container","mat-elevation-z2"],[1,"watch-front-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[4,"ngIf"],[3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary","title","Ir a Coordenadas",3,"click"],[3,"ngValue"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Ver frente"),o.qZA(),o.qZA(),o.TgZ(8,"p"),o._uU(9,"Selecciona un predio para ver sus frentes"),o.qZA(),o.YNc(10,_F,7,2,"div",7),o.qZA()),2&t&&(o.xp6(10),o.Q6J("ngIf",n.hasValidCoords))},directives:[Tt.Zt,Tt.Bh,B.O5,q.EJ,q.JJ,q.On,B.sg,Kt.lW,ce.Hw,q.YN,q.Kr],styles:[".watch-front-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.watch-front-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 0;display:flex;justify-content:center}.watch-front-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.watch-front-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:90px}.watch-front-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.watch-front-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .watch-front-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;margin-left:5px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:312px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.watch-front-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .watch-front-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.watch-front-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:312px;margin:16px 5px;color:#fff}.watch-front-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 850px){.watch-front-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:106px}"]}),e})(),wd=(()=>{class e extends Mr.t{constructor(t,n,r,a){super(t,n,r),this.featureService=a}getPrediosByManzanaClave(t,n){return this.get(`${U.N.constants.API_URL}/sicam/manzana/${t}`).pipe((0,ae.U)(r=>r.map(a=>({idPredio:a.idPredio,clase:a.clase,clave:a.clave,subpredio:a.subpredio,tipoPredio:a.tipoPredio,cuenta:a.cuenta,areaCartografica:a.areaCartografica,areaPadron:a.areaPadron,porcentaje:a.porcentaje,propietario:a.propietario,ubicacion:a.ubicacion,numExterior:a.numExterior,numInterior:a.numInterior,colonia:a.colonia,geometry:a.geometry,feature:a.geometry?this.featureService.createFeature(n,a.geometry):null,isSelected:!1}))))}getSICAMData(t,n,r){return this.get(`${U.N.constants.API_URL}/sicam/data/${t}/${n}/${r}`)}getCertificateData(t){return this.get(`${U.N.constants.API_URL}/sicam/certificado/${t}`)}sendAvaluoToSICAM(t,n,r,a){return this.post(`${U.N.constants.API_URL}/sicam/avaluo`,{idpredio:t,folio:n,observation:r,year:a})}getFichaReport(t){return this.get(`${U.N.constants.API_URL}/sicam/report/ficha/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0),o.LFG(ve))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function xF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"#"),o.qZA())}function CF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numero)}}function bF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Calle"),o.qZA())}function TF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.calle)}}function MF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Longitud"),o.qZA())}function wF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.medida,"1.2-2"),"m")}}function PF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Valor de zona"),o.qZA())}function OF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.valorZona,"1.2-2"),"")}}function SF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Valor de calle"),o.qZA())}function AF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.valorCalle,"1.2-2"),"")}}function EF(e,i){1&e&&(o.TgZ(0,"th",39),o._uU(1,"Acciones"),o.qZA())}function IF(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"td",38),o.TgZ(1,"button",40),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().openGoogleMaps(a)}),o.TgZ(2,"mat-icon"),o._uU(3,"streetview"),o.qZA(),o.qZA(),o.qZA()}}function DF(e,i){1&e&&o._UZ(0,"tr",41)}function RF(e,i){1&e&&o._UZ(0,"tr",42)}function ZF(e,i){1&e&&(o.TgZ(0,"tr",43),o.TgZ(1,"td",44),o._uU(2," No se encontraron datos de frentes. "),o.qZA(),o.qZA())}function LF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"#"),o.qZA())}function kF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numero)}}function NF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Bloque"),o.qZA())}function FF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.bloque)}}function UF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Niveles"),o.qZA())}function qF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.nivel)}}function GF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"\xc1rea"),o.qZA())}function jF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.sc,"1.2-2"),"m")}}function zF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Clasificaci\xf3n"),o.qZA())}function YF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.ce)}}function HF(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Valor"),o.qZA())}function BF(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.valor,"1.2-2"),"")}}function VF(e,i){1&e&&o._UZ(0,"tr",41)}function WF(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",45),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().moveToGeom(a)}),o.qZA()}}function JF(e,i){1&e&&(o.TgZ(0,"tr",43),o.TgZ(1,"td",44),o._uU(2," No se encontraron datos de construcciones. "),o.qZA(),o.qZA())}const XF=function(e){return{correct:e}};function $F(e,i){if(1&e&&(o.TgZ(0,"div"),o._UZ(1,"br"),o.TgZ(2,"div",46),o._uU(3),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.Q6J("ngClass",o.VKq(2,XF,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}function QF(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",47),o.NdJ("click",function(){return o.CHM(t),o.oxw().getReportAvaluo("c")}),o._uU(1," Imprimir aval\xfao cartogr\xe1fico "),o.qZA()}}function KF(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",47),o.NdJ("click",function(){return o.CHM(t),o.oxw().getReportAvaluo("p")}),o._uU(1," Imprimir aval\xfao padr\xf3n catastral "),o.qZA()}}const Xa="[AVALUO_TOOL][DETAIL]",t8=new mt({stroke:new J({color:"#e94e1b",width:2,lineDash:void 0}),fill:new Q({color:"rgba(233, 78, 27, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#e94e1b"}),fill:new Q({color:"#e94e1b"})})});let e8=(()=>{class e{constructor(t,n,r,a,s,l,c,h,u){this.dialogRef=t,this.avaluoService=n,this.featureService=r,this.reprojectionService=a,this.catastroService=s,this.sicamService=l,this.authService=c,this.mapService=h,this.data=u,this.title="An\xe1lisis del aval\xfao",this.fronts=new A.by([]),this.frontColumns=["numero","calle","longitud","valorZona","valorCalle","actions"],this.constructions=new A.by([]),this.constructionColumns=["numero","bloque","nivel","area","clasificacion","valor"],this.avaluo={predio:{idPredio:"",clave:"",formattedClave:"",CURT:"",caso:0,forma:"",sct:0,claveManzana:"",numeroOficial:"",superficieConstruction:0,description:"",observation:"",predio:"",frente:[],construction:[],geometry:null},clasification:"",clave:{cuenta:"",clave:"",CURT:"",forma:"",estado:"",region:"",municipio:"",zona:"",localidad:"",sector:"",manzana:"",predio:"",edificio:"",unidad:"",areaCartografica:-1,perimetro:-1},ubication:{cuenta:"",clave:"",ubicacion:"",numeroExterior:"",numeroInterior:"",colonia:"",areaTitulo:-1},construction:[],totalConstruction:0,totalConstructionValue:0,terrain:[],totalTerrainValue:0,corner:[],totalCornerValue:0,frente:[],totalTerrainCornerValue:0,totalValue:0},this.backdropMessage="Cargando informaci\xf3n aval\xfao...",this.showLoading=!0,this.showResult=!1,this.resultCorrect=!0,this.resultMessage="",this.comment=new q.NI(""),this.folio=new q.NI(0)}ngOnInit(){this.data.isReferred?(this.canPrintAvaluo=this.authService.hasPermission("avri3"),this.canSendSICAM=this.authService.hasPermission("avre4")):(this.canPrintAvaluo=this.authService.hasPermission("avii3"),this.canSendSICAM=this.authService.hasPermission("avie4"))}ngAfterViewInit(){this.mapService.clearDrawings(Xa),this.data.isReferred?this.avaluoService.getAvaluoReferred(this.data.idPredio,this.data.year).subscribe(t=>{this.title=`An\xe1lisis del aval\xfao referido ${this.data.year}`,this.avaluo=t,this.constructions.data=this.avaluo.construction,this.fronts.data=this.avaluo.frente,this.showLoading=!1},t=>{console.log(t),this.showLoading=!1,window.alert(`Error al obtener datos del aval\xfao del a\xf1o ${this.data.year}`)}):this.avaluoService.getAvaluoData(this.data.idPredio).subscribe(t=>{this.avaluo=t,this.constructions.data=this.avaluo.construction,this.fronts.data=this.avaluo.frente,this.showLoading=!1},t=>{console.log(t),this.showLoading=!1,window.alert("Error al obtener datos del aval\xfao.")})}callClose(){this.dialogRef.close(),this.mapService.clearDrawings(Xa)}openGoogleMaps(t){var n,r;this.backdropMessage="Abriendo StreetView...",this.showLoading=!0;const a=this.featureService.createFeature("[FRONT_PREDIO]",t.geometry);let s=je(null===(n=a.getGeometry())||void 0===n?void 0:n.getExtent());t.geometry.coordinates.length>2&&(s=null===(r=a.getGeometry())||void 0===r?void 0:r.getClosestPoint(s));const c=this.reprojectionService.reproject(he.EPSG_6368,he.LatLong,{x:s[0],y:s[1]});this.data.isReferred?this.catastroService.getReferredHeading(t.idPredioFrente).subscribe(h=>{this.showLoading=!1,window.open(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${c.y},${c.x}&heading=${h}`,"_blank","noopener noreferrer")}):this.catastroService.getHeading(t.idPredioFrente).subscribe(h=>{this.showLoading=!1,window.open(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${c.y},${c.x}&heading=${h}`,"_blank","noopener noreferrer")})}getReportAvaluo(t){this.backdropMessage="Generando reporte del aval\xfao...",this.showLoading=!0,this.data.isReferred?this.avaluoService.getAvaluoReferredReport(this.data.idPredio,this.data.year).subscribe(n=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${n.uri}`,"_blank","noopener noreferrer")}):this.avaluoService.getAvaluoReport(this.data.idPredio,t).subscribe(n=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${n.uri}`,"_blank","noopener noreferrer")})}sendData(){var t=this;return se(function*(){t.backdropMessage="Enviando a SICAM...",t.showLoading=!0;const n=0===t.data.year?new Date(Date.now()).getFullYear():t.data.year;t.sicamService.sendAvaluoToSICAM(t.data.idPredio,t.folio.value.toString(),t.comment.value,n).subscribe(r=>{r?(t.resultCorrect=!0,t.resultMessage="Aval\xfao enviado a SICAM"):(t.resultCorrect=!1,t.resultMessage="Error al enviar a SICAM"),t.showLoading=!1,t.showResult=!0},r=>{console.log(r),t.showLoading=!1})})()}moveToGeom(t){if(null!==t.geometry){const n=this.featureService.createFeature(Xa,t.geometry);this.mapService.clearDrawings(Xa),this.mapService.drawFeature(n,t8)}else this.mapService.clearDrawings(Xa)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36(sc),o.Y36(ve),o.Y36(rc),o.Y36(We),o.Y36(wd),o.Y36(Te.e),o.Y36($t),o.Y36(ct.WI))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-analysis-detail"]],decls:178,vars:48,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],[1,"dialog-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"analysis-detail-container"],[1,"detail-content"],[1,"shadow"],[1,"attribute"],[1,"value"],[1,"analysis-table"],["mat-table","",3,"dataSource"],["matColumnDef","numero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","calle"],["matColumnDef","longitud"],["matColumnDef","valorZona"],["matColumnDef","valorCalle"],["matColumnDef","actions"],["mat-header-cell","","colspan","1",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["matColumnDef","bloque"],["matColumnDef","nivel"],["matColumnDef","area"],["matColumnDef","clasificacion"],["matColumnDef","valor"],["mat-row","","class","row-pointer",3,"click",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[1,"informe-section"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],[3,"backdropMessage","showingLoading"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","colspan","1"],["mat-icon-button","","color","primary","matTooltip","Ver frente en StreetView",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"],["mat-row","",1,"row-pointer",3,"click"],[1,"result-container",3,"ngClass"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-icon"),o._uU(3,"description"),o.qZA(),o.TgZ(4,"div",2),o.O4$(),o.TgZ(5,"svg",3),o._UZ(6,"path",4),o._UZ(7,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"span",6),o._uU(9),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return n.callClose()}),o.TgZ(11,"mat-icon"),o._uU(12," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",8),o.TgZ(14,"div",9),o.TgZ(15,"div",10),o.TgZ(16,"header"),o._uU(17," Datos del predio "),o.qZA(),o.TgZ(18,"section"),o.TgZ(19,"table"),o.TgZ(20,"tbody"),o.TgZ(21,"tr"),o.TgZ(22,"td",11),o._uU(23,"Clave"),o.qZA(),o.TgZ(24,"td",11),o._uU(25,"CURT"),o.qZA(),o.TgZ(26,"td",11),o._uU(27,"Predio"),o.qZA(),o.qZA(),o.TgZ(28,"tr"),o.TgZ(29,"td",12),o._uU(30),o.qZA(),o.TgZ(31,"td",12),o._uU(32),o.qZA(),o.TgZ(33,"td",12),o._uU(34),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(35,"div",10),o.TgZ(36,"header"),o._uU(37," Valores "),o.qZA(),o.TgZ(38,"section"),o.TgZ(39,"table"),o.TgZ(40,"tbody"),o.TgZ(41,"tr"),o.TgZ(42,"td",11),o._uU(43,"Valor de terreno"),o.qZA(),o.TgZ(44,"td",11),o._uU(45,"Valor de construcci\xf3n"),o.qZA(),o.TgZ(46,"td",11),o._uU(47,"Valor catastral"),o.qZA(),o.TgZ(48,"td",11),o._uU(49,"Superficie de construcci\xf3n total"),o.qZA(),o.qZA(),o.TgZ(50,"tr"),o.TgZ(51,"td",12),o._uU(52),o.ALo(53,"number"),o.qZA(),o.TgZ(54,"td",12),o._uU(55),o.ALo(56,"number"),o.qZA(),o.TgZ(57,"td",12),o._uU(58),o.ALo(59,"number"),o.qZA(),o.TgZ(60,"td",12),o._uU(61),o.ALo(62,"number"),o.TgZ(63,"sup"),o._uU(64,"2"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(65,"div",10),o.TgZ(66,"header"),o._uU(67," Ubicaci\xf3n del predio en Padr\xf3n Catastral "),o.qZA(),o.TgZ(68,"section"),o.TgZ(69,"table"),o.TgZ(70,"tbody"),o.TgZ(71,"tr"),o.TgZ(72,"td",11),o._uU(73,"Ubicaci\xf3n"),o.qZA(),o.TgZ(74,"td",11),o._uU(75,"N\xfamero exterior"),o.qZA(),o.TgZ(76,"td",11),o._uU(77,"N\xfamero interior"),o.qZA(),o.TgZ(78,"td",11),o._uU(79,"Colonia"),o.qZA(),o.TgZ(80,"td",11),o._uU(81,"\xc1rea"),o.qZA(),o.qZA(),o.TgZ(82,"tr"),o.TgZ(83,"td",12),o._uU(84),o.qZA(),o.TgZ(85,"td",12),o._uU(86),o.qZA(),o.TgZ(87,"td",12),o._uU(88),o.qZA(),o.TgZ(89,"td",12),o._uU(90),o.qZA(),o.TgZ(91,"td",12),o._uU(92),o.TgZ(93,"sup"),o._uU(94,"2"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(95,"div",10),o.TgZ(96,"header"),o._uU(97," Clasificaci\xf3n del predio "),o.qZA(),o.TgZ(98,"section"),o.TgZ(99,"table"),o.TgZ(100,"tbody"),o.TgZ(101,"tr"),o.TgZ(102,"td",11),o._uU(103,"Clasificaci\xf3n"),o.qZA(),o.TgZ(104,"td",11),o._uU(105,"\xc1rea"),o.qZA(),o.TgZ(106,"td",11),o._uU(107,"Per\xedmetro"),o.qZA(),o.qZA(),o.TgZ(108,"tr"),o.TgZ(109,"td",12),o._uU(110),o.qZA(),o.TgZ(111,"td",12),o._uU(112),o.ALo(113,"number"),o.TgZ(114,"sup"),o._uU(115,"2"),o.qZA(),o.qZA(),o.TgZ(116,"td",12),o._uU(117),o.ALo(118,"number"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(119,"div",10),o.TgZ(120,"header"),o._uU(121,"Frentes"),o.qZA(),o.TgZ(122,"section"),o.TgZ(123,"div",13),o.TgZ(124,"table",14),o.ynx(125,15),o.YNc(126,xF,2,0,"th",16),o.YNc(127,CF,2,1,"td",17),o.BQk(),o.ynx(128,18),o.YNc(129,bF,2,0,"th",16),o.YNc(130,TF,2,1,"td",17),o.BQk(),o.ynx(131,19),o.YNc(132,MF,2,0,"th",16),o.YNc(133,wF,3,4,"td",17),o.BQk(),o.ynx(134,20),o.YNc(135,PF,2,0,"th",16),o.YNc(136,OF,3,4,"td",17),o.BQk(),o.ynx(137,21),o.YNc(138,SF,2,0,"th",16),o.YNc(139,AF,3,4,"td",17),o.BQk(),o.ynx(140,22),o.YNc(141,EF,2,0,"th",23),o.YNc(142,IF,4,0,"td",17),o.BQk(),o.YNc(143,DF,1,0,"tr",24),o.YNc(144,RF,1,0,"tr",25),o.YNc(145,ZF,3,0,"tr",26),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(146,"div",10),o.TgZ(147,"header"),o._uU(148),o.qZA(),o.TgZ(149,"section"),o.TgZ(150,"div",13),o.TgZ(151,"table",14),o.ynx(152,15),o.YNc(153,LF,2,0,"th",16),o.YNc(154,kF,2,1,"td",17),o.BQk(),o.ynx(155,27),o.YNc(156,NF,2,0,"th",16),o.YNc(157,FF,2,1,"td",17),o.BQk(),o.ynx(158,28),o.YNc(159,UF,2,0,"th",16),o.YNc(160,qF,2,1,"td",17),o.BQk(),o.ynx(161,29),o.YNc(162,GF,2,0,"th",16),o.YNc(163,jF,5,4,"td",17),o.BQk(),o.ynx(164,30),o.YNc(165,zF,2,0,"th",16),o.YNc(166,YF,2,1,"td",17),o.BQk(),o.ynx(167,31),o.YNc(168,HF,2,0,"th",16),o.YNc(169,BF,3,4,"td",17),o.BQk(),o.YNc(170,VF,1,0,"tr",24),o.YNc(171,WF,1,0,"tr",32),o.YNc(172,JF,3,0,"tr",26),o.qZA(),o.qZA(),o.qZA(),o.YNc(173,$F,4,4,"div",33),o.TgZ(174,"div",34),o.YNc(175,QF,2,0,"button",35),o.YNc(176,KF,2,0,"button",35),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(177,"sic-backdrop",36)),2&t&&(o.xp6(9),o.hij(" ",n.title," "),o.xp6(21),o.Oqu(n.avaluo.predio.formattedClave),o.xp6(2),o.Oqu(n.avaluo.predio.CURT),o.xp6(2),o.Oqu(n.avaluo.predio.predio),o.xp6(18),o.hij("$",o.xi3(53,30,n.avaluo.totalTerrainCornerValue,"1.2-2"),""),o.xp6(3),o.hij("$",o.xi3(56,33,n.avaluo.totalConstructionValue,"1.2-2"),""),o.xp6(3),o.hij("$",o.xi3(59,36,n.avaluo.totalValue,"1.2-2"),""),o.xp6(3),o.hij("",o.xi3(62,39,n.avaluo.totalConstruction,"1.2-2"),"m"),o.xp6(23),o.Oqu(n.avaluo.ubication.ubicacion),o.xp6(2),o.Oqu(n.avaluo.ubication.numeroExterior),o.xp6(2),o.Oqu(n.avaluo.ubication.numeroInterior),o.xp6(2),o.Oqu(n.avaluo.ubication.colonia),o.xp6(2),o.hij("",n.avaluo.ubication.areaTitulo,"m"),o.xp6(18),o.Oqu(n.avaluo.clasification),o.xp6(2),o.hij("",o.xi3(113,42,n.avaluo.clave.areaCartografica,"1.2-2"),"m"),o.xp6(5),o.hij("",o.xi3(118,45,n.avaluo.clave.perimetro,"1.2-2"),"m"),o.xp6(7),o.Q6J("dataSource",n.fronts),o.xp6(19),o.Q6J("matHeaderRowDef",n.frontColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.frontColumns),o.xp6(4),o.hij("Construcciones (",n.constructions.data.length,")"),o.xp6(3),o.Q6J("dataSource",n.constructions),o.xp6(19),o.Q6J("matHeaderRowDef",n.constructionColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.constructionColumns),o.xp6(2),o.Q6J("ngIf",n.showResult),o.xp6(2),o.Q6J("ngIf",n.canPrintAvaluo),o.xp6(1),o.Q6J("ngIf",n.canPrintAvaluo),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,ce.Hw,Tt.Bh,Kt.lW,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.Ee,B.O5,Me.q,A.ge,A.ev,Gi.gM,A.XQ,A.Gk,B.mk],pipes:[B.JJ],styles:[".dialog-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.analysis-detail-container[_ngcontent-%COMP%]{max-height:100%;overflow:auto;margin:0 -24px}.analysis-detail-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .analysis-detail-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.analysis-detail-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .analysis-detail-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{background-color:#e4b346;height:32px;display:flex;justify-content:center;align-items:center;color:#fff}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-align:center}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   td.attribute[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;text-align:center}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{font-size:9pt;text-align:center;max-width:150px;overflow-wrap:break-word}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .analysis-table[_ngcontent-%COMP%]{max-height:150px;overflow:auto}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .analysis-table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:16px}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .analysis-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .analysis-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:32px}.analysis-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .analysis-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:9pt}table[_ngcontent-%COMP%]{width:100%;padding:0 16px}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.shadow[_ngcontent-%COMP%]{box-shadow:0 5px 20px -5px #00000080}.informe-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:12px;padding-bottom:12px}.informe-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36%;margin:4px 20px}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}label.comment-label[_ngcontent-%COMP%]{height:70px}label.comment-label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;margin:8px;width:11%}label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}label[_ngcontent-%COMP%]   .folio[_ngcontent-%COMP%]{max-width:25%;margin-left:-1%}textarea[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}textarea[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#e4b346;box-shadow:0 0 0 .2rem #9d444440}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}"]}),e})();function n8(e,i){if(1&e&&(o.TgZ(0,"option",15),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.Q6J("value",t),o.xp6(1),o.hij(" ",t," ")}}function i8(e,i){1&e&&(o.TgZ(0,"p"),o._uU(1,"Selecciona un predio para su aval\xfao referido"),o.qZA())}function r8(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"select",11),o.NdJ("change",function(r){return o.CHM(t),o.oxw().handleSelectYearReferred(r)}),o.TgZ(2,"option",12),o._uU(3,"A\xf1o referido"),o.qZA(),o.YNc(4,n8,2,2,"option",13),o.qZA(),o.YNc(5,i8,2,0,"p",14),o.qZA()}if(2&e){const t=o.oxw();o.xp6(4),o.Q6J("ngForOf",t.referredYears),o.xp6(1),o.Q6J("ngIf",0!==t.yearSelected)}}function o8(e,i){1&e&&(o.TgZ(0,"p"),o._uU(1,"Selecciona un predio para su aval\xfao"),o.qZA())}const Pd="[SIMPLE_AVALUO_TOOL]",a8=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let s8=(()=>{class e{constructor(t,n,r,a,s,l){this.mapService=t,this.featureService=n,this.catastroService=r,this.avaluoService=a,this.authService=s,this.dialog=l,this.hasValidCoords=!1,this.titleTool="",this.backdropMessage="Obteniendo aval\xfao...",this.showLoading=!1,this.referredYears=[],this.yearSelected=0,this.referredYears.push(2018,2019,2020,2021,2022,2023)}ngOnInit(){this.canBuildIndividualAvaluo=this.authService.hasPermission("avig2"),this.canBuildReferredAvaluo=this.authService.hasPermission("avrg2"),this.isReferred?(this.titleTool="Aval\xfao referido",this.mapEventHandlerId=null):(this.titleTool="Aval\xfao individual",this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}ngOnDestroy(){this.mapService.clearDrawings(Pd),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}mapClickHandler(){return t=>{const[n,r]=t.coordinate;this.dialog.closeAll(),this.showLoading=!0,this.catastroService.getPredioAtPoint(n,r,{frentes:!1,construcciones:!1}).subscribe(s=>{if(this.predio=s,null!==this.predio){this.hasValidCoords=!0;const l=this.featureService.createFeature(Pd,this.predio.geometry,{clave:this.predio.clave,idPredio:this.predio.idPredio});this.mapService.clearDrawings(Pd),this.mapService.drawFeature(l,a8),this.isReferred?this.canBuildReferredAvaluo?this.avaluoService.executeReferredAvaluo(this.predio.idPredio,this.yearSelected).subscribe(c=>{this.openAnalisysDetail()},c=>{console.log(c),this.showLoading=!1,window.alert("Error al ejecutar la funci\xf3n para el aval\xfao referido.")}):this.avaluoService.hasAvaluoReferred(this.predio.idPredio,this.yearSelected).subscribe(c=>{c?this.openAnalisysDetail():(window.alert("No se tiene el permiso para generar aval\xfao referido."),this.showLoading=!1)},c=>{console.log(c),this.showLoading=!1,window.alert("Error al verificar si existe aval\xfao referido")}):this.canBuildIndividualAvaluo?this.avaluoService.executeSimpleAvaluo(this.predio.idPredio).subscribe(c=>{this.openAnalisysDetail()},c=>{console.log(c),this.showLoading=!1,window.alert("Error al ejecutar la funci\xf3n para el aval\xfao individual")}):this.avaluoService.hasAvaluo(this.predio.clave).subscribe(c=>{c?this.openAnalisysDetail():(window.alert("No se tiene el permiso para generar aval\xfao."),this.showLoading=!1)},c=>{console.log(c),this.showLoading=!1,window.alert("Error al verificar si existe aval\xfao individual")})}else this.showLoading=!1})}}openAnalisysDetail(){var t=this;return se(function*(){const n=new ct.vA;n.width="50vw",n.maxHeight="calc(100% - 80px)",n.position={right:"64px",top:"80px"},n.hasBackdrop=!1,n.data={idPredio:t.predio.idPredio,isReferred:t.isReferred,year:t.yearSelected},t.showLoading=!1,t.dialog.open(e8,n)})()}handleSelectYearReferred(t){this.yearSelected=t.target.value,this.mapEventHandlerId||(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(ve),o.Y36(We),o.Y36(sc),o.Y36(Te.e),o.Y36(ct.uw))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-simple-avaluo"]],inputs:{isReferred:"isReferred"},decls:13,vars:5,consts:[["cdkDrag","",1,"avaluo-simple-container","mat-elevation-z2"],[1,"avaluo-simple-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[1,"avaluo-simple-content"],[4,"ngIf","ngIfElse"],["simpleAvaluo",""],[3,"backdropMessage","showingLoading"],[1,"select-year",3,"change"],["selected","","disabled","","value","0"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.YNc(9,r8,6,2,"div",8),o.YNc(10,o8,2,0,"ng-template",null,9,o.W1O),o.qZA(),o.qZA(),o._UZ(12,"sic-backdrop",10)),2&t){const r=o.MAs(11);o.xp6(7),o.Oqu(n.titleTool),o.xp6(2),o.Q6J("ngIf",n.isReferred)("ngIfElse",r),o.xp6(3),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading)}},directives:[Tt.Zt,Tt.Bh,B.O5,Me.q,q.YN,q.Kr,B.sg],styles:[".avaluo-simple-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.avaluo-simple-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 0;display:flex;justify-content:center}.avaluo-simple-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.avaluo-simple-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:90px}.avaluo-simple-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.avaluo-simple-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .avaluo-simple-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.avaluo-simple-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .avaluo-simple-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.avaluo-simple-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin:6px 6px 6px 5%;color:#fff}.avaluo-simple-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 600px){.avaluo-simple-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.avaluo-simple-content[_ngcontent-%COMP%]{max-height:292px;overflow-y:auto}.select-year[_ngcontent-%COMP%]{margin-top:5px}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:76px}"]}),e})();function l8(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.hij("Selecciona ",t.toMultipleValue," para aval\xfao multiple")}}function c8(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).showQuestionDeleteAvaluos=!0}),o._uU(1,"Borrar avaluos"),o.qZA()}}function h8(e,i){if(1&e&&o.YNc(0,c8,2,0,"button",13),2&e){const t=o.oxw();o.Q6J("ngIf",t.canDeleteAllAvaluos)}}function u8(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"button",14),o.NdJ("click",function(){return o.CHM(t),o.oxw().generateAvaluoMultiple()}),o._uU(4,"Generar multiples avaluos"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(2),o.Oqu(t.typeSelectedObject)}}function d8(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"label",15),o.TgZ(2,"span"),o._uU(3,"Se borrar\xe1n todos los avaluos, \xbfEst\xe1s seguro?"),o.qZA(),o.qZA(),o.TgZ(4,"label",16),o.TgZ(5,"button",14),o.NdJ("click",function(){return o.CHM(t),o.oxw().deleteAvaluoMultiple()}),o._uU(6," Si "),o.qZA(),o.TgZ(7,"button",17),o.NdJ("click",function(){return o.CHM(t),o.oxw().showQuestionDeleteAvaluos=!1}),o._uU(8," No "),o.qZA(),o.qZA(),o.qZA()}}const f8=function(e){return{correct:e}};function p8(e,i){if(1&e&&(o.TgZ(0,"div",18),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(2,f8,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}const $a="[MULTIPLE_AVALUO_TOOL]",w0=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let g8=(()=>{class e{constructor(t,n,r,a,s){this.mapService=t,this.featureService=n,this.catastroService=r,this.avaluoService=a,this.authService=s,this.layerSelected="",this.showClipMap=!1,this.toMultipleValue="",this.hasValidCoords=!1,this.id="",this.typeSelectedObject="",this.backdropMessage="",this.showLoading=!1,this.showResult=!1,this.resultCorrect=!0,this.resultMessage="",this.showQuestionDeleteAvaluos=!1}ngOnInit(){this.canDeleteAllAvaluos=this.authService.hasPermission("avmb2")}ngOnDestroy(){this.mapService.clearDrawings($a),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}handleSelectLayer(){switch(this.showQuestionDeleteAvaluos=!1,this.showClipMap=!0,this.showResult=!1,this.layerSelected){case"Manzana":this.toMultipleValue="manzana";break;case"Colonia":this.toMultipleValue="colonia";break;case"ZonaCatastral":this.toMultipleValue="zona catastral"}""!==this.toMultipleValue&&!this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}mapClickHandler(){return t=>{this.showResult=!1;const[n,r]=t.coordinate;switch(this.layerSelected){case"Manzana":this.catastroService.getManzanaAtPoint(n,r).subscribe(a=>{if(this.objectGeo=a,null!==this.objectGeo){this.typeSelectedObject=`Manzana: ${this.objectGeo.clave}`,this.hasValidCoords=!0,this.id=this.objectGeo.idManzana;const s=this.featureService.createFeature($a,this.objectGeo.geometry,{idManzana:this.objectGeo.idManzana,clave:this.objectGeo.clave});this.mapService.clearDrawings($a),this.mapService.drawFeature(s,w0)}});break;case"Colonia":this.catastroService.getColoniaAtPoint(n,r).subscribe(a=>{if(this.objectGeo=a,null!==this.objectGeo){this.typeSelectedObject=`Colonia: ${this.objectGeo.nombre}`,this.hasValidCoords=!0,this.id=this.objectGeo.idColonia;const s=this.featureService.createFeature($a,this.objectGeo.geometry,{idColonia:this.objectGeo.idColonia,nombre:this.objectGeo.nombre});this.mapService.clearDrawings($a),this.mapService.drawFeature(s,w0)}})}}}generateAvaluoMultiple(){this.showQuestionDeleteAvaluos=!1,this.backdropMessage=`Generando avaluos multiples de ${this.toMultipleValue}, espere un momento...`,this.showLoading=!0;const t=new Date(Date.now());this.avaluoService.executeMultipleAvaluo(this.id,this.layerSelected).subscribe(n=>{this.showLoading=!1,this.showResult=!0,this.hasValidCoords=!1;const r=new Date(Date.now());let l,s=Math.abs(r.getTime()-t.getTime())/1e3;if(s>60){const c=Math.floor(s/60);l=`${c} ${c>1?"minutos ":"minuto "} ${+(s-60*c).toFixed()}`}else l=s.toFixed(2);n?(this.resultCorrect=!0,this.resultMessage=`Avaluos generados \n${l} segundos`):(this.resultCorrect=!1,this.resultMessage="Error al generar avaluos.")},n=>{console.log(n),this.showLoading=!1,this.showResult=!0,this.resultCorrect=!1,this.resultMessage="Error al generar avaluos."})}deleteAvaluoMultiple(){this.showQuestionDeleteAvaluos=!1,this.backdropMessage="Eliminando todos los avaluos, espere un momento...",this.showLoading=!0,this.avaluoService.deleteMultipleAvaluo().subscribe(t=>{this.showLoading=!1,this.showResult=!0,t?(this.resultCorrect=!0,this.resultMessage="Avaluos borrados."):(this.resultCorrect=!1,this.resultMessage="Error al borrar avaluos.")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(ve),o.Y36(We),o.Y36(sc),o.Y36(Te.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-multiple-avaluo"]],decls:20,vars:8,consts:[[1,"avaluo-multiple-container","mat-elevation-z2"],[1,"avaluo-multiple-title"],[1,"avaluo-multiple-content"],["name","selectLayer",3,"ngModel","ngModelChange","change"],["selected","","disabled","","value",""],["ngValue","Manzana"],["ngValue","Colonia"],["ngValue","ZonaCatastral"],[4,"ngIf","ngIfElse"],["deleteAvaluos",""],[4,"ngIf"],["class","result-container",3,"ngClass",4,"ngIf"],[3,"backdropMessage","showingLoading"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["for","questionDelete"],["for","answerDelete"],["mat-flat-button","","color","primary",1,"no-option",3,"click"],[1,"result-container",3,"ngClass"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._uU(2," Aval\xfao masivo "),o.qZA(),o.TgZ(3,"div",2),o.TgZ(4,"select",3),o.NdJ("ngModelChange",function(a){return n.layerSelected=a})("change",function(){return n.handleSelectLayer()}),o.TgZ(5,"option",4),o._uU(6,"Selecciona capa"),o.qZA(),o.TgZ(7,"option",5),o._uU(8,"Manzana"),o.qZA(),o.TgZ(9,"option",6),o._uU(10,"Colonia"),o.qZA(),o.TgZ(11,"option",7),o._uU(12,"Zona catastral"),o.qZA(),o.qZA(),o.YNc(13,l8,3,1,"div",8),o.YNc(14,h8,1,1,"ng-template",null,9,o.W1O),o.YNc(16,u8,5,1,"div",10),o.YNc(17,d8,9,0,"div",10),o.YNc(18,p8,2,4,"div",11),o.qZA(),o.qZA(),o._UZ(19,"sic-backdrop",12)),2&t){const r=o.MAs(15);o.xp6(4),o.Q6J("ngModel",n.layerSelected),o.xp6(9),o.Q6J("ngIf",n.showClipMap)("ngIfElse",r),o.xp6(3),o.Q6J("ngIf",n.hasValidCoords),o.xp6(1),o.Q6J("ngIf",n.showQuestionDeleteAvaluos),o.xp6(1),o.Q6J("ngIf",n.showResult),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading)}},directives:[q.EJ,q.JJ,q.On,q.YN,q.Kr,B.O5,Me.q,Kt.lW,B.mk],styles:[".avaluo-multiple-container[_ngcontent-%COMP%]{position:absolute;top:10em;right:-2px;width:100%;max-width:338px!important;max-height:338px!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;border-radius:14px 0 0 14px;z-index:500}.avaluo-multiple-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.avaluo-multiple-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.avaluo-multiple-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.avaluo-multiple-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .avaluo-multiple-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.avaluo-multiple-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .avaluo-multiple-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.avaluo-multiple-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin:6px 6px 6px 5%;color:#fff}.avaluo-multiple-container[_ngcontent-%COMP%]   .no-option[_ngcontent-%COMP%]{margin-left:16%}.avaluo-multiple-title[_ngcontent-%COMP%]{background:#b51e1c;height:40px;color:#fff;font-size:12pt;font-weight:700;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:14px 0 0;margin:-8px -8px 0}@media screen and (max-width: 600px){.avaluo-multiple-container[_ngcontent-%COMP%]{top:calc(1.5em + 104px);left:1em;max-width:160px!important;max-height:160px!important}}@media screen and (min-width: 1620px){.avaluo-multiple-container[_ngcontent-%COMP%]{position:absolute;top:5em;left:50%;transform:translate(-50%);border-radius:14px}}@media screen and (min-width: 1182px) and (max-width: 1619px){.avaluo-multiple-container[_ngcontent-%COMP%]{position:absolute;top:9em;left:50%;transform:translate(-50%);border-radius:14px}}.avaluo-multiple-content[_ngcontent-%COMP%]{max-height:292px;overflow-y:auto;padding:10px}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}"]}),e})();var mc=Y(6087);let Od=(()=>{class e extends Mr.t{constructor(t,n,r){super(t,n,r)}getPredioDebtXCol(t,n){return this.post(`${U.N.constants.API_URL}/payment/debt-col`,{x:t,y:n}).pipe((0,ae.U)(r=>r.predios))}getPredioPaidXCol(t,n){return this.post(`${U.N.constants.API_URL}/payment/paid-col`,{x:t,y:n}).pipe((0,ae.U)(r=>r.predios))}getPredioDebtXMnz(t,n){return this.post(`${U.N.constants.API_URL}/payment/debt-mnz`,{x:t,y:n}).pipe((0,ae.U)(r=>r.predios))}getPredioPaidXMnz(t,n){return this.post(`${U.N.constants.API_URL}/payment/paid-mnz`,{x:t,y:n}).pipe((0,ae.U)(r=>r.predios))}getPaidReportXCol(t){return this.get(`${U.N.constants.API_URL}/payment/paid-col/${t}`)}getDebtReportXCol(t){return this.get(`${U.N.constants.API_URL}/payment/debt-col/${t}`)}getPaidReportXMnz(t){return this.get(`${U.N.constants.API_URL}/payment/paid-mnz/${t}`)}getDebtReportXMnz(t){return this.get(`${U.N.constants.API_URL}/payment/debt-mnz/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(En.eN),o.LFG(Te.e),o.LFG(Mt.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function _8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1," Colonia "),o.qZA())}function m8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij(" ",t.colonia," ")}}function v8(e,i){1&e&&o._UZ(0,"td",36)}function y8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1," Tipo de predio "),o.qZA())}function x8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.predioType)}}function C8(e,i){1&e&&o._UZ(0,"td",36)}function b8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1," Cuenta "),o.qZA())}function T8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.cuenta)}}function M8(e,i){1&e&&o._UZ(0,"td",36)}function w8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1," Clave catastral "),o.qZA())}function P8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.formattedClave)}}function O8(e,i){1&e&&o._UZ(0,"td",36)}function S8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1," Ubicaci\xf3n "),o.qZA())}function A8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.ubicacion)}}function E8(e,i){1&e&&o._UZ(0,"td",36)}function I8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1,"N\xfamero Exterior"),o.qZA())}function D8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numberExterior)}}function R8(e,i){1&e&&(o.TgZ(0,"td",36),o._uU(1," Total "),o.qZA())}function Z8(e,i){1&e&&(o.TgZ(0,"th",34),o._uU(1,"Saldo"),o.qZA())}function L8(e,i){if(1&e&&(o.TgZ(0,"td",35),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.saldo,"1.2-2")," ")}}function k8(e,i){if(1&e&&(o.TgZ(0,"td",36),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.hij(" ",t.getTotalSaldo()," ")}}function N8(e,i){1&e&&o._UZ(0,"tr",37)}function F8(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",38),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().moveToGeom(a)}),o.qZA()}}function U8(e,i){if(1&e&&(o.TgZ(0,"td",42),o._uU(1),o.qZA()),2&e){o.oxw(2);const t=o.MAs(19);o.xp6(1),o.hij('No se encontraron datos con el filtro "',t.value,'"')}}function q8(e,i){1&e&&(o.TgZ(0,"td",42),o._uU(1,"No se encontraron predios con deuda"),o.qZA())}function G8(e,i){if(1&e&&(o.TgZ(0,"tr",39),o.YNc(1,U8,2,1,"td",40),o.YNc(2,q8,2,0,"ng-template",null,41,o.W1O),o.qZA()),2&e){const t=o.MAs(3);o.oxw();const n=o.MAs(19);o.xp6(1),o.Q6J("ngIf",""!==n.value)("ngIfElse",t)}}function j8(e,i){1&e&&o._UZ(0,"tr",43)}const z8=function(){return[5,10,25]},P0="[PAYMENT_TOOL][PREDIO_DEBT]",Y8=new mt({stroke:new J({color:"#b72331",width:2,lineDash:void 0}),fill:new Q({color:"rgba(183, 35, 49, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b72331"}),fill:new Q({color:"#b72331"})})});let O0=(()=>{class e{constructor(t,n,r,a,s){this.dialogRef=t,this.data=n,this.featureService=r,this.mapService=a,this.paymentService=s,this.displayedColumns=["colonia","type","cuenta","claveCatastral","ubication","numberExt","saldo"],this.dataSource=new A.by(this.data),this.saldo=0,this.title="",this.backdropMessage="Espere un momento...",this.showLoading=!1}ngOnInit(){this.title=""===this.data[0].manzana?`colonia ${this.data[0].colonia.toLowerCase()}`:`manzana ${this.data[0].manzana}`}ngAfterViewInit(){this.dataSource.paginator=this.paginator}callClose(){this.dialogRef.close()}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getTotalSaldo(){return this.saldo=this.data.map(t=>t.saldo).reduce((t,n)=>t+n,0),Ha(this.saldo)}moveToGeom(t){var n;const r=this.featureService.createFeature(P0,t.predioGeometry);this.mapService.clearDrawings(P0),this.mapService.drawFeature(r,Y8),this.mapService.getMapById(this.mapService.default).moveTo(null===(n=r.getGeometry())||void 0===n?void 0:n.getExtent())}getInform(){this.showLoading=!0,""===this.data[0].manzana?this.paymentService.getDebtReportXCol(this.data[0].colonia).subscribe(t=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${t.uri}`,"_blank","noopener noreferrer")}):this.paymentService.getDebtReportXMnz(this.data[0].manzana).subscribe(t=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${t.uri}`,"_blank","noopener noreferrer")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36(ct.WI),o.Y36(ve),o.Y36($t),o.Y36(Od))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-dialog-debt"]],viewQuery:function(t,n){if(1&t&&o.Gf(mc.NW,5),2&t){let r;o.iGM(r=o.CRH())&&(n.paginator=r.first)}},decls:63,vars:15,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],[1,"dialog-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"mat-typography"],[1,"filter-container"],["matInput","","placeholder","Filtro",3,"keyup"],["input",""],[1,"total-info"],[1,"mat-elevation-z8"],[1,"table-container"],["mat-table","",3,"dataSource"],["matColumnDef","colonia"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","type"],["matColumnDef","cuenta"],["matColumnDef","claveCatastral"],["matColumnDef","ubication"],["matColumnDef","numberExt"],["matColumnDef","saldo"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","row-pointer",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"button-container"],["mat-flat-button","","color","primary",3,"click"],[3,"backdropMessage","showingLoading"],["mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-row",""],["mat-row","",1,"row-pointer",3,"click"],[1,"mat-row"],["class","mat-cell","colspan","7",4,"ngIf","ngIfElse"],["noData",""],["colspan","7",1,"mat-cell"],["mat-footer-row",""]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-icon"),o._uU(3,"attach_money"),o.qZA(),o.TgZ(4,"div",2),o.O4$(),o.TgZ(5,"svg",3),o._UZ(6,"path",4),o._UZ(7,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"span",6),o._uU(9),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return n.callClose()}),o.TgZ(11,"mat-icon"),o._uU(12," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"mat-dialog-content",8),o.TgZ(14,"div",9),o.TgZ(15,"mat-form-field"),o.TgZ(16,"mat-label"),o._uU(17,"Filtro"),o.qZA(),o.TgZ(18,"input",10,11),o.NdJ("keyup",function(a){return n.applyFilter(a)}),o.qZA(),o.qZA(),o.TgZ(20,"span",12),o._uU(21),o.ALo(22,"number"),o.qZA(),o.qZA(),o.TgZ(23,"div",13),o.TgZ(24,"div",14),o.TgZ(25,"table",15),o.ynx(26,16),o.YNc(27,_8,2,0,"th",17),o.YNc(28,m8,2,1,"td",18),o.YNc(29,v8,1,0,"td",19),o.BQk(),o.ynx(30,20),o.YNc(31,y8,2,0,"th",17),o.YNc(32,x8,2,1,"td",18),o.YNc(33,C8,1,0,"td",19),o.BQk(),o.ynx(34,21),o.YNc(35,b8,2,0,"th",17),o.YNc(36,T8,2,1,"td",18),o.YNc(37,M8,1,0,"td",19),o.BQk(),o.ynx(38,22),o.YNc(39,w8,2,0,"th",17),o.YNc(40,P8,2,1,"td",18),o.YNc(41,O8,1,0,"td",19),o.BQk(),o.ynx(42,23),o.YNc(43,S8,2,0,"th",17),o.YNc(44,A8,2,1,"td",18),o.YNc(45,E8,1,0,"td",19),o.BQk(),o.ynx(46,24),o.YNc(47,I8,2,0,"th",17),o.YNc(48,D8,2,1,"td",18),o.YNc(49,R8,2,0,"td",19),o.BQk(),o.ynx(50,25),o.YNc(51,Z8,2,0,"th",17),o.YNc(52,L8,3,4,"td",18),o.YNc(53,k8,2,1,"td",19),o.BQk(),o.YNc(54,N8,1,0,"tr",26),o.YNc(55,F8,1,0,"tr",27),o.YNc(56,G8,4,2,"tr",28),o.YNc(57,j8,1,0,"tr",29),o.qZA(),o.qZA(),o._UZ(58,"mat-paginator",30),o.TgZ(59,"div",31),o.TgZ(60,"button",32),o.NdJ("click",function(){return n.getInform()}),o._uU(61," Generar informe "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(62,"sic-backdrop",33)),2&t&&(o.xp6(9),o.hij(" Lista de deudores ",n.title," "),o.xp6(12),o.hij(" Total de predios deudores: ",o.xi3(22,11,n.data.length,"1.0-0")," "),o.xp6(4),o.Q6J("dataSource",n.dataSource),o.xp6(29),o.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.displayedColumns),o.xp6(2),o.Q6J("matFooterRowDef",n.displayedColumns)("matFooterRowDefSticky",!0),o.xp6(1),o.Q6J("pageSizeOptions",o.DdM(14,z8)),o.xp6(4),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,ce.Hw,Tt.Bh,Kt.lW,ct.xY,Ba.KE,Ba.hX,oc.Nt,A.BZ,A.w1,A.fO,A.Dz,A.mD,A.as,A.nj,A.Ee,A.Ke,mc.NW,Me.q,A.ge,A.ev,A.yh,A.XQ,A.Gk,B.O5,A.Q2],pipes:[B.JJ],styles:[".table-container[_ngcontent-%COMP%]{height:352px;overflow:auto}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}.dialog-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}mat-dialog-content[_ngcontent-%COMP%]{padding:0;max-height:84vh}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px;margin:0 16px}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:50%}.filter-container[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{flex:50%;text-align:end;font-weight:700}.button-container[_ngcontent-%COMP%]{flex:50%;text-align:end;padding-right:3%}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}"]}),e})();var S0=Y(3538);function H8(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Colonia "),o.qZA())}function B8(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij(" ",t.colonia," ")}}function V8(e,i){1&e&&o._UZ(0,"td",39)}function W8(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Tipo de predio "),o.qZA())}function J8(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.predioType)}}function X8(e,i){1&e&&o._UZ(0,"td",39)}function $8(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Cuenta "),o.qZA())}function Q8(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.cuenta)}}function K8(e,i){1&e&&o._UZ(0,"td",39)}function t7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Clave catastral"),o.qZA())}function e7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.formattedClave)}}function n7(e,i){1&e&&o._UZ(0,"td",39)}function i7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Ubicaci\xf3n "),o.qZA())}function r7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.ubicacion)}}function o7(e,i){1&e&&o._UZ(0,"td",39)}function a7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"N\xfamero Exterior"),o.qZA())}function s7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numberExterior)}}function l7(e,i){1&e&&o._UZ(0,"td",39)}function c7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Folio "),o.qZA())}function h7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.folio)}}function u7(e,i){1&e&&o._UZ(0,"td",39)}function d7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Fecha "),o.qZA())}function f7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit,n=o.oxw();o.xp6(1),o.Oqu(n.getDatePaid(t.fecha))}}function p7(e,i){1&e&&o._UZ(0,"td",39)}function g7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1," Hora "),o.qZA())}function _7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.hora)}}function m7(e,i){1&e&&(o.TgZ(0,"td",39),o._uU(1," Total "),o.qZA())}function v7(e,i){1&e&&(o.TgZ(0,"th",37),o._uU(1,"Total pago"),o.qZA())}function y7(e,i){if(1&e&&(o.TgZ(0,"td",38),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.totalPago,"1.2-2")," ")}}function x7(e,i){if(1&e&&(o.TgZ(0,"td",39),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.hij(" ",t.getTotalPago()," ")}}function C7(e,i){1&e&&o._UZ(0,"tr",40)}function b7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",41),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw().moveToGeom(a)}),o.qZA()}}function T7(e,i){if(1&e&&(o.TgZ(0,"td",45),o._uU(1),o.qZA()),2&e){o.oxw(2);const t=o.MAs(19);o.xp6(1),o.hij('No se encontraron datos con el filtro "',t.value,'"')}}function M7(e,i){1&e&&(o.TgZ(0,"td",45),o._uU(1,"No se encontraron predios pagados"),o.qZA())}function w7(e,i){if(1&e&&(o.TgZ(0,"tr",42),o.YNc(1,T7,2,1,"td",43),o.YNc(2,M7,2,0,"ng-template",null,44,o.W1O),o.qZA()),2&e){const t=o.MAs(3);o.oxw();const n=o.MAs(19);o.xp6(1),o.Q6J("ngIf",""!==n.value)("ngIfElse",t)}}function P7(e,i){1&e&&o._UZ(0,"tr",46)}const O7=function(){return[5,10,25]},A0="[PAYMENT_TOOL][PREDIO_PAID]",S7=new mt({stroke:new J({color:"#b72331",width:2,lineDash:void 0}),fill:new Q({color:"rgba(183, 35, 49, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b72331"}),fill:new Q({color:"#b72331"})})});let E0=(()=>{class e{constructor(t,n,r,a,s){this.dialogRef=t,this.data=n,this.featureService=r,this.mapService=a,this.paymentService=s,this.displayedColumns=["colonia","type","cuenta","claveCatastral","ubication","numberExt","folio","fecha","hora","totalPago"],this.dataSource=new A.by(this.data),this.pago=0,this.title="",this.backdropMessage="Espere un momento...",this.showLoading=!1}ngOnInit(){this.title=""===this.data[0].manzana?`colonia ${this.data[0].colonia.toLowerCase()}`:`manzana ${this.data[0].manzana}`}ngAfterViewInit(){this.dataSource.paginator=this.paginator}callClose(){this.dialogRef.close()}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getTotalPago(){return this.pago=this.data.map(t=>t.totalPago).reduce((t,n)=>t+n,0),Ha(this.pago)}getDatePaid(t){return(0,S0.L)(new Date(t))}moveToGeom(t){var n;const r=this.featureService.createFeature(A0,t.predioGeometry);this.mapService.clearDrawings(A0),this.mapService.drawFeature(r,S7),this.mapService.getMapById(this.mapService.default).moveTo(null===(n=r.getGeometry())||void 0===n?void 0:n.getExtent())}getInform(){this.showLoading=!0,""===this.data[0].manzana?this.paymentService.getPaidReportXCol(this.data[0].colonia).subscribe(t=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${t.uri}`,"_blank","noopener noreferrer")}):this.paymentService.getPaidReportXMnz(this.data[0].manzana).subscribe(t=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${t.uri}`,"_blank","noopener noreferrer")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36(ct.WI),o.Y36(ve),o.Y36($t),o.Y36(Od))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-dialog-paid"]],viewQuery:function(t,n){if(1&t&&o.Gf(mc.NW,5),2&t){let r;o.iGM(r=o.CRH())&&(n.paginator=r.first)}},decls:75,vars:15,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],[1,"dialog-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"mat-typography"],[1,"filter-container"],["matInput","","placeholder","Filtro",3,"keyup"],["input",""],[1,"total-info"],[1,"mat-elevation-z8"],[1,"table-container"],["mat-table","",3,"dataSource"],["matColumnDef","colonia"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","type"],["matColumnDef","cuenta"],["matColumnDef","claveCatastral"],["matColumnDef","ubication"],["matColumnDef","numberExt"],["matColumnDef","folio"],["matColumnDef","fecha"],["matColumnDef","hora"],["matColumnDef","totalPago"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","row-pointer",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"button-container"],["mat-flat-button","","color","primary",3,"click"],[3,"backdropMessage","showingLoading"],["mat-header-cell",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-row",""],["mat-row","",1,"row-pointer",3,"click"],[1,"mat-row"],["class","mat-cell","colspan","10",4,"ngIf","ngIfElse"],["noData",""],["colspan","10",1,"mat-cell"],["mat-footer-row",""]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-icon"),o._uU(3,"attach_money"),o.qZA(),o.TgZ(4,"div",2),o.O4$(),o.TgZ(5,"svg",3),o._UZ(6,"path",4),o._UZ(7,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"span",6),o._uU(9),o.qZA(),o.TgZ(10,"button",7),o.NdJ("click",function(){return n.callClose()}),o.TgZ(11,"mat-icon"),o._uU(12," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"mat-dialog-content",8),o.TgZ(14,"div",9),o.TgZ(15,"mat-form-field"),o.TgZ(16,"mat-label"),o._uU(17,"Filtro"),o.qZA(),o.TgZ(18,"input",10,11),o.NdJ("keyup",function(a){return n.applyFilter(a)}),o.qZA(),o.qZA(),o.TgZ(20,"span",12),o._uU(21),o.ALo(22,"number"),o.qZA(),o.qZA(),o.TgZ(23,"div",13),o.TgZ(24,"div",14),o.TgZ(25,"table",15),o.ynx(26,16),o.YNc(27,H8,2,0,"th",17),o.YNc(28,B8,2,1,"td",18),o.YNc(29,V8,1,0,"td",19),o.BQk(),o.ynx(30,20),o.YNc(31,W8,2,0,"th",17),o.YNc(32,J8,2,1,"td",18),o.YNc(33,X8,1,0,"td",19),o.BQk(),o.ynx(34,21),o.YNc(35,$8,2,0,"th",17),o.YNc(36,Q8,2,1,"td",18),o.YNc(37,K8,1,0,"td",19),o.BQk(),o.ynx(38,22),o.YNc(39,t7,2,0,"th",17),o.YNc(40,e7,2,1,"td",18),o.YNc(41,n7,1,0,"td",19),o.BQk(),o.ynx(42,23),o.YNc(43,i7,2,0,"th",17),o.YNc(44,r7,2,1,"td",18),o.YNc(45,o7,1,0,"td",19),o.BQk(),o.ynx(46,24),o.YNc(47,a7,2,0,"th",17),o.YNc(48,s7,2,1,"td",18),o.YNc(49,l7,1,0,"td",19),o.BQk(),o.ynx(50,25),o.YNc(51,c7,2,0,"th",17),o.YNc(52,h7,2,1,"td",18),o.YNc(53,u7,1,0,"td",19),o.BQk(),o.ynx(54,26),o.YNc(55,d7,2,0,"th",17),o.YNc(56,f7,2,1,"td",18),o.YNc(57,p7,1,0,"td",19),o.BQk(),o.ynx(58,27),o.YNc(59,g7,2,0,"th",17),o.YNc(60,_7,2,1,"td",18),o.YNc(61,m7,2,0,"td",19),o.BQk(),o.ynx(62,28),o.YNc(63,v7,2,0,"th",17),o.YNc(64,y7,3,4,"td",18),o.YNc(65,x7,2,1,"td",19),o.BQk(),o.YNc(66,C7,1,0,"tr",29),o.YNc(67,b7,1,0,"tr",30),o.YNc(68,w7,4,2,"tr",31),o.YNc(69,P7,1,0,"tr",32),o.qZA(),o.qZA(),o._UZ(70,"mat-paginator",33),o.TgZ(71,"div",34),o.TgZ(72,"button",35),o.NdJ("click",function(){return n.getInform()}),o._uU(73," Generar informe "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(74,"sic-backdrop",36)),2&t&&(o.xp6(9),o.hij(" Lista de pagos ",n.title," "),o.xp6(12),o.hij(" Total de predios pagados: ",o.xi3(22,11,n.data.length,"1.0-0")," "),o.xp6(4),o.Q6J("dataSource",n.dataSource),o.xp6(41),o.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.displayedColumns),o.xp6(2),o.Q6J("matFooterRowDef",n.displayedColumns)("matFooterRowDefSticky",!0),o.xp6(1),o.Q6J("pageSizeOptions",o.DdM(14,O7)),o.xp6(4),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,ce.Hw,Tt.Bh,Kt.lW,ct.xY,Ba.KE,Ba.hX,oc.Nt,A.BZ,A.w1,A.fO,A.Dz,A.mD,A.as,A.nj,A.Ee,A.Ke,mc.NW,Me.q,A.ge,A.ev,A.yh,A.XQ,A.Gk,B.O5,A.Q2],pipes:[B.JJ],styles:[".table-container[_ngcontent-%COMP%]{height:352px;overflow:auto}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}.dialog-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-24px -24px 0}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}mat-dialog-content[_ngcontent-%COMP%]{padding:0;max-height:84vh}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px;margin:0 16px}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:50%}.filter-container[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{flex:50%;text-align:end;font-weight:700}.button-container[_ngcontent-%COMP%]{flex:50%;text-align:end;padding-right:3%}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}"]}),e})();function A7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).selectPaymentList("paid-col")}),o._uU(1," Lista de pagos por colonia "),o.qZA()}}function E7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).selectPaymentList("debt-col")}),o._uU(1," Lista de deudores por colonia "),o.qZA()}}function I7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).selectPaymentList("paid-mnz")}),o._uU(1," Lista de pagos por manzana "),o.qZA()}}function D7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).selectPaymentList("debt-mnz")}),o._uU(1," Lista de deudores por manzana "),o.qZA()}}function R7(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",10),o.YNc(2,A7,2,0,"button",11),o.YNc(3,E7,2,0,"button",12),o.YNc(4,I7,2,0,"button",11),o.YNc(5,D7,2,0,"button",12),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.Q6J("ngIf",t.canSeePaid),o.xp6(1),o.Q6J("ngIf",t.canSeeDebt),o.xp6(1),o.Q6J("ngIf",t.canSeePaid),o.xp6(1),o.Q6J("ngIf",t.canSeeDebt)}}function Z7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"p",15),o._uU(2),o.qZA(),o.TgZ(3,"p",15),o._uU(4,"Haz click en el mapa para ver el listado"),o.qZA(),o.TgZ(5,"button",16),o.NdJ("click",function(){return o.CHM(t),o.oxw().backSelectPaymentList()}),o._uU(6," Volver "),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(2),o.hij(" ",t.paymentListTitle," ")}}const Sd="[PAYMENT_TOOL]",L7=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let k7=(()=>{class e{constructor(t,n,r,a,s){this.mapService=t,this.paymentService=n,this.dialog=r,this.featureService=a,this.authService=s,this.paymentList="",this.paymentListTitle="",this.mapEventHandlerId=null,this.backdropMessage="Cargando lista...",this.showLoading=!1}ngOnInit(){this.canSeePaid=this.authService.hasPermission("gdpp2"),this.canSeeDebt=this.authService.hasPermission("gdpd3")}ngOnDestroy(){this.mapService.clearDrawings(Sd),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}selectPaymentList(t){switch(this.paymentList=t,t){case"paid-col":this.paymentListTitle="Lista de pagos por colonia";break;case"debt-col":this.paymentListTitle="Lista de deudores por colonia";break;case"paid-mnz":this.paymentListTitle="Lista de pagos por manzana";break;case"debt-mnz":this.paymentListTitle="Lista de deudores por manzana"}null===this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}backSelectPaymentList(){this.paymentList="",this.paymentListTitle=""}mapClickHandler(){return t=>{this.showLoading=!0;const[n,r]=t.coordinate,a=new ct.vA;switch(a.autoFocus=!0,a.width="70vw",this.paymentList){case"debt-col":this.paymentService.getPredioDebtXCol(n,r).subscribe(s=>{0!==s.length&&this.highlightGeom(s[0].colonyGeometry),a.data=s,this.dialog.open(O0,a),this.showLoading=!1});break;case"paid-col":this.paymentService.getPredioPaidXCol(n,r).subscribe(s=>{0!==s.length&&this.highlightGeom(s[0].colonyGeometry),a.data=s,this.dialog.open(E0,a),this.showLoading=!1});break;case"paid-mnz":this.paymentService.getPredioPaidXMnz(n,r).subscribe(s=>{0!==s.length&&this.highlightGeom(s[0].colonyGeometry),a.data=s,this.dialog.open(E0,a),this.showLoading=!1},s=>{console.log(s),this.showLoading=!1});break;case"debt-mnz":this.paymentService.getPredioDebtXMnz(n,r).subscribe(s=>{0!==s.length&&this.highlightGeom(s[0].colonyGeometry),a.data=s,this.dialog.open(O0,a),this.showLoading=!1},s=>{console.log(s),this.showLoading=!1})}}}highlightGeom(t){const n=this.featureService.createFeature(Sd,t);this.mapService.clearDrawings(Sd),this.mapService.drawFeature(n,L7)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(Od),o.Y36(ct.uw),o.Y36(ve),o.Y36(Te.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-payment"]],decls:12,vars:4,consts:[["cdkDrag","",1,"payment-container","mat-elevation-z2"],[1,"payment-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[4,"ngIf","ngIfElse"],["chosenPayment",""],[3,"backdropMessage","showingLoading"],[1,"payment-list"],["mat-flat-button","","color","primary","title","Lista de pagos por colonia",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","title","Lista de deudores por colonia",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","title","Lista de pagos por colonia",3,"click"],["mat-flat-button","","color","primary","title","Lista de deudores por colonia",3,"click"],[1,"p"],["mat-flat-button","","color","primary","title","Volver",3,"click"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Gesti\xf3n de pagos"),o.qZA(),o.qZA(),o.YNc(8,R7,6,4,"div",7),o.YNc(9,Z7,7,1,"ng-template",null,8,o.W1O),o.qZA(),o._UZ(11,"sic-backdrop",9)),2&t){const r=o.MAs(10);o.xp6(8),o.Q6J("ngIf",""===n.paymentList)("ngIfElse",r),o.xp6(3),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading)}},directives:[Tt.Zt,Tt.Bh,B.O5,Me.q,Kt.lW],styles:[".payment-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.payment-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.payment-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:90%}.payment-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.payment-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .payment-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.payment-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .payment-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.payment-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:306px;margin:8px;color:#fff}.payment-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 600px){.payment-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.payment-list[_ngcontent-%COMP%]{max-height:270px;overflow-y:auto;margin:8px 0 0}.p[_ngcontent-%COMP%]{margin:16px 8px}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:66px}"]}),e})();function N7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).selectPrintOption("simple")}),o._uU(1," Plano simple "),o.qZA()}}function F7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).selectPrintOption("certificado")}),o._uU(1," Plano certificado "),o.qZA()}}function U7(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p",9),o.YNc(2,N7,2,0,"button",10),o.YNc(3,F7,2,0,"button",11),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.Q6J("ngIf",t.canPrintSimple),o.xp6(1),o.Q6J("ngIf",t.canPrintCertificate)}}function q7(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw(2);o.xp6(2),o.hij("Selecciona ",t.typeGeomSelected," en el mapa")}}function G7(e,i){if(1&e&&(o.TgZ(0,"label",35),o.TgZ(1,"span"),o._uU(2,"Escala personalizada"),o.qZA(),o._UZ(3,"input",36),o.qZA()),2&e){const t=o.oxw(3);o.xp6(3),o.Q6J("formControl",t.personalScala)}}function j7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"select",21),o.NdJ("change",function(r){return o.CHM(t),o.oxw(2).handleSelectPageSize(r)}),o.TgZ(2,"option",16),o._uU(3,"Tama\xf1o de hoja"),o.qZA(),o.TgZ(4,"option",22),o._uU(5,"Carta"),o.qZA(),o.TgZ(6,"option",23),o._uU(7,"Oficio"),o.qZA(),o.TgZ(8,"option",24),o._uU(9,"Tabloide"),o.qZA(),o.TgZ(10,"option",25),o._uU(11,"60 x 60"),o.qZA(),o.TgZ(12,"option",26),o._uU(13,"90 x 90"),o.qZA(),o.qZA(),o.TgZ(14,"select",27),o.NdJ("change",function(r){return o.CHM(t),o.oxw(2).handleSelectScala(r)}),o.TgZ(15,"option",16),o._uU(16,"M\xe9todo de escala"),o.qZA(),o.TgZ(17,"option",28),o._uU(18,"Fijo"),o.qZA(),o.TgZ(19,"option",29),o._uU(20,"Din\xe1mico"),o.qZA(),o.TgZ(21,"option",30),o._uU(22,"Personalizado"),o.qZA(),o.qZA(),o.YNc(23,G7,4,1,"label",31),o.TgZ(24,"label",32),o.TgZ(25,"span"),o._uU(26,"Nota / Observaci\xf3n"),o.qZA(),o._UZ(27,"textarea",33),o.qZA(),o.TgZ(28,"button",34),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).getSimplePlano()}),o._uU(29," Imprimir "),o.qZA(),o.qZA()}if(2&e){const t=o.oxw(2);o.xp6(23),o.Q6J("ngIf","personalizado"===t.scala),o.xp6(4),o.Q6J("formControl",t.observation),o.xp6(1),o.Q6J("disabled",!t.validateDataSimplePlano())}}function z7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",14),o.TgZ(2,"p"),o._uU(3),o.qZA(),o.TgZ(4,"select",15),o.NdJ("change",function(r){return o.CHM(t),o.oxw().handleSelectGeom(r)}),o.TgZ(5,"option",16),o._uU(6,"Selecciona objeto geom\xe9trico"),o.qZA(),o.TgZ(7,"option",17),o._uU(8,"Predio"),o.qZA(),o.TgZ(9,"option",18),o._uU(10,"Manzana"),o.qZA(),o.qZA(),o.YNc(11,q7,3,1,"div",7),o.YNc(12,j7,30,3,"div",7),o.qZA(),o.TgZ(13,"div",19),o.TgZ(14,"button",20),o.NdJ("click",function(){return o.CHM(t),o.oxw().selectPrintOption("")}),o._uU(15," Volver "),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(3),o.hij(" ",t.printOptionTitle," "),o.xp6(8),o.Q6J("ngIf",""!==t.typeGeomSelected),o.xp6(1),o.Q6J("ngIf",t.hasValidCoords)}}function Y7(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw(2);o.xp6(2),o.hij("Selecciona ",t.typeGeomSelected," en el mapa")}}function H7(e,i){if(1&e&&(o.TgZ(0,"label",35),o.TgZ(1,"span"),o._uU(2,"Escala personalizada"),o.qZA(),o._UZ(3,"input",36),o.qZA()),2&e){const t=o.oxw(3);o.xp6(3),o.Q6J("formControl",t.personalScala)}}function B7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"label",49),o.TgZ(1,"span"),o._uU(2,"Medidas seg\xfan escritura"),o.qZA(),o.TgZ(3,"mat-checkbox",50),o.NdJ("ngModelChange",function(r){return o.CHM(t),o.oxw(3).activateLegal=r}),o.qZA(),o.qZA()}if(2&e){const t=o.oxw(3);o.xp6(3),o.Q6J("checked",t.activateLegal)("ngModel",t.activateLegal)}}function V7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"select",21),o.NdJ("change",function(r){return o.CHM(t),o.oxw(2).handleSelectPageSize(r)}),o.TgZ(2,"option",16),o._uU(3,"Tama\xf1o de hoja"),o.qZA(),o.TgZ(4,"option",22),o._uU(5,"Carta"),o.qZA(),o.TgZ(6,"option",23),o._uU(7,"Oficio"),o.qZA(),o.TgZ(8,"option",24),o._uU(9,"Tabloide"),o.qZA(),o.TgZ(10,"option",25),o._uU(11,"60 x 60"),o.qZA(),o.TgZ(12,"option",26),o._uU(13,"90 x 90"),o.qZA(),o.qZA(),o.TgZ(14,"select",27),o.NdJ("change",function(r){return o.CHM(t),o.oxw(2).handleSelectScala(r)}),o.TgZ(15,"option",16),o._uU(16,"M\xe9todo de escala"),o.qZA(),o.TgZ(17,"option",28),o._uU(18,"Fijo"),o.qZA(),o.TgZ(19,"option",29),o._uU(20,"Din\xe1mico"),o.qZA(),o.TgZ(21,"option",30),o._uU(22,"Personalizado"),o.qZA(),o.qZA(),o.YNc(23,H7,4,1,"label",31),o.TgZ(24,"label",37),o.TgZ(25,"span"),o._uU(26,"Folio"),o.qZA(),o._UZ(27,"input",38),o.qZA(),o.TgZ(28,"label",39),o.TgZ(29,"span"),o._uU(30,"Solicitante"),o.qZA(),o._UZ(31,"input",40),o.qZA(),o.TgZ(32,"label",41),o.TgZ(33,"span"),o._uU(34,"Imprime"),o.qZA(),o._UZ(35,"input",42),o.qZA(),o.TgZ(36,"label",43),o.TgZ(37,"span"),o._uU(38,"Captura"),o.qZA(),o._UZ(39,"input",44),o.qZA(),o.TgZ(40,"label",45),o.TgZ(41,"span"),o._uU(42,"Revisa"),o.qZA(),o._UZ(43,"input",46),o.qZA(),o.TgZ(44,"label",32),o.TgZ(45,"span"),o._uU(46,"Nota / Observaci\xf3n"),o.qZA(),o._UZ(47,"textarea",33),o.qZA(),o.YNc(48,B7,4,2,"label",47),o.TgZ(49,"button",48),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).getPlanoCertificado()}),o._uU(50," Imprimir "),o.qZA(),o.qZA()}if(2&e){const t=o.oxw(2);o.xp6(23),o.Q6J("ngIf","personalizado"===t.scala),o.xp6(4),o.Q6J("formControl",t.folio),o.xp6(4),o.Q6J("formControl",t.applicant),o.xp6(4),o.Q6J("formControl",t.printer),o.xp6(4),o.Q6J("formControl",t.capture),o.xp6(4),o.Q6J("formControl",t.verify),o.xp6(4),o.Q6J("formControl",t.observation),o.xp6(1),o.Q6J("ngIf","predio"===t.typeGeomSelected),o.xp6(1),o.Q6J("disabled",!t.validateDataPlanoCertificado())}}function W7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"select",15),o.NdJ("change",function(r){return o.CHM(t),o.oxw().handleSelectGeom(r)}),o.TgZ(4,"option",16),o._uU(5,"Selecciona objeto geom\xe9trico"),o.qZA(),o.TgZ(6,"option",17),o._uU(7,"Predio"),o.qZA(),o.TgZ(8,"option",18),o._uU(9,"Manzana"),o.qZA(),o.qZA(),o.YNc(10,Y7,3,1,"div",7),o.YNc(11,V7,51,9,"div",7),o.TgZ(12,"button",20),o.NdJ("click",function(){return o.CHM(t),o.oxw().selectPrintOption("")}),o._uU(13," Volver "),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(2),o.hij(" ",t.printOptionTitle," "),o.xp6(8),o.Q6J("ngIf",""!==t.typeGeomSelected),o.xp6(1),o.Q6J("ngIf",t.hasValidCoords)}}const Qa="[PRINT_TOOL]",I0=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let J7=(()=>{class e{constructor(t,n,r,a,s,l){this.mapService=t,this.catastroService=n,this.featureService=r,this.sicamService=a,this.adapter=s,this.authService=l,this.printOption="",this.printOptionTitle="",this.backdropMessage="Espere un momento...",this.showLoading=!1,this.hasValidCoords=!1,this.typeGeomSelected="",this.scala="",this.personalScala=new q.NI(100),this.observation=new q.NI(""),this.sizePage="",this.applicant=new q.NI(""),this.folio=new q.NI(""),this.printer=new q.NI(""),this.capture=new q.NI(""),this.verify=new q.NI(""),this.activateLegal=!1}ngOnInit(){this.adapter.setLocale("es"),this.canPrintSimple=this.authService.hasPermission("imps2"),this.canPrintCertificate=this.authService.hasPermission("impc3")}ngOnDestroy(){this.mapService.clearDrawings(Qa),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}selectPrintOption(t){switch(this.printOption=t,t){case"simple":this.printOptionTitle="Plano simple";break;case"certificado":this.printOptionTitle="Plano certificado";break;case"alineamiento":this.printOptionTitle="Alineamiento y n\xfamero oficial";break;case"patrimonio":this.printOptionTitle="Patrimonio";break;default:this.printOptionTitle="",this.typeGeomSelected="",this.hasValidCoords=!1,this.scala="",this.personalScala.setValue(100),this.observation.setValue(""),this.sizePage="",this.applicant.setValue(""),this.folio.setValue(""),this.printer.setValue(""),this.capture.setValue(""),this.verify.setValue(""),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}}handleSelectGeom(t){this.typeGeomSelected=t.target.value,this.hasValidCoords=!1,this.scala="",""!==this.typeGeomSelected&&!this.mapEventHandlerId&&(this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"))}mapClickHandler(){return t=>{const[n,r]=t.coordinate,a={frentes:!1,construcciones:!1};switch(this.typeGeomSelected){case"predio":this.catastroService.getPredioAtPoint(n,r,a).subscribe(s=>{if(this.predio=s,null!==this.predio){this.hasValidCoords=!0;const l=this.featureService.createFeature(Qa,this.predio.geometry,{clave:this.predio.clave,idPredio:this.predio.idPredio});this.mapService.clearDrawings(Qa),this.mapService.drawFeature(l,I0)}});break;case"manzana":this.catastroService.getManzanaAtPoint(n,r).subscribe(s=>{if(this.manzana=s,null!==this.manzana){this.hasValidCoords=!0;const l=this.featureService.createFeature(Qa,this.manzana.geometry,{clave:this.manzana.clave,idManzana:this.manzana.idManzana});this.mapService.clearDrawings(Qa),this.mapService.drawFeature(l,I0)}})}}}handleSelectScala(t){this.scala=t.target.value}getSimplePlano(){this.showLoading=!0;const t={clave:"predio"===this.typeGeomSelected?this.predio.clave:this.manzana.clave,typeGeom:this.typeGeomSelected,sizePage:this.sizePage,scala:this.scala,personalScala:this.personalScala.value,observation:this.observation.value};"predio"===this.typeGeomSelected?this.catastroService.getReportPredioPlanoSimple(t).subscribe(n=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${n.uri}`,"_blank","noopener noreferrer")},n=>{window.alert(`Error al generar reporte: ${n}`),this.showLoading=!1}):this.catastroService.getReportManzanaPlanoSimple(t).subscribe(n=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${n.uri}`,"_blank","noopener noreferrer")},n=>{window.alert(`Error al generar reporte: ${n}`),this.showLoading=!1})}handleSelectPageSize(t){this.sizePage=t.target.value}validateDataSimplePlano(){let t=!1;return""!==this.scala&&""!==this.sizePage&&("personalizado"===this.scala?this.personalScala.value>0&&(t=!0):t=!0),t}getPlanoCertificado(){this.showLoading=!0;const t={clave:"predio"===this.typeGeomSelected?this.predio.clave:this.manzana.clave,typeGeom:this.typeGeomSelected,sizePage:this.sizePage,scala:this.scala,personalScala:this.personalScala.value,observation:this.observation.value},n={applicant:this.applicant.value,folio:this.folio.value,printer:this.printer.value,capture:this.capture.value,verify:this.verify.value,hasCotaLegal:this.activateLegal};"predio"===this.typeGeomSelected?this.catastroService.getReportPredioPlanoCertificado(t,n).subscribe(r=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${r.uri}`,"_blank","noopener noreferrer")},r=>{window.alert(`Error al generar reporte: ${r}`),this.showLoading=!1}):this.catastroService.getReportManzanaPlanoCertificado(t,n).subscribe(r=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${r.uri}`,"_blank","noopener noreferrer")},r=>{window.alert(`Error al generar reporte: ${r}`),this.showLoading=!1})}validateDataPlanoCertificado(){let t=!1;return""!==this.scala&&""!==this.sizePage&&""!==this.applicant.value&&""!==this.folio.value&&""!==this.printer.value&&""!==this.capture.value&&""!==this.verify.value&&("personalizado"===this.scala?this.personalScala.value>0&&(t=!0):t=!0),t}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(We),o.Y36(ve),o.Y36(wd),o.Y36(tc._A),o.Y36(Te.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-print"]],decls:12,vars:5,consts:[["cdkDrag","",1,"print-container","mat-elevation-z2"],[1,"print-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[4,"ngIf"],[3,"backdropMessage","showingLoading"],[1,"print-list"],["mat-flat-button","","color","primary","title","Plano simple",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","title","Plano certificado",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","title","Plano simple",3,"click"],["mat-flat-button","","color","primary","title","Plano certificado",3,"click"],[1,"simple-container"],["name","typeGeom","id","typeGeom",1,"control",3,"change"],["selected","","disabled","","value",""],["value","predio"],["value","manzana"],[1,"volver-button"],["mat-flat-button","","color","primary","title","Volver",3,"click"],[1,"size-page",3,"change"],["value","carta"],["value","oficio"],["value","tabloide"],["value","60"],["value","90"],[3,"change"],["value","fijo"],["value","dinamico"],["value","personalizado"],["for","personalScala",4,"ngIf"],["for","referencia"],["id","referencia","type","text","rows","3","cols","10","placeholder","Este texto aparecer\xe1 al pie del plano.",1,"control",3,"formControl"],["mat-flat-button","","color","primary","title","Obtener plano simple",3,"disabled","click"],["for","personalScala"],["id","personalScala","type","number",1,"control",3,"formControl"],["for","folio"],["id","folio","type","text",1,"control",3,"formControl"],["for","applicant"],["id","applicant","type","text",1,"control",3,"formControl"],["for","printer"],["id","printer","type","text",1,"control",3,"formControl"],["for","capture"],["id","capture","type","text",1,"control",3,"formControl"],["for","verify"],["id","verify","type","text",1,"control",3,"formControl"],["for","escritura",4,"ngIf"],["mat-flat-button","","color","primary","title","Obtener plano certificado",3,"disabled","click"],["for","escritura"],[3,"checked","ngModel","ngModelChange"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Impresi\xf3n de planos"),o.qZA(),o.qZA(),o.YNc(8,U7,4,2,"div",7),o.YNc(9,z7,16,3,"div",7),o.YNc(10,W7,14,3,"div",7),o.qZA(),o._UZ(11,"sic-backdrop",8)),2&t&&(o.xp6(8),o.Q6J("ngIf",""===n.printOption),o.xp6(1),o.Q6J("ngIf","simple"===n.printOption),o.xp6(1),o.Q6J("ngIf","certificado"===n.printOption),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,Tt.Bh,B.O5,Me.q,Kt.lW,q.YN,q.Kr,q.Fj,q.JJ,q.oH,q.wV,hc.oG,q.On],styles:[".print-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.print-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-top:5px}.print-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:90%}.print-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.print-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.print-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.print-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.print-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.print-container[_ngcontent-%COMP%]   .print-list[_ngcontent-%COMP%]{margin:unset;margin-top:44px}.print-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:6px 0 6px auto;color:#fff}.simple-container[_ngcontent-%COMP%]{margin-top:48px;overflow-y:scroll;overflow-x:hidden;max-height:444px}.volver-button[_ngcontent-%COMP%]{position:sticky}.print-title[_ngcontent-%COMP%]{position:fixed;width:338px;background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 850px){.print-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.datepicker[_ngcontent-%COMP%]     .mat-form-field-label{margin-top:15px!important}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80%}.size-page[_ngcontent-%COMP%]{margin-bottom:5px}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:56px}textarea[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}textarea[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#e4b346;box-shadow:0 0 0 .2rem #9d444440}"]}),e})();function X7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"p"),o.TgZ(1,"mat-slide-toggle",10),o.NdJ("change",function(){return o.CHM(t),o.oxw().toggleUserInfo()}),o._uU(2,"Ver informaci\xf3n usuario"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("checked",t.watchUser)}}function $7(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){return o.CHM(t),o.oxw().goAdminPanel()}),o.TgZ(1,"mat-icon"),o._uU(2,"work"),o.qZA(),o._uU(3," Panel de administraci\xf3n "),o.qZA()}}let Q7=(()=>{class e{constructor(t,n){this.authService=t,this.router=n,this.canSeeAdminPanel=!1,this.resultWatch=new o.vpe}ngOnInit(){this.user=this.authService.getUser(),this.canSeeAdminPanel=this.user.IsAdmin,this.canHideInfoUser=this.authService.hasPermission("uviu1")}logout(){this.authService.logout().subscribe(t=>{this.router.navigate(["/login"])})}toggleUserInfo(){this.watchUser=!this.watchUser,this.resultWatch.emit(this.watchUser)}goAdminPanel(){this.router.navigate(["/admin-panel"])}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(Te.e),o.Y36(Mt.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-user"]],inputs:{watchUser:"watchUser"},outputs:{resultWatch:"resultWatch"},decls:14,vars:2,consts:[["cdkDrag","",1,"user-container","mat-elevation-z2"],[1,"user-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[4,"ngIf"],["mat-flat-button","","color","primary","title","Ir al panel de administrador",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","title","Cerrar sesi\xf3n",3,"click"],[3,"checked","change"],["mat-flat-button","","color","primary","title","Ir al panel de administrador",3,"click"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Usuario"),o.qZA(),o.qZA(),o.YNc(8,X7,3,1,"p",7),o.YNc(9,$7,4,0,"button",8),o.TgZ(10,"button",9),o.NdJ("click",function(){return n.logout()}),o.TgZ(11,"mat-icon"),o._uU(12,"login"),o.qZA(),o._uU(13," Cerrar sesi\xf3n "),o.qZA(),o.qZA()),2&t&&(o.xp6(8),o.Q6J("ngIf",n.canHideInfoUser),o.xp6(1),o.Q6J("ngIf",n.canSeeAdminPanel))},directives:[Tt.Zt,Tt.Bh,B.O5,Kt.lW,ce.Hw,cd.Rr],styles:[".user-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.user-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:8px}.user-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.user-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:48%}.user-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.user-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.user-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .user-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.user-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:306px;margin:8px;color:#fff}.user-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 600px){.user-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:112px}"]}),e})();var D0=Y(3251);function K7(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Clave"),o.qZA())}function tU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function eU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Subpredio"),o.qZA())}function nU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.subpredio)}}function iU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Tipo"),o.qZA())}function rU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.tipoPredio)}}function oU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Cuenta"),o.qZA())}function aU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.cuenta)}}function sU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"\xc1rea cartogr\xe1fica"),o.qZA())}function lU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.areaCartografica,"1.2-2"),"m")}}function cU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"\xc1rea padr\xf3n"),o.qZA())}function hU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.areaPadron,"1.2-2"),"m")}}function uU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"%"),o.qZA())}function dU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.porcentaje)}}function fU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Propietario"),o.qZA())}function pU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.propietario)}}function gU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Ubicaci\xf3n"),o.qZA())}function _U(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.ubicacion)}}function mU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"N\xfamero exterior"),o.qZA())}function vU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numExterior)}}function yU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"N\xfamero interior"),o.qZA())}function xU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numInterior)}}function CU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Colonia"),o.qZA())}function bU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.colonia)}}function TU(e,i){1&e&&o._UZ(0,"tr",74)}function MU(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",75),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).selectedPredio(a)})("mouseover",function(){const a=o.CHM(t).$implicit;return o.oxw(2).watchPredio(a.feature)}),o.qZA()}if(2&e){const t=i.$implicit,n=o.oxw(2);o.Q6J("ngClass",n.getStyleClass(t.clase,t.isSelected))("matTooltip",n.getTypeClass(t.clase))}}function wU(e,i){1&e&&(o.TgZ(0,"tr",76),o.TgZ(1,"td",77),o._uU(2," No se encontraron datos predios. "),o.qZA(),o.qZA())}function PU(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"div",13),o.TgZ(2,"header"),o._uU(3," Resultados "),o.qZA(),o.TgZ(4,"section"),o.TgZ(5,"table"),o.TgZ(6,"tbody"),o.TgZ(7,"tr"),o.TgZ(8,"td",52),o._uU(9,"Total predios"),o.qZA(),o.TgZ(10,"td",52),o._uU(11,"Predio en padr\xf3n sin cartograf\xeda"),o.qZA(),o.TgZ(12,"td",52),o._uU(13,"\xc1rea cartograf\xeda vs padr\xf3n catastral dentro del 10%"),o.qZA(),o.TgZ(14,"td",52),o._uU(15,"\xc1rea cartograf\xeda vs padr\xf3n catastral fuera del 10%"),o.qZA(),o.TgZ(16,"td",52),o._uU(17,"Predio en cartograf\xeda sin v\xednculo con padr\xf3n"),o.qZA(),o.TgZ(18,"td",52),o._uU(19,"R\xe9gimen de condominio"),o.qZA(),o.TgZ(20,"td",52),o._uU(21,"Pendiente de regularizaci\xf3n"),o.qZA(),o.TgZ(22,"td",52),o._uU(23,"Predio en proceso de vinculaci\xf3n de utilidad p\xfablica"),o.qZA(),o.TgZ(24,"td",52),o._uU(25,"Predio en zona federal"),o.qZA(),o.qZA(),o.TgZ(26,"tr"),o.TgZ(27,"td",53),o._uU(28),o.qZA(),o.TgZ(29,"td",54),o._uU(30),o.qZA(),o.TgZ(31,"td",55),o._uU(32),o.qZA(),o.TgZ(33,"td",56),o._uU(34),o.qZA(),o.TgZ(35,"td",57),o._uU(36),o.qZA(),o.TgZ(37,"td",58),o._uU(38),o.qZA(),o.TgZ(39,"td",59),o._uU(40),o.qZA(),o.TgZ(41,"td",60),o._uU(42),o.qZA(),o.TgZ(43,"td",61),o._uU(44),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(45,"div",13),o.TgZ(46,"header"),o._uU(47,"Predios"),o.qZA(),o.TgZ(48,"section"),o.TgZ(49,"div",15),o.TgZ(50,"table",16),o.ynx(51,35),o.YNc(52,K7,2,0,"th",18),o.YNc(53,tU,2,1,"td",19),o.BQk(),o.ynx(54,36),o.YNc(55,eU,2,0,"th",18),o.YNc(56,nU,2,1,"td",19),o.BQk(),o.ynx(57,62),o.YNc(58,iU,2,0,"th",18),o.YNc(59,rU,2,1,"td",19),o.BQk(),o.ynx(60,32),o.YNc(61,oU,2,0,"th",18),o.YNc(62,aU,2,1,"td",19),o.BQk(),o.ynx(63,63),o.YNc(64,sU,2,0,"th",18),o.YNc(65,lU,5,4,"td",19),o.BQk(),o.ynx(66,64),o.YNc(67,cU,2,0,"th",18),o.YNc(68,hU,5,4,"td",19),o.BQk(),o.ynx(69,65),o.YNc(70,uU,2,0,"th",18),o.YNc(71,dU,2,1,"td",19),o.BQk(),o.ynx(72,66),o.YNc(73,fU,2,0,"th",18),o.YNc(74,pU,2,1,"td",19),o.BQk(),o.ynx(75,67),o.YNc(76,gU,2,0,"th",18),o.YNc(77,_U,2,1,"td",19),o.BQk(),o.ynx(78,68),o.YNc(79,mU,2,0,"th",18),o.YNc(80,vU,2,1,"td",19),o.BQk(),o.ynx(81,69),o.YNc(82,yU,2,0,"th",18),o.YNc(83,xU,2,1,"td",19),o.BQk(),o.ynx(84,70),o.YNc(85,CU,2,0,"th",18),o.YNc(86,bU,2,1,"td",19),o.BQk(),o.YNc(87,TU,1,0,"tr",29),o.YNc(88,MU,1,2,"tr",71),o.YNc(89,wU,3,0,"tr",31),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(28),o.Oqu(t.totalPredios),o.xp6(2),o.Oqu(t.totalPredioSinCartografia),o.xp6(2),o.Oqu(t.totalAreaDentroDel10),o.xp6(2),o.Oqu(t.totalAreaFueraDel10),o.xp6(2),o.Oqu(t.totalPredioCartografiaSinVinculoPadron),o.xp6(2),o.Oqu(t.totalRegimenCondominio),o.xp6(2),o.Oqu(t.totalPendienteRegularizacion),o.xp6(2),o.Oqu(t.totalPredioProcesoVinculacion),o.xp6(2),o.Oqu(t.totalZonaFederal),o.xp6(6),o.Q6J("dataSource",t.predios),o.xp6(37),o.Q6J("matHeaderRowDef",t.predioColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",t.predioColumns)}}function OU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Clave"),o.qZA())}function SU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function AU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Subpredio"),o.qZA())}function EU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.subpredio)}}function IU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Tipo"),o.qZA())}function DU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.tipoPredio)}}function RU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Cuenta"),o.qZA())}function ZU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.cuenta)}}function LU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"\xc1rea cartogr\xe1fica"),o.qZA())}function kU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.areaCartografica,"1.2-2"),"m")}}function NU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"\xc1rea padr\xf3n"),o.qZA())}function FU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.areaPadron,"1.2-2"),"m")}}function UU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"%"),o.qZA())}function qU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.porcentaje)}}function GU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Propietario"),o.qZA())}function jU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.propietario)}}function zU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Ubicaci\xf3n"),o.qZA())}function YU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.ubicacion)}}function HU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"N\xfamero exterior"),o.qZA())}function BU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numExterior)}}function VU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"N\xfamero interior"),o.qZA())}function WU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.numInterior)}}function JU(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Colonia"),o.qZA())}function XU(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.colonia)}}function $U(e,i){1&e&&o._UZ(0,"tr",74)}const QU=function(e){return{activeRow:e}};function KU(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"tr",79),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(2).selectedPredio(a)})("mouseover",function(){const a=o.CHM(t).$implicit;return o.oxw(2).watchPredio(a.feature)}),o.qZA()}2&e&&o.Q6J("ngClass",o.VKq(1,QU,i.$implicit.isSelected))}function tq(e,i){1&e&&(o.TgZ(0,"tr",76),o.TgZ(1,"td",77),o._uU(2," No se encontraron datos predios. "),o.qZA(),o.qZA())}function eq(e,i){if(1&e&&(o.TgZ(0,"div",13),o.TgZ(1,"header"),o._uU(2,"Predios"),o.qZA(),o.TgZ(3,"section"),o.TgZ(4,"div",15),o.TgZ(5,"table",16),o.ynx(6,35),o.YNc(7,OU,2,0,"th",18),o.YNc(8,SU,2,1,"td",19),o.BQk(),o.ynx(9,36),o.YNc(10,AU,2,0,"th",18),o.YNc(11,EU,2,1,"td",19),o.BQk(),o.ynx(12,62),o.YNc(13,IU,2,0,"th",18),o.YNc(14,DU,2,1,"td",19),o.BQk(),o.ynx(15,32),o.YNc(16,RU,2,0,"th",18),o.YNc(17,ZU,2,1,"td",19),o.BQk(),o.ynx(18,63),o.YNc(19,LU,2,0,"th",18),o.YNc(20,kU,5,4,"td",19),o.BQk(),o.ynx(21,64),o.YNc(22,NU,2,0,"th",18),o.YNc(23,FU,5,4,"td",19),o.BQk(),o.ynx(24,65),o.YNc(25,UU,2,0,"th",18),o.YNc(26,qU,2,1,"td",19),o.BQk(),o.ynx(27,66),o.YNc(28,GU,2,0,"th",18),o.YNc(29,jU,2,1,"td",19),o.BQk(),o.ynx(30,67),o.YNc(31,zU,2,0,"th",18),o.YNc(32,YU,2,1,"td",19),o.BQk(),o.ynx(33,68),o.YNc(34,HU,2,0,"th",18),o.YNc(35,BU,2,1,"td",19),o.BQk(),o.ynx(36,69),o.YNc(37,VU,2,0,"th",18),o.YNc(38,WU,2,1,"td",19),o.BQk(),o.ynx(39,70),o.YNc(40,JU,2,0,"th",18),o.YNc(41,XU,2,1,"td",19),o.BQk(),o.YNc(42,$U,1,0,"tr",29),o.YNc(43,KU,1,3,"tr",78),o.YNc(44,tq,3,0,"tr",31),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){const t=o.oxw();o.xp6(5),o.Q6J("dataSource",t.predios),o.xp6(37),o.Q6J("matHeaderRowDef",t.predioColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",t.predioColumns)}}function nq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Fecha"),o.qZA())}function iq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit,n=o.oxw();o.xp6(1),o.Oqu(n.getFormatDate(t.fecha))}}function rq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Superficie terreno"),o.qZA())}function oq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.superficieTerreno,"1.2-2"),"m")}}function aq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Superficie construcci\xf3n"),o.qZA())}function sq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.TgZ(3,"sup"),o._uU(4,"2"),o.qZA(),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",o.xi3(2,1,t.superficieConstruccion,"1.2-2"),"m")}}function lq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Valor terreno"),o.qZA())}function cq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.valorTerreno,"1.2-2"),"")}}function hq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Valor construcci\xf3n"),o.qZA())}function uq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.valorConstruccion,"1.2-2"),"")}}function dq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Valor fiscal"),o.qZA())}function fq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.valorFiscal,"1.2-2"),"")}}function pq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Indiviso"),o.qZA())}function gq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.indiviso)}}function _q(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Frente"),o.qZA())}function mq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.frente)}}function vq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Profundidad"),o.qZA())}function yq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.profundidad)}}function xq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Perimetro"),o.qZA())}function Cq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("",t.perimetro,"m")}}function bq(e,i){1&e&&o._UZ(0,"tr",74)}function Tq(e,i){1&e&&o._UZ(0,"tr",80)}function Mq(e,i){1&e&&(o.TgZ(0,"tr",76),o.TgZ(1,"td",81),o._uU(2," No se encontraron datos de aval\xfao. "),o.qZA(),o.qZA())}function wq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Cuenta"),o.qZA())}function Pq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.idCuenta)}}function Oq(e,i){1&e&&o._UZ(0,"td",82)}function Sq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Recaudadora"),o.qZA())}function Aq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.recaudadora)}}function Eq(e,i){1&e&&o._UZ(0,"td",82)}function Iq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Clave"),o.qZA())}function Dq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function Rq(e,i){1&e&&o._UZ(0,"td",82)}function Zq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Subpredio"),o.qZA())}function Lq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.subpredio)}}function kq(e,i){1&e&&o._UZ(0,"td",82)}function Nq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Tasa"),o.qZA())}function Fq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.idTasa)}}function Uq(e,i){1&e&&o._UZ(0,"td",82)}function qq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Importe adeudado"),o.qZA())}function Gq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.importeAdeudado,"1.2-2"),"")}}function jq(e,i){1&e&&o._UZ(0,"td",82)}function zq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Recargo adeudado"),o.qZA())}function Yq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.recargoAdeudado,"1.2-2"),"")}}function Hq(e,i){1&e&&o._UZ(0,"td",82)}function Bq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Multas"),o.qZA())}function Vq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.multas,"1.2-2"),"")}}function Wq(e,i){1&e&&(o.TgZ(0,"td",82),o._uU(1,"Total"),o.qZA())}function Jq(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Saldo"),o.qZA())}function Xq(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.saldo,"1.2-2"),"")}}function $q(e,i){if(1&e&&(o.TgZ(0,"td",82),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.hij("$",t.getTotalSaldo(),"")}}function Qq(e,i){1&e&&o._UZ(0,"tr",74)}function Kq(e,i){1&e&&o._UZ(0,"tr",80)}function t9(e,i){1&e&&(o.TgZ(0,"tr",76),o.TgZ(1,"td",83),o._uU(2," No se encontraron datos de adeudo. "),o.qZA(),o.qZA())}function e9(e,i){1&e&&o._UZ(0,"tr",84)}function n9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Cuenta"),o.qZA())}function i9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.idCuenta)}}function r9(e,i){1&e&&o._UZ(0,"td",82)}function o9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Recaudadora"),o.qZA())}function a9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.recaudadora)}}function s9(e,i){1&e&&o._UZ(0,"td",82)}function l9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Clave"),o.qZA())}function c9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function h9(e,i){1&e&&o._UZ(0,"td",82)}function u9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Subpredio"),o.qZA())}function d9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.subpredio)}}function f9(e,i){1&e&&o._UZ(0,"td",82)}function p9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Tasa"),o.qZA())}function g9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.idTasa)}}function _9(e,i){1&e&&o._UZ(0,"td",82)}function m9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Fecha"),o.qZA())}function v9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit,n=o.oxw();o.xp6(1),o.Oqu(n.getFormatDate(t.fecha))}}function y9(e,i){1&e&&o._UZ(0,"td",82)}function x9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Folio"),o.qZA())}function C9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.folio)}}function b9(e,i){1&e&&(o.TgZ(0,"td",82),o._uU(1,"Total"),o.qZA())}function T9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Importe pagado"),o.qZA())}function M9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.ALo(2,"number"),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.hij("$",o.xi3(2,1,t.importePagado,"1.2-2"),"")}}function w9(e,i){if(1&e&&(o.TgZ(0,"td",82),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.xp6(1),o.hij("$",t.getTotalPagado(),"")}}function P9(e,i){1&e&&o._UZ(0,"tr",74)}function O9(e,i){1&e&&o._UZ(0,"tr",80)}function S9(e,i){1&e&&(o.TgZ(0,"tr",76),o.TgZ(1,"td",85),o._uU(2," No se encontraron datos de pagos. "),o.qZA(),o.qZA())}function A9(e,i){1&e&&o._UZ(0,"tr",84)}function E9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Escritura"),o.qZA())}function I9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.idCuenta)}}function D9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Acto"),o.qZA())}function R9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.recaudadora)}}function Z9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Clave"),o.qZA())}function L9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.clave)}}function k9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Subpredio"),o.qZA())}function N9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.subpredio)}}function F9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Movimiento"),o.qZA())}function U9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.idMovimineto)}}function q9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Descripci\xf3n"),o.qZA())}function G9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.descripcion)}}function j9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"A\xf1o comprobante"),o.qZA())}function z9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.yearComprobante)}}function Y9(e,i){1&e&&(o.TgZ(0,"th",72),o._uU(1,"Folio comprobante"),o.qZA())}function H9(e,i){if(1&e&&(o.TgZ(0,"td",73),o._uU(1),o.qZA()),2&e){const t=i.$implicit;o.xp6(1),o.Oqu(t.folioComprobante)}}function B9(e,i){1&e&&o._UZ(0,"tr",74)}function V9(e,i){1&e&&o._UZ(0,"tr",80)}function W9(e,i){1&e&&(o.TgZ(0,"tr",76),o.TgZ(1,"td",85),o._uU(2," No se encontraron datos hist\xf3ricos. "),o.qZA(),o.qZA())}const R0="[PADRON_TOOL][DETAIL]",J9=new mt({stroke:new J({color:"#e94e1b",width:2,lineDash:void 0}),fill:new Q({color:"rgba(233, 78, 27, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#e94e1b"}),fill:new Q({color:"#e94e1b"})})});let X9=(()=>{class e{constructor(t,n,r,a,s){this.dialogRef=t,this.SICAMService=n,this.mapService=r,this.authService=a,this.data=s,this.title="Predios asociados a la manzana ",this.backdropMessage="Cargando predios asociados a la manzana...",this.showLoading=!0,this.predioSelected={idPredio:"",clase:0,clave:"",subpredio:"",tipoPredio:"",cuenta:0,areaCartografica:0,areaPadron:0,porcentaje:0,propietario:"",ubicacion:"",numExterior:"",numInterior:"",colonia:"",geometry:null,feature:null,isSelected:!1},this.totalPredios=0,this.totalPredioSinCartografia=0,this.totalAreaDentroDel10=0,this.totalAreaFueraDel10=0,this.totalPredioCartografiaSinVinculoPadron=0,this.totalRegimenCondominio=0,this.totalPendienteRegularizacion=0,this.totalPredioProcesoVinculacion=0,this.totalZonaFederal=0,this.predios=new A.by([]),this.predioColumns=["clave","subpredio","tipoPredio","cuenta","areaCartografica","areaPadron","porcentaje","propietario","ubicacion","numExterior","numInterior","colonia"],this.avaluo=new A.by([]),this.avaluoColumns=["fecha","superficieTerreno","superficieConstruccion","valorTerreno","valorConstruccion","valorFiscal","indiviso","frente","profundidad","perimetro"],this.debt=new A.by([]),this.debtColumns=["cuenta","recaudadora","clave","subpredio","tasa","importeAdeudado","recargoAdeudado","multas","saldo"],this.paid=new A.by([]),this.paidColumns=["cuenta","recaudadora","clave","subpredio","tasa","fecha","folio","importePagado"],this.history=new A.by([]),this.historyColumns=["cuenta","recaudadora","clave","subpredio","movimineto","descripcion","yearComprobante","folioComprobante"]}ngOnInit(){this.canWatchPredioCategorization=this.authService.hasPermission("vcpv2")}ngAfterViewInit(){this.SICAMService.getPrediosByManzanaClave(this.data.clave,R0).subscribe(t=>{this.title+=this.data.clave,this.predios.data=t,this.canWatchPredioCategorization&&(this.totalPredios=t.length,this.predios.data.map(n=>{switch(n.clase){case-1:this.totalPredioSinCartografia++;break;case 1:this.totalAreaDentroDel10++;break;case 2:this.totalAreaFueraDel10++;break;case 3:this.totalPredioCartografiaSinVinculoPadron++;break;case 4:this.totalRegimenCondominio++;break;case 5:this.totalPendienteRegularizacion++;break;case 6:this.totalPredioProcesoVinculacion++;break;case 7:this.totalZonaFederal++}})),this.showLoading=!1},t=>{console.log(t),this.showLoading=!1,window.alert("Error al obtener datos de SICAM.")})}callClose(){this.dialogRef.close()}selectedPredio(t){this.predioSelected.isSelected=!1,t.isSelected=!0,this.predioSelected=t,this.backdropMessage=`Cargando informaci\xf3n del predio ${this.predioSelected.clave}`,this.showLoading=!0,this.SICAMService.getSICAMData(t.tipoPredio,t.cuenta,t.clave).subscribe(n=>{this.avaluo.data=n.avaluoSICAM,this.debt.data=n.debtSICAM,this.paid.data=n.paidSICAM,this.history.data=n.historySICAM,this.showLoading=!1})}watchPredio(t){this.mapService.clearDrawings(R0),t&&this.mapService.drawFeature(t,J9)}getStyleClass(t,n){let r="";switch(t){case-1:r="cianer";break;case 1:r="greener";break;case 2:r="yellower";break;case 3:r="reder";break;case 4:r="bluer";break;case 5:r="oranger";break;case 6:r="magentaer";break;case 7:r="grayer"}return n&&(r+=" activeRow"),r}getTypeClass(t){let n="";switch(t){case-1:n="Predio en padr\xf3n sin cartograf\xeda";break;case 1:n="\xc1rea cartograf\xeda vs padr\xf3n catastral dentro del 10%";break;case 2:n="\xc1rea cartograf\xeda vs padr\xf3n catastral fuera del 10%";break;case 3:n="Predio en cartograf\xeda sin v\xednculo con padr\xf3n";break;case 4:n="R\xe9gimen de condominio";break;case 5:n="Pendiente de regularizaci\xf3n";break;case 6:n="Predio en proceso de vinculaci\xf3n de utilidad p\xfablica";break;case 7:n="Predio en zona federal"}return n}getFormatDate(t){return(0,S0.L)(new Date(t))}getTotalSaldo(){return Ha(this.debt.data.map(t=>t.saldo).reduce((t,n)=>t+n,0))}getTotalPagado(){return Ha(this.paid.data.map(t=>t.importePagado).reduce((t,n)=>t+n,0))}getReportPredio(){this.backdropMessage="Generando ficha t\xe9cnica...",this.showLoading=!0,this.SICAMService.getFichaReport(this.predioSelected.idPredio).subscribe(t=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${t.uri}`,"_blank","noopener noreferrer")},t=>{console.log(t),this.showLoading=!1,window.alert("Error al generar ficha t\xe9cnica.")})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(ct.so),o.Y36(wd),o.Y36($t),o.Y36(Te.e),o.Y36(ct.WI))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-padron-data-detail"]],decls:183,vars:29,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane"],[1,"dialog-title"],[1,"icon-left"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["mat-icon-button","",3,"click"],[1,"padron-detail-container"],[1,"detail-content"],[4,"ngIf","ngIfElse"],["onlyPredioData",""],[1,"shadow"],[3,"label"],[1,"data-table"],["mat-table","",3,"dataSource"],["matColumnDef","fecha"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","superficieTerreno"],["matColumnDef","superficieConstruccion"],["matColumnDef","valorTerreno"],["matColumnDef","valorConstruccion"],["matColumnDef","valorFiscal"],["matColumnDef","indiviso"],["matColumnDef","frente"],["matColumnDef","profundidad"],["matColumnDef","perimetro"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["matColumnDef","cuenta"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","recaudadora"],["matColumnDef","clave"],["matColumnDef","subpredio"],["matColumnDef","tasa"],["matColumnDef","importeAdeudado"],["matColumnDef","recargoAdeudado"],["matColumnDef","multas"],["matColumnDef","saldo"],["mat-footer-row","",4,"matFooterRowDef"],["matColumnDef","folio"],["matColumnDef","importePagado"],["matColumnDef","movimineto"],["matColumnDef","descripcion"],["matColumnDef","yearComprobante"],["matColumnDef","folioComprobante"],[1,"informe-section"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"backdropMessage","showingLoading"],[1,"attribute"],[1,"value"],[1,"value","cianer"],[1,"value","greener"],[1,"value","yellower"],[1,"value","reder"],[1,"value","bluer"],[1,"value","oranger"],[1,"value","magentaer"],[1,"value","grayer"],["matColumnDef","tipoPredio"],["matColumnDef","areaCartografica"],["matColumnDef","areaPadron"],["matColumnDef","porcentaje"],["matColumnDef","propietario"],["matColumnDef","ubicacion"],["matColumnDef","numExterior"],["matColumnDef","numInterior"],["matColumnDef","colonia"],["mat-row","","class","row-pointer",3,"ngClass","matTooltip","click","mouseover",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",1,"row-pointer",3,"ngClass","matTooltip","click","mouseover"],[1,"mat-row"],["colspan","12",1,"mat-cell"],["mat-row","","class","row-pointer",3,"ngClass","click","mouseover",4,"matRowDef","matRowDefColumns"],["mat-row","",1,"row-pointer",3,"ngClass","click","mouseover"],["mat-row",""],["colspan","10",1,"mat-cell"],["mat-footer-cell",""],["colspan","9",1,"mat-cell"],["mat-footer-row",""],["colspan","8",1,"mat-cell"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"mat-icon",2),o._uU(3,"import_contacts"),o.qZA(),o.TgZ(4,"div",3),o.O4$(),o.TgZ(5,"svg",4),o._UZ(6,"path",5),o._UZ(7,"path",6),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"span",7),o._uU(9),o.qZA(),o.TgZ(10,"button",8),o.NdJ("click",function(){return n.callClose()}),o.TgZ(11,"mat-icon"),o._uU(12," close "),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",9),o.TgZ(14,"div",10),o.YNc(15,PU,90,13,"div",11),o.YNc(16,eq,45,4,"ng-template",null,12,o.W1O),o.TgZ(18,"div",13),o.TgZ(19,"header"),o._uU(20),o.qZA(),o.TgZ(21,"section"),o.TgZ(22,"mat-tab-group"),o.TgZ(23,"mat-tab",14),o.TgZ(24,"div",13),o.TgZ(25,"section"),o.TgZ(26,"div",15),o.TgZ(27,"table",16),o.ynx(28,17),o.YNc(29,nq,2,0,"th",18),o.YNc(30,iq,2,1,"td",19),o.BQk(),o.ynx(31,20),o.YNc(32,rq,2,0,"th",18),o.YNc(33,oq,5,4,"td",19),o.BQk(),o.ynx(34,21),o.YNc(35,aq,2,0,"th",18),o.YNc(36,sq,5,4,"td",19),o.BQk(),o.ynx(37,22),o.YNc(38,lq,2,0,"th",18),o.YNc(39,cq,3,4,"td",19),o.BQk(),o.ynx(40,23),o.YNc(41,hq,2,0,"th",18),o.YNc(42,uq,3,4,"td",19),o.BQk(),o.ynx(43,24),o.YNc(44,dq,2,0,"th",18),o.YNc(45,fq,3,4,"td",19),o.BQk(),o.ynx(46,25),o.YNc(47,pq,2,0,"th",18),o.YNc(48,gq,2,1,"td",19),o.BQk(),o.ynx(49,26),o.YNc(50,_q,2,0,"th",18),o.YNc(51,mq,2,1,"td",19),o.BQk(),o.ynx(52,27),o.YNc(53,vq,2,0,"th",18),o.YNc(54,yq,2,1,"td",19),o.BQk(),o.ynx(55,28),o.YNc(56,xq,2,0,"th",18),o.YNc(57,Cq,2,1,"td",19),o.BQk(),o.YNc(58,bq,1,0,"tr",29),o.YNc(59,Tq,1,0,"tr",30),o.YNc(60,Mq,3,0,"tr",31),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(61,"mat-tab",14),o.TgZ(62,"div",13),o.TgZ(63,"section"),o.TgZ(64,"div",15),o.TgZ(65,"table",16),o.ynx(66,32),o.YNc(67,wq,2,0,"th",18),o.YNc(68,Pq,2,1,"td",19),o.YNc(69,Oq,1,0,"td",33),o.BQk(),o.ynx(70,34),o.YNc(71,Sq,2,0,"th",18),o.YNc(72,Aq,2,1,"td",19),o.YNc(73,Eq,1,0,"td",33),o.BQk(),o.ynx(74,35),o.YNc(75,Iq,2,0,"th",18),o.YNc(76,Dq,2,1,"td",19),o.YNc(77,Rq,1,0,"td",33),o.BQk(),o.ynx(78,36),o.YNc(79,Zq,2,0,"th",18),o.YNc(80,Lq,2,1,"td",19),o.YNc(81,kq,1,0,"td",33),o.BQk(),o.ynx(82,37),o.YNc(83,Nq,2,0,"th",18),o.YNc(84,Fq,2,1,"td",19),o.YNc(85,Uq,1,0,"td",33),o.BQk(),o.ynx(86,38),o.YNc(87,qq,2,0,"th",18),o.YNc(88,Gq,3,4,"td",19),o.YNc(89,jq,1,0,"td",33),o.BQk(),o.ynx(90,39),o.YNc(91,zq,2,0,"th",18),o.YNc(92,Yq,3,4,"td",19),o.YNc(93,Hq,1,0,"td",33),o.BQk(),o.ynx(94,40),o.YNc(95,Bq,2,0,"th",18),o.YNc(96,Vq,3,4,"td",19),o.YNc(97,Wq,2,0,"td",33),o.BQk(),o.ynx(98,41),o.YNc(99,Jq,2,0,"th",18),o.YNc(100,Xq,3,4,"td",19),o.YNc(101,$q,2,1,"td",33),o.BQk(),o.YNc(102,Qq,1,0,"tr",29),o.YNc(103,Kq,1,0,"tr",30),o.YNc(104,t9,3,0,"tr",31),o.YNc(105,e9,1,0,"tr",42),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(106,"mat-tab",14),o.TgZ(107,"div",13),o.TgZ(108,"section"),o.TgZ(109,"div",15),o.TgZ(110,"table",16),o.ynx(111,32),o.YNc(112,n9,2,0,"th",18),o.YNc(113,i9,2,1,"td",19),o.YNc(114,r9,1,0,"td",33),o.BQk(),o.ynx(115,34),o.YNc(116,o9,2,0,"th",18),o.YNc(117,a9,2,1,"td",19),o.YNc(118,s9,1,0,"td",33),o.BQk(),o.ynx(119,35),o.YNc(120,l9,2,0,"th",18),o.YNc(121,c9,2,1,"td",19),o.YNc(122,h9,1,0,"td",33),o.BQk(),o.ynx(123,36),o.YNc(124,u9,2,0,"th",18),o.YNc(125,d9,2,1,"td",19),o.YNc(126,f9,1,0,"td",33),o.BQk(),o.ynx(127,37),o.YNc(128,p9,2,0,"th",18),o.YNc(129,g9,2,1,"td",19),o.YNc(130,_9,1,0,"td",33),o.BQk(),o.ynx(131,17),o.YNc(132,m9,2,0,"th",18),o.YNc(133,v9,2,1,"td",19),o.YNc(134,y9,1,0,"td",33),o.BQk(),o.ynx(135,43),o.YNc(136,x9,2,0,"th",18),o.YNc(137,C9,2,1,"td",19),o.YNc(138,b9,2,0,"td",33),o.BQk(),o.ynx(139,44),o.YNc(140,T9,2,0,"th",18),o.YNc(141,M9,3,4,"td",19),o.YNc(142,w9,2,1,"td",33),o.BQk(),o.YNc(143,P9,1,0,"tr",29),o.YNc(144,O9,1,0,"tr",30),o.YNc(145,S9,3,0,"tr",31),o.YNc(146,A9,1,0,"tr",42),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(147,"mat-tab",14),o.TgZ(148,"div",13),o.TgZ(149,"section"),o.TgZ(150,"div",15),o.TgZ(151,"table",16),o.ynx(152,32),o.YNc(153,E9,2,0,"th",18),o.YNc(154,I9,2,1,"td",19),o.BQk(),o.ynx(155,34),o.YNc(156,D9,2,0,"th",18),o.YNc(157,R9,2,1,"td",19),o.BQk(),o.ynx(158,35),o.YNc(159,Z9,2,0,"th",18),o.YNc(160,L9,2,1,"td",19),o.BQk(),o.ynx(161,36),o.YNc(162,k9,2,0,"th",18),o.YNc(163,N9,2,1,"td",19),o.BQk(),o.ynx(164,45),o.YNc(165,F9,2,0,"th",18),o.YNc(166,U9,2,1,"td",19),o.BQk(),o.ynx(167,46),o.YNc(168,q9,2,0,"th",18),o.YNc(169,G9,2,1,"td",19),o.BQk(),o.ynx(170,47),o.YNc(171,j9,2,0,"th",18),o.YNc(172,z9,2,1,"td",19),o.BQk(),o.ynx(173,48),o.YNc(174,Y9,2,0,"th",18),o.YNc(175,H9,2,1,"td",19),o.BQk(),o.YNc(176,B9,1,0,"tr",29),o.YNc(177,V9,1,0,"tr",30),o.YNc(178,W9,3,0,"tr",31),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(179,"div",49),o.TgZ(180,"button",50),o.NdJ("click",function(){return n.getReportPredio()}),o._uU(181," Ficha t\xe9cnica "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(182,"sic-backdrop",51)),2&t){const r=o.MAs(17);o.xp6(9),o.hij(" ",n.title," "),o.xp6(6),o.Q6J("ngIf",n.canWatchPredioCategorization)("ngIfElse",r),o.xp6(5),o.hij("Predio ",n.predioSelected.clave," "),o.xp6(3),o.Q6J("label","Avaluo ("+n.avaluo.data.length+")"),o.xp6(4),o.Q6J("dataSource",n.avaluo),o.xp6(31),o.Q6J("matHeaderRowDef",n.avaluoColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.avaluoColumns),o.xp6(2),o.Q6J("label","Adeudo ("+n.debt.data.length+")"),o.xp6(4),o.Q6J("dataSource",n.debt),o.xp6(37),o.Q6J("matHeaderRowDef",n.debtColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.debtColumns),o.xp6(2),o.Q6J("matFooterRowDef",n.debtColumns),o.xp6(1),o.Q6J("label","Pagos ("+n.paid.data.length+")"),o.xp6(4),o.Q6J("dataSource",n.paid),o.xp6(33),o.Q6J("matHeaderRowDef",n.paidColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.paidColumns),o.xp6(2),o.Q6J("matFooterRowDef",n.paidColumns),o.xp6(1),o.Q6J("label","Historia ("+n.history.data.length+")"),o.xp6(4),o.Q6J("dataSource",n.history),o.xp6(25),o.Q6J("matHeaderRowDef",n.historyColumns)("matHeaderRowDefSticky",!0),o.xp6(1),o.Q6J("matRowDefColumns",n.historyColumns),o.xp6(3),o.Q6J("disabled",""===n.predioSelected.idPredio),o.xp6(2),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading)}},directives:[Tt.Zt,ce.Hw,Tt.Bh,Kt.lW,B.O5,D0.SP,D0.uX,A.BZ,A.w1,A.fO,A.Dz,A.as,A.nj,A.Ee,A.mD,A.Ke,Me.q,A.ge,A.ev,A.XQ,A.Gk,B.mk,Gi.gM,A.yh,A.Q2],pipes:[B.JJ],styles:["[_nghost-%COMP%]{border-radius:unset}.dialog-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:unset;margin:-24px -24px 0}.icon-left[_ngcontent-%COMP%]{margin-left:14px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:16px}.mat-dialog-container[_ngcontent-%COMP%]{overflow:hidden;border-radius:0!important}.padron-detail-container[_ngcontent-%COMP%]{margin:0 -24px}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{max-height:100%;overflow:auto}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{background-color:#e4b346;height:32px;display:flex;justify-content:center;align-items:center;color:#fff}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-align:center}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   td.attribute[_ngcontent-%COMP%]{font-size:.6rem;font-weight:700;text-align:center}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{font-size:9pt;text-align:center;max-width:150px;overflow-wrap:break-word}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]{max-height:250px;overflow:auto}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-header-row[_ngcontent-%COMP%]{height:16px}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.6rem}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   tr.mat-row[_ngcontent-%COMP%]{height:32px}.padron-detail-container[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{font-size:10pt;font-weight:800;color:#000}table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:8pt}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover{background:whitesmoke;cursor:pointer}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.cianer{background-color:#19c2aa80}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.greener{background-color:#00ff0080}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.yellower{background-color:#ffff0080}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.reder{background-color:#ff000080}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.bluer{background-color:#4392cf80}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.oranger{background-color:#ff8a0080}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.magentaer{background-color:#ff00ee80}table[_ngcontent-%COMP%]   tr.row-pointer[_ngcontent-%COMP%]:hover.grayer{background-color:#cccccc80}table[_ngcontent-%COMP%]   tr.activeRow[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr.mat-footer-row[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.cianer[_ngcontent-%COMP%]{background-color:#19c2aa4d}.greener[_ngcontent-%COMP%]{background-color:#00ff004d}.yellower[_ngcontent-%COMP%]{background-color:#ffff004d}.reder[_ngcontent-%COMP%]{background-color:#ff00004d}.bluer[_ngcontent-%COMP%]{background-color:#4392cf4d}.oranger[_ngcontent-%COMP%]{background-color:#ff8a004d}.magentaer[_ngcontent-%COMP%]{background-color:#ff00ee4d}.grayer[_ngcontent-%COMP%]{background-color:#cccccc4d}.shadow[_ngcontent-%COMP%]{box-shadow:0 5px 20px -5px #00000080}.informe-section[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-top:12px;padding-bottom:12px}.informe-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36%;margin:4px 20px}.mat-tab-group[_ngcontent-%COMP%]{padding:0 16px}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}"]}),e})();function $9(e,i){1&e&&(o.TgZ(0,"div",2),o.TgZ(1,"div",3),o.TgZ(2,"div",4),o.O4$(),o.TgZ(3,"svg",5),o._UZ(4,"path",6),o._UZ(5,"path",7),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",8),o._uU(7,"Predios asociados a la manzana"),o.qZA(),o.qZA(),o.TgZ(8,"div",9),o.TgZ(9,"p"),o._uU(10,"Seleccione una manzana para ver los datos alfanum\xe9ricos de todos los predios"),o.qZA(),o.qZA(),o.qZA())}const Ad="[PADRON_TOOL]",Q9=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let K9=(()=>{class e{constructor(t,n,r,a){this.mapService=t,this.featureService=n,this.catastroService=r,this.dialog=a,this.backdropMessage="Obteniendo predios asociados a la manzana...",this.showLoading=!1,this.isOpenDialog=!1}ngOnInit(){this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH")}ngOnDestroy(){this.mapService.clearDrawings(Ad),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}mapClickHandler(){return t=>{const[n,r]=t.coordinate;this.dialog.closeAll(),this.showLoading=!0,this.catastroService.getManzanaAtPoint(n,r).subscribe(a=>{if(this.manzana=a,null!==this.manzana){const s=this.featureService.createFeature(Ad,this.manzana.geometry,{clave:this.manzana.clave,idManzana:this.manzana.idManzana,manzana:this.manzana.manzana});this.mapService.clearDrawings(Ad),this.mapService.drawFeature(s,Q9),this.openPadronDetail()}else this.showLoading=!1})}}openPadronDetail(){var t=this;return se(function*(){const n=new ct.vA;n.width="50vw",n.maxHeight="calc(100% - 80px)",n.position={right:"64px",top:"80px"},n.hasBackdrop=!1,n.data=t.manzana,t.showLoading=!1,t.isOpenDialog=!0,t.dialog.open(X9,n).afterClosed().subscribe(a=>{t.isOpenDialog=!1})})()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(ve),o.Y36(We),o.Y36(ct.uw))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-padron-data"]],decls:2,vars:3,consts:[["class","padron-container mat-elevation-z2","cdkDrag","",4,"ngIf"],[3,"backdropMessage","showingLoading"],["cdkDrag","",1,"padron-container","mat-elevation-z2"],[1,"padron-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[1,"padron-content"]],template:function(t,n){1&t&&(o.YNc(0,$9,11,0,"div",0),o._UZ(1,"sic-backdrop",1)),2&t&&(o.Q6J("ngIf",!n.isOpenDialog),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[B.O5,Me.q,Tt.Zt,Tt.Bh],styles:[".padron-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.padron-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 0;display:flex;justify-content:center}.padron-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.padron-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:90px}.padron-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.padron-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .padron-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.padron-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .padron-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.padron-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin:6px 6px 6px 5%;color:#fff}.padron-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 850px){.padron-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.padron-content[_ngcontent-%COMP%]{max-height:292px;overflow-y:auto;display:flex;justify-content:center}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:26px}"]}),e})();function tG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).downloadDeslinde()}),o._uU(1," Descargar reporte "),o.qZA()}}function eG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",14),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).generateCotaLegal()}),o._uU(1," Generar medidas seg\xfan escrituras "),o.qZA()}}const nG=function(e){return{correct:e}};function iG(e,i){if(1&e&&(o.TgZ(0,"div",15),o._uU(1),o.qZA()),2&e){const t=o.oxw(2);o.Q6J("ngClass",o.VKq(2,nG,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}function rG(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"span"),o._uU(2),o.qZA(),o.YNc(3,tG,2,0,"button",10),o.YNc(4,eG,2,0,"button",11),o.YNc(5,iG,2,4,"div",12),o.qZA()),2&e){const t=o.oxw();o.xp6(2),o.hij("Clave: ",t.clave,""),o.xp6(1),o.Q6J("ngIf",t.canPrintDeslinde),o.xp6(1),o.Q6J("ngIf",t.canGenerateCotas),o.xp6(1),o.Q6J("ngIf",t.showResult)}}const Ed="[DESLINDE_CATASTRAL_TOOL]",oG=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let aG=(()=>{class e{constructor(t,n,r,a){this.mapService=t,this.featureService=n,this.catastroService=r,this.authService=a,this.hasValidCoords=!1,this.clave="",this.backdropMessage="Descargando reporte de deslinde catastral...",this.showLoading=!1,this.showResult=!1,this.resultCorrect=!0,this.resultMessage=""}ngOnInit(){this.mapEventHandlerId=this.mapService.addEventHandler(Ht.SINGLECLICK,this.mapClickHandler(),"HIGH"),this.canPrintDeslinde=this.authService.hasPermission("dscg2"),this.canGenerateCotas=this.authService.hasPermission("dsce3")}ngOnDestroy(){this.mapService.clearDrawings(Ed),this.mapEventHandlerId&&(this.mapService.removeEventHandler(this.mapEventHandlerId),this.mapEventHandlerId=null)}mapClickHandler(){return t=>{const[n,r]=t.coordinate;this.showLoading=!0,this.backdropMessage="Obteniendo datos del predio...",this.catastroService.getPredioAtPoint(n,r,{frentes:!1,construcciones:!1}).subscribe(s=>{if(this.predio=s,null!==this.predio){this.hasValidCoords=!0,this.clave=this.predio.formattedClave;const l=this.featureService.createFeature(Ed,this.predio.geometry,{clave:this.predio.formattedClave,idPredio:this.predio.idPredio});this.mapService.clearDrawings(Ed),this.mapService.drawFeature(l,oG),this.showLoading=!1}else this.showLoading=!1,this.hasValidCoords=!1})}}downloadDeslinde(){this.showResult=!1,this.backdropMessage="Generando reporte de deslinde catastral...",this.showLoading=!0,this.catastroService.getDeslindeReport(this.predio.idPredio).subscribe(t=>{this.showLoading=!1,window.open(`${U.N.constants.API_URL.replace("/api","")}${t.uri}`,"_blank","noopener noreferrer")},t=>{console.log(t),this.showLoading=!1,window.alert("No se pudo generar el deslinde catastral")})}generateCotaLegal(){this.showResult=!1,this.backdropMessage="Generando medidas seg\xfan escritura...",this.showLoading=!0,this.catastroService.addPredioCotaLegal(this.predio.idPredio).subscribe(t=>{t?(this.resultCorrect=!0,this.resultMessage="Medidas seg\xfan la escritura generadas"):(this.resultCorrect=!1,this.resultMessage="Error al generar medidas"),this.showResult=!0,this.showLoading=!1},t=>{console.log(t),this.resultCorrect=!1,this.resultMessage="Error al ejecutar funci\xf3n para generar cotas",this.showResult=!0,this.showLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(ve),o.Y36(We),o.Y36(Te.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-deslinde-catastral"]],decls:13,vars:3,consts:[["cdkDrag","",1,"deslinde-catastral-container","mat-elevation-z2"],[1,"deslinde-catastral-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],[1,"deslinde-catastral-content"],[4,"ngIf"],[3,"backdropMessage","showingLoading"],["mat-flat-button","","color","primary","title","Descargar reporte",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","title","Generar medidas seg\xfan escritura",3,"click",4,"ngIf"],["class","result-container",3,"ngClass",4,"ngIf"],["mat-flat-button","","color","primary","title","Descargar reporte",3,"click"],["mat-flat-button","","color","primary","title","Generar medidas seg\xfan escritura",3,"click"],[1,"result-container",3,"ngClass"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Deslinde catastral / Medidas seg\xfan escritura"),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.TgZ(9,"p"),o._uU(10,"Selecciona predio a generar deslinde o medidas seg\xfan sus escrituras"),o.qZA(),o.YNc(11,rG,6,4,"div",8),o.qZA(),o.qZA(),o._UZ(12,"sic-backdrop",9)),2&t&&(o.xp6(11),o.Q6J("ngIf",n.hasValidCoords),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,Tt.Bh,B.O5,Me.q,Kt.lW,B.mk],styles:[".deslinde-catastral-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.deslinde-catastral-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:16px 8px;display:flex;justify-content:center}.deslinde-catastral-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center}.deslinde-catastral-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:90px}.deslinde-catastral-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.deslinde-catastral-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .deslinde-catastral-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.deslinde-catastral-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .deslinde-catastral-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.deslinde-catastral-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin:6px 6px 6px 5%;color:#fff}.deslinde-catastral-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:14pt;padding:5px;display:flex;justify-content:center;align-items:center;text-align:center;margin:-8px -8px 0}@media screen and (max-width: 600px){.deslinde-catastral-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.deslinde-catastral-content[_ngcontent-%COMP%]{max-height:292px;overflow-y:auto}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:6px}"]}),e})();const sG=function(e){return{correct:e}};function lG(e,i){if(1&e&&(o.TgZ(0,"div",17),o._uU(1),o.qZA()),2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(2,sG,t.resultCorrect)),o.xp6(1),o.hij(" ",t.resultMessage," ")}}const Z0="[UPLOAD_GEOM_TOOL]",cG=new mt({stroke:new J({color:"#b51e1c",width:2,lineDash:void 0}),fill:new Q({color:"rgba(181, 30, 28, 0.2)"}),image:new At({radius:5,stroke:new J({color:"#b51e1c"}),fill:new Q({color:"#b51e1c"})})});let hG=(()=>{class e{constructor(t,n){this.catastroService=t,this.mapService=n,this.selectedFormat=".kml, application/vnd.google-earth.kml+xml",this.files={type:"KML",fileData:null},this.name=new q.NI(""),this.description=new q.NI(""),this.backdropMessage="Cargando KML...",this.showLoading=!1,this.showResult=!1,this.resultCorrect=!0,this.resultMessage=""}ngOnInit(){}onFileChange(t){var n=this;return se(function*(){n.files.fileData=t.target.files.length>0?t.target.files[0]:null})()}uploadGeom(){var t=this;return se(function*(){t.showLoading=!0;const n=yield t.files.fileData.text();t.catastroService.uploadGeometryKML(n,t.name.value,t.description.value,Z0).subscribe(r=>{var a;r.map(l=>{t.mapService.drawFeature(l.feature,cG)});const s=null===(a=r[0].feature.getGeometry())||void 0===a?void 0:a.getExtent();t.mapService.getMapById(t.mapService.default).moveTo(s),t.showResult=!0,t.resultCorrect=!0,t.resultMessage="KML cargado correctamente",t.showLoading=!1},r=>{t.showLoading=!1,t.showResult=!0,t.resultCorrect=!1,t.resultMessage=r})})()}cleanKMLs(){this.mapService.clearDrawings(Z0)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(We),o.Y36($t))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-upload-geom"]],decls:24,vars:7,consts:[["cdkDrag","",1,"upload-geom-container","mat-elevation-z2"],[1,"upload-geom-title"],["cdkDragHandle","",1,"dragdrop-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"flex-blank-filler"],["type","file","name","file",1,"custom-file-input",3,"accept","change"],["for","fileName"],["id","name","type","text",1,"control",3,"formControl"],["for","fileDescription"],["id","description","type","text","rows","2","cols","10",1,"control",3,"formControl"],[1,"button-list"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary",3,"click"],["class","result-container",3,"ngClass",4,"ngIf"],[3,"backdropMessage","showingLoading"],[1,"result-container",3,"ngClass"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.O4$(),o.TgZ(3,"svg",3),o._UZ(4,"path",4),o._UZ(5,"path",5),o.qZA(),o.qZA(),o.kcU(),o.TgZ(6,"span",6),o._uU(7,"Carga geometr\xeda"),o.qZA(),o.qZA(),o.TgZ(8,"input",7),o.NdJ("change",function(a){return n.onFileChange(a)}),o.qZA(),o.TgZ(9,"label",8),o.TgZ(10,"span"),o._uU(11,"Nombre"),o.qZA(),o._UZ(12,"input",9),o.qZA(),o.TgZ(13,"label",10),o.TgZ(14,"span"),o._uU(15,"Descripci\xf3n"),o.qZA(),o._UZ(16,"textarea",11),o.qZA(),o.TgZ(17,"p",12),o.TgZ(18,"button",13),o.NdJ("click",function(){return n.uploadGeom()}),o._uU(19,"Cargar"),o.qZA(),o.TgZ(20,"button",14),o.NdJ("click",function(){return n.cleanKMLs()}),o._uU(21,"Limpiar mapa"),o.qZA(),o.qZA(),o.YNc(22,lG,2,4,"div",15),o.qZA(),o._UZ(23,"sic-backdrop",16)),2&t&&(o.xp6(8),o.Q6J("accept",n.selectedFormat),o.xp6(4),o.Q6J("formControl",n.name),o.xp6(4),o.Q6J("formControl",n.description),o.xp6(2),o.Q6J("disabled",null===n.files.fileData||""===n.name.value),o.xp6(4),o.Q6J("ngIf",n.showResult),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[Tt.Zt,Tt.Bh,q.Fj,q.JJ,q.oH,Kt.lW,B.O5,Me.q,B.mk],styles:['.upload-geom-container[_ngcontent-%COMP%]{position:absolute;top:80px;right:64px;width:100%;max-width:338px!important;max-height:calc(100% - 80px)!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;z-index:500}.upload-geom-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:36px;align-items:center;margin:16px 5px}.upload-geom-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:60%}.upload-geom-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{flex:1 1 auto}.upload-geom-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:312px;margin:16px 5px;color:#fff}.upload-geom-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .upload-geom-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.upload-geom-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .upload-geom-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#b51e1c;box-shadow:0 0 0 .2rem #b51e1c40}.upload-geom-title[_ngcontent-%COMP%]{background:#b51e1c;height:48px;color:#fff;font-size:16pt;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0}@media screen and (max-width: 850px){.upload-geom-container[_ngcontent-%COMP%]{top:calc(2.5em + 104px);left:3em;max-width:160px!important;max-height:160px!important}}.dragdrop-handle[_ngcontent-%COMP%]{color:#fff;cursor:move;width:24px;height:24px}.flex-blank-filler[_ngcontent-%COMP%]{flex:1 1 auto;margin-left:76px}.custom-file-input[_ngcontent-%COMP%]:before{content:"Selecciona KML a subir"}.custom-file-input[_ngcontent-%COMP%]{width:100%}.custom-file-input[_ngcontent-%COMP%]::-webkit-file-upload-button{display:none}.custom-file-input[_ngcontent-%COMP%]:before{box-sizing:border-box;background-color:#e4b346;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:8px 4px;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.result-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;padding:6px;font-weight:700;color:#d32f2f;background-color:#d32f2f1a;border:1px solid rgba(211,47,47,.1)}.result-container.correct[_ngcontent-%COMP%]{color:#235223;background-color:#daebda;border:1px solid #cbe4cb}textarea[_ngcontent-%COMP%]{border:none;font-size:15px;font-weight:400;line-height:1.5;padding:6px 12px;color:#495057;border:1px solid #ced4da;border-radius:4px;width:100%;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}textarea[_ngcontent-%COMP%]:focus{outline:none;background-color:#fff;border-color:#e4b346;box-shadow:0 0 0 .2rem #9d444440}.button-list[_ngcontent-%COMP%]{margin:unset}.button-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:6px 0 6px auto;color:#fff}']}),e})();const we=function(e){return{active:e}};function uG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("measure")}),o.TgZ(1,"mat-icon",4),o._uU(2,"straighten"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"measure"===t.activeTool))}}function dG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",23),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("goto")}),o.TgZ(1,"mat-icon",4),o._uU(2,"gps_fixed"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"goto"===t.activeTool))}}function fG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",24),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("front")}),o.TgZ(1,"mat-icon",4),o._uU(2,"home"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"front"===t.activeTool))}}function pG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("simple-avaluo")}),o.TgZ(1,"mat-icon",4),o._uU(2,"description"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"simple-avaluo"===t.activeTool))}}function gG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",26),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("referred-avaluo")}),o.TgZ(1,"mat-icon",4),o._uU(2,"summarize"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"referred-avaluo"===t.activeTool))}}function _G(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("multiple-avaluo")}),o.TgZ(1,"mat-icon",4),o._uU(2,"library_books"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"multiple-avaluo"===t.activeTool))}}function mG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",28),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("payment")}),o.TgZ(1,"mat-icon",4),o._uU(2,"attach_money"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"payment"===t.activeTool))}}function vG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",29),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("print")}),o.TgZ(1,"mat-icon",4),o._uU(2,"print"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"print"===t.activeTool))}}function yG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",30),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("padron")}),o.TgZ(1,"mat-icon",4),o._uU(2,"import_contacts"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"padron"===t.activeTool))}}function xG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",31),o.NdJ("click",function(){return o.CHM(t),o.oxw().showFusion()}),o.TgZ(1,"mat-icon",4),o._uU(2,"view_compact"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"fusion"===t.activeTool))}}function CG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(){return o.CHM(t),o.oxw().showDivision()}),o.TgZ(1,"mat-icon",4),o._uU(2,"view_comfy"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"division"===t.activeTool))}}function bG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",33),o.NdJ("click",function(){return o.CHM(t),o.oxw().showAttributeEdition()}),o.TgZ(1,"mat-icon",4),o._uU(2,"create"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"edition"===t.activeTool))}}function TG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",34),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("deslinde")}),o.TgZ(1,"mat-icon",4),o._uU(2,"chrome_reader_mode"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"deslinde"===t.activeTool))}}function MG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",35),o.NdJ("click",function(){return o.CHM(t),o.oxw().showConstructionAdjust()}),o.TgZ(1,"mat-icon",4),o._uU(2,"settings_overscan"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"adjust"===t.activeTool))}}function wG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"button",36),o.NdJ("click",function(){return o.CHM(t),o.oxw().toggleTool("upload")}),o.TgZ(1,"mat-icon",4),o._uU(2,"publish"),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("ngClass",o.VKq(1,we,"upload"===t.activeTool))}}function PG(e,i){1&e&&o._UZ(0,"sic-measure",37)}function OG(e,i){1&e&&o._UZ(0,"sic-goto-location",37)}function SG(e,i){1&e&&o._UZ(0,"sic-watch-front",37)}function AG(e,i){1&e&&o._UZ(0,"sic-simple-avaluo",38),2&e&&o.Q6J("isReferred",!1)}function EG(e,i){1&e&&o._UZ(0,"sic-simple-avaluo",38),2&e&&o.Q6J("isReferred",!0)}function IG(e,i){1&e&&o._UZ(0,"sic-multiple-avaluo",37)}function DG(e,i){1&e&&o._UZ(0,"sic-payment",37)}function RG(e,i){1&e&&o._UZ(0,"sic-print",37)}function ZG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"sic-user",39),o.NdJ("resultWatch",function(r){return o.CHM(t),o.oxw().toggleUserInfo(r)}),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("watchUser",t.watchUser)}}function LG(e,i){1&e&&o._UZ(0,"sic-padron-data",37)}function kG(e,i){1&e&&o._UZ(0,"sic-deslinde-catastral",37)}function NG(e,i){1&e&&o._UZ(0,"sic-upload-geom",37)}let FG=(()=>{class e{constructor(t,n){this.authService=t,this.dialog=n,this.activeTool="",this.identify=new o.vpe,this.resultWatch=new o.vpe}ngOnInit(){this.toolMeasure=this.authService.hasPermission("medv1"),this.toolGoto=this.authService.hasPermission("iacv1"),this.toolFront=this.authService.hasPermission("vrfv1"),this.toolIndividualAvaluo=this.authService.hasPermission("aviv1"),this.toolReferredAvaluo=this.authService.hasPermission("avrv1"),this.toolMultipleAvaluo=this.authService.hasPermission("avmv1"),this.toolPayment=this.authService.hasPermission("gdpv1"),this.toolPrint=this.authService.hasPermission("impv1"),this.toolPadronData=this.authService.hasPermission("dpdv1"),this.toolFusion=this.authService.hasPermission("fusv1"),this.toolDivision=this.authService.hasPermission("subv1"),this.toolEditionAttribute=this.authService.hasPermission("easv1"),this.toolDeslinde=this.authService.hasPermission("dscv1"),this.toolConstructionAdjust=this.authService.hasPermission("aacv1"),this.toolUploadGeom=this.authService.hasPermission("cgkv1")}toggleTool(t){("identify"===t||"identify"===this.activeTool)&&this.identify.emit(),this.activeTool=this.activeTool===t?"":t}ngOnDestroy(){this.dialog.closeAll()}toggleUserInfo(t){this.resultWatch.emit(t)}deactiveTool(t){this.activeTool===t&&(this.dialog.closeAll(),this.activeTool="")}showFusion(){var t=this;return se(function*(){if("fusion"===t.activeTool)t.deactiveTool("fusion");else{t.activeTool="fusion";const n=new ct.vA;n.width="40vw",n.height="38vw",n.position={right:"0px"},n.hasBackdrop=!1,t.dialog.open(fk,n)}})()}showDivision(){var t=this;return se(function*(){if("division"===t.activeTool)t.deactiveTool("division");else{t.activeTool="division";const n=new ct.vA;n.width="40vw",n.height="38vw",n.position={right:"0px"},n.hasBackdrop=!1,t.dialog.open(cN,n)}})()}showAttributeEdition(){var t=this;return se(function*(){if("identify"===t.activeTool&&t.identify.emit(),"edition"===t.activeTool)t.deactiveTool("edition");else{t.activeTool="edition";const n=new ct.vA;n.width="30vw",n.maxHeight="50%",n.position={right:"64px",top:"80px"},n.hasBackdrop=!1,t.dialog.open(EN,n)}})()}showConstructionAdjust(){var t=this;return se(function*(){if("adjust"===t.activeTool)t.deactiveTool("adjust");else{t.activeTool="adjust";const n=new ct.vA;n.width="30vw",n.height="36vw",n.position={right:"0px"},n.hasBackdrop=!1,t.dialog.open(WN,n)}})()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(Te.e),o.Y36(ct.uw))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-tools"]],inputs:{watchUser:"watchUser"},outputs:{identify:"identify",resultWatch:"resultWatch"},decls:34,vars:33,consts:[[1,"tools-container"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Medici\xf3n",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Ir a",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","title","Identifica",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],[1,"tool-icon"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Ver frentes",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Aval\xfao individual",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Aval\xfao referido",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Aval\xfao multiple",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Gesti\xf3n de pagos",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Impresi\xf3n de planos",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Datos padr\xf3n",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Fusi\xf3n",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Subdivisi\xf3n",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Edici\xf3n de atributos",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Deslinde catastral / Medidas seg\xfan escritura",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Ajuste a construcciones",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","class","tool-button mat-elevation-z2 clickable","title","Carga geometr\xeda KML",3,"ngClass","click",4,"ngIf"],["mat-icon-button","","title","Usuario",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["class","mat-elevation-z2",4,"ngIf"],["class","mat-elevation-z2",3,"isReferred",4,"ngIf"],["class","mat-elevation-z2",3,"watchUser","resultWatch",4,"ngIf"],["mat-icon-button","","title","Medici\xf3n",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Ir a",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Ver frentes",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Aval\xfao individual",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Aval\xfao referido",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Aval\xfao multiple",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Gesti\xf3n de pagos",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Impresi\xf3n de planos",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Datos padr\xf3n",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Fusi\xf3n",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Subdivisi\xf3n",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Edici\xf3n de atributos",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Deslinde catastral / Medidas seg\xfan escritura",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Ajuste a construcciones",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],["mat-icon-button","","title","Carga geometr\xeda KML",1,"tool-button","mat-elevation-z2","clickable",3,"ngClass","click"],[1,"mat-elevation-z2"],[1,"mat-elevation-z2",3,"isReferred"],[1,"mat-elevation-z2",3,"watchUser","resultWatch"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.YNc(1,uG,3,3,"button",1),o.YNc(2,dG,3,3,"button",2),o.TgZ(3,"button",3),o.NdJ("click",function(){return n.toggleTool("identify")}),o.TgZ(4,"mat-icon",4),o._uU(5,"info"),o.qZA(),o.qZA(),o.YNc(6,fG,3,3,"button",5),o.YNc(7,pG,3,3,"button",6),o.YNc(8,gG,3,3,"button",7),o.YNc(9,_G,3,3,"button",8),o.YNc(10,mG,3,3,"button",9),o.YNc(11,vG,3,3,"button",10),o.YNc(12,yG,3,3,"button",11),o.YNc(13,xG,3,3,"button",12),o.YNc(14,CG,3,3,"button",13),o.YNc(15,bG,3,3,"button",14),o.YNc(16,TG,3,3,"button",15),o.YNc(17,MG,3,3,"button",16),o.YNc(18,wG,3,3,"button",17),o.TgZ(19,"button",18),o.NdJ("click",function(){return n.toggleTool("user")}),o.TgZ(20,"mat-icon",4),o._uU(21,"account_circle"),o.qZA(),o.qZA(),o.qZA(),o.YNc(22,PG,1,0,"sic-measure",19),o.YNc(23,OG,1,0,"sic-goto-location",19),o.YNc(24,SG,1,0,"sic-watch-front",19),o.YNc(25,AG,1,1,"sic-simple-avaluo",20),o.YNc(26,EG,1,1,"sic-simple-avaluo",20),o.YNc(27,IG,1,0,"sic-multiple-avaluo",19),o.YNc(28,DG,1,0,"sic-payment",19),o.YNc(29,RG,1,0,"sic-print",19),o.YNc(30,ZG,1,1,"sic-user",21),o.YNc(31,LG,1,0,"sic-padron-data",19),o.YNc(32,kG,1,0,"sic-deslinde-catastral",19),o.YNc(33,NG,1,0,"sic-upload-geom",19)),2&t&&(o.xp6(1),o.Q6J("ngIf",n.toolMeasure),o.xp6(1),o.Q6J("ngIf",n.toolGoto),o.xp6(1),o.Q6J("ngClass",o.VKq(29,we,"identify"===n.activeTool)),o.xp6(3),o.Q6J("ngIf",n.toolFront),o.xp6(1),o.Q6J("ngIf",n.toolIndividualAvaluo),o.xp6(1),o.Q6J("ngIf",n.toolReferredAvaluo),o.xp6(1),o.Q6J("ngIf",n.toolMultipleAvaluo),o.xp6(1),o.Q6J("ngIf",n.toolPayment),o.xp6(1),o.Q6J("ngIf",n.toolPrint),o.xp6(1),o.Q6J("ngIf",n.toolPadronData),o.xp6(1),o.Q6J("ngIf",n.toolFusion),o.xp6(1),o.Q6J("ngIf",n.toolDivision),o.xp6(1),o.Q6J("ngIf",n.toolEditionAttribute),o.xp6(1),o.Q6J("ngIf",n.toolDeslinde),o.xp6(1),o.Q6J("ngIf",n.toolConstructionAdjust),o.xp6(1),o.Q6J("ngIf",n.toolUploadGeom),o.xp6(1),o.Q6J("ngClass",o.VKq(31,we,"user"===n.activeTool)),o.xp6(3),o.Q6J("ngIf","measure"===n.activeTool),o.xp6(1),o.Q6J("ngIf","goto"===n.activeTool),o.xp6(1),o.Q6J("ngIf","front"===n.activeTool),o.xp6(1),o.Q6J("ngIf","simple-avaluo"===n.activeTool),o.xp6(1),o.Q6J("ngIf","referred-avaluo"===n.activeTool),o.xp6(1),o.Q6J("ngIf","multiple-avaluo"===n.activeTool),o.xp6(1),o.Q6J("ngIf","payment"===n.activeTool),o.xp6(1),o.Q6J("ngIf","print"===n.activeTool),o.xp6(1),o.Q6J("ngIf","user"===n.activeTool),o.xp6(1),o.Q6J("ngIf","padron"===n.activeTool),o.xp6(1),o.Q6J("ngIf","deslinde"===n.activeTool),o.xp6(1),o.Q6J("ngIf","upload"===n.activeTool))},directives:[B.O5,Kt.lW,B.mk,ce.Hw,fF,pF,yF,s8,g8,k7,J7,Q7,K9,aG,hG],styles:[".tools-container[_ngcontent-%COMP%]{position:fixed;max-width:100%;top:80px;height:100%;right:0;display:flex;flex-wrap:wrap;flex-direction:column;align-items:flex-start;justify-content:flex-start;background-color:#fff0;padding:12px 12px 4px}.tools-container[_ngcontent-%COMP%]   .tool-button[_ngcontent-%COMP%]{margin-bottom:8px;z-index:200;background-color:#b51e1cbf}.tools-container[_ngcontent-%COMP%]   .tool-button[_ngcontent-%COMP%]:hover{background-color:#b51e1c}.tools-container[_ngcontent-%COMP%]   .tool-button.active[_ngcontent-%COMP%]{background-color:#e4b34699!important}.tools-container[_ngcontent-%COMP%]   .tool-button[_ngcontent-%COMP%]   .tool-icon[_ngcontent-%COMP%]{color:#fffffff2}@media screen and (max-width: 600px){.tools-container[_ngcontent-%COMP%]{top:calc(2em + 48px);left:1em}}"]}),e})();var UG=Y(5899),L0=Y(9224);function qG(e,i){1&e&&(o.TgZ(0,"div"),o._UZ(1,"mat-progress-bar",5),o.qZA())}function GG(e,i){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"h4"),o._uU(2),o.qZA(),o.qZA()),2&e){const t=o.oxw().$implicit;o.xp6(2),o.hij("",t.total," resultado encontrado")}}function jG(e,i){if(1&e&&(o.TgZ(0,"h4"),o._uU(1),o.qZA()),2&e){const t=o.oxw().$implicit;o.xp6(1),o.hij("",t.total," resultados encontrados")}}function zG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",10),o.TgZ(1,"mat-card",11),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return o.oxw(3).onSelectResult(a)}),o.TgZ(2,"div",12),o._uU(3),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=i.$implicit;o.xp6(3),o.Oqu(t.display)}}function YG(e,i){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,zG,4,1,"div",9),o._UZ(2,"br"),o.qZA()),2&e){const t=o.oxw().$implicit;o.xp6(1),o.Q6J("ngForOf",t.content)}}function HG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"h3",6),o.NdJ("click",function(){const a=o.CHM(t).$implicit;return a.status=!a.status}),o._uU(2),o.qZA(),o.TgZ(3,"p"),o._uU(4),o.qZA(),o.YNc(5,GG,3,1,"div",7),o.YNc(6,jG,2,1,"ng-template",null,8,o.W1O),o.YNc(8,YG,3,1,"div",2),o.qZA()}if(2&e){const t=i.$implicit,n=o.MAs(7);o.xp6(2),o.Oqu(t.group),o.xp6(2),o.hij("Mostrando resultados de: ",t.term,""),o.xp6(1),o.Q6J("ngIf",1===t.total)("ngIfElse",n),o.xp6(3),o.Q6J("ngIf",t.status)}}function BG(e,i){1&e&&(o.TgZ(0,"div",13),o._uU(1," ** Sin Resultados ** "),o.qZA())}let VG=(()=>{class e{constructor(){this.searching=!1,this.result=[],this.selection=new o.vpe}ngOnInit(){}onSelectResult(t){this.selection.emit(t.feature)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-search-result"]],inputs:{searching:"searching",result:"result"},outputs:{selection:"selection"},decls:6,vars:3,consts:[[1,"result-header"],[1,"result-container","mat-elevation-z2"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","no-result",4,"ngIf"],["mode","indeterminate"],[1,"result-title",3,"click"],[4,"ngIf","ngIfElse"],["moreResults",""],["class","result-content",4,"ngFor","ngForOf"],[1,"result-content"],[1,"clickable","item-card",3,"click"],[1,"clickable","displayed"],[1,"no-result"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o._uU(1,"RESULTADOS DE LA B\xdaSQUEDA"),o.qZA(),o.TgZ(2,"div",1),o.YNc(3,qG,2,0,"div",2),o.YNc(4,HG,9,5,"div",3),o.YNc(5,BG,2,0,"div",4),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngIf",n.searching),o.xp6(1),o.Q6J("ngForOf",n.result),o.xp6(1),o.Q6J("ngIf",!n.searching&&0===n.result.length))},directives:[B.O5,B.sg,UG.pW,L0.a8],styles:[".result-header[_ngcontent-%COMP%]{position:absolute;top:88px;left:428px;font-weight:700;display:flex;justify-content:center;align-items:center;height:48px;width:328px;margin:-8px -8px 8px;background-color:#fff}.result-container[_ngcontent-%COMP%]{position:absolute;top:128px;left:420px;width:100%;max-width:calc(360px - 2em)!important;max-height:90%!important;overflow-y:auto;overflow-x:hidden;padding:8px;background-color:#fff!important;border:0;border-radius:2px;z-index:500;pointer-events:auto;scrollbar-width:thin}.result-title[_ngcontent-%COMP%]{background:#b51e1c;height:28px;color:#fff;font-size:12pt;font-weight:700;padding:5px;display:flex;justify-content:center;align-items:center;margin:-8px -8px 0;cursor:pointer}.no-result[_ngcontent-%COMP%]{font-size:.9em;font-weight:bolder}.result-content[_ngcontent-%COMP%]{padding-bottom:4px}.result-content[_ngcontent-%COMP%]   .item-card[_ngcontent-%COMP%]:hover{background-color:#ccc}@media screen and (max-width: 600px){.result-container[_ngcontent-%COMP%]{max-width:250px!important;max-height:250px!important}}.displayed[_ngcontent-%COMP%]{white-space:pre-line}"]}),e})(),WG=(()=>{class e{constructor(t){this.authService=t}ngOnInit(){this.user=this.authService.getUser()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(Te.e))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-logged-user"]],decls:21,vars:2,consts:[[1,"user-container","mat-elevation-z2"],[1,"user-data"],[1,"user-name"],[1,"user-company"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 43.5 49.75"],["id","Capa_2","data-name","Capa 2"],["id","Capa_1-2","data-name","Capa 1"],["d","M32.53,7.56h0a.28.28,0,0,0-.06-.15A11.47,11.47,0,0,0,21.75,0a11.15,11.15,0,0,0-6.07,1.76.39.39,0,0,0-.11.06A11.27,11.27,0,0,0,11,7.61a.35.35,0,0,0-.06.14s0,.07,0,.1a10.79,10.79,0,0,0-.62,3.64,11.5,11.5,0,1,0,23,0A10.82,10.82,0,0,0,32.53,7.56ZM21.75,21.62A10.11,10.11,0,0,1,12.09,8.46a5.76,5.76,0,0,0,1.2.11c2.13,0,4.71-.83,5.91-2.69a18.06,18.06,0,0,0,9.42,2.54,17.53,17.53,0,0,0,2.7-.2,9.84,9.84,0,0,1,.55,3.27A10.13,10.13,0,0,1,21.75,21.62Z",1,"cls-1"],["d","M33.75,24.25h-24A9.76,9.76,0,0,0,0,34V49.75H43.5V34A9.76,9.76,0,0,0,33.75,24.25Zm-5.6,1.5-1,3.2-2.26-3.2Zm-9.53,0L16.36,29l-1-3.2Zm4.06,22.5H10.5V34H9V48.25H1.5V34a8.26,8.26,0,0,1,8.25-8.25h4l2.08,6.53,4.61-6.53h2.22Zm19.32,0H34.5V34H33V48.25H24.18V27.36l3.47,4.92,2.08-6.53h4A8.26,8.26,0,0,1,42,34Z",1,"cls-1"],["cx","20.82","cy","27.81","r","0.75",1,"cls-1"],["cx","20.82","cy","33.25","r","0.75",1,"cls-1"],["cx","20.82","cy","38.69","r","0.75",1,"cls-1"],["cx","20.82","cy","44.14","r","0.75",1,"cls-1"]],template:function(t,n){1&t&&(o.TgZ(0,"mat-card",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._uU(3),o.qZA(),o.TgZ(4,"div",3),o._uU(5),o.qZA(),o.qZA(),o.TgZ(6,"div",4),o.O4$(),o.TgZ(7,"svg",5),o.TgZ(8,"defs"),o.TgZ(9,"style"),o._uU(10," .cls-1 { fill: #222220; } "),o.qZA(),o.qZA(),o.TgZ(11,"title"),o._uU(12,"user"),o.qZA(),o.TgZ(13,"g",6),o.TgZ(14,"g",7),o._UZ(15,"path",8),o._UZ(16,"path",9),o._UZ(17,"circle",10),o._UZ(18,"circle",11),o._UZ(19,"circle",12),o._UZ(20,"circle",13),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.hij(" ",n.user.FullName," "),o.xp6(2),o.hij(" ",n.user.Company," "))},directives:[L0.a8],styles:["[_nghost-%COMP%]{position:fixed;top:0;right:540px}.user-container[_ngcontent-%COMP%]{max-width:360px;display:inline-flex;flex-direction:row;align-items:center;background-color:#fff0;box-shadow:unset}.user-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.user-data[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700}.user-data[_ngcontent-%COMP%]   .user-company[_ngcontent-%COMP%]{font-size:smaller}.icon[_ngcontent-%COMP%]{margin-left:16px}.icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:36px}"]}),e})();const JG=["mainMap"];function XG(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"sic-search-result",19),o.NdJ("selection",function(r){return o.CHM(t),o.oxw().onResultSelected(r)}),o.qZA()}if(2&e){const t=o.oxw();o.Q6J("searching",t.isSearching)("result",t.searchResult)}}function $G(e,i){1&e&&o._UZ(0,"sic-logged-user")}au.defs("EPSG:32613","+proj=utm +zone=13 +datum=WGS84 +units=m +no_defs"),function oS(e){var n,r,i=Object.keys(e.defs),t=i.length;for(n=0;n<t;++n){var a=i[n];if(!St(a)){var s=e.defs(a),l=s.units;!l&&"longlat"===s.projName&&(l=tn.DEGREES),ff(new Dc({code:a,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:l}))}}for(n=0;n<t;++n){var c=i[n],h=St(c);for(r=0;r<t;++r){var u=i[r],d=St(u);if(!ef(c,u))if(e.defs[c]===e.defs[u])zc([h,d]);else{var f=e(c,u);z1(h,d,gf(h,d,f.forward),gf(d,h,f.inverse))}}}}(au);const Id="[IDENTIFY]",Dd="[SEARCH]",Ka="[CATASTRO][PREDIO]",vc="[STREET_VIEW]",QG=[{path:"",component:(()=>{class e{constructor(t,n,r,a,s,l,c,h,u,d){this.mapService=t,this.layerService=n,this.tocService=r,this.identifyService=a,this.featureService=s,this.panelService=l,this.searchService=c,this.catastroService=h,this.reprojectionService=u,this.dialog=d,this.mapId=`MapId.${ue()()}`,this.projection="EPSG:32613",this.center=[569507.684,2114302.492],this.initialZoom=12,this.activeIdentify=!1,this.identifyCoordinates=[0,0],this.backdropMessage="Obteniendo informaci\xf3n...",this.showLoading=!1,this.isSearchActive=!1,this.isSearching=!1,this.searchResult=[],this.paintFeatures=!1,this.searchingService=null,this.watchUser=!0,this.controlScale=new X1({units:"metric",bar:!0,steps:2,text:!0,minWidth:100}),this.svInProgrees=!1,this.gettingStreetViewTaking=null,this.hightLight=new mt({fill:new Q({color:"rgba(181, 30, 28, 0.5)"}),stroke:new J({color:"#b51e1c",width:2}),image:new At({radius:5,fill:new Q({color:"rgba(181, 30, 28, 0.5)"})})})}ngOnInit(){new Or({apiKey:"AIzaSyDSN-bEJrChUaYEwBvld5XNIz2hi2YT1rw",version:"weekly"}).load().then(()=>{this.streetViewService=new google.maps.StreetViewService})}ngOnDestroy(){this.panelService.close(),this.deactivateIdentify(),this.predioHandler&&(this.mapService.removeEventHandler(this.predioHandler),this.predioHandler=null)}ngAfterViewInit(){const t=this.mainMap.getMapId();this.mapService.setDefaultMapa(t),this.layerService.initialize(),this.mapSettings(t),this.predioSelectionHandler()}mapSettings(t){this.tocService.reloadLayers().subscribe(r=>{r.forEach(a=>this.turnOnActiveLayers(a))});const n=new K1({coordinateFormat:N1(2)});this.mapService.addControl(this.controlScale,t),this.mapService.addControl(n,t),this.addStreetViewGoogle()}turnOnActiveLayers(t){if(t.isLayer){if(t.IsActive){const n=t.getLayerData();this.layerService.addLayer(n.id,n),this.layerService.setOpacity(n.id,n.opacity)}}else t.children.forEach(n=>{this.turnOnActiveLayers(n)})}toggleIdentify(){this.activeIdentify?this.deactivateIdentify():this.activateIdentify(),this.activeIdentify=!this.activeIdentify}activateIdentify(){this.identifyHandler=this.mapService.addEventHandler(Ht.SINGLECLICK,t=>{const n=this.mapService.getMapById(this.mapId).getViewResolution();this.layerService.LayerCount>0&&this.layerService.hasLayerVisible()?(this.identifyResults=[],this.identifyService.identifyFeatures(t.coordinate,n,this.projection).subscribe(r=>{this.identifyResults=r,this.identifyCoordinates=t.coordinate,this.markResult(r)})):this.cleanIdentify()},"HIGH",this.mapId)}deactivateIdentify(){this.cleanIdentify(),this.identifyHandler&&(this.mapService.removeEventHandler(this.identifyHandler),this.identifyHandler=null)}cleanIdentify(){this.mapService.clearDrawings(Id,this.mapId),this.identifyCoordinates=null,this.identifyResults=[]}markResult(t){const n=new mt({stroke:new J({color:"#0000FF",width:2}),image:new At({radius:5,fill:new Q({color:"rgba(0, 0, 255, 0.3)"})})}),r=[];t.map(a=>{a.layers.map(s=>{null!==s.geometry&&r.push(this.featureService.createFeature(Id,s.geometry,s))})}),this.mapService.clearDrawings(Id,this.mapId),this.mapService.getMapById(this.mapId).drawFeatures(r,n)}openMenu(){"close"===this.panelService.status?this.panelService.open(uL,{title:"CAPAS Y MAPAS",headerSize:"small"}):this.panelService.close()}doSearch(t){if(!t.value)return this.isSearchActive=!1,this.isSearching=!1,this.searchResult=[],void this.mapService.clearDrawings(Dd,this.mapId);this.searchingService&&this.searchingService.unsubscribe(),this.isSearching=!0,this.isSearchActive=!0,this.mapService.clearDrawings(Dd,this.mapId),this.searchingService=this.searchService.search(t.value,Dd).subscribe(n=>{this.isSearching=!1,this.searchResult=n,this.paintFeatures=!1,this.searchingService=null,this.searchResult.length>0&&"Enter"===t.keyCode&&(this.paintFeatures=!0,n.map(r=>{r.content.map(a=>{this.mapService.getMapById(this.mapId).drawFeatures([a.feature],this.hightLight)})}))},n=>{console.log(n),this.isSearching=!1,this.isSearchActive=!1,this.searchResult=[],this.searchingService=null})}onResultSelected(t){var n;this.paintFeatures||this.mapService.getMapById(this.mapId).drawFeatures([t],this.hightLight),this.mapService.getMapById(this.mapId).moveTo(null===(n=t.getGeometry())||void 0===n?void 0:n.getExtent())}toggleUserInfo(t){this.watchUser=t}predioSelectionHandler(){let t;this.predioHandler=this.mapService.addEventHandler(Ht.SINGLECLICK,n=>{const[r,a]=n.coordinate;this.unselectPredio(),t&&t.close(),this.showLoading=!0,this.catastroService.getPredioInformationAtPoint(r,a).subscribe(s=>{if(this.predioUrban=s.PredioUrbano,this.predioUP=s.PredioUP,this.predioParcela=s.PredioParcela,this.predioRustico=s.PredioRustico,this.predioUrban.length>0||this.predioUP.length>0||this.predioParcela.length>0||this.predioRustico.length>0){this.predioUrban.map(c=>{const h=this.featureService.createFeature(Ka,c.geometry,{idPredio:c.idPredio,clave:c.formattedClave});this.mapService.drawFeature(h,this.hightLight),this.mapService.getMapById(this.mapId).moveTo(h.getGeometry().getExtent())}),this.predioUP.map(c=>{const h=this.featureService.createFeature(Ka,c.geometry,{idPredio:c.idPredio,clave:c.formattedClave});this.mapService.drawFeature(h,this.hightLight),this.mapService.getMapById(this.mapId).moveTo(h.getGeometry().getExtent())}),this.predioParcela.map(c=>{const h=this.featureService.createFeature(Ka,c.geometry,{idPredio:c.idPredio,clave:c.formattedClave});this.mapService.drawFeature(h,this.hightLight),this.mapService.getMapById(this.mapId).moveTo(h.getGeometry().getExtent())}),this.predioRustico.map(c=>{const h=this.featureService.createFeature(Ka,c.geometry,{idPredio:c.idPredio,clave:c.formattedClave});this.mapService.drawFeature(h,this.hightLight),this.mapService.getMapById(this.mapId).moveTo(h.getGeometry().getExtent())});const l=new ct.vA;l.width="300px",l.height="340px",l.hasBackdrop=!1,l.data={PredioUrbano:this.predioUrban,PredioUP:this.predioUP,PredioParcela:this.predioParcela,PredioRustico:this.predioRustico},this.showLoading=!1,t=this.dialog.open(i4,l),t.afterClosed().subscribe(c=>{this.unselectPredio()})}else this.showLoading=!1})},"NORMAL",this.mapId)}unselectPredio(){this.predioUrban=[],this.predioUP=[],this.predioParcela=[],this.predioRustico=[],this.mapService.clearDrawings(Ka)}addStreetViewGoogle(){var t=this;return se(function*(){let n;t.streetviewBtn=document.getElementById("svbtn"),t.streetviewBtn&&t.streetviewBtn.addEventListener("click",()=>{t.svInProgrees=!t.svInProgrees;const r=document.getElementById("street-view-icon");if(t.svInProgrees){const a=t.tocService.searchByService("google-street-view");if(a&&!a.IsActive){a.toggleActiveStatus();const d=a.getLayerData();t.layerService.addLayer(d.id,d),t.layerService.setOpacity(d.id,d.opacity)}t.catastroService.deleteStreetViewTaking().subscribe(d=>{}),r.classList.replace("normal-button","clicked-street-view");const s=document.getElementById("person");document.body.classList.toggle("custom-cursor"),s.classList.remove("ocultariframe");let l=0,c=0,h=0,u=0;t.movingStreetViewHandler=t.mapService.addEventHandler(Ht.POINTERMOVE,d=>{l=d.pixel[0],c=d.pixel[1]+80},"NORMAL",t.mapId),n=setInterval(()=>{h+=(l-h)/6,u+=(c-u)/6,s.style.left=h+"px",s.style.top=u+"px"},10),t.streetViewHandler=t.mapService.addEventHandler(Ht.SINGLECLICK,d=>{const[f,p]=d.coordinate,g=t.reprojectionService.reproject(he.EPSG_32613,he.LatLong,{x:f,y:p});t.activateGoogleStreetView({lat:g.y,lng:g.x})},"HIGH",t.mapId)}else r.classList.replace("clicked-street-view","normal-button"),document.body.classList.toggle("custom-cursor"),document.getElementById("person").classList.add("ocultariframe"),clearInterval(n),t.mapService.removeEventHandler(t.streetViewHandler,t.mapId),t.mapService.removeEventHandler(t.movingStreetViewHandler,t.mapId)})})()}activateGoogleStreetView(t){let n;this.streetViewService.getPanorama({location:t},(r,a)=>{var s,l,c;if("OK"===a){const h=null===(l=null===(s=null==r?void 0:r.location)||void 0===s?void 0:s.latLng)||void 0===l?void 0:l.toJSON(),u=t,d=google.maps.geometry.spherical.computeHeading(new google.maps.LatLng(null==h?void 0:h.lat,null==h?void 0:h.lng),new google.maps.LatLng(u.lat,u.lng));n=new google.maps.StreetViewPanorama(document.getElementById("street-view"),{position:null===(c=null==r?void 0:r.location)||void 0===c?void 0:c.latLng,pov:{heading:d,pitch:0},zoom:1,enableCloseButton:!0,visible:!0}),document.getElementById("street-view").classList.remove("ocultariframe"),google.maps.event.addListener(n,"pov_changed",()=>{this.gettingStreetViewTaking&&this.gettingStreetViewTaking.unsubscribe(),this.gettingStreetViewTaking=this.catastroService.getStreetViewTaking(n.getPosition().lat(),n.getPosition().lng(),n.getPov().heading,n.getPov().pitch,n.getPov().zoom,vc).subscribe(p=>{var g;this.gettingStreetViewTaking=null,this.mapService.clearDrawings(vc),this.mapService.getMapById(this.mapId).drawFeatures([p.featureGeometry,p.featureFuente],this.hightLight),this.mapService.getMapById(this.mapId).moveTo(null===(g=p.featureExtent.getGeometry())||void 0===g?void 0:g.getExtent())},p=>{console.log(p),this.gettingStreetViewTaking=null})}),google.maps.event.addListener(n,"closeclick",()=>{const p=document.getElementById("street-view");p.classList.add("ocultariframe"),p.innerHTML="",this.mapService.clearDrawings(vc)})}else{const h=document.getElementById("street-view");h.classList.add("ocultariframe"),h.innerHTML="",this.mapService.clearDrawings(vc),alert("No se cuenta con visualizaci\xf3n en street view")}this.streetviewBtn.dispatchEvent(new Event("click"))})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36($t),o.Y36(ld),o.Y36(su.I),o.Y36(n0),o.Y36(ve),o.Y36(r0),o.Y36(l4),o.Y36(We),o.Y36(rc),o.Y36(ct.uw))},e.\u0275cmp=o.Xpm({type:e,selectors:[["sic-map-page"]],viewQuery:function(t,n){if(1&t&&o.Gf(JG,7),2&t){let r;o.iGM(r=o.CRH())&&(n.mainMap=r.first)}},decls:21,vars:12,consts:[[1,"header"],[1,"logo"],[1,"titulo"],[1,"logo-der"],["src","./assets/logo.png","alt","logo1"],["role","main",1,"map-container"],[3,"mapId","zoom","center","projection"],["mainMap",""],["placeholder","Buscar...",3,"menu","search"],["class","mat-elevation-z2",3,"searching","result","selection",4,"ngIf"],[3,"position","mapId","elements","closed"],[3,"watchUser","resultWatch","identify"],[4,"ngIf"],[3,"backdropMessage","showingLoading"],["id","person",1,"personsv","ocultariframe"],["src","data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2023%2038%22%3E%3Cpath%20d%3D%22M16.6%2038.1h-5.5l-.2-2.9-.2%202.9h-5.5L5%2025.3l-.8%202a1.53%201.53%200%2001-1.9.9l-1.2-.4a1.58%201.58%200%2001-1-1.9v-.1c.3-.9%203.1-11.2%203.1-11.2a2.66%202.66%200%20012.3-2l.6-.5a6.93%206.93%200%20014.7-12%206.8%206.8%200%20014.9%202%207%207%200%20012%204.9%206.65%206.65%200%2001-2.2%205l.7.5a2.78%202.78%200%20012.4%202s2.9%2011.2%202.9%2011.3a1.53%201.53%200%2001-.9%201.9l-1.3.4a1.63%201.63%200%2001-1.9-.9l-.7-1.8-.1%2012.7zm-3.6-2h1.7L14.9%2020.3l1.9-.3%202.4%206.3.3-.1c-.2-.8-.8-3.2-2.8-10.9a.63.63%200%2000-.6-.5h-.6l-1.1-.9h-1.9l-.3-2a4.83%204.83%200%20003.5-4.7A4.78%204.78%200%200011%202.3H10.8a4.9%204.9%200%2000-1.4%209.6l-.3%202h-1.9l-1%20.9h-.6a.74.74%200%2000-.6.5c-2%207.5-2.7%2010-3%2010.9l.3.1L4.8%2020l1.9.3.2%2015.8h1.6l.6-8.4a1.52%201.52%200%20011.5-1.4%201.5%201.5%200%20011.5%201.4l.9%208.4zm-10.9-9.6zm17.5-.1z%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23333%22%20opacity%3D%22.7%22/%3E%3Cpath%20d%3D%22M5.9%2013.6l1.1-.9h7.8l1.2.9%22%20fill%3D%22%23ce592c%22/%3E%3Cellipse%20cx%3D%2210.9%22%20cy%3D%2213.1%22%20rx%3D%222.7%22%20ry%3D%22.3%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23ce592c%22%20opacity%3D%22.5%22/%3E%3Cpath%20d%3D%22M20.6%2026.1l-2.9-11.3a1.71%201.71%200%2000-1.6-1.2H5.699999999999999a1.69%201.69%200%2000-1.5%201.3l-3.1%2011.3a.61.61%200%2000.3.7l1.1.4a.61.61%200%2000.7-.3l2.7-6.7.2%2016.8h3.6l.6-9.3a.47.47%200%2001.44-.5h.06c.4%200%20.4.2.5.5l.6%209.3h3.6L15.7%2020.3l2.5%206.6a.52.52%200%2000.66.31l1.2-.4a.57.57%200%2000.5-.7z%22%20fill%3D%22%23fdbf2d%22/%3E%3Cpath%20d%3D%22M7%2013.6l3.9%206.7%203.9-6.7%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23cf572e%22%20opacity%3D%22.6%22/%3E%3Ccircle%20cx%3D%2210.9%22%20cy%3D%227%22%20r%3D%225.9%22%20fill%3D%22%23fdbf2d%22/%3E%3C/svg%3E","alt","street-view-moving"],["id","svbtn",1,"fullscreendiv","ol-zoom-in","svbtn"],["id","street-view-icon",1,"normal-button"],["id","street-view",1,"streetview","ocultariframe"],[1,"mat-elevation-z2",3,"searching","result","selection"]],template:function(t,n){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h1",2),o._uU(3,"SIMAN"),o.qZA(),o.qZA(),o.TgZ(4,"div",3),o._UZ(5,"img",4),o.qZA(),o.qZA(),o.TgZ(6,"div",5),o._UZ(7,"sic-map-viewer",6,7),o.qZA(),o.TgZ(9,"sic-menu-search-bar",8),o.NdJ("menu",function(){return n.openMenu()})("search",function(a){return n.doSearch(a)}),o.qZA(),o.YNc(10,XG,1,2,"sic-search-result",9),o._UZ(11,"sic-side-panel"),o.TgZ(12,"sic-identify-container",10),o.NdJ("closed",function(){return n.cleanIdentify()}),o.qZA(),o.TgZ(13,"sic-tools",11),o.NdJ("resultWatch",function(a){return n.toggleUserInfo(a)})("identify",function(){return n.toggleIdentify()}),o.qZA(),o.YNc(14,$G,1,0,"sic-logged-user",12),o._UZ(15,"sic-backdrop",13),o.TgZ(16,"div",14),o._UZ(17,"img",15),o.qZA(),o.TgZ(18,"div",16),o._UZ(19,"span",17),o.qZA(),o._UZ(20,"div",18)),2&t&&(o.xp6(7),o.Q6J("mapId",n.mapId)("zoom",n.initialZoom)("center",n.center)("projection",n.projection),o.xp6(3),o.Q6J("ngIf",n.isSearchActive),o.xp6(2),o.Q6J("position",n.identifyCoordinates)("mapId",n.mapId)("elements",n.identifyResults),o.xp6(1),o.Q6J("watchUser",n.watchUser),o.xp6(1),o.Q6J("ngIf",n.watchUser),o.xp6(1),o.Q6J("backdropMessage",n.backdropMessage)("showingLoading",n.showLoading))},directives:[TT,m4,B.O5,C4,A4,FG,Me.q,VG,WG],styles:['@charset "UTF-8";[_nghost-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0}.header[_ngcontent-%COMP%]{position:fixed;display:flex;flex-direction:row;justify-content:space-between;align-items:center;top:0;height:80px;width:100%;background-color:#fff}.map-container[_ngcontent-%COMP%]{position:fixed;top:80px;left:0;right:0;bottom:0;z-index:-1}.logo[_ngcontent-%COMP%]{display:flex;flex-direction:row;z-index:990;margin:12px}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.logo-der[_ngcontent-%COMP%]{z-index:990;margin:12px}.logo-der[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.titulo[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;color:#b51e1c;font-size:20pt;font-weight:800;margin:12px;display:flex;align-items:center}@media screen and (max-width: 850px){.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px}}.svbtn[_ngcontent-%COMP%]{bottom:7.5em;margin:1px;padding:5px;background-color:#fff;text-align:center;cursor:pointer}.svbtn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:28px;width:26px;background-repeat:no-repeat;background-position:center}.svbtn[_ngcontent-%COMP%]   span.normal-button[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2023%2038%22%3E%3Cpath%20d%3D%22M16.6%2038.1h-5.5l-.2-2.9-.2%202.9h-5.5L5%2025.3l-.8%202a1.53%201.53%200%2001-1.9.9l-1.2-.4a1.58%201.58%200%2001-1-1.9v-.1c.3-.9%203.1-11.2%203.1-11.2a2.66%202.66%200%20012.3-2l.6-.5a6.93%206.93%200%20014.7-12%206.8%206.8%200%20014.9%202%207%207%200%20012%204.9%206.65%206.65%200%2001-2.2%205l.7.5a2.78%202.78%200%20012.4%202s2.9%2011.2%202.9%2011.3a1.53%201.53%200%2001-.9%201.9l-1.3.4a1.63%201.63%200%2001-1.9-.9l-.7-1.8-.1%2012.7zm-3.6-2h1.7L14.9%2020.3l1.9-.3%202.4%206.3.3-.1c-.2-.8-.8-3.2-2.8-10.9a.63.63%200%2000-.6-.5h-.6l-1.1-.9h-1.9l-.3-2a4.83%204.83%200%20003.5-4.7A4.78%204.78%200%200011%202.3H10.8a4.9%204.9%200%2000-1.4%209.6l-.3%202h-1.9l-1%20.9h-.6a.74.74%200%2000-.6.5c-2%207.5-2.7%2010-3%2010.9l.3.1L4.8%2020l1.9.3.2%2015.8h1.6l.6-8.4a1.52%201.52%200%20011.5-1.4%201.5%201.5%200%20011.5%201.4l.9%208.4zm-10.9-9.6zm17.5-.1z%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23333%22%20opacity%3D%22.7%22/%3E%3Cpath%20d%3D%22M5.9%2013.6l1.1-.9h7.8l1.2.9%22%20fill%3D%22%23ce592c%22/%3E%3Cellipse%20cx%3D%2210.9%22%20cy%3D%2213.1%22%20rx%3D%222.7%22%20ry%3D%22.3%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23ce592c%22%20opacity%3D%22.5%22/%3E%3Cpath%20d%3D%22M20.6%2026.1l-2.9-11.3a1.71%201.71%200%2000-1.6-1.2H5.699999999999999a1.69%201.69%200%2000-1.5%201.3l-3.1%2011.3a.61.61%200%2000.3.7l1.1.4a.61.61%200%2000.7-.3l2.7-6.7.2%2016.8h3.6l.6-9.3a.47.47%200%2001.44-.5h.06c.4%200%20.4.2.5.5l.6%209.3h3.6L15.7%2020.3l2.5%206.6a.52.52%200%2000.66.31l1.2-.4a.57.57%200%2000.5-.7z%22%20fill%3D%22%23fdbf2d%22/%3E%3Cpath%20d%3D%22M7%2013.6l3.9%206.7%203.9-6.7%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23cf572e%22%20opacity%3D%22.6%22/%3E%3Ccircle%20cx%3D%2210.9%22%20cy%3D%227%22%20r%3D%225.9%22%20fill%3D%22%23fdbf2d%22/%3E%3C/svg%3E)}.svbtn[_ngcontent-%COMP%]   span.normal-button[_ngcontent-%COMP%]:hover{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2040%2050%22%3E%3Cpath%20d%3D%22M34-30.4l-2.9-11.3a2.78%202.78%200%2000-2.4-2l-.7-.5a6.82%206.82%200%20002.2-5%206.9%206.9%200%2000-13.8%200%207%207%200%20002.2%205.1l-.6.5a2.55%202.55%200%2000-2.3%202s-3%2011.1-3%2011.2v.1a1.58%201.58%200%20001%201.9l1.2.4a1.63%201.63%200%20001.9-.9l.8-2%20.2%2012.8h11.3l.2-12.6.7%201.8a1.54%201.54%200%20001.5%201%201.09%201.09%200%2000.5-.1l1.3-.4a1.85%201.85%200%2000.7-2zm-1.2.9l-1.2.4a.61.61%200%2001-.7-.3L28.4-36l-.2%2016.8h-9.4L18.6-36l-2.7%206.7a.52.52%200%2001-.66.31l-1.1-.4a.52.52%200%2001-.31-.66l3.1-11.3a1.69%201.69%200%20011.5-1.3h.2l1-.9h2.3a5.9%205.9%200%20113.2%200h2.3l1.1.9h.2a1.71%201.71%200%20011.6%201.2l2.9%2011.3a.84.84%200%2001-.4.7zM34%2029.6l-2.9-11.3a2.78%202.78%200%2000-2.4-2l-.7-.5a6.82%206.82%200%20002.2-5%206.9%206.9%200%2000-13.8%200%207%207%200%20002.2%205.1l-.6.5a2.55%202.55%200%2000-2.3%202s-3%2011.1-3%2011.2v.1a1.58%201.58%200%20001%201.9l1.2.4a1.63%201.63%200%20001.9-.9l.8-2%20.2%2012.8h11.3l.2-12.6.7%201.8a1.54%201.54%200%20001.5%201%201.09%201.09%200%2000.5-.1l1.3-.4a1.85%201.85%200%2000.7-2zm-1.2.9l-1.2.4a.61.61%200%2001-.7-.3L28.4%2024l-.2%2016.8h-9.4L18.6%2024l-2.7%206.7a.52.52%200%2001-.66.31l-1.1-.4a.52.52%200%2001-.31-.66l3.1-11.3a1.69%201.69%200%20011.5-1.3h.2l1-.9h2.3a5.9%205.9%200%20113.2%200h2.3l1.1.9h.2a1.71%201.71%200%20011.6%201.2l2.9%2011.3a.84.84%200%2001-.4.7z%22%20fill%3D%22%23333%22%20fill-opacity%3D%22.2%22/%3E%3Cpath%20d%3D%22M15.4%2038.8h-4a1.64%201.64%200%2001-1.4-1.1l-3.1-8a.9.9%200%2001-.5.1l-1.4.1a1.62%201.62%200%2001-1.6-1.4L2.3%2015.4l1.6-1.3a6.87%206.87%200%2001-3-4.6A7.14%207.14%200%20012%204a7.6%207.6%200%20014.7-3.1A7.14%207.14%200%200112.2%202a7.28%207.28%200%20012.3%209.6l2.1-.1.1%201c0%20.2.1.5.1.8a2.41%202.41%200%20011%201s1.9%203.2%202.8%204.9c.7%201.2%202.1%204.2%202.8%205.9a2.1%202.1%200%2001-.8%202.6l-.6.4a1.63%201.63%200%2001-1.5.2l-.6-.3a8.93%208.93%200%2000.5%201.3%207.91%207.91%200%20001.8%202.6l.6.3v4.6l-4.5-.1a7.32%207.32%200%2001-2.5-1.5l-.4%203.6zm-10-19.2l3.5%209.8%202.9%207.5h1.6V35l-1.9-9.4%203.1%205.4a8.24%208.24%200%20003.8%203.8h2.1v-1.4a14%2014%200%2001-2.2-3.1%2044.55%2044.55%200%2001-2.2-8l-1.3-6.3%203.2%205.6c.6%201.1%202.1%203.6%202.8%204.9l.6-.4c-.8-1.6-2.1-4.6-2.8-5.8-.9-1.7-2.8-4.9-2.8-4.9a.54.54%200%2000-.4-.3l-.7-.1-.1-.7a4.33%204.33%200%2000-.1-.5l-5.3.3%202.2-1.9a4.3%204.3%200%2000.9-1%205.17%205.17%200%2000.8-4%205.67%205.67%200%2000-2.2-3.4%205.09%205.09%200%2000-4-.8%205.67%205.67%200%2000-3.4%202.2%205.17%205.17%200%2000-.8%204%205.67%205.67%200%20002.2%203.4%203.13%203.13%200%20001%20.5l1.6.6-3.2%202.6%201%2011.5h.4l-.3-8.2z%22%20fill%3D%22%23333%22/%3E%3Cpath%20d%3D%22M3.35%2015.9l1.1%2012.5a.39.39%200%2000.36.42h.14l1.4-.1a.66.66%200%2000.5-.4l-.2-3.8-3.3-8.6z%22%20fill%3D%22%23fdbf2d%22/%3E%3Cpath%20d%3D%22M5.2%2028.8l1.1-.1a.66.66%200%2000.5-.4l-.2-3.8-1.2-3.1z%22%20fill%3D%22%23ce592b%22%20fill-opacity%3D%22.25%22/%3E%3Cpath%20d%3D%22M21.4%2035.7l-3.8-1.2-2.7-7.8L12%2015.5l3.4-2.9c.2%202.4%202.2%2014.1%203.7%2017.1%200%200%201.3%202.6%202.3%203.1v2.9m-8.4-8.1l-2-.3%202.5%2010.1.9.4v-2.9%22%20fill%3D%22%23e5892b%22/%3E%3Cpath%20d%3D%22M17.8%2025.4c-.4-1.5-.7-3.1-1.1-4.8-.1-.4-.1-.7-.2-1.1l-1.1-2-1.7-1.6s.9%205%202.4%207.1a19.12%2019.12%200%20001.7%202.4z%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23cf572e%22%20opacity%3D%22.6%22/%3E%3Cpath%20d%3D%22M14.4%2037.8h-3a.43.43%200%2001-.4-.4l-3-7.8-1.7-4.8-3-9%208.9-.4s2.9%2011.3%204.3%2014.4c1.9%204.1%203.1%204.7%205%205.8h-3.2s-4.1-1.2-5.9-7.7a.59.59%200%2000-.6-.4.62.62%200%2000-.3.7s.5%202.4.9%203.6a34.87%2034.87%200%20002%206z%22%20fill%3D%22%23fdbf2d%22/%3E%3Cpath%20d%3D%22M15.4%2012.7l-3.3%202.9-8.9.4%203.3-2.7%22%20fill%3D%22%23ce592b%22/%3E%3Cpath%20d%3D%22M9.1%2021.1l1.4-6.2-5.9.5%22%20style%3D%22isolation%3Aisolate%22%20fill%3D%22%23cf572e%22%20opacity%3D%22.6%22/%3E%3Cpath%20d%3D%22M12%2013.5a4.75%204.75%200%2001-2.6%201.1c-1.5.3-2.9.2-2.9%200s1.1-.6%202.7-1%22%20fill%3D%22%23bb3d19%22/%3E%3Ccircle%20cx%3D%227.92%22%20cy%3D%228.19%22%20r%3D%226.3%22%20fill%3D%22%23fdbf2d%22/%3E%3Cpath%20d%3D%22M4.7%2013.6a6.21%206.21%200%20008.4-1.9v-.1a8.89%208.89%200%2001-8.4%202z%22%20fill%3D%22%23ce592b%22%20fill-opacity%3D%22.25%22/%3E%3Cpath%20d%3D%22M21.2%2027.2l.6-.4a1.09%201.09%200%2000.4-1.3c-.7-1.5-2.1-4.6-2.8-5.8-.9-1.7-2.8-4.9-2.8-4.9a1.6%201.6%200%2000-2.17-.65l-.23.15a1.68%201.68%200%2000-.4%202.1s2.3%203.9%203.1%205.3c.6%201%202.1%203.7%202.9%205.1a.94.94%200%20001.24.49l.16-.09z%22%20fill%3D%22%23fdbf2d%22/%3E%3Cpath%20d%3D%22M19.4%2019.8c-.9-1.7-2.8-4.9-2.8-4.9a1.6%201.6%200%2000-2.17-.65l-.23.15-.3.3c1.1%201.5%202.9%203.8%203.9%205.4%201.1%201.8%202.9%205%203.8%206.7l.1-.1a1.09%201.09%200%2000.4-1.3%2057.67%2057.67%200%2000-2.7-5.6z%22%20fill%3D%22%23ce592b%22%20fill-opacity%3D%22.25%22/%3E%3C/svg%3E)}.svbtn[_ngcontent-%COMP%]   span.clicked-street-view[_ngcontent-%COMP%]{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2038%22%3E%3Cpath%20d%3D%22M22%2026.6l-2.9-11.3a2.78%202.78%200%2000-2.4-2l-.7-.5a6.82%206.82%200%20002.2-5%206.9%206.9%200%2000-13.8%200%207%207%200%20002.2%205.1l-.6.5a2.55%202.55%200%2000-2.3%202s-3%2011.1-3%2011.2v.1a1.58%201.58%200%20001%201.9l1.2.4a1.63%201.63%200%20001.9-.9l.8-2%20.2%2012.8h11.3l.2-12.6.7%201.8a1.54%201.54%200%20001.5%201%201.09%201.09%200%2000.5-.1l1.3-.4a1.85%201.85%200%2000.7-2zm-1.2.9l-1.2.4a.61.61%200%2001-.7-.3l-2.5-6.6-.2%2016.8h-9.4L6.6%2021l-2.7%206.7a.52.52%200%2001-.66.31l-1.1-.4a.52.52%200%2001-.31-.66l3.1-11.3a1.69%201.69%200%20011.5-1.3h.2l1-.9h2.3a5.9%205.9%200%20113.2%200h2.3l1.1.9h.2a1.71%201.71%200%20011.6%201.2l2.9%2011.3a.84.84%200%2001-.4.7z%22%20fill%3D%22%23333%22%20fill-opacity%3D%22.2%22/%3E%26quot%3B%3C/svg%3E)}.fullscreendiv[_ngcontent-%COMP%]{position:absolute;right:4.5rem;margin-top:.5rem;z-index:5;border-radius:2px;width:36px;height:36px}.fullscreendiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;border:none}.fullscreendiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .fullscreendiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#333;text-decoration:none;outline:1px solid #666666}.fullscreendiv[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:100%}.fsbtn[_ngcontent-%COMP%]{background-color:#fff;margin:.5rem 1px 1px;padding:5px;display:flex;justify-content:center;align-items:center}.fsbtn[_ngcontent-%COMP%]:hover{cursor:pointer}.fsbtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#595959}.custom-cursor[_ngcontent-%COMP%]{cursor:pointer}.personsv[_ngcontent-%COMP%]{position:absolute;width:24px;height:24px;z-index:3;color:#fca943;pointer-events:none}.personsv[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.ocultariframe[_ngcontent-%COMP%]{display:none!important}#street-view[_ngcontent-%COMP%]{height:500px;width:500px;z-index:1000;top:130px}']}),e})()}];let KG=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[Mt.Bz.forChild(QG)],Mt.Bz]}),e})();var Rd=Y(8512);let tj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[B.ez,q.u5,q.UX,Rd.m]]}),e})(),ej=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[n0],imports:[[B.ez,Rd.m]]}),e})();var nj=Y(7194);let ij=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[B.ez,KG,MT,oZ,tj,ej,q.u5,Rd.m,nj.I,q.UX]]}),e})()},2402:function(an){an.exports=function(){"use strict";function fe(O,S,N,$,H){!function X(K,st,Pt,Ot,Jt){for(;Ot>Pt;){if(Ot-Pt>600){var _t=Ot-Pt+1,Gt=st-Pt+1,Xe=Math.log(_t),Xn=.5*Math.exp(2*Xe/3),dt=.5*Math.sqrt(Xe*Xn*(_t-Xn)/_t)*(Gt-_t/2<0?-1:1);X(K,st,Math.max(Pt,Math.floor(st-Gt*Xn/_t+dt)),Math.min(Ot,Math.floor(st+(_t-Gt)*Xn/_t+dt)),Jt)}var yn=K[st],Vi=Pt,Qe=Ot;for(Y(K,Pt,st),Jt(K[Ot],yn)>0&&Y(K,Pt,Ot);Vi<Qe;){for(Y(K,Vi,Qe),Vi++,Qe--;Jt(K[Vi],yn)<0;)Vi++;for(;Jt(K[Qe],yn)>0;)Qe--}0===Jt(K[Pt],yn)?Y(K,Pt,Qe):Y(K,++Qe,Ot),Qe<=st&&(Pt=Qe+1),st<=Qe&&(Ot=Qe-1)}}(O,S,N||0,$||O.length-1,H||B)}function Y(O,S,N){var $=O[S];O[S]=O[N],O[N]=$}function B(O,S){return O<S?-1:O>S?1:0}var Mt=function(O){void 0===O&&(O=9),this._maxEntries=Math.max(4,O),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ls(O,S,N){if(!N)return S.indexOf(O);for(var $=0;$<S.length;$++)if(N(O,S[$]))return $;return-1}function se(O,S){Bi(O,0,O.children.length,S,O)}function Bi(O,S,N,$,H){H||(H=Zn(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(var X=S;X<N;X++){var K=O.children[X];ue(H,O.leaf?$(K):K)}return H}function ue(O,S){return O.minX=Math.min(O.minX,S.minX),O.minY=Math.min(O.minY,S.minY),O.maxX=Math.max(O.maxX,S.maxX),O.maxY=Math.max(O.maxY,S.maxY),O}function Sc(O,S){return O.minX-S.minX}function Gd(O,S){return O.minY-S.minY}function cs(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function ye(O){return O.maxX-O.minX+(O.maxY-O.minY)}function vn(O,S){return O.minX<=S.minX&&O.minY<=S.minY&&S.maxX<=O.maxX&&S.maxY<=O.maxY}function Dr(O,S){return S.minX<=O.maxX&&S.minY<=O.maxY&&S.maxX>=O.minX&&S.maxY>=O.minY}function Zn(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hs(O,S,N,$,H){for(var X=[S,N];X.length;)if(!((N=X.pop())-(S=X.pop())<=$)){var K=S+Math.ceil((N-S)/$/2)*$;fe(O,K,S,N,H),X.push(S,K,K,N)}}return Mt.prototype.all=function(){return this._all(this.data,[])},Mt.prototype.search=function(O){var S=this.data,N=[];if(!Dr(O,S))return N;for(var $=this.toBBox,H=[];S;){for(var X=0;X<S.children.length;X++){var K=S.children[X],st=S.leaf?$(K):K;Dr(O,st)&&(S.leaf?N.push(K):vn(O,st)?this._all(K,N):H.push(K))}S=H.pop()}return N},Mt.prototype.collides=function(O){var S=this.data;if(!Dr(O,S))return!1;for(var N=[];S;){for(var $=0;$<S.children.length;$++){var H=S.children[$],X=S.leaf?this.toBBox(H):H;if(Dr(O,X)){if(S.leaf||vn(O,X))return!0;N.push(H)}}S=N.pop()}return!1},Mt.prototype.load=function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var S=0;S<O.length;S++)this.insert(O[S]);return this}var N=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var $=this.data;this.data=N,N=$}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},Mt.prototype.insert=function(O){return O&&this._insert(O,this.data.height-1),this},Mt.prototype.clear=function(){return this.data=Zn([]),this},Mt.prototype.remove=function(O,S){if(!O)return this;for(var N,$,H,X=this.data,K=this.toBBox(O),st=[],Pt=[];X||st.length;){if(X||(X=st.pop(),$=st[st.length-1],N=Pt.pop(),H=!0),X.leaf){var Ot=ls(O,X.children,S);if(-1!==Ot)return X.children.splice(Ot,1),st.push(X),this._condense(st),this}H||X.leaf||!vn(X,K)?$?(N++,X=$.children[N],H=!1):X=null:(st.push(X),Pt.push(N),N=0,$=X,X=X.children[0])}return this},Mt.prototype.toBBox=function(O){return O},Mt.prototype.compareMinX=function(O,S){return O.minX-S.minX},Mt.prototype.compareMinY=function(O,S){return O.minY-S.minY},Mt.prototype.toJSON=function(){return this.data},Mt.prototype.fromJSON=function(O){return this.data=O,this},Mt.prototype._all=function(O,S){for(var N=[];O;)O.leaf?S.push.apply(S,O.children):N.push.apply(N,O.children),O=N.pop();return S},Mt.prototype._build=function(O,S,N,$){var H,X=N-S+1,K=this._maxEntries;if(X<=K)return se(H=Zn(O.slice(S,N+1)),this.toBBox),H;$||($=Math.ceil(Math.log(X)/Math.log(K)),K=Math.ceil(X/Math.pow(K,$-1))),(H=Zn([])).leaf=!1,H.height=$;var st=Math.ceil(X/K),Pt=st*Math.ceil(Math.sqrt(K));hs(O,S,N,Pt,this.compareMinX);for(var Ot=S;Ot<=N;Ot+=Pt){var Jt=Math.min(Ot+Pt-1,N);hs(O,Ot,Jt,st,this.compareMinY);for(var _t=Ot;_t<=Jt;_t+=st){var Gt=Math.min(_t+st-1,Jt);H.children.push(this._build(O,_t,Gt,$-1))}}return se(H,this.toBBox),H},Mt.prototype._chooseSubtree=function(O,S,N,$){for(;$.push(S),!S.leaf&&$.length-1!==N;){for(var H=1/0,X=1/0,K=void 0,st=0;st<S.children.length;st++){var Pt=S.children[st],Ot=cs(Pt),Jt=(_t=O,Gt=Pt,(Math.max(Gt.maxX,_t.maxX)-Math.min(Gt.minX,_t.minX))*(Math.max(Gt.maxY,_t.maxY)-Math.min(Gt.minY,_t.minY))-Ot);Jt<X?(X=Jt,H=Ot<H?Ot:H,K=Pt):Jt===X&&Ot<H&&(H=Ot,K=Pt)}S=K||S.children[0]}var _t,Gt;return S},Mt.prototype._insert=function(O,S,N){var $=N?O:this.toBBox(O),H=[],X=this._chooseSubtree($,this.data,S,H);for(X.children.push(O),ue(X,$);S>=0&&H[S].children.length>this._maxEntries;)this._split(H,S),S--;this._adjustParentBBoxes($,H,S)},Mt.prototype._split=function(O,S){var N=O[S],$=N.children.length,H=this._minEntries;this._chooseSplitAxis(N,H,$);var X=this._chooseSplitIndex(N,H,$),K=Zn(N.children.splice(X,N.children.length-X));K.height=N.height,K.leaf=N.leaf,se(N,this.toBBox),se(K,this.toBBox),S?O[S-1].children.push(K):this._splitRoot(N,K)},Mt.prototype._splitRoot=function(O,S){this.data=Zn([O,S]),this.data.height=O.height+1,this.data.leaf=!1,se(this.data,this.toBBox)},Mt.prototype._chooseSplitIndex=function(O,S,N){for(var $,H,X,K,st,Pt,Ot,Jt=1/0,_t=1/0,Gt=S;Gt<=N-S;Gt++){var Xe=Bi(O,0,Gt,this.toBBox),Xn=Bi(O,Gt,N,this.toBBox),dt=(H=Xe,X=Xn,void 0,void 0,void 0,void 0,K=Math.max(H.minX,X.minX),st=Math.max(H.minY,X.minY),Pt=Math.min(H.maxX,X.maxX),Ot=Math.min(H.maxY,X.maxY),Math.max(0,Pt-K)*Math.max(0,Ot-st)),$e=cs(Xe)+cs(Xn);dt<Jt?(Jt=dt,$=Gt,_t=$e<_t?$e:_t):dt===Jt&&$e<_t&&(_t=$e,$=Gt)}return $||N-S},Mt.prototype._chooseSplitAxis=function(O,S,N){var $=O.leaf?this.compareMinX:Sc,H=O.leaf?this.compareMinY:Gd;this._allDistMargin(O,S,N,$)<this._allDistMargin(O,S,N,H)&&O.children.sort($)},Mt.prototype._allDistMargin=function(O,S,N,$){O.children.sort($);for(var H=this.toBBox,X=Bi(O,0,S,H),K=Bi(O,N-S,N,H),st=ye(X)+ye(K),Pt=S;Pt<N-S;Pt++){var Ot=O.children[Pt];ue(X,O.leaf?H(Ot):Ot),st+=ye(X)}for(var Jt=N-S-1;Jt>=S;Jt--){var _t=O.children[Jt];ue(K,O.leaf?H(_t):_t),st+=ye(K)}return st},Mt.prototype._adjustParentBBoxes=function(O,S,N){for(var $=N;$>=0;$--)ue(S[$],O)},Mt.prototype._condense=function(O){for(var S=O.length-1,N=void 0;S>=0;S--)0===O[S].children.length?S>0?(N=O[S-1].children).splice(N.indexOf(O[S]),1):this.clear():se(O[S],this.toBBox)},Mt}()}}]);