(self.webpackChunkvisor_manzanillo=self.webpackChunkvisor_manzanillo||[]).push([[592],{2058:(T,L,s)=>{"use strict";s.d(L,{K:()=>g});var c=s(4004),f=s(8502),e=s(2340),o=s(5e3),v=s(520),h=s(9291),p=s(1787);let g=(()=>{class m extends f.t{constructor(i,a,l){super(i,a,l)}createUser(i){return this.post(`${e.N.constants.API_URL}/user`,i)}updateUser(i){return this.put(`${e.N.constants.API_URL}/user`,i)}deleteUser(i){return this.delete(`${e.N.constants.API_URL}/user/${i}`)}getUsers(){return this.get(`${e.N.constants.API_URL}/user`)}getRols(){return this.get(`${e.N.constants.API_URL}/user/rol`)}createRol(i){return this.post(`${e.N.constants.API_URL}/user/rol`,i)}updateRol(i){return this.put(`${e.N.constants.API_URL}/user/rol`,i)}deleteRol(i){return this.delete(`${e.N.constants.API_URL}/user/rol/${i}`)}getTools(){return this.get(`${e.N.constants.API_URL}/user/tools`).pipe((0,c.U)(i=>i.map(a=>({group:a.group,idPermissionType:a.idPermissionType,permissionType:a.permissionType,idRol:a.idRol,status:!1,tools:a.tools.map(l=>({idTool:l.idTool,name:l.name,description:l.description,code:l.code,hasPermission:!1}))}))))}getToolsByRol(i){return this.get(`${e.N.constants.API_URL}/user/tools/${i}`).pipe((0,c.U)(a=>a.map(l=>({group:l.group,idPermissionType:l.idPermissionType,permissionType:l.permissionType,idRol:l.idRol,status:!1,tools:l.tools.map(d=>({idTool:d.idTool,name:d.name,description:d.description,code:d.code,hasPermission:!0}))}))))}updateToolPermissions(i,a){return this.post(`${e.N.constants.API_URL}/user/permissions`,{idRol:i,toolPermissions:a})}getUserPermissions(){return this.get(`${e.N.constants.API_URL}/user/permissions`)}getParams(){return this.get(`${e.N.constants.API_URL}/user/param`)}updateParam(i){return this.put(`${e.N.constants.API_URL}/user/param`,{parameter:i})}}return m.\u0275fac=function(i){return new(i||m)(o.LFG(v.eN),o.LFG(h.e),o.LFG(p.F0))},m.\u0275prov=o.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7727:(T,L,s)=>{"use strict";s.d(L,{I:()=>l});var c=s(8653),f=s.n(c),e=s(9646),o=s(4004),v=s(8505),h=s(8502),p=s(2340);class g{constructor(u,t,n,r=0){this.title=u,this.icon=t,this.isLayer=n,n||(this.children=[]),this.isActive=!1,this.level=r}get Title(){return this.title}get IsLayer(){return this.isLayer}get IsActive(){return this.isActive}get Parent(){return this.parent}get Level(){return this.level}getChildren(){if(this.isLayer)throw Error('Error operacion "getChildren" no soportada. Es capa');return this.children}updateLevel(u){this.level=u,this.isLayer||this.getChildren().forEach(t=>t.updateLevel(u+1))}setParent(u){this.parent=u,this.updateLevel(u.Level+1)}setData(u){if(!this.isLayer)throw Error('Operacion "setData" no soportada. No es capa');this.layerData=u}addChild(u){if(this.isLayer)throw Error('Operacion "addChild" no soportada. Es capa');this.children.push(u),u.setParent(this)}getLayerData(){if(this.isLayer)return this.layerData;throw Error('Operacion "getLayerData" no soportada. No es capa')}findLayerNode(u){if(this.isLayer&&this.layerData.id===u)return this;if(this.isLayer)return null;{const n=this.getChildren().map(r=>r.findLayerNode(u)).filter(r=>null!==r);return 0===n.length?null:n[0]}}toggleActiveStatus(){this.isActive=!this.isActive}toString(){return`(${this.level}) ${this.title}`}}var m=s(5e3),P=s(520),i=s(9291),a=s(1787);let l=(()=>{class d extends h.t{constructor(t,n,r){super(t,n,r),this.loadLayers()}loadLayers(){return this.tocTree?(0,e.of)(this.tocTree):this.reloadLayers()}reloadLayers(){return this.get(`${p.N.constants.API_URL}/toc`).pipe((0,o.U)(t=>t.groups),(0,o.U)(t=>t.map(r=>this.constructTocTree(r))),(0,v.b)(t=>{this.tocTree=t}))}constructTocTreeRecursive(t,n){let r;return t.group?(r=new g(t.group,t.icon,!1,n),t.content.forEach(y=>r.addChild(this.constructTocTreeRecursive(y,n+1)))):(r=new g(t.title,null,!0,n),t.id=`Layer.${f()()}`,r.setData(t),r.IsActive!==t.isVisible&&r.toggleActiveStatus()),r}constructTocTree(t){return this.constructTocTreeRecursive(t,0)}searchByService(t){this.tocTree||this.reloadLayers();let n=null;for(let r=0;r<this.tocTree.length;r++){const y=this.findLayer(this.tocTree[r],t);if(y){n=y;break}}return n}findLayer(t,n){if(t.isLayer)return t.getLayerData().service===n?t:null;{let r=null;for(let y=0;y<t.getChildren().length;y++){const R=this.findLayer(t.getChildren()[y],n);if(R){r=R;break}}return r}}updateDataTocLayer(t){return this.post(`${p.N.constants.API_URL}/toc/update-layer`,t)}getLayers(){return this.get(`${p.N.constants.API_URL}/toc/layers`).pipe((0,o.U)(t=>t.map(n=>({group:n.group,idTocGroup:n.idTocGroup,idPermissionType:n.idPermissionType,permissionType:n.permissionType,idRol:n.idRol,status:!1,tocLayers:n.tocLayers.map(r=>({idLayer:r.idLayer,capa:r.capa,service:r.service,group:r.group,idTocElement:r.idTocElement,hasPermission:!1}))}))))}getLayersByRol(t){return this.get(`${p.N.constants.API_URL}/toc/layers/${t}`).pipe((0,o.U)(n=>n.map(r=>({group:r.group,idTocGroup:r.idTocGroup,idPermissionType:r.idPermissionType,permissionType:r.permissionType,idRol:r.idRol,status:!1,tocLayers:r.tocLayers.map(y=>({idLayer:y.idLayer,capa:y.capa,service:y.service,group:y.group,idTocElement:y.idTocElement,hasPermission:!0}))}))))}updateLayerPermissions(t,n){return this.post(`${p.N.constants.API_URL}/toc/permissions`,{idRol:t,tocLayers:n})}}return d.\u0275fac=function(t){return new(t||d)(m.LFG(P.eN),m.LFG(i.e),m.LFG(a.F0))},d.\u0275prov=m.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},3538:(T,L,s)=>{"use strict";s.d(L,{L:()=>c});const c=(e,o="/",v="dmy")=>{const h=e.getDate()<10?"0"+e.getDate().toString():e.getDate().toString(),p=e.getMonth()+1<10?"0"+(e.getMonth()+1).toString():(e.getMonth()+1).toString();let g="";switch(v){case"dmy":default:g=h+o+p+o+e.getFullYear().toString();break;case"ymd":g=e.getFullYear().toString()+o+p+o+h;break;case"mdy":g=p+o+h+o+e.getFullYear().toString()}return g}},8653:(T,L,s)=>{var c=s(8922),f=s(8009),e=s(8214),o=0,p=Math.pow(36,4);function g(){return f((e()*p<<0).toString(36),4)}function m(){return o=o<p?o:0,++o-1}function P(){return"c"+(new Date).getTime().toString(36)+f(m().toString(36),4)+c()+(g()+g())}P.slug=function(){var a=(new Date).getTime().toString(36),l=m().toString(36).slice(-4),d=c().slice(0,1)+c().slice(-1),u=g().slice(-2);return a.slice(-2)+l+d+u},P.isCuid=function(a){return"string"==typeof a&&!!a.startsWith("c")},P.isSlug=function(a){if("string"!=typeof a)return!1;var l=a.length;return l>=7&&l<=10},P.fingerprint=c,T.exports=P},8922:(T,L,s)=>{var c=s(8009),f="object"==typeof window?window:self,e=Object.keys(f).length,v=c(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+e.toString(36),4);T.exports=function(){return v}},8214:T=>{var L,s="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(s){var c=Math.pow(2,32)-1;L=function(){return Math.abs(s.getRandomValues(new Uint32Array(1))[0]/c)}}else L=Math.random;T.exports=L},8009:T=>{T.exports=function(s,c){var f="000000000"+s;return f.substr(f.length-c)}}}]);