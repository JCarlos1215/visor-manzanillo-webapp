<div class="item">
  <mat-icon
    color="primary"
    class="clickable"
    (click)="toggleDetails(contenido)"
  >
    {{ !!showDetails ? "remove_circle" : "add_circle" }}
  </mat-icon>
  <div *ngIf="hasColorProperty(contenido)">
    <div *ngIf="isHex(contenido); else hasIcon">
      <div class="color" [style]="color"></div>
    </div>
    <ng-template #hasIcon>
      <img class="icon-layer" [src]="getIcon()" alt="capa" />
    </ng-template>
  </div>
  <span
    class="noselect clickable layer-label"
    (click)="toggleDetails(contenido)"
  >
    {{ contenido.title }}
  </span>
  <mat-slide-toggle
    (change)="toggle(contenido)"
    [checked]="contenido.isActive"
  ></mat-slide-toggle>
</div>

<div class="item item-details" *ngIf="showDetails">
  <div class="layer-opacity">
    <label for="opacity-slider" class="opacity-slider-label"> Opacidad </label>
    <span class="opacity-slider-legend">
      {{ opacity * 100 | number: "1.0-0" }}%
    </span>
    <div class="opacity-content">
      <mat-slider
        id="opacity-slider"
        min="0"
        max="1"
        step="0.01"
        [value]="opacity"
        #oslider
        color="warn"
        (change)="updateOpacity(contenido, $event.value)"
        (input)="updateOpacity(contenido, $event.value)"
      ></mat-slider>
      <span *ngIf="contenido.getLayerData().graphOptions.canGraph" class="chart-icon" (click)="openChart(contenido)">
        <img src="assets/icons/grafica.svg" alt="Gráfica" height="20" width="20">
      </span>
      <span *ngIf="contenido.IsActive && contenido.getLayerData().title !=='Google Satellite Imagery'" class="chart-icon">
        <button class="refresh-icon extend-button" matTooltip="Zoom a capa" (click)="navigateToLayer(contenido)">
          <svg xmlns="http://www.w3.org/2000/svg" y="0px" viewBox="0 0 18 18">
            <circle cx="9" cy="9" r="2.5" />
            <path d="M5.8,0H1.2C0.5,0,0,0.5,0,1.2v4.7C0,6.5,0.5,7,1.2,7c0.6,0,1.2-0.5,1.2-1.2V2.3h3.5C6.5,2.3,7,1.8,7,1.2
                C7,0.5,6.5,0,5.8,0z" />
            <path d="M18,5.8V1.2C18,0.5,17.5,0,16.8,0h-4.7C11.5,0,11,0.5,11,1.2c0,0.6,0.5,1.2,1.2,1.2h3.5v3.5
                c0,0.6,0.5,1.2,1.2,1.2C17.5,7,18,6.5,18,5.8z" />
            <path d="M12.2,18h4.7c0.6,0,1.2-0.5,1.2-1.2v-4.7c0-0.6-0.5-1.2-1.2-1.2c-0.6,0-1.2,0.5-1.2,1.2v3.5h-3.5
                c-0.6,0-1.2,0.5-1.2,1.2S11.5,18,12.2,18z" />
            <path d="M0,12.2v4.7C0,17.5,0.5,18,1.2,18h4.7C6.5,18,7,17.5,7,16.8c0-0.6-0.5-1.2-1.2-1.2H2.3v-3.5
                c0-0.6-0.5-1.2-1.2-1.2C0.5,11,0,11.5,0,12.2z" />
          </svg>
        </button>
      </span>
      <span *ngIf="contenido.getLayerData().refreshOption.canRefresh" class="chart-icon">
        <span *ngIf="isRefreshing; else canRefresh">
          <mat-spinner [diameter]="20"></mat-spinner>
        </span>
        <ng-template #canRefresh>
          <mat-icon class="refresh-icon" matTooltip="Refrescar datos" (click)="refreshData(contenido)">refresh</mat-icon>
        </ng-template>
      </span>
    </div>
  </div>
  <div class="layer-simbology">
    <div class="simbology-header">
      <span class="simbology-legend"> Simbología </span>
    </div>
    <img [src]="simbology" alt="simbology" />
  </div>
</div>